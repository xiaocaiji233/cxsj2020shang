[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24393", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24393/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24393/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24393/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24393", "id": 391552182, "node_id": "MDU6SXNzdWUzOTE1NTIxODI=", "number": 24393, "title": "Equivalent c_api for TFE_Py_RecordGradient", "user": {"login": "Oceania2018", "id": 1705364, "node_id": "MDQ6VXNlcjE3MDUzNjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1705364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Oceania2018", "html_url": "https://github.com/Oceania2018", "followers_url": "https://api.github.com/users/Oceania2018/followers", "following_url": "https://api.github.com/users/Oceania2018/following{/other_user}", "gists_url": "https://api.github.com/users/Oceania2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/Oceania2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Oceania2018/subscriptions", "organizations_url": "https://api.github.com/users/Oceania2018/orgs", "repos_url": "https://api.github.com/users/Oceania2018/repos", "events_url": "https://api.github.com/users/Oceania2018/events{/privacy}", "received_events_url": "https://api.github.com/users/Oceania2018/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-17T04:16:54Z", "updated_at": "2019-02-08T22:56:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Hi, I'm trying to implement a C# wrapper for Tensorflow, but stuck in the c_api which is work like `TFE_Py_RecordGradient`.\r\n\r\nIs there any equivalent c_api? or any work around?\r\n\r\nI want to implement a C# code to do `var x = tf.placeholder(tf.float32, shape: new TensorShape(1024, 1024));`\r\n\r\nAny related information will be helpful, thanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24387", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24387/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24387/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24387/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24387", "id": 391451224, "node_id": "MDU6SXNzdWUzOTE0NTEyMjQ=", "number": 24387, "title": "[Feature Request]Deformable Convolutional Op Support", "user": {"login": "rootkitchao", "id": 40640909, "node_id": "MDQ6VXNlcjQwNjQwOTA5", "avatar_url": "https://avatars2.githubusercontent.com/u/40640909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rootkitchao", "html_url": "https://github.com/rootkitchao", "followers_url": "https://api.github.com/users/rootkitchao/followers", "following_url": "https://api.github.com/users/rootkitchao/following{/other_user}", "gists_url": "https://api.github.com/users/rootkitchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rootkitchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rootkitchao/subscriptions", "organizations_url": "https://api.github.com/users/rootkitchao/orgs", "repos_url": "https://api.github.com/users/rootkitchao/repos", "events_url": "https://api.github.com/users/rootkitchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rootkitchao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-12-16T09:51:54Z", "updated_at": "2019-12-11T10:35:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):1.12.0\r\n- Are you willing to contribute it (Yes/No):Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nDeformable Convolutional Network(https://arxiv.org/pdf/1703.06211.pdf,https://arxiv.org/pdf/1703.06211.pdf) has achieved good results in the du detection task.But the current version of Tensorflow (1.12)does not seem to implement deformable convolution operations.The efficiency of some third-party implementations of deformable convolution operations is lower than that of the mxnet version(https://github.com/msracver/Deformable-ConvNets).I hope that Tensorflow can add native deformable convolution operations in future versions.\r\nThanks.\r\n**Will this change the current api? How?**\r\nYes,Add a new API\r\n**Who will benefit with this feature?**\r\nAnyone who wants to use Tensorflow for object detection\r\n\r\n**Any Other info.**\r\nN/A"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24379", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24379/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24379/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24379/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24379", "id": 391245556, "node_id": "MDU6SXNzdWUzOTEyNDU1NTY=", "number": 24379, "title": "meta_graph_transform does not work with default checkpoint_path", "user": {"login": "ashokramadass", "id": 23348003, "node_id": "MDQ6VXNlcjIzMzQ4MDAz", "avatar_url": "https://avatars0.githubusercontent.com/u/23348003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashokramadass", "html_url": "https://github.com/ashokramadass", "followers_url": "https://api.github.com/users/ashokramadass/followers", "following_url": "https://api.github.com/users/ashokramadass/following{/other_user}", "gists_url": "https://api.github.com/users/ashokramadass/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashokramadass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashokramadass/subscriptions", "organizations_url": "https://api.github.com/users/ashokramadass/orgs", "repos_url": "https://api.github.com/users/ashokramadass/repos", "events_url": "https://api.github.com/users/ashokramadass/events{/privacy}", "received_events_url": "https://api.github.com/users/ashokramadass/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-12-14T19:58:10Z", "updated_at": "2019-01-09T22:11:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS High Sierra 10.13.4\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.10.1\r\n- Python version: 3.6.5\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.saved_model import simple_save\r\nfrom tensorflow.saved_model import tag_constants\r\nfrom tensorflow.contrib.meta_graph_transform.meta_graph_transform import (\r\n    meta_graph_transform)\r\n\r\nwith tf.Session() as sess:\r\n    meta_graph_def = tf.saved_model.loader.load(\r\n        sess,\r\n        [tag_constants.SERVING],\r\n        \"1544816647\")\r\n\r\n    new_meta_def = meta_graph_transform(\r\n        base_meta_graph_def=meta_graph_def,\r\n        input_names=[\"Placeholder\"],\r\n        output_names=[\"dnn/head/predictions/class_ids\", \"init_all_tables\"],\r\n        transforms=[\"freeze_graph\"],\r\n        tags=[tag_constants.SERVING],\r\n        checkpoint_path=None)\r\n\r\n    assert new_meta_def.graph_def\r\n    with tf.Graph().as_default() as graph:\r\n        tf.import_graph_def(new_meta_def.graph_def)\r\n\r\n        in_tensor = graph.get_tensor_by_name(\"import/Placeholder:0\")\r\n        out_tensor = graph.get_tensor_by_name(\"dnn/head/predictions/class_ids:0\")\r\n        simple_save(\r\n            sess,\r\n            \"./frozen\",\r\n            inputs={\"inputs\": in_tensor},\r\n            outputs={\"outputs\": out_tensor})\r\n```\r\nError:\r\nCan't load save_path when it is None."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24369", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24369/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24369/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24369/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24369", "id": 391054818, "node_id": "MDU6SXNzdWUzOTEwNTQ4MTg=", "number": 24369, "title": "ValueError: No variables to save", "user": {"login": "ramreddyy", "id": 36616275, "node_id": "MDQ6VXNlcjM2NjE2Mjc1", "avatar_url": "https://avatars1.githubusercontent.com/u/36616275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramreddyy", "html_url": "https://github.com/ramreddyy", "followers_url": "https://api.github.com/users/ramreddyy/followers", "following_url": "https://api.github.com/users/ramreddyy/following{/other_user}", "gists_url": "https://api.github.com/users/ramreddyy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramreddyy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramreddyy/subscriptions", "organizations_url": "https://api.github.com/users/ramreddyy/orgs", "repos_url": "https://api.github.com/users/ramreddyy/repos", "events_url": "https://api.github.com/users/ramreddyy/events{/privacy}", "received_events_url": "https://api.github.com/users/ramreddyy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Harshini-Gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Harshini-Gadige", "html_url": "https://github.com/Harshini-Gadige", "followers_url": "https://api.github.com/users/Harshini-Gadige/followers", "following_url": "https://api.github.com/users/Harshini-Gadige/following{/other_user}", "gists_url": "https://api.github.com/users/Harshini-Gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/Harshini-Gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Harshini-Gadige/subscriptions", "organizations_url": "https://api.github.com/users/Harshini-Gadige/orgs", "repos_url": "https://api.github.com/users/Harshini-Gadige/repos", "events_url": "https://api.github.com/users/Harshini-Gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/Harshini-Gadige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Harshini-Gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Harshini-Gadige", "html_url": "https://github.com/Harshini-Gadige", "followers_url": "https://api.github.com/users/Harshini-Gadige/followers", "following_url": "https://api.github.com/users/Harshini-Gadige/following{/other_user}", "gists_url": "https://api.github.com/users/Harshini-Gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/Harshini-Gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Harshini-Gadige/subscriptions", "organizations_url": "https://api.github.com/users/Harshini-Gadige/orgs", "repos_url": "https://api.github.com/users/Harshini-Gadige/repos", "events_url": "https://api.github.com/users/Harshini-Gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/Harshini-Gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-12-14T10:33:12Z", "updated_at": "2019-02-05T07:09:56Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code  : No\r\n- OS Platform and Distribution : Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: Python3.5\r\n- Bazel version (if compiling from source): Bazel-0.18.0\r\n\r\nI have used tf.keras to build a model and set keras backend session as sess where sess=tf.Session()\r\n\r\nSaved the graph_def file using below function \r\ntf.io.write_graph(sess.graph_def, '/tmp/model', 'model _graph.pbtxt')\r\n\r\nGenerated ckpt file using callbacks present in tensorflow as follows\r\ncp_callback=keras.callbacks.ModelCheckpoint(checkpoint_path, verbose=1, save_weights_only=True, period=1)\r\n\r\nWhen I am trying to generate frozen file using bazel I am getting below error\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 491, in <module>\r\n    run_main()\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 488, in run_main\r\n    app.run(main=my_main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 487, in <lambda>\r\n    my_main = lambda unused_args: main(unused_args, flags)\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 381, in main\r\n    flags.saved_model_tags, checkpoint_version)\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 363, in freeze_graph\r\n    checkpoint_version=checkpoint_version)\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 190, in freeze_graph_with_def_protos\r\n    var_list=var_list, write_version=checkpoint_version)\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/training/saver.py\", line 1123, in __init__\r\n    self.build()\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/training/saver.py\", line 1135, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/root/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/training/saver.py\", line 1160, in _build\r\n    raise ValueError(\"No variables to save\")\r\nValueError: No variables to save\r\n\r\n\r\nHow to solve this ValueError ? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24364", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24364/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24364/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24364/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24364", "id": 390951861, "node_id": "MDU6SXNzdWUzOTA5NTE4NjE=", "number": 24364, "title": "Block Matrix / Block Diagonal Matrix", "user": {"login": "mileslucas", "id": 14099459, "node_id": "MDQ6VXNlcjE0MDk5NDU5", "avatar_url": "https://avatars0.githubusercontent.com/u/14099459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mileslucas", "html_url": "https://github.com/mileslucas", "followers_url": "https://api.github.com/users/mileslucas/followers", "following_url": "https://api.github.com/users/mileslucas/following{/other_user}", "gists_url": "https://api.github.com/users/mileslucas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mileslucas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mileslucas/subscriptions", "organizations_url": "https://api.github.com/users/mileslucas/orgs", "repos_url": "https://api.github.com/users/mileslucas/repos", "events_url": "https://api.github.com/users/mileslucas/events{/privacy}", "received_events_url": "https://api.github.com/users/mileslucas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-12-14T03:31:05Z", "updated_at": "2020-01-23T17:29:08Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): python 1.12.0\r\n- Are you willing to contribute it (Yes/No): I would but I have very little knowledge of the TF internals\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI am requesting the development of a block diagonal function for tensors. In `scipy` this is included in the `scipy.linalg.block_diag` function. Converted to tensors, it makes sense that given a `[M, K, X, ...]` tensor, when calling the proposed `tf.block_diag` it would return a `[M*K, M*K, X, ...]` matrix with the diagonal elements containing the elements from the `[K, X, ...]` submatrix. This seems to be implemented as a LinearOperator but it is not conducive to the tensor-level functions that exist for the rest of the linear algebra domain.\r\n\r\n**Will this change the current api? How?**\r\nNo, this should not change current api, only add an extra function\r\n\r\n**Who will benefit with this feature?**\r\nI will benefit from this feature, as well as anyone else trying to convert code from numpy/scipy to TF. It is a seemingly standard operator in linear algebra and so it makes sense for it to exist in Tensorflow.\r\n\r\n**Any Other info.**\r\nI have a cludgy working version that uses padding and concatenation\r\nGiven Tensor `input` of shape `(B, K, K, ...)` will return a Tensor of shape `(K*B, K*B)` zero filled except for the `KxK` diagonal elements\r\n```python\r\nimport tensorflow as tf\r\nB, K, = input.shape[:2]\r\npaddings = tf.constant([[0, (B-1)*K)],[0, 0]])\r\ndiag = tf.pad(input[0], paddings)\r\nfor i in range(1, B):\r\n    paddings = tf.constant([[i*K, (B-i-1)*K],[0, 0]])\r\n    zeros = tf.pad(input[i], paddings)\r\n    diag = tf.concat([diag, zeros], 1)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24342", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24342/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24342/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24342/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24342", "id": 390746513, "node_id": "MDU6SXNzdWUzOTA3NDY1MTM=", "number": 24342, "title": " Predict fuel efficiency: regression example should not normalize one-hot values", "user": {"login": "richeyd", "id": 45854211, "node_id": "MDQ6VXNlcjQ1ODU0MjEx", "avatar_url": "https://avatars0.githubusercontent.com/u/45854211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richeyd", "html_url": "https://github.com/richeyd", "followers_url": "https://api.github.com/users/richeyd/followers", "following_url": "https://api.github.com/users/richeyd/following{/other_user}", "gists_url": "https://api.github.com/users/richeyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/richeyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richeyd/subscriptions", "organizations_url": "https://api.github.com/users/richeyd/orgs", "repos_url": "https://api.github.com/users/richeyd/repos", "events_url": "https://api.github.com/users/richeyd/events{/privacy}", "received_events_url": "https://api.github.com/users/richeyd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, {"login": "yashk2810", "id": 14262417, "node_id": "MDQ6VXNlcjE0MjYyNDE3", "avatar_url": "https://avatars1.githubusercontent.com/u/14262417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yashk2810", "html_url": "https://github.com/yashk2810", "followers_url": "https://api.github.com/users/yashk2810/followers", "following_url": "https://api.github.com/users/yashk2810/following{/other_user}", "gists_url": "https://api.github.com/users/yashk2810/gists{/gist_id}", "starred_url": "https://api.github.com/users/yashk2810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yashk2810/subscriptions", "organizations_url": "https://api.github.com/users/yashk2810/orgs", "repos_url": "https://api.github.com/users/yashk2810/repos", "events_url": "https://api.github.com/users/yashk2810/events{/privacy}", "received_events_url": "https://api.github.com/users/yashk2810/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-13T16:03:50Z", "updated_at": "2020-02-21T18:42:52Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\nIn the Predict fuel efficiency: regression lesson (TensorFlow->Learn->Tutorials->Learn and use ML->Regression), the normalize method is called to normalize the entire dataset, including the one-hot columns.\r\n\r\n**Describe the expected behavior**\r\nThe one-hot columns in the dataset should not be normalized.\r\n\r\n**Code to reproduce the issue**\r\ndataset['USA'] = (origin == 1)*1.0\r\ndataset['Europe'] = (origin == 2)*1.0\r\ndataset['Japan'] = (origin == 3)*1.0\r\ntrain_dataset = dataset.sample(frac=0.8,random_state=0)\r\ntrain_stats = train_dataset.describe()\r\ntrain_stats.pop(\"MPG\")\r\ntrain_stats = train_stats.transpose()\r\n\r\ndef norm(x):\r\n  return (x - train_stats['mean']) / train_stats['std']\r\nnormed_train_data = norm(train_dataset)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24337", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24337/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24337/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24337/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24337", "id": 390568675, "node_id": "MDU6SXNzdWUzOTA1Njg2NzU=", "number": 24337, "title": "TOCO cannot identify dilated convolution correctly", "user": {"login": "pinzhenx", "id": 7313938, "node_id": "MDQ6VXNlcjczMTM5Mzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/7313938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinzhenx", "html_url": "https://github.com/pinzhenx", "followers_url": "https://api.github.com/users/pinzhenx/followers", "following_url": "https://api.github.com/users/pinzhenx/following{/other_user}", "gists_url": "https://api.github.com/users/pinzhenx/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinzhenx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinzhenx/subscriptions", "organizations_url": "https://api.github.com/users/pinzhenx/orgs", "repos_url": "https://api.github.com/users/pinzhenx/repos", "events_url": "https://api.github.com/users/pinzhenx/events{/privacy}", "received_events_url": "https://api.github.com/users/pinzhenx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-13T08:31:44Z", "updated_at": "2019-12-05T15:48:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): N/A\r\n- Python version: N/A\r\n- Bazel version (if compiling from source): 0.19.1\r\n- GCC/Compiler version (if compiling from source): gcc 7.3.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nIn this line of [comment](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/toco/graph_transformations/identify_dilated_conv.cc#L116), it said the `Bias op is required before or after BatchToSpace`. However, in the DeepLab model ([mobilenetv2_coco_voc_trainval](http://download.tensorflow.org/models/deeplabv3_mnv2_pascal_trainval_2018_01_29.tar.gz)), there isn't any BiasAdd around the `BatchToSpace`. So the TOCO will fail to combine a sequence of `SpaceToBatchND` - `(Depthwise)Conv2D` - `BatchToSpaceND` into dilated convolution. Instead, the `SpaceToBatchND` and `BatchToSpaceND` will still remain in the graph.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24328", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24328/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24328/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24328/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24328", "id": 390454727, "node_id": "MDU6SXNzdWUzOTA0NTQ3Mjc=", "number": 24328, "title": "tensorflow.keras printing control characters in progress bars", "user": {"login": "austinmw", "id": 12224358, "node_id": "MDQ6VXNlcjEyMjI0MzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/12224358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austinmw", "html_url": "https://github.com/austinmw", "followers_url": "https://api.github.com/users/austinmw/followers", "following_url": "https://api.github.com/users/austinmw/following{/other_user}", "gists_url": "https://api.github.com/users/austinmw/gists{/gist_id}", "starred_url": "https://api.github.com/users/austinmw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austinmw/subscriptions", "organizations_url": "https://api.github.com/users/austinmw/orgs", "repos_url": "https://api.github.com/users/austinmw/repos", "events_url": "https://api.github.com/users/austinmw/events{/privacy}", "received_events_url": "https://api.github.com/users/austinmw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-12T23:34:28Z", "updated_at": "2020-03-03T21:56:23Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04, docker hub tag: 1.12.0-gpu-py3\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): docker pull\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source): not source\r\n- GCC/Compiler version (if compiling from source): not source\r\n- CUDA/cuDNN version: 7.1.4\r\n- GPU model and memory: P80 12GB\r\n\r\n\r\n**Describe the current behavior**\r\nI'm running tensorflow.keras through a docker container and displaying the output in a Jupyter notebook that is outside of the container (using Amazon SageMaker notebooks). Regular Keras printed progress bars correctly, but switching to tensorflow.Keras now spams my screen with control characters when trying to print progress bars. For example when Keras is downloading ImageNet weights for a model it outputs this:\r\n\r\n```\r\nDownloading data from https://github.com/fchollet/deep-learning-models/releases/download/v0.4/xception_weights_tf_dim_ordering_tf_kernels_notop.h5\r\n#015    8192/83683744 [..............................] - ETA: 12:27#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#015   40960/83683744 [..............................] - ETA: 5:00 #010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#015   90112/83683744 [..............................] - ETA: 3:24#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#015  212992/83683744 [..............................] - ETA: 1:55#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#015  442368/83683744 [..............................] - ETA: 1:09#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#015  892928/83683744 [..............................] - ETA: 40s #010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010#015 1810432/83683744 [..............................] - ETA: 23s#010#010#010#010#010#010#010#010#010#010#010#010#010#010#010\r\n```\r\n\r\n\r\n\r\n**Describe the expected behavior**\r\nIt shouldn't print control characters\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nReproducing this exactly may require running through SageMaker. The example I modified is this: https://github.com/awslabs/amazon-sagemaker-examples/tree/master/hyperparameter_tuning/keras_bring_your_own \r\nSpecifically, I changed all of the Keras imports in this file: https://github.com/awslabs/amazon-sagemaker-examples/blob/master/hyperparameter_tuning/keras_bring_your_own/trainer/start.py to be tensorflow.keras imports. \r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24323", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24323/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24323/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24323/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24323", "id": 390375412, "node_id": "MDU6SXNzdWUzOTAzNzU0MTI=", "number": 24323, "title": "undefined symbol: _ZN6tflite12tensor_utils27NeonSymmetricQuantizeFloatsEPKfiPaPfS4_S4_\\n", "user": {"login": "akotlarsky", "id": 45774958, "node_id": "MDQ6VXNlcjQ1Nzc0OTU4", "avatar_url": "https://avatars2.githubusercontent.com/u/45774958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akotlarsky", "html_url": "https://github.com/akotlarsky", "followers_url": "https://api.github.com/users/akotlarsky/followers", "following_url": "https://api.github.com/users/akotlarsky/following{/other_user}", "gists_url": "https://api.github.com/users/akotlarsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/akotlarsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akotlarsky/subscriptions", "organizations_url": "https://api.github.com/users/akotlarsky/orgs", "repos_url": "https://api.github.com/users/akotlarsky/repos", "events_url": "https://api.github.com/users/akotlarsky/events{/privacy}", "received_events_url": "https://api.github.com/users/akotlarsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-12-12T19:30:46Z", "updated_at": "2019-02-22T23:51:36Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Raspberry Pi 3B+ Linux\r\n- TensorFlow installed from (source or binary): installed in Python using pip3\r\n- TensorFlow version (use command below):  1.11.0\r\n- Python version: 3.5.3\r\n\r\n**Describe the current behavior**\r\nTrying to convert a frozen graph file (.pb) to a TensorFlow Lite FlatBuffer file (.tflite),  Executing this command from the Linux command line:\r\ncd ~/.local/bin\r\n./tflite_convert --output_file=/home/pi/sols/demo/src/image_classification/network/fruit_models/fruit_model.tflite --graph_def_file=/home/pi/sols/demo/src/image_classification/network/fruit_models/frozen_graph.pb --input_arrays=X --output_arrays=softmax\r\n\r\nIt gives me this error:\r\nRuntimeError: TOCO failed see console for info.\r\nb'/usr/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: compiletime version 3.4 of module \\'tensorflow.python.framework.fast_tensor_util\\' does not match runtime version 3.5\\n  return f(*args, **kwds)\\n/usr/lib/python3.5/importlib/_bootstrap.py:222: RuntimeWarning: builtins.type size changed, may indicate binary incompatibility. Expected 432, got 412\\n  return f(*args, **kwds)\\nTraceback (most recent call last):\\n  File \"/bin/toco_from_protos\", line 7, in <module>\\n    from tensorflow.contrib.lite.toco.python.toco_from_protos import main\\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/toco/python/toco_from_protos.py\", line 22, in <module>\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/toco/python/tensorflow_wrap_toco.py\", line 28, in <module>\\n    _tensorflow_wrap_toco = swig_import_helper()\\n  File \"/home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/toco/python/tensorflow_wrap_toco.py\", line 24, in swig_import_helper\\n    _mod = imp.load_module(\\'_tensorflow_wrap_toco\\', fp, pathname, description)\\n  File \"/usr/lib/python3.5/imp.py\", line 242, in load_module\\n    return load_dynamic(name, filename, file)\\n  File \"/usr/lib/python3.5/imp.py\", line 342, in load_dynamic\\n    return _load(spec)\\nImportError: /home/pi/.local/lib/python3.5/site-packages/tensorflow/contrib/lite/toco/python/_tensorflow_wrap_toco.so: undefined symbol: _ZN6tflite12tensor_utils27NeonSymmetricQuantizeFloatsEPKfiPaPfS4_S4_\\n'\r\n\r\nPlease help!\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24319", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24319/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24319/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24319/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24319", "id": 390316995, "node_id": "MDU6SXNzdWUzOTAzMTY5OTU=", "number": 24319, "title": "[tf.keras.layers.LSTM] reset_state performance issue", "user": {"login": "eega", "id": 38535015, "node_id": "MDQ6VXNlcjM4NTM1MDE1", "avatar_url": "https://avatars1.githubusercontent.com/u/38535015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eega", "html_url": "https://github.com/eega", "followers_url": "https://api.github.com/users/eega/followers", "following_url": "https://api.github.com/users/eega/following{/other_user}", "gists_url": "https://api.github.com/users/eega/gists{/gist_id}", "starred_url": "https://api.github.com/users/eega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eega/subscriptions", "organizations_url": "https://api.github.com/users/eega/orgs", "repos_url": "https://api.github.com/users/eega/repos", "events_url": "https://api.github.com/users/eega/events{/privacy}", "received_events_url": "https://api.github.com/users/eega/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-12T16:54:24Z", "updated_at": "2019-08-12T20:54:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): modified `tensorflow/python/keras/layers/recurrent.py` to get timings of LSTM reset (see code change below)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): 1.12.0, binary from PyPi\r\n- TensorFlow version (use command below): v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nTime required to execute `tensorflow.keras.Model` `reset_states()` increases non-linearly with the number of stateful `tensorflow.keras.layers.LSTM` units, but only the first time `reset_states()` is called. The second time `reset_states()` it basically doesn't take any time at all.\r\nA few numbers to highlight this - all numbers refer to the reset of a single LSTM (one model layer), not the whole model:\r\n- 2 LSTMs: reset of the first LSTM takes ~20ms and of the last takes ~30ms (could be just a random variation)\r\n- 20 LSTMs: reset of the first LSTM takes ~300ms and of the last ~700ms\r\n- 200 LSTMs: reset of the first LSTM takes ~3500ms and of the last ~7000ms\r\nI traced the delay down to `tensorflow.keras.backend.set_value`, so it obviously is really setting of the state that takes extremely long.\r\n\r\n**Describe the expected behavior**\r\nI would expect that the reset of a single LSTM (one model layer) stays constant independent of the number of LSTMs the model consists of. More importantly, I would expect that the time it takes to reset a single LSTM doesn't increase, but is constant for all of the LSTMs of a model..\r\n\r\n**Code to reproduce the issue**\r\nImport module `datetime` in `tensorflow/python/keras/layers/recurrent.py` and replace method of `reset_states` of class `RNN` by\r\n```\r\n  def reset_states(self, states=None):\r\n    import datetime\r\n    if not self.stateful:\r\n      raise AttributeError('Layer must be stateful.')\r\n    batch_size = self.input_spec[0].shape[0]\r\n    if not batch_size:\r\n      raise ValueError('If a RNN is stateful, it needs to know '\r\n                       'its batch size. Specify the batch size '\r\n                       'of your input tensors: \\n'\r\n                       '- If using a Sequential model, '\r\n                       'specify the batch size by passing '\r\n                       'a `batch_input_shape` '\r\n                       'argument to your first layer.\\n'\r\n                       '- If using the functional API, specify '\r\n                       'the batch size by passing a '\r\n                       '`batch_shape` argument to your Input layer.')\r\n    # initialize state if None\r\n    if self.states[0] is None:\r\n      if _is_multiple_state(self.cell.state_size):\r\n        self.states = [\r\n            K.zeros([batch_size] + tensor_shape.as_shape(dim).as_list())\r\n            for dim in self.cell.state_size\r\n        ]\r\n      else:\r\n        self.states = [\r\n            K.zeros([batch_size] +\r\n                    tensor_shape.as_shape(self.cell.state_size).as_list())\r\n        ]\r\n    elif states is None:\r\n      if _is_multiple_state(self.cell.state_size):\r\n        now = datetime.datetime.now()\r\n        for state, dim in zip(self.states, self.cell.state_size):\r\n          K.set_value(state,\r\n                      np.zeros([batch_size] +\r\n                               tensor_shape.as_shape(dim).as_list()))\r\n        print(f\"LSTM reset time: {datetime.datetime.now() - now}\")  # TODO\r\n      else:\r\n        K.set_value(self.states[0], np.zeros(\r\n            [batch_size] +\r\n            tensor_shape.as_shape(self.cell.state_size).as_list()))\r\n    else:\r\n      if not isinstance(states, (list, tuple)):\r\n        states = [states]\r\n      if len(states) != len(self.states):\r\n        raise ValueError('Layer ' + self.name + ' expects ' +\r\n                         str(len(self.states)) + ' states, '\r\n                         'but it received ' + str(len(states)) +\r\n                         ' state values. Input received: ' + str(states))\r\n      for index, (value, state) in enumerate(zip(states, self.states)):\r\n        if _is_multiple_state(self.cell.state_size):\r\n          dim = self.cell.state_size[index]\r\n        else:\r\n          dim = self.cell.state_size\r\n        if value.shape != tuple([batch_size] +\r\n                                tensor_shape.as_shape(dim).as_list()):\r\n          raise ValueError(\r\n              'State ' + str(index) + ' is incompatible with layer ' +\r\n              self.name + ': expected shape=' + str(\r\n                  (batch_size, dim)) + ', found shape=' + str(value.shape))\r\n        # TODO(fchollet): consider batch calls to `set_value`.\r\n        K.set_value(state, value)\r\n```\r\n\r\nThen set `COUNT_LSTMS` to the number of LSTMs that should be used in the following script and execute it:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nCOUNT_LSTMS = 200\r\n\r\nBATCH_SIZE = 100\r\nUNITS_INPUT_OUTPUT = 5\r\nUNITS_LSTMS = 20\r\nBATCHES_TO_GENERATE = 2\r\nSEQUENCE_LENGTH = 20\r\n\r\n# build model\r\nmy_input = tf.keras.layers.Input(batch_shape=(BATCH_SIZE,\r\n                                              None,\r\n                                              UNITS_INPUT_OUTPUT))\r\nmy_lstm_layers = [tf.keras.layers.LSTM(units=UNITS_LSTMS,\r\n                                       stateful=True,\r\n                                       return_sequences=True)(my_input)\r\n                  for _ in range(COUNT_LSTMS)]\r\nmy_output_layer = tf.keras.layers.Dense(UNITS_INPUT_OUTPUT)\r\nmy_output = tf.keras.layers.TimeDistributed(my_output_layer)(\r\n    tf.keras.layers.concatenate(my_lstm_layers, axis=-1))\r\nmy_model = tf.keras.Model(my_input, my_output)\r\n\r\n\r\n# generation\r\npred_input = np.random.randn(BATCH_SIZE, 1, UNITS_INPUT_OUTPUT)\r\n\r\nfor batch in range(BATCHES_TO_GENERATE):\r\n    print('resetting states')\r\n    my_model.reset_states()\r\n    print(f\"start generation of batch {batch}\")\r\n    for _ in range(SEQUENCE_LENGTH):\r\n        pred_input = my_model.predict(pred_input, batch_size=BATCH_SIZE)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24296", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24296/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24296/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24296/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24296", "id": 389903291, "node_id": "MDU6SXNzdWUzODk5MDMyOTE=", "number": 24296, "title": "Compilation failed when building keras model with CTC on TPU", "user": {"login": "ASDen", "id": 124146, "node_id": "MDQ6VXNlcjEyNDE0Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/124146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ASDen", "html_url": "https://github.com/ASDen", "followers_url": "https://api.github.com/users/ASDen/followers", "following_url": "https://api.github.com/users/ASDen/following{/other_user}", "gists_url": "https://api.github.com/users/ASDen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ASDen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ASDen/subscriptions", "organizations_url": "https://api.github.com/users/ASDen/orgs", "repos_url": "https://api.github.com/users/ASDen/repos", "events_url": "https://api.github.com/users/ASDen/events{/privacy}", "received_events_url": "https://api.github.com/users/ASDen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-11T18:49:20Z", "updated_at": "2020-02-13T05:25:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Google Colab with TPU\r\n\r\n\r\n**Describe the current behavior**\r\nKeras model with CTC on TPU gives error\r\n\r\n**Describe the expected behavior**\r\nshould work as it does on GPU and CPU backends\r\n\r\n**Code to reproduce the issue**\r\nI made a small modification to the MNIST TPU example (https://colab.research.google.com/github/tensorflow/tpu/blob/master/tools/colab/keras_mnist.ipynb)\r\njust to test whether TPUs currently support CTC\r\n```\r\ndef ctc_batch_cost(args):\r\n    y_pred,y_true = args\r\n    input_length = y_true[:,1:2]+5\r\n    label_length = y_true[:,1:2]+5\r\n    return K.ctc_batch_cost(y_true, y_pred, input_length, label_length)\r\n  \r\ninp = tf.keras.Input(shape=(28*28,))\r\nx = l.Reshape(input_shape=(28*28,), target_shape=(28, 28))(inp)\r\nx = l.Dense(10, activation='softmax')(x)\r\nloss = l.Lambda(ctc_batch_cost, output_shape=(1,), name='ctc')([x, inp ])\r\n\r\nmodel = tf.keras.Model(inputs=[inp], outputs=loss)\r\n\r\nmodel.compile(optimizer='adam', \r\n              loss={'ctc': lambda y_true, y_pred: y_pred},\r\n              metrics=['accuracy'])\r\n```\r\nunfortunately, while this code works with the GPU backend, for the TPU backend, it gives\r\n\r\n> RuntimeError: Compilation failed: Compilation failure: Detected unsupported operations when trying to compile graph cluster_1_6470206916041614137_f15n_1[] on XLA_TPU_JIT: Where (No registered 'Where' OpKernel for XLA_TPU_JIT devices compatible with node {{node tpu_139921521852368/ctc/boolean_mask/Where}} = Where[T=DT_BOOL, _device=\"/device:TPU_REPLICATED_CORE\"](tpu_139921521852368/ctc/boolean_mask/Reshape_1)\r\n> \t.  Registered:  device='CPU'; T in [DT_BOOL]\r\n>   device='CPU'; T in [DT_COMPLEX128]\r\n>   device='CPU'; T in [DT_COMPLEX64]\r\n>   device='CPU'; T in [DT_DOUBLE]\r\n>   device='CPU'; T in [DT_FLOAT]\r\n>   device='CPU'; T in [DT_BFLOAT16]\r\n>   device='CPU'; T in [DT_HALF]\r\n>   device='CPU'; T in [DT_INT8]\r\n>   device='CPU'; T in [DT_UINT8]\r\n>   device='CPU'; T in [DT_INT16]\r\n>   device='CPU'; T in [DT_UINT16]\r\n>   device='CPU'; T in [DT_INT32]\r\n>   device='CPU'; T in [DT_INT64]\r\n> ){{node tpu_139921521852368/ctc/boolean_mask/Where}}\r\n\r\nis there any workaround for this ? \r\nCTC has only a CPU implementation, and the GPU backed offloads it to the CPU, why isn't this also the case for TPUs ?\r\n\r\nThanks,"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24268", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24268/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24268/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24268/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24268", "id": 389430424, "node_id": "MDU6SXNzdWUzODk0MzA0MjQ=", "number": 24268, "title": "Check failed: is_weights() on creating tensorrt inference graph", "user": {"login": "alexander-shustanov", "id": 12222413, "node_id": "MDQ6VXNlcjEyMjIyNDEz", "avatar_url": "https://avatars2.githubusercontent.com/u/12222413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexander-shustanov", "html_url": "https://github.com/alexander-shustanov", "followers_url": "https://api.github.com/users/alexander-shustanov/followers", "following_url": "https://api.github.com/users/alexander-shustanov/following{/other_user}", "gists_url": "https://api.github.com/users/alexander-shustanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexander-shustanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexander-shustanov/subscriptions", "organizations_url": "https://api.github.com/users/alexander-shustanov/orgs", "repos_url": "https://api.github.com/users/alexander-shustanov/repos", "events_url": "https://api.github.com/users/alexander-shustanov/events{/privacy}", "received_events_url": "https://api.github.com/users/alexander-shustanov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-12-10T18:31:05Z", "updated_at": "2019-05-13T17:50:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): r1.12\r\n- Python version: 3.6.7\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: 10.0, 7.4.1.5\r\n- GPU model and memory: GTX 1050ti, 4000mb\r\n\r\nI am trying to create optimized inference graph with tensorflow.contrib.tensorrt.create_inference_graph. But when I call the function, it runs for a while, and than fails. The last line at logs is:\r\n\r\n```2018-12-10 22:23:42.564811: F tensorflow/contrib/tensorrt/convert/convert_nodes.cc:421] Check failed: is_weights()```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24265", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24265/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24265/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24265/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24265", "id": 389290367, "node_id": "MDU6SXNzdWUzODkyOTAzNjc=", "number": 24265, "title": "tf.data equivalent for tf.estimator.inputs.numpy_input_fn", "user": {"login": "twolodzko", "id": 3750140, "node_id": "MDQ6VXNlcjM3NTAxNDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3750140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twolodzko", "html_url": "https://github.com/twolodzko", "followers_url": "https://api.github.com/users/twolodzko/followers", "following_url": "https://api.github.com/users/twolodzko/following{/other_user}", "gists_url": "https://api.github.com/users/twolodzko/gists{/gist_id}", "starred_url": "https://api.github.com/users/twolodzko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twolodzko/subscriptions", "organizations_url": "https://api.github.com/users/twolodzko/orgs", "repos_url": "https://api.github.com/users/twolodzko/repos", "events_url": "https://api.github.com/users/twolodzko/events{/privacy}", "received_events_url": "https://api.github.com/users/twolodzko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-10T13:00:34Z", "updated_at": "2019-04-27T17:07:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.11.0\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nUsing `tf.estimator.inputs.numpy_input_fn` in current TensorFlow raises deprecation warnings and suggests using tf.data instead. Unfortunately, tf.data does not have exact replacement. Moreover, [`tf.estimator.inputs.numpy_input_fn` seems to be working out-of-box](https://stackoverflow.com/questions/53677345/passing-2gb-data-to-tf-estimator) for some problems where tf.data raises errors and needs workarounds.\r\n\r\n**Will this change the current api? How?**\r\n\r\nProvide replacement function in tf.data:\r\n`tf.estimator.inputs.numpy_input_fn` -> `tf.data.numpy_input_fn`\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone using numpy arrays as input for TensorFlow. Especially for arrays >2GB large. \r\n\r\n**Any Other info.**\r\n\r\nNone.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24262", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24262/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24262/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24262/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24262", "id": 389194979, "node_id": "MDU6SXNzdWUzODkxOTQ5Nzk=", "number": 24262, "title": "Cannot build profiler on windows 10", "user": {"login": "vigbk", "id": 6189632, "node_id": "MDQ6VXNlcjYxODk2MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/6189632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vigbk", "html_url": "https://github.com/vigbk", "followers_url": "https://api.github.com/users/vigbk/followers", "following_url": "https://api.github.com/users/vigbk/following{/other_user}", "gists_url": "https://api.github.com/users/vigbk/gists{/gist_id}", "starred_url": "https://api.github.com/users/vigbk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vigbk/subscriptions", "organizations_url": "https://api.github.com/users/vigbk/orgs", "repos_url": "https://api.github.com/users/vigbk/repos", "events_url": "https://api.github.com/users/vigbk/events{/privacy}", "received_events_url": "https://api.github.com/users/vigbk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-10T08:44:13Z", "updated_at": "2019-11-08T23:32:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.12.0\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): 1.16.1\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 9.0, 7.3.1\r\n- GPU model and memory: NVidia GTX 1080\r\n\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI get an error while trying to build the profiler from source.\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nC:\\Users\\vignesh\\Documents\\tensorflow-1.12.0>bazel build --config=opt tensorflow/core/profiler:profiler\r\nINFO: Build options have changed, discarding analysis cache.\r\nINFO: Analysed target //tensorflow/core/profiler:profiler (0 packages loaded).\r\nINFO: Found 1 target...\r\nINFO: From Compiling external/com_google_absl/absl/base/internal/throw_delegate.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/base/internal/spinlock_wait.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/types/optional.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/internal/memutil.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/internal/charconv_parse.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/internal/charconv_bigint.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/str_replace.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/substitute.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/ascii.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/string_view.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/match.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/charconv.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/numbers.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nINFO: From Compiling external/com_google_absl/absl/strings/str_split.cc:\r\ncl : Command line warning D9025 : overriding '/w' with '/W3'\r\nERROR: C:/users/vignesh/_bazel_vignesh/g2rooyha/external/linenoise/BUILD.bazel:9:1: C++ compilation of rule '@linenoise//:linenoise' failed (Exit 2): msvc_wrapper_for_nvcc.bat failed: error executing command\r\n  cd C:/users/vignesh/_bazel_vignesh/g2rooyha/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v9.0\r\n    SET CUDNN_INSTALL_PATH=C:/tools/cuda\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\shared;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.10240.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\WINDOWS\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\WINDOWS\\Microsoft.NET\\Framework64\\;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86;;C:\\WINDOWS\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Users/vignesh/AppData/Local/Programs/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/vignesh/AppData/Local/Programs/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\vignesh\\AppData\\Local\\Temp\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_CUDA_VERSION=9.0\r\n    SET TF_CUDNN_VERSION=7\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n    SET TMP=C:\\Users\\vignesh\\AppData\\Local\\Temp\r\n  external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.bat /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /Iexternal/linenoise /Ibazel-out/x64_windows-opt/genfiles/external/linenoise /Ibazel-out/x64_windows-opt/bin/external/linenoise /Iexternal/bazel_tools /Ibazel-out/x64_windows-opt/genfiles/external/bazel_tools /Ibazel-out/x64_windows-opt/bin/external/bazel_tools /showIncludes /MD /O2 /DNDEBUG -w /arch:AVX /Fobazel-out/x64_windows-opt/bin/external/linenoise/_objs/linenoise/linenoise.o /c external/linenoise/linenoise.c\r\nexternal/linenoise/linenoise.c(106): fatal error C1083: Cannot open include file: 'termios.h': No such file or directory\r\nTarget //tensorflow/core/profiler:profiler failed to build\r\nINFO: Elapsed time: 19.622s, Critical Path: 11.13s\r\nINFO: 138 processes: 138 local.\r\nFAILED: Build did NOT complete successfully\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24253", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24253/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24253/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24253/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24253", "id": 389034997, "node_id": "MDU6SXNzdWUzODkwMzQ5OTc=", "number": 24253, "title": "Not able to read objets from private s3 bucket", "user": {"login": "srihari-humbarwadi", "id": 24864163, "node_id": "MDQ6VXNlcjI0ODY0MTYz", "avatar_url": "https://avatars0.githubusercontent.com/u/24864163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srihari-humbarwadi", "html_url": "https://github.com/srihari-humbarwadi", "followers_url": "https://api.github.com/users/srihari-humbarwadi/followers", "following_url": "https://api.github.com/users/srihari-humbarwadi/following{/other_user}", "gists_url": "https://api.github.com/users/srihari-humbarwadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/srihari-humbarwadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srihari-humbarwadi/subscriptions", "organizations_url": "https://api.github.com/users/srihari-humbarwadi/orgs", "repos_url": "https://api.github.com/users/srihari-humbarwadi/repos", "events_url": "https://api.github.com/users/srihari-humbarwadi/events{/privacy}", "received_events_url": "https://api.github.com/users/srihari-humbarwadi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-12-09T15:42:48Z", "updated_at": "2019-09-02T06:03:26Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10, 7.3\r\n- GPU model and memory: 4x 1080ti 11Gb\r\n\r\n\r\n**Describe the current behavior**\r\ni am not able to access any data from my private s3  bucket, i just keep getting this error\r\nNotFoundError: Object s3://bla/bla does not exist\r\ni have checked that my local machine has aws credentials in ~/.aws/credentials \r\nnot only that i have also tried setting environment variables\r\n```\r\nos.environ['AWS_REGION'] = <my region>\r\nos.environ['AWS_ACCESS_KEY_ID'] = < my creds > \r\nos.environ['AWS_SECRET_ACCESS_KEY'] = < my creds > \r\n```\r\nIt still doesnt let me access my data from s3\r\n**Code to reproduce the issue**\r\n```\r\nfrom tensorflow.python.lib.io import file_io\r\nfile_io.stat(s3_image_url)\r\n```\r\ns3_image_url is a valid url for s3 object which i confirmed by downloading it with awscli\r\n\r\n\r\n**logs**\r\n```\r\n2018-12-09 20:42:26.203155: I tensorflow/core/platform/s3/aws_logging.cc:54] Found secret key\r\n2018-12-09 20:42:26.203221: I tensorflow/core/platform/s3/aws_logging.cc:54] Connection has been released. Continuing.\r\n2018-12-09 20:42:27.158491: E tensorflow/core/platform/s3/aws_logging.cc:60] No response body. Response code: 403\r\n2018-12-09 20:42:27.158586: W tensorflow/core/platform/s3/aws_logging.cc:57] If the signature check failed. This could be because of a time skew. Attempting to adjust the signer.\r\n2018-12-09 20:42:27.158702: I tensorflow/core/platform/s3/aws_logging.cc:54] Found secret key\r\n2018-12-09 20:42:27.158882: I tensorflow/core/platform/s3/aws_logging.cc:54] Connection has been released. Continuing.\r\n2018-12-09 20:42:27.388300: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered AWSError\r\nSignatureDoesNotMatch\r\nThe request signature we calculated does not match the signature you provided. Check your key and signing method.:\r\n2018-12-09 20:42:27.388399: W tensorflow/core/platform/s3/aws_logging.cc:57] If the signature check failed. This could be because of a time skew. Attempting to adjust the signer.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24226", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24226/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24226/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24226/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24226", "id": 388805921, "node_id": "MDU6SXNzdWUzODg4MDU5MjE=", "number": 24226, "title": "DistributionStrategy and Keras models: support for sample_weight_mode", "user": {"login": "pawarrick", "id": 8933353, "node_id": "MDQ6VXNlcjg5MzMzNTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8933353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pawarrick", "html_url": "https://github.com/pawarrick", "followers_url": "https://api.github.com/users/pawarrick/followers", "following_url": "https://api.github.com/users/pawarrick/following{/other_user}", "gists_url": "https://api.github.com/users/pawarrick/gists{/gist_id}", "starred_url": "https://api.github.com/users/pawarrick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pawarrick/subscriptions", "organizations_url": "https://api.github.com/users/pawarrick/orgs", "repos_url": "https://api.github.com/users/pawarrick/repos", "events_url": "https://api.github.com/users/pawarrick/events{/privacy}", "received_events_url": "https://api.github.com/users/pawarrick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2018-12-07T20:39:13Z", "updated_at": "2019-08-26T21:33:15Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): master (Nov. 30, 2018)\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWhen using a DistributionStrategy with a Keras model that includes sample_weights, a 'NotImplemented' exception is thrown.  For example,\r\n\r\n ```\r\n    strategy = mirrored_strategy.MirroredStrategy()\r\n     model.compile(loss='categorical_crossentropy',\r\n                     optimizer=opt,\r\n                     metrics=['accuracy'],\r\n                     weighted_metrics=['accuracy'],\r\n                     sample_weight_mode='temporal',\r\n                     distribute=strategy)\r\n```\r\n\r\nThe exception originates in tensorflow/python/keras/engine/training.py\r\n      \r\n```\r\n if sample_weight_mode:\r\n\t        raise NotImplementedError('sample_weight_mode is not supported with '\r\n\t                                  'DistributionStrategy.')\r\n```\r\n\r\nCan this be supported or can you give an estimated timeline?\r\n\r\nMany thanks\r\n\r\n\r\n**Will this change the current api? How?**\r\nNo.  It looks like the API should support this.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone using keras models with sample_weights in a DistributedStrategy mode.\r\n\r\n**Any Other info.**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24215", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24215/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24215/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24215/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24215", "id": 388520943, "node_id": "MDU6SXNzdWUzODg1MjA5NDM=", "number": 24215, "title": "bazel error for saved_model_cli", "user": {"login": "Arnold1", "id": 3844226, "node_id": "MDQ6VXNlcjM4NDQyMjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3844226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arnold1", "html_url": "https://github.com/Arnold1", "followers_url": "https://api.github.com/users/Arnold1/followers", "following_url": "https://api.github.com/users/Arnold1/following{/other_user}", "gists_url": "https://api.github.com/users/Arnold1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arnold1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arnold1/subscriptions", "organizations_url": "https://api.github.com/users/Arnold1/orgs", "repos_url": "https://api.github.com/users/Arnold1/repos", "events_url": "https://api.github.com/users/Arnold1/events{/privacy}", "received_events_url": "https://api.github.com/users/Arnold1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-07T06:19:08Z", "updated_at": "2019-04-28T12:46:25Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\ni get the follwing error when i try to build saved_model_cli (following this tutorial: https://www.tensorflow.org/guide/saved_model). Any idea whats the issue?\r\n\r\n```\r\n$ bazel build tensorflow/python/tools:saved_model_cli\r\nWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\n/Users/geri/Documents/tensorflow/tools/bazel.rc\r\nStarting local Bazel server and connecting to it...\r\nINFO: Invocation ID: 466cba21-c0aa-4740-970a-fd0d67250a82\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/python/BUILD:2985:1: in py_library rule //tensorflow/python:standard_ops: target '//tensorflow/python:standard_ops' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/gan/BUILD:136:1: in py_library rule //tensorflow/contrib/gan:losses_impl: target '//tensorflow/contrib/gan:losses_impl' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/metrics/BUILD:16:1: in py_library rule //tensorflow/contrib/metrics:metrics_py: target '//tensorflow/contrib/metrics:metrics_py' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/python/BUILD:76:1: in py_library rule //tensorflow/python:no_contrib: target '//tensorflow/python:no_contrib' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:233:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/BUILD:356:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries:ar_model: target '//tensorflow/contrib/timeseries/python/timeseries:ar_model' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:76:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/bayesflow/BUILD:17:1: in py_library rule //tensorflow/contrib/bayesflow:bayesflow_py: target '//tensorflow/contrib/bayesflow:bayesflow_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/BUILD:13:1: in py_library rule //tensorflow/contrib:contrib_py: target '//tensorflow/contrib:contrib_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nINFO: Analysed target //tensorflow/python/tools:saved_model_cli (309 packages loaded, 16772 targets configured).\r\nINFO: Found 1 target...\r\nINFO: From Linking external/protobuf_archive/libprotobuf_lite.a [for host]:\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/host/bin/external/protobuf_archive/_objs/protobuf_lite/arenastring.o has no symbols\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/host/bin/external/protobuf_archive/_objs/protobuf_lite/io_win32.o has no symbols\r\nINFO: From Linking tensorflow/core/libplatform_base.a [for host]:\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: warning same member name (env_time.o) in output file used for input files: bazel-out/host/bin/tensorflow/core/_objs/platform_base/0/env_time.o and: bazel-out/host/bin/tensorflow/core/_objs/platform_base/1/env_time.o (due to use of basename, truncation, blank padding or duplicate input files)\r\nINFO: From Linking external/protobuf_archive/libprotobuf.a [for host]:\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/host/bin/external/protobuf_archive/_objs/protobuf/gzip_stream.o has no symbols\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/host/bin/external/protobuf_archive/_objs/protobuf/error_listener.o has no symbols\r\nINFO: From ProtoCompile tensorflow/core/lib/core/error_codes.pb.cc [for host]:\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/grappler/costs/op_performance_data.pb.cc:\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/lib/core/error_codes.pb.cc:\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/grappler/costs/op_performance_data.pb.cc [for host]:\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/example/example.pb.cc:\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/darwin-fastbuild/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/example/example.pb.cc [for host]:\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/host/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nERROR: /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/external/flatbuffers/BUILD.bazel:57:1: C++ compilation of rule '@flatbuffers//:flatc_library' failed (Exit 1) cc_wrapper.sh failed: error executing command external/local_config_cc/cc_wrapper.sh -U_FORTIFY_SOURCE -fstack-protector -Wall -Wthread-safety -Wself-assign -fcolor-diagnostics -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG ... (remaining 44 argument(s) skipped)\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox\r\nexternal/flatbuffers/src/util.cpp:50:3: error: use of undeclared identifier 'FLATBUFFERS_ASSERT'\r\n  FLATBUFFERS_ASSERT(g_load_file_function);\r\n  ^\r\nexternal/flatbuffers/src/util.cpp:55:3: error: use of undeclared identifier 'FLATBUFFERS_ASSERT'\r\n  FLATBUFFERS_ASSERT(g_file_exists_function);\r\n  ^\r\n2 errors generated.\r\nTarget //tensorflow/python/tools:saved_model_cli failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 302.643s, Critical Path: 46.91s\r\nINFO: 396 processes: 396 darwin-sandbox.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nmore infos:\r\n```\r\n$ bazel build tensorflow/python/tools:saved_model_cli --sandbox_debug\r\nWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\n/Users/geri/Documents/tensorflow/tools/bazel.rc\r\nINFO: Invocation ID: b46f49c0-8fce-46a2-8bfc-4d3ad5ba2ef7\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/python/BUILD:2985:1: in py_library rule //tensorflow/python:standard_ops: target '//tensorflow/python:standard_ops' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/python/BUILD:76:1: in py_library rule //tensorflow/python:no_contrib: target '//tensorflow/python:no_contrib' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/metrics/BUILD:16:1: in py_library rule //tensorflow/contrib/metrics:metrics_py: target '//tensorflow/contrib/metrics:metrics_py' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/gan/BUILD:136:1: in py_library rule //tensorflow/contrib/gan:losses_impl: target '//tensorflow/contrib/gan:losses_impl' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/bayesflow/BUILD:17:1: in py_library rule //tensorflow/contrib/bayesflow:bayesflow_py: target '//tensorflow/contrib/bayesflow:bayesflow_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:233:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:76:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/BUILD:356:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries:ar_model: target '//tensorflow/contrib/timeseries/python/timeseries:ar_model' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/BUILD:13:1: in py_library rule //tensorflow/contrib:contrib_py: target '//tensorflow/contrib:contrib_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nINFO: Analysed target //tensorflow/python/tools:saved_model_cli (0 packages loaded, 0 targets configured).\r\nINFO: Found 1 target...\r\nINFO: From Linking external/grpc/libtsi.a:\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/darwin-fastbuild/bin/external/grpc/_objs/tsi/ssl_session_openssl.pic.o has no symbols\r\nINFO: From Linking external/grpc/libgrpc++_base.a:\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/darwin-fastbuild/bin/external/grpc/_objs/grpc++_base/rpc_method.pic.o has no symbols\r\nERROR: /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/external/grpc/BUILD:1515:1: C++ compilation of rule '@grpc//:grpc_resolver_dns_ares' failed (Exit 1) sandbox-exec failed: error executing command \r\n  (cd /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/Users/geri/.pyenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/local/go/bin:/Users/geri/intelligence/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    TMPDIR=/var/folders/7t/9l0n105n4_jbrq076r887pthz96c2m/T/ \\\r\n  /usr/bin/sandbox-exec -f /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/sandbox/darwin-sandbox/61/sandbox.sb /var/tmp/_bazel_geri/install/c71a8bada5761bf76ced20ca6672b491/_embedded_binaries/process-wrapper '--timeout=0' '--kill_delay=15' external/local_config_cc/cc_wrapper.sh -U_FORTIFY_SOURCE -fstack-protector -Wall -Wthread-safety -Wself-assign -fcolor-diagnostics -fno-omit-frame-pointer '-std=c++0x' -MD -MF bazel-out/darwin-fastbuild/bin/external/grpc/_objs/grpc_resolver_dns_ares/grpc_ares_wrapper.pic.d '-frandom-seed=bazel-out/darwin-fastbuild/bin/external/grpc/_objs/grpc_resolver_dns_ares/grpc_ares_wrapper.pic.o' -fPIC '-DPB_FIELD_32BIT=1' -iquote external/grpc -iquote bazel-out/darwin-fastbuild/genfiles/external/grpc -iquote bazel-out/darwin-fastbuild/bin/external/grpc -iquote external/bazel_tools -iquote bazel-out/darwin-fastbuild/genfiles/external/bazel_tools -iquote bazel-out/darwin-fastbuild/bin/external/bazel_tools -iquote external/zlib_archive -iquote bazel-out/darwin-fastbuild/genfiles/external/zlib_archive -iquote bazel-out/darwin-fastbuild/bin/external/zlib_archive -iquote external/com_github_nanopb_nanopb -iquote bazel-out/darwin-fastbuild/genfiles/external/com_github_nanopb_nanopb -iquote bazel-out/darwin-fastbuild/bin/external/com_github_nanopb_nanopb -isystem external/grpc/include -isystem bazel-out/darwin-fastbuild/genfiles/external/grpc/include -isystem bazel-out/darwin-fastbuild/bin/external/grpc/include -isystem external/zlib_archive -isystem bazel-out/darwin-fastbuild/genfiles/external/zlib_archive -isystem bazel-out/darwin-fastbuild/bin/external/zlib_archive -isystem external/grpc/third_party/address_sorting/include -isystem bazel-out/darwin-fastbuild/genfiles/external/grpc/third_party/address_sorting/include -isystem bazel-out/darwin-fastbuild/bin/external/grpc/third_party/address_sorting/include -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c external/grpc/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc -o bazel-out/darwin-fastbuild/bin/external/grpc/_objs/grpc_resolver_dns_ares/grpc_ares_wrapper.pic.o)\r\nexternal/grpc/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:29:10: fatal error: 'ares.h' file not found\r\n#include <ares.h>\r\n         ^~~~~~~~\r\n1 error generated.\r\nTarget //tensorflow/python/tools:saved_model_cli failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 13.689s, Critical Path: 4.82s\r\nINFO: 57 processes: 57 darwin-sandbox.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nthan i installed ares:\r\n```\r\n$ ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" < /dev/null 2> /dev/null\r\n$ brew install c-ares\r\n```\r\n\r\nand tried it again, and got this error:\r\n```\r\n$ bazel build tensorflow/python/tools:saved_model_cli --sandbox_debug\r\nWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\n/Users/geri/Documents/tensorflow/tools/bazel.rc\r\nINFO: Invocation ID: 2e76455c-b877-4561-85f0-7a34a9337adc\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/python/BUILD:2985:1: in py_library rule //tensorflow/python:standard_ops: target '//tensorflow/python:standard_ops' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/python/BUILD:76:1: in py_library rule //tensorflow/python:no_contrib: target '//tensorflow/python:no_contrib' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/metrics/BUILD:16:1: in py_library rule //tensorflow/contrib/metrics:metrics_py: target '//tensorflow/contrib/metrics:metrics_py' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/gan/BUILD:136:1: in py_library rule //tensorflow/contrib/gan:losses_impl: target '//tensorflow/contrib/gan:losses_impl' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/python/ops/distributions:distributions': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.distributions will not receive new features, and will be removed by early 2019. You should update all usage of `tf.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/bayesflow/BUILD:17:1: in py_library rule //tensorflow/contrib/bayesflow:bayesflow_py: target '//tensorflow/contrib/bayesflow:bayesflow_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:233:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:76:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/timeseries/python/timeseries/BUILD:356:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries:ar_model: target '//tensorflow/contrib/timeseries/python/timeseries:ar_model' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /Users/geri/Documents/tensorflow/tensorflow/contrib/BUILD:13:1: in py_library rule //tensorflow/contrib:contrib_py: target '//tensorflow/contrib:contrib_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nINFO: Analysed target //tensorflow/python/tools:saved_model_cli (0 packages loaded, 0 targets configured).\r\nINFO: Found 1 target...\r\nINFO: From ProtoCompile external/protobuf_archive/python/google/protobuf/any_pb2.py [for host]:\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/example/example_pb2.py [for host]:\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nINFO: From Compiling tensorflow/core/framework/function.cc [for host]:\r\ntensorflow/core/framework/function.cc:1107:18: warning: reading variable 'function_defs_' requires holding mutex 'clone.mu_' [-Wthread-safety-precise]\r\n  for (auto iter : clone.function_defs_) {\r\n                 ^\r\ntensorflow/core/framework/function.cc:1107:18: note: found near match 'mu_'\r\ntensorflow/core/framework/function.cc:1107:18: warning: reading variable 'function_defs_' requires holding mutex 'clone.mu_' [-Wthread-safety-precise]\r\n  for (auto iter : clone.function_defs_) {\r\n                 ^\r\ntensorflow/core/framework/function.cc:1107:18: note: found near match 'mu_'\r\ntensorflow/core/framework/function.cc:1117:18: warning: reading variable 'func_grad_' requires holding mutex 'clone.mu_' [-Wthread-safety-precise]\r\n  for (auto iter : clone.func_grad_) {\r\n                 ^\r\ntensorflow/core/framework/function.cc:1117:18: note: found near match 'mu_'\r\ntensorflow/core/framework/function.cc:1117:18: warning: reading variable 'func_grad_' requires holding mutex 'clone.mu_' [-Wthread-safety-precise]\r\n  for (auto iter : clone.func_grad_) {\r\n                 ^\r\ntensorflow/core/framework/function.cc:1117:18: note: found near match 'mu_'\r\n4 warnings generated.\r\nINFO: From Compiling tensorflow/core/util/example_proto_fast_parsing.cc [for host]:\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:77:15: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n    *result = SparseTensor(ix, vals, shape, order);\r\n              ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:77:15: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n    *result = SparseTensor(ix, vals, shape, order);\r\n              ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:132:9: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n      : SparseTensor(other.ix_, other.vals_, other.shape_, other.order_) {}\r\n        ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:135:9: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n      : SparseTensor(std::move(other.ix_), std::move(other.vals_),\r\n        ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:568:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_ix, output_vals, final_shape, final_order);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:568:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_ix, output_vals, final_shape, final_order);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:726:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_indices, output_values, output_shape);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:99:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_fast_parsing.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_fast_parsing.h:32:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:726:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_indices, output_values, output_shape);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:99:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\n8 warnings generated.\r\nINFO: From Compiling tensorflow/core/util/strided_slice_op.cc [for host]:\r\ntensorflow/core/util/strided_slice_op.cc:275:33: warning: lambda capture 'i' is not used [-Wunused-lambda-capture]\r\n    auto canonical = [stride_i, i, dim_i, masks, valid_range](int64 x, int c) {\r\n                                ^\r\n1 warning generated.\r\nINFO: From Compiling tensorflow/core/framework/dataset.cc [for host]:\r\nIn file included from tensorflow/core/framework/dataset.cc:15:\r\nIn file included from ./tensorflow/core/framework/dataset.h:27:\r\n./tensorflow/core/framework/model.h:235:13: warning: writing variable 'buffered_bytes_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->buffered_bytes_ = buffered_bytes_;\r\n            ^\r\n./tensorflow/core/framework/model.h:235:13: note: found near match 'mu_'\r\n./tensorflow/core/framework/model.h:236:13: warning: writing variable 'processing_time_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->processing_time_ = processing_time_;\r\n            ^\r\n./tensorflow/core/framework/model.h:236:13: note: found near match 'mu_'\r\n./tensorflow/core/framework/model.h:237:13: warning: writing variable 'num_elements_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->num_elements_ = num_elements_;\r\n            ^\r\n./tensorflow/core/framework/model.h:237:13: note: found near match 'mu_'\r\n./tensorflow/core/framework/model.h:238:13: warning: writing variable 'parameters_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->parameters_ = parameters_;\r\n            ^\r\n./tensorflow/core/framework/model.h:238:13: note: found near match 'mu_'\r\n4 warnings generated.\r\nINFO: From Compiling tensorflow/core/util/example_proto_helper.cc [for host]:\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:77:15: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n    *result = SparseTensor(ix, vals, shape, order);\r\n              ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:77:15: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n    *result = SparseTensor(ix, vals, shape, order);\r\n              ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:132:9: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n      : SparseTensor(other.ix_, other.vals_, other.shape_, other.order_) {}\r\n        ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:135:9: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n      : SparseTensor(std::move(other.ix_), std::move(other.vals_),\r\n        ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:568:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_ix, output_vals, final_shape, final_order);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:568:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_ix, output_vals, final_shape, final_order);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:113:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:726:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_indices, output_values, output_shape);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:99:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\nIn file included from tensorflow/core/util/example_proto_helper.cc:15:\r\nIn file included from ./tensorflow/core/util/example_proto_helper.h:31:\r\n./tensorflow/core/util/sparse/sparse_tensor.h:726:10: warning: 'SparseTensor' is deprecated: Use Create() functions instead of constructors directly. [-Wdeprecated-declarations]\r\n  return SparseTensor(output_indices, output_values, output_shape);\r\n         ^\r\n./tensorflow/core/util/sparse/sparse_tensor.h:99:3: note: 'SparseTensor' has been explicitly marked deprecated here\r\n  ABSL_DEPRECATED(\"Use Create() functions instead of constructors directly.\")\r\n  ^\r\nexternal/com_google_absl/absl/base/macros.h:149:49: note: expanded from macro 'ABSL_DEPRECATED'\r\n#define ABSL_DEPRECATED(message) __attribute__((deprecated(message)))\r\n                                                ^\r\n8 warnings generated.\r\nINFO: From Compiling tensorflow/core/framework/model.cc [for host]:\r\nIn file included from tensorflow/core/framework/model.cc:16:\r\n./tensorflow/core/framework/model.h:235:13: warning: writing variable 'buffered_bytes_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->buffered_bytes_ = buffered_bytes_;\r\n            ^\r\n./tensorflow/core/framework/model.h:235:13: note: found near match 'mu_'\r\n./tensorflow/core/framework/model.h:236:13: warning: writing variable 'processing_time_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->processing_time_ = processing_time_;\r\n            ^\r\n./tensorflow/core/framework/model.h:236:13: note: found near match 'mu_'\r\n./tensorflow/core/framework/model.h:237:13: warning: writing variable 'num_elements_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->num_elements_ = num_elements_;\r\n            ^\r\n./tensorflow/core/framework/model.h:237:13: note: found near match 'mu_'\r\n./tensorflow/core/framework/model.h:238:13: warning: writing variable 'parameters_' requires holding mutex 'result->mu_' exclusively [-Wthread-safety-precise]\r\n    result->parameters_ = parameters_;\r\n            ^\r\n./tensorflow/core/framework/model.h:238:13: note: found near match 'mu_'\r\n4 warnings generated.\r\nINFO: From ProtoCompile tensorflow/core/grappler/costs/op_performance_data_pb2.py [for host]:\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nexternal/protobuf_archive/python: warning: directory does not exist.\r\nINFO: From Linking tensorflow/core/liblib_internal_impl.a [for host]:\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: warning same member name (env.o) in output file used for input files: bazel-out/host/bin/tensorflow/core/_objs/lib_internal_impl/0/env.o and: bazel-out/host/bin/tensorflow/core/_objs/lib_internal_impl/1/env.o (due to use of basename, truncation, blank padding or duplicate input files)\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: warning same member name (tracing.o) in output file used for input files: bazel-out/host/bin/tensorflow/core/_objs/lib_internal_impl/0/tracing.o and: bazel-out/host/bin/tensorflow/core/_objs/lib_internal_impl/1/tracing.o (due to use of basename, truncation, blank padding or duplicate input files)\r\n/Library/Developer/CommandLineTools/usr/bin/libtool: file: bazel-out/host/bin/tensorflow/core/_objs/lib_internal_impl/android_armv7a_cpu_utils_helper.o has no symbols\r\nERROR: /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/external/flatbuffers/BUILD.bazel:99:1: C++ compilation of rule '@flatbuffers//:flatc' failed (Exit 1) sandbox-exec failed: error executing command \r\n  (cd /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/Users/geri/.pyenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/local/go/bin:/Users/geri/intelligence/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    TMPDIR=/var/folders/7t/9l0n105n4_jbrq076r887pthz96c2m/T/ \\\r\n  /usr/bin/sandbox-exec -f /private/var/tmp/_bazel_geri/af336600bf091f11bdb6522728b81044/sandbox/darwin-sandbox/381/sandbox.sb /var/tmp/_bazel_geri/install/c71a8bada5761bf76ced20ca6672b491/_embedded_binaries/process-wrapper '--timeout=0' '--kill_delay=15' external/local_config_cc/cc_wrapper.sh -U_FORTIFY_SOURCE -fstack-protector -Wall -Wthread-safety -Wself-assign -fcolor-diagnostics -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-std=c++0x' -MD -MF bazel-out/host/bin/external/flatbuffers/_objs/flatc/idl_gen_grpc.d '-frandom-seed=bazel-out/host/bin/external/flatbuffers/_objs/flatc/idl_gen_grpc.o' -iquote external/flatbuffers -iquote bazel-out/host/genfiles/external/flatbuffers -iquote bazel-out/host/bin/external/flatbuffers -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -iquote bazel-out/host/bin/external/bazel_tools -isystem external/flatbuffers/grpc -isystem bazel-out/host/genfiles/external/flatbuffers/grpc -isystem bazel-out/host/bin/external/flatbuffers/grpc -isystem external/flatbuffers/include -isystem bazel-out/host/genfiles/external/flatbuffers/include -isystem bazel-out/host/bin/external/flatbuffers/include -g0 -g0 -Wno-implicit-fallthrough -fexceptions -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c external/flatbuffers/src/idl_gen_grpc.cpp -o bazel-out/host/bin/external/flatbuffers/_objs/flatc/idl_gen_grpc.o)\r\nexternal/flatbuffers/src/idl_gen_grpc.cpp:57:21: error: no member named 'doc_comment' in 'flatbuffers::RPCCall'; did you mean 'rpc_comment'?\r\n    return method_->doc_comment;\r\n                    ^~~~~~~~~~~\r\n                    rpc_comment\r\n/usr/local/include/flatbuffers/idl.h:349:28: note: 'rpc_comment' declared here\r\n  std::vector<std::string> rpc_comment;\r\n                           ^\r\nexternal/flatbuffers/src/idl_gen_grpc.cpp:174:9: error: use of undeclared identifier 'FLATBUFFERS_ASSERT'\r\n        FLATBUFFERS_ASSERT(indent_ >= 0);\r\n        ^\r\n2 errors generated.\r\nTarget //tensorflow/python/tools:saved_model_cli failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 166.831s, Critical Path: 93.66s\r\nINFO: 379 processes: 378 darwin-sandbox, 1 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nbazel version:\r\n```\r\nbazel version\r\nWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\n/Users/geri/Documents/tensorflow/tools/bazel.rc\r\nINFO: Invocation ID: 143fe03e-0926-4e69-9516-0e132c8ed3b5\r\nBuild label: 0.20.0\r\nBuild target: bazel-out/darwin-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Fri Nov 30 14:38:25 2018 (1543588705)\r\nBuild timestamp: 1543588705\r\nBuild timestamp as int: 1543588705\r\n```\r\n\r\nosx version:\r\n```\r\n10.14.2 (18C54)\r\n```\r\n\r\nPython version:\r\n```\r\n$ python3 --version\r\nPython 3.6.0\r\n```\r\n\r\ntensorflow version:\r\n```\r\n$ pip3 install --upgrade tensorflow\r\nRequirement already up-to-date: tensorflow in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (1.12.0)\r\nRequirement already satisfied, skipping upgrade: gast>=0.2.0 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (0.2.0)\r\nRequirement already satisfied, skipping upgrade: six>=1.10.0 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.11.0)\r\nRequirement already satisfied, skipping upgrade: astor>=0.6.0 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (0.7.1)\r\nRequirement already satisfied, skipping upgrade: absl-py>=0.1.6 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (0.6.1)\r\nRequirement already satisfied, skipping upgrade: grpcio>=1.8.6 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.17.0)\r\nRequirement already satisfied, skipping upgrade: wheel>=0.26 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (0.32.3)\r\nRequirement already satisfied, skipping upgrade: keras-applications>=1.0.6 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.0.6)\r\nRequirement already satisfied, skipping upgrade: keras-preprocessing>=1.0.5 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.0.5)\r\nRequirement already satisfied, skipping upgrade: protobuf>=3.6.1 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (3.6.1)\r\nRequirement already satisfied, skipping upgrade: numpy>=1.13.3 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.14.5)\r\nRequirement already satisfied, skipping upgrade: tensorboard<1.13.0,>=1.12.0 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.12.0)\r\nRequirement already satisfied, skipping upgrade: termcolor>=1.1.0 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorflow) (1.1.0)\r\nRequirement already satisfied, skipping upgrade: h5py in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from keras-applications>=1.0.6->tensorflow) (2.8.0)\r\nRequirement already satisfied, skipping upgrade: setuptools in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from protobuf>=3.6.1->tensorflow) (28.8.0)\r\nRequirement already satisfied, skipping upgrade: werkzeug>=0.11.10 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorboard<1.13.0,>=1.12.0->tensorflow) (0.14.1)\r\nRequirement already satisfied, skipping upgrade: markdown>=2.6.8 in /Users/geri/.pyenv/versions/3.6.0/lib/python3.6/site-packages (from tensorboard<1.13.0,>=1.12.0->tensorflow) (3.0.1)\r\n```\r\n\r\ngcc version:\r\n```\r\n$ gcc --version\r\nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\r\nApple LLVM version 10.0.0 (clang-1000.10.44.4)\r\nTarget: x86_64-apple-darwin18.2.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n```\r\n\r\ng++ version:\r\n```\r\nMM-MAC-3270:tensorflow gstanje$ g++ --version\r\nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\r\nApple LLVM version 10.0.0 (clang-1000.10.44.4)\r\nTarget: x86_64-apple-darwin18.2.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24205", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24205/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24205/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24205/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24205", "id": 388348856, "node_id": "MDU6SXNzdWUzODgzNDg4NTY=", "number": 24205, "title": "Hard arbitrary limit on Saved model size", "user": {"login": "blair0011", "id": 1813085, "node_id": "MDQ6VXNlcjE4MTMwODU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1813085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blair0011", "html_url": "https://github.com/blair0011", "followers_url": "https://api.github.com/users/blair0011/followers", "following_url": "https://api.github.com/users/blair0011/following{/other_user}", "gists_url": "https://api.github.com/users/blair0011/gists{/gist_id}", "starred_url": "https://api.github.com/users/blair0011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blair0011/subscriptions", "organizations_url": "https://api.github.com/users/blair0011/orgs", "repos_url": "https://api.github.com/users/blair0011/repos", "events_url": "https://api.github.com/users/blair0011/events{/privacy}", "received_events_url": "https://api.github.com/users/blair0011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-06T18:52:11Z", "updated_at": "2018-12-28T22:55:38Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Both\r\n- TensorFlow version (use command below): 1.10+\r\n- Python version: N/A\r\n- Bazel version (if compiling from source): 17.2\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n**Describe the current behavior**\r\nI am trying to load a 1.4GiB binary saved model and am getting an error saying that the protobuf message is too big i.e. over 1GiB\r\n\r\n**Describe the expected behavior**\r\nCurrent default limits for protobuf messages loaded by a CodedInputStream are 2GiB so my model should load without error.\r\n\r\n**Code to reproduce the issue**\r\n\r\nComment out line 503 in env.cc:\r\n//coded_stream.SetTotalBytesLimit(1024LL << 20, 512LL << 20);\r\nrebuild and everything works as expected. \r\n\r\n**Other info / logs**\r\n\r\nAlso the second parameter to SetTotalBytesLimit has been deprecated and is no longer enforced. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24204", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24204/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24204/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24204/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24204", "id": 388335250, "node_id": "MDU6SXNzdWUzODgzMzUyNTA=", "number": 24204, "title": "Spurious syntax highlighting of code blocks in site documentation", "user": {"login": "colinmorris", "id": 695907, "node_id": "MDQ6VXNlcjY5NTkwNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/695907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colinmorris", "html_url": "https://github.com/colinmorris", "followers_url": "https://api.github.com/users/colinmorris/followers", "following_url": "https://api.github.com/users/colinmorris/following{/other_user}", "gists_url": "https://api.github.com/users/colinmorris/gists{/gist_id}", "starred_url": "https://api.github.com/users/colinmorris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colinmorris/subscriptions", "organizations_url": "https://api.github.com/users/colinmorris/orgs", "repos_url": "https://api.github.com/users/colinmorris/repos", "events_url": "https://api.github.com/users/colinmorris/events{/privacy}", "received_events_url": "https://api.github.com/users/colinmorris/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-12-06T18:13:25Z", "updated_at": "2018-12-19T20:54:25Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: N/A\r\n- Doc Link: Various, but see for example [/community/documentation](https://www.tensorflow.org/community/documentation), [/guide/debugger](https://www.tensorflow.org/guide/debugger), or [/guide/datasets_for_estimators](https://www.tensorflow.org/guide/datasets_for_estimators)\r\n\r\n\r\n**Describe the documentation issue**\r\nMany of the code blocks in [this guide on Writing Tensorflow Documentation](https://www.tensorflow.org/community/documentation#description_of_the_docstring_sections) are meant to represent markdown, but they're syntax highlighted as... something else. e.g. the word \"from\" is highlighted as if it were a keyword in:\r\n```\r\nFlips an image horizontally from left to right.\r\n```\r\n\r\nThese blocks should either have no syntax highlighting, or markdown syntax highlighting (if the library you're using for syntax highlighting allows it).\r\n\r\nIn some cases, authors have explicitly used a language identifier of 'none' in fenced code blocks, presumably to try to suppress syntax highlighting, but it doesn't look like that's respected when rendering. For example, the first two code blocks in [/guide/debugger](https://www.tensorflow.org/guide/debugger) are tagged 'none' in [the corresponding md file](https://github.com/tensorflow/docs/blob/master/site/en/guide/debugger.md), but the \"Accuracy at step...\" block is still lit up like a Christmas tree.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nI wish I could, but as far as I can tell, the markdown -> html part of the docs pipeline isn't part of any public repo. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24198", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24198/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24198/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24198/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24198", "id": 388239228, "node_id": "MDU6SXNzdWUzODgyMzkyMjg=", "number": 24198, "title": "TextLineDataset supporting start/end file positions", "user": {"login": "chenjiasheng", "id": 15082389, "node_id": "MDQ6VXNlcjE1MDgyMzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/15082389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenjiasheng", "html_url": "https://github.com/chenjiasheng", "followers_url": "https://api.github.com/users/chenjiasheng/followers", "following_url": "https://api.github.com/users/chenjiasheng/following{/other_user}", "gists_url": "https://api.github.com/users/chenjiasheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenjiasheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenjiasheng/subscriptions", "organizations_url": "https://api.github.com/users/chenjiasheng/orgs", "repos_url": "https://api.github.com/users/chenjiasheng/repos", "events_url": "https://api.github.com/users/chenjiasheng/events{/privacy}", "received_events_url": "https://api.github.com/users/chenjiasheng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-12-06T14:32:00Z", "updated_at": "2019-01-03T18:27:53Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.11.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWhen constructing a text dataset pipeline, we often want to extract text lines from part of a large text file, instead of from the whole file. For example, \r\n\r\n- using 99% lines at the head of a large file as train set and the remaining 1% as valid set.\r\n\r\n- when training a model in parallel on multiple GPUs or nodes, we want to split large text files into equal-lengthed parts for each GPU to train one part of them.\r\n\r\nTraditionally, to achieve this goal we have to do file operations such as splitting, copying and renaming. These operations are tedious, error-pruning and cost more disk space and time. It also messes up directory/file structures. More over, it is hard to share between different environments with different count of GPUs/nodes, or with different text file set.\r\nHere I have created a `TextLineBlockDataset` op kernel as well as a python `dataset_ops.Dataset` by mimicking `TextLineDataset`. `TextLineBlockDataset` uses a [begin_offset, end_offset) range to mark a block of a text file, freeing one from tedious file splitting preparations.\r\n\r\nThis is the registration of the dataset op:\r\n```\r\nREGISTER_OP(\"TextLineBlockDataset\")\r\n    .Input(\"filenames: string\")\r\n    .Input(\"begin_offsets: int64\")\r\n    .Input(\"end_offsets: int64\")\r\n    .Input(\"buffer_size: int64\")\r\n    .Output(\"handle: variant\")\r\n    .SetIsStateful()  // TODO(b/65524810): Source dataset ops must be marked\r\n        // stateful to inhibit constant folding.\r\n    .SetShapeFn([](shape_inference::InferenceContext* c) {\r\n      shape_inference::ShapeHandle unused;\r\n      TF_RETURN_IF_ERROR(c->WithRankAtMost(c->input(0), 1, &unused));\r\n      TF_RETURN_IF_ERROR(c->WithRankAtMost(c->input(1), 1, &unused));\r\n      TF_RETURN_IF_ERROR(c->WithRankAtMost(c->input(2), 1, &unused));\r\n      TF_RETURN_IF_ERROR(c->WithRank(c->input(3), 0, &unused));\r\n      return shape_inference::ScalarShape(c);\r\n    });\r\n```\r\nand the python API interface to it:\r\n```\r\n@tf_export(\"data.TextLineBlockDataset\")\r\nclass TextLineBlockDataset(dataset_ops.Dataset):\r\n    \"\"\"A `Dataset` comprising lines from one or more text file blocks.\"\"\"\r\n\r\n    def __init__(self, filenames, begin_offsets, end_offsets, buffer_size=None):\r\n        \"\"\"Creates a `TextLineBlockDataset`.\r\n        An element in zip(filenames, begin_offsets, end_offsets) denotes a text\r\n        file block in file filename, beginning at begin_offset and ends at\r\n        end_offset, in byte.\r\n        `begin_offsets` and `end_offsets` will be smoothed to match text line\r\n        boundaries under the hood.\r\n\r\n        Args:\r\n          filenames: A `tf.string` tensor containing one or more filenames.\r\n          begin_offsets: A `tf.int64` 1-d tensor denoting begin offsets.\r\n          end_offsets: A `tf.int64` 1-d tensor denoting end offsets.\r\n          buffer_size: (Optional.) A `tf.int64` scalar denoting the number of bytes\r\n            to buffer for each block, for each block. A value of 0 results in the \r\n            default values chosen on the compression type.\r\n        \"\"\"\r\n```\r\n\r\nThis is how I use it:\r\nSuppose I have 3 large text files, I want to extract text lines ranging from ratio 2/4 to 3/4 of each text file. Each text file block will be split into 8 smaller blocks for better shuffle effect.\r\n```\r\nif __name__ == '__main__':\r\n    filenames = [\"data/train.txt\", \"data/dev.txt\", \"data/test.txt\"]\r\n    n_files = len(filenames)\r\n    # this is the 2nd of the 4 towers which consumes range 2/4 ~ 3/4 text lines of each file\r\n    n_towers, tower_id = 4, 2\r\n    n_splits = 8    # each range will be further split into 8 parts for better shuffle\r\n    buffer_size = 256 * 1024\r\n\r\n    block_params = []\r\n    for file_id in range(n_files):\r\n        file_size = os.path.getsize(filenames[file_id])\r\n        split_size = file_size / (n_towers * n_splits)\r\n        for split_id in range(n_splits):\r\n            begin_offset = int(split_size * (tower_id * n_splits + split_id))\r\n            end_offset = int(split_size * (tower_id * n_splits + split_id + 1))\r\n            block_params.append((filenames[file_id], begin_offset, end_offset))\r\n    dataset = TextLineBlockDataset(*zip(*block_params), buffer_size)\r\n    dataset = dataset.shuffle(32000)  # shuffle in the same manner as `TextLineDataset`\r\n    get_next = dataset.make_one_shot_iterator().get_next()\r\n\r\n    sess = tf.Session()\r\n    while True:\r\n        try:\r\n            print(sess.run(get_next).decode(\"utf-8\"))\r\n        except tf.errors.OutOfRangeError:\r\n            break\r\n```\r\n\r\n**Will this change the current api? How?**\r\nYes.\r\nA new dataset op kernal will be registered in the C++ side, and a corresponding python \r\nclass tf.data.TextLineBlockDataset will be added.\r\n\r\n**Who will benefit with this feature?**\r\nTensorflow users who deal with large text files.\r\n\r\n**Any Other info.**\r\n@mrry @eaplatanios @rachellim\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24192", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24192/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24192/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24192/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24192", "id": 388125335, "node_id": "MDU6SXNzdWUzODgxMjUzMzU=", "number": 24192, "title": "Add tf.metrics.std or tf.metrics.var", "user": {"login": "EmanueleGhelfi", "id": 16719271, "node_id": "MDQ6VXNlcjE2NzE5Mjcx", "avatar_url": "https://avatars0.githubusercontent.com/u/16719271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EmanueleGhelfi", "html_url": "https://github.com/EmanueleGhelfi", "followers_url": "https://api.github.com/users/EmanueleGhelfi/followers", "following_url": "https://api.github.com/users/EmanueleGhelfi/following{/other_user}", "gists_url": "https://api.github.com/users/EmanueleGhelfi/gists{/gist_id}", "starred_url": "https://api.github.com/users/EmanueleGhelfi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EmanueleGhelfi/subscriptions", "organizations_url": "https://api.github.com/users/EmanueleGhelfi/orgs", "repos_url": "https://api.github.com/users/EmanueleGhelfi/repos", "events_url": "https://api.github.com/users/EmanueleGhelfi/events{/privacy}", "received_events_url": "https://api.github.com/users/EmanueleGhelfi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-06T09:28:01Z", "updated_at": "2019-12-13T07:38:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Maybe, it depends on the complexity\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently the module tf.metrics does not contain tf.metrics.std or tf.metrics.var for the calculation of standard deviation and variance over multiple batches, respectively. It would be very useful to have these type of metrics.\r\n\r\n**Will this change the current api? How?**\r\nThis will change the current api by adding two more apis: tf.metrics.std  and  tf.metrics.var\r\n\r\n**Who will benefit with this feature?**\r\nEveryone who wants to calculate statistics over multiple batches.\r\n\r\n**Any Other info.**\r\nCurrently it is possible to use tf.nn.moments and perform some basic math in order to calculate the std over multiple batches. However tf.metrics is a simple way to obtain the same result."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24188", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24188/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24188/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24188/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24188", "id": 388078571, "node_id": "MDU6SXNzdWUzODgwNzg1NzE=", "number": 24188, "title": "LSTM's .h5 to .tflite", "user": {"login": "JamesZhangjp", "id": 26106078, "node_id": "MDQ6VXNlcjI2MTA2MDc4", "avatar_url": "https://avatars0.githubusercontent.com/u/26106078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JamesZhangjp", "html_url": "https://github.com/JamesZhangjp", "followers_url": "https://api.github.com/users/JamesZhangjp/followers", "following_url": "https://api.github.com/users/JamesZhangjp/following{/other_user}", "gists_url": "https://api.github.com/users/JamesZhangjp/gists{/gist_id}", "starred_url": "https://api.github.com/users/JamesZhangjp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JamesZhangjp/subscriptions", "organizations_url": "https://api.github.com/users/JamesZhangjp/orgs", "repos_url": "https://api.github.com/users/JamesZhangjp/repos", "events_url": "https://api.github.com/users/JamesZhangjp/events{/privacy}", "received_events_url": "https://api.github.com/users/JamesZhangjp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-12-06T06:46:54Z", "updated_at": "2019-05-27T05:54:45Z", "closed_at": null, "author_association": "NONE", "body": "thanks for your reading.\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (use command below):1.12.0\r\n- Python version:3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the problem**\r\n1.used the tf.keras to train the LSTM's model, and get the model.h5 file.\r\n2.want convert the .h5 file to .tflite file ,and coded:\r\n```\r\nconverter = tf.lite.TFLiteConverter.from_keras_model_file(\"model.h5\")\r\ntflite_model = converter.convert()\r\nopen(\"_model.tflite\", \"wb\").write(tflite_model)\r\n```\r\nand get the error:\r\n```\r\nWARNING:tensorflow:From D:\\python\\python3\\lib\\site-packages\\tensorflow\\python\\framework\\graph_util_impl.py:245: extract_sub_graph (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.compat.v1.graph_util.extract_sub_graph\r\nTraceback (most recent call last):\r\n  File \"D:/code/load_forecast/test/test1.py\", line 5, in <module>\r\n    tflite_model = converter.convert()\r\n  File \"D:\\python\\python3\\lib\\site-packages\\tensorflow\\lite\\python\\lite.py\", line 456, in convert\r\n    **converter_kwargs)\r\n  File \"D:\\python\\python3\\lib\\site-packages\\tensorflow\\lite\\python\\convert.py\", line 397, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"D:\\python\\python3\\lib\\site-packages\\tensorflow\\lite\\python\\convert.py\", line 172, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2018-12-06 13:41:26.456495: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: TensorArrayV3\r\n.........\r\n2018-12-06 13:41:26.495220: I tensorflow/lite/toco/import_tensorflow.cc:1329] Unable to determine output type for op: TensorArrayGatherV3\r\n2018-12-06 13:41:26.506452: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 120 operators, 212 arrays (0 quantized)\r\n2018-12-06 13:41:26.508258: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 120 operators, 212 arrays (0 quantized)\r\n2018-12-06 13:41:26.513681: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 106 operators, 194 arrays (0 quantized)\r\n2018-12-06 13:41:26.515613: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 106 operators, 194 arrays (0 quantized)\r\n2018-12-06 13:41:26.517624: F tensorflow/lite/toco/tooling_util.cc:625] Check failed: dim >= 1 (0 vs. 1)\r\n```\r\n3.but success to convert the linear's and cnn's .h5 file to .tflite \r\n\r\nwant to ask the question: Did someone successfully transform the .h5 model to .tflite?\r\n\r\nlook forward to your answer."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24181", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24181/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24181/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24181/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24181", "id": 387876551, "node_id": "MDU6SXNzdWUzODc4NzY1NTE=", "number": 24181, "title": "tf.image (CLAHE) contrast limited adaptive histogram equalization.", "user": {"login": "Ouwen", "id": 5455421, "node_id": "MDQ6VXNlcjU0NTU0MjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5455421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ouwen", "html_url": "https://github.com/Ouwen", "followers_url": "https://api.github.com/users/Ouwen/followers", "following_url": "https://api.github.com/users/Ouwen/following{/other_user}", "gists_url": "https://api.github.com/users/Ouwen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ouwen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ouwen/subscriptions", "organizations_url": "https://api.github.com/users/Ouwen/orgs", "repos_url": "https://api.github.com/users/Ouwen/repos", "events_url": "https://api.github.com/users/Ouwen/events{/privacy}", "received_events_url": "https://api.github.com/users/Ouwen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-05T17:58:26Z", "updated_at": "2019-02-25T10:54:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n`tf.image.clahe` would perform contrast limited adapative histogram equalization to enhance images natively on the tensorflow graph.\r\n\r\n**Will this change the current api? How?**\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\nThose that want to run image processing natively on tensorflow ops.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24179", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24179/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24179/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24179/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24179", "id": 387852413, "node_id": "MDU6SXNzdWUzODc4NTI0MTM=", "number": 24179, "title": "[Feature Request] Batch size scheduler to speed up training", "user": {"login": "felipheggaliza", "id": 17837233, "node_id": "MDQ6VXNlcjE3ODM3MjMz", "avatar_url": "https://avatars3.githubusercontent.com/u/17837233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/felipheggaliza", "html_url": "https://github.com/felipheggaliza", "followers_url": "https://api.github.com/users/felipheggaliza/followers", "following_url": "https://api.github.com/users/felipheggaliza/following{/other_user}", "gists_url": "https://api.github.com/users/felipheggaliza/gists{/gist_id}", "starred_url": "https://api.github.com/users/felipheggaliza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/felipheggaliza/subscriptions", "organizations_url": "https://api.github.com/users/felipheggaliza/orgs", "repos_url": "https://api.github.com/users/felipheggaliza/repos", "events_url": "https://api.github.com/users/felipheggaliza/events{/privacy}", "received_events_url": "https://api.github.com/users/felipheggaliza/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-05T16:58:02Z", "updated_at": "2019-01-10T21:44:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes, but never contributed on TensorFlow code before.\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nI am looking for a batch size scheduler. Some recent papers like this one from Google (https://openreview.net/pdf?id=B1Yy1BxCZ) show that increasing batch size during training may have the same impact as decreasing the learning rate on validation accuracy. The advantage of increasing the batch size during training is that it requires less iterations per epoch, therefore reducing training time.\r\n\r\n**Will this change the current api? How?**\r\nNot sure.\r\n\r\n**Who will benefit with this feature?**\r\nEveryone in the TensorFlow community which are willing to train Neural Networks faster.\r\n\r\n**Any Other info.**\r\n\r\n**Reference paper:** *Don't Decay the Learning Rate, Increase the Batch Size \r\nSamuel L. Smith, Pieter-Jan Kindermans, Chris Ying, Quoc V. Le*\r\nLink: https://openreview.net/pdf?id=B1Yy1BxCZ "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24155", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24155/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24155/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24155/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24155", "id": 387520230, "node_id": "MDU6SXNzdWUzODc1MjAyMzA=", "number": 24155, "title": "InfeedEnqueueTuple placed on TPU device blocks indefinitely", "user": {"login": "Keno", "id": 1291671, "node_id": "MDQ6VXNlcjEyOTE2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keno", "html_url": "https://github.com/Keno", "followers_url": "https://api.github.com/users/Keno/followers", "following_url": "https://api.github.com/users/Keno/following{/other_user}", "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keno/subscriptions", "organizations_url": "https://api.github.com/users/Keno/orgs", "repos_url": "https://api.github.com/users/Keno/repos", "events_url": "https://api.github.com/users/Keno/events{/privacy}", "received_events_url": "https://api.github.com/users/Keno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}], "state": "open", "locked": false, "assignee": {"login": "rjpower", "id": 607207, "node_id": "MDQ6VXNlcjYwNzIwNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/607207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjpower", "html_url": "https://github.com/rjpower", "followers_url": "https://api.github.com/users/rjpower/followers", "following_url": "https://api.github.com/users/rjpower/following{/other_user}", "gists_url": "https://api.github.com/users/rjpower/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjpower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjpower/subscriptions", "organizations_url": "https://api.github.com/users/rjpower/orgs", "repos_url": "https://api.github.com/users/rjpower/repos", "events_url": "https://api.github.com/users/rjpower/events{/privacy}", "received_events_url": "https://api.github.com/users/rjpower/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rjpower", "id": 607207, "node_id": "MDQ6VXNlcjYwNzIwNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/607207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjpower", "html_url": "https://github.com/rjpower", "followers_url": "https://api.github.com/users/rjpower/followers", "following_url": "https://api.github.com/users/rjpower/following{/other_user}", "gists_url": "https://api.github.com/users/rjpower/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjpower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjpower/subscriptions", "organizations_url": "https://api.github.com/users/rjpower/orgs", "repos_url": "https://api.github.com/users/rjpower/repos", "events_url": "https://api.github.com/users/rjpower/events{/privacy}", "received_events_url": "https://api.github.com/users/rjpower/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-04T23:07:27Z", "updated_at": "2018-12-28T22:49:11Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): N/A\r\n- TensorFlow version (use command below): Cloud nightly\r\n- Python version: N/A\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: Cloud TPUv3\r\n\r\n**Describe the current behavior**\r\n\r\nThere are two documented ways to use the TPU infeed ops:\r\n1. Place them on the CPU device and set device_ordinal to the requisite device\r\n2. Place them on the TPU device and leave device_ordinal empty\r\n\r\nThe first way works fine, the second way does transfer the data to the device, but then blocks, never returning control to the client. Of note, this deadlock only happens if there is currently an op running on the TPU device (via XRTExecute, but potentially others).\r\n\r\n**Describe the expected behavior**\r\n\r\nBoth methods should work."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24148", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24148/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24148/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24148/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24148", "id": 387369750, "node_id": "MDU6SXNzdWUzODczNjk3NTA=", "number": 24148, "title": "[ppc64le] //tensorflow/lite/experimental/micro unit test fail.", "user": {"login": "wdirons", "id": 22967383, "node_id": "MDQ6VXNlcjIyOTY3Mzgz", "avatar_url": "https://avatars3.githubusercontent.com/u/22967383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wdirons", "html_url": "https://github.com/wdirons", "followers_url": "https://api.github.com/users/wdirons/followers", "following_url": "https://api.github.com/users/wdirons/following{/other_user}", "gists_url": "https://api.github.com/users/wdirons/gists{/gist_id}", "starred_url": "https://api.github.com/users/wdirons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wdirons/subscriptions", "organizations_url": "https://api.github.com/users/wdirons/orgs", "repos_url": "https://api.github.com/users/wdirons/repos", "events_url": "https://api.github.com/users/wdirons/events{/privacy}", "received_events_url": "https://api.github.com/users/wdirons/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wdirons", "id": 22967383, "node_id": "MDQ6VXNlcjIyOTY3Mzgz", "avatar_url": "https://avatars3.githubusercontent.com/u/22967383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wdirons", "html_url": "https://github.com/wdirons", "followers_url": "https://api.github.com/users/wdirons/followers", "following_url": "https://api.github.com/users/wdirons/following{/other_user}", "gists_url": "https://api.github.com/users/wdirons/gists{/gist_id}", "starred_url": "https://api.github.com/users/wdirons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wdirons/subscriptions", "organizations_url": "https://api.github.com/users/wdirons/orgs", "repos_url": "https://api.github.com/users/wdirons/repos", "events_url": "https://api.github.com/users/wdirons/events{/privacy}", "received_events_url": "https://api.github.com/users/wdirons/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wdirons", "id": 22967383, "node_id": "MDQ6VXNlcjIyOTY3Mzgz", "avatar_url": "https://avatars3.githubusercontent.com/u/22967383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wdirons", "html_url": "https://github.com/wdirons", "followers_url": "https://api.github.com/users/wdirons/followers", "following_url": "https://api.github.com/users/wdirons/following{/other_user}", "gists_url": "https://api.github.com/users/wdirons/gists{/gist_id}", "starred_url": "https://api.github.com/users/wdirons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wdirons/subscriptions", "organizations_url": "https://api.github.com/users/wdirons/orgs", "repos_url": "https://api.github.com/users/wdirons/repos", "events_url": "https://api.github.com/users/wdirons/events{/privacy}", "received_events_url": "https://api.github.com/users/wdirons/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-12-04T16:26:28Z", "updated_at": "2019-02-22T23:54:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "You can assign this issue to me, as I'm about ready to submit a PR to fix this.\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): N/A\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux ppc64le Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): commit 92854f2426c2b91f2b09831696ffebb5b793933d from Dec 4th, 2018\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.15.0\r\n- GCC/Compiler version (if compiling from source): gcc version 5.4.0 20160609 (Ubuntu/IBM 5.4.0-6ubuntu1~16.04.10)\r\n- CUDA/cuDNN version: N/A \r\n- GPU model and memory: N/A\r\n\r\n\r\n**Describe the current behavior**\r\nAll tensorflow/lite/experimental/micro unit test fail\r\nSee: https://powerci.osuosl.org/job/TensorFlow_PPC64LE_CPU_Build_and_Test/31/testReport/\r\n\r\n**Describe the expected behavior**\r\nAll unit test pass\r\n\r\n**Code to reproduce the issue**\r\nUnit test invoked by Jenkins:\r\n`./tensorflow/tools/ci_build/ci_build.sh cpu --dockerfile tensorflow/tools/ci_build/Dockerfile.cpu.ppc64le ./tensorflow/tools/ci_build/linux/ppc64le/cpu/run_py2.sh`\r\n\r\n`./tensorflow/tools/ci_build/linux/ppc64le/cpu/run_py2.sh` can be modified to just run `//tensorflow/lite/experimental/micro/...`\r\n\r\nAlso the getting started section here recreates two of the issues:\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/experimental/micro\r\n\r\n\r\n\r\n**Other info / logs**\r\nRunning the getting started example: make -f tensorflow/lite/experimental/micro/tools/make/Makefile test_micro_speech\r\n\r\nThis warning below is flagged and run the test runs it seg faults. As I understand the warning is because your not allowed to pass a string constant in this case. (It works however on x86)\r\n\r\n```\r\ng++ -O3 -DNDEBUG --std=c++11 -g -DTF_LITE_STATIC_MEMORY -I. -Itensorflow/lite/experimental/micro/tools/make/../../../../../ -Itensorflow/lite/experimental/micro/tools/make/../../../../../../ -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -I -I/usr/local/include -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_speech_test.cc -o tensorflow/lite/experimental/micro/tools/make/gen/linux_ppc64le/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_speech_test.o\r\n\r\nIn file included from tensorflow/lite/experimental/micro/examples/micro_speech/micro_speech_test.cc:22:0:\r\ntensorflow/lite/experimental/micro/examples/micro_speech/micro_speech_test.cc: In function 'int main(int, char**)':\r\n./tensorflow/lite/experimental/micro/testing/micro_test.h:95:51: warning: ISO C++ forbids converting a string constant to 'va_list {aka char*}' [-Wwrite-strings]\r\n   micro_test::reporter->Report(\"Testing %s\", #name);                       \\\r\n                                                   ^\r\ntensorflow/lite/experimental/micro/examples/micro_speech/micro_speech_test.cc:28:1: note: in expansion of macro 'TF_LITE_MICRO_TEST'\r\n TF_LITE_MICRO_TEST(TestInvoke) {\r\n ^~~~~~~~~~~~~~~~~~\r\n```\r\n\r\n\r\nFixing it and running the example: make -f tensorflow/lite/experimental/micro/tools/make/Makefile test identifies the same problem in another place:\r\n\r\n```\r\ng++ -O3 -DNDEBUG --std=c++11 -g -DTF_LITE_STATIC_MEMORY -I. -Itensorflow/lite/experimental/micro/tools/make/../../../../../ -Itensorflow/lite/experimental/micro/tools/make/../../../../../../ -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -I -I/usr/local/include -c tensorflow/lite/experimental/micro/micro_error_reporter_test.cc -o tensorflow/lite/experimental/micro/tools/make/gen/linux_ppc64le/obj/tensorflow/lite/experimental/micro/micro_error_reporter_test.o\r\ntensorflow/lite/experimental/micro/micro_error_reporter_test.cc: In function 'int main(int, char**)':\r\ntensorflow/lite/experimental/micro/micro_error_reporter_test.cc:24:56: warning: ISO C++ forbids converting a string constant to 'va_list {aka char*}' [-Wwrite-strings]\r\n   error_reporter->Report(\"~~~%s~~~\", \"ALL TESTS PASSED\");\r\n                                                        ^\r\n```\r\n\r\nFixing that allows the make test to complete, but when running inside of bazel some test still fail because they fail to compile:\r\n\r\n```\r\nERROR: ^[[0m/workspace/tensorflow/lite/experimental/micro/examples/micro_speech/BUILD:185:1: Couldn't build file tensorflow/lite/experimental/micro/examples/micro_speech/feature_provider_test_binary: Linking of rule '//tensorflow/lite/experimental/micro/examples/micro_speech:feature_provider_test_binary' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\r\n  (cd /mnt/pai/home/wdirons/tmp/tensorflow/bazel-ci_build-cache/.cache/bazel/_bazel_wdirons/eab0d61a99b6696edb3d2aff87b585e8/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda-9.2 \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cuda-9.2 \\\r\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\r\n    LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64:/usr/local/nvidia/lib:/usr/local/nvidia/lib64 \\\r\n    OMP_NUM_THREADS=1 \\\r\n    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python2 \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=3.7 \\\r\n    TF_CUDA_VERSION=9.2 \\\r\n    TF_CUDNN_VERSION=7 \\\r\n    TF_NCCL_VERSION='' \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n    TF_NEED_ROCM=0 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/ppc-opt/bin/tensorflow/lite/experimental/micro/examples/micro_speech/feature_provider_test_binary -Wl,-no-as-needed -pie -Wl,-z,relro,-z,now '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -no-canonical-prefixes -fno-canonical-system-headers -B/usr/bin -Wl,--gc-sections -Wl,@bazel-out/ppc-opt/bin/tensorflow/lite/experimental/micro/examples/micro_speech/feature_provider_test_binary-2.params)\r\n/usr/bin/ld: bazel-out/ppc-opt/bin/tensorflow/lite/experimental/micro/examples/micro_speech/libpreprocessor_reference.a(preprocessor.o): undefined reference to symbol 'cos@@GLIBC_2.17'\r\n//lib/powerpc64le-linux-gnu/libm.so.6: error adding symbols: DSO missing from command line\r\n\r\n```\r\nPassing the link option \"-lm\" resolves this error. The makefile already does this. \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24123", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24123/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24123/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24123/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24123", "id": 386755768, "node_id": "MDU6SXNzdWUzODY3NTU3Njg=", "number": 24123, "title": "Error while running sample cpp program in tensorflow", "user": {"login": "HackersSpirit", "id": 8684346, "node_id": "MDQ6VXNlcjg2ODQzNDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8684346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HackersSpirit", "html_url": "https://github.com/HackersSpirit", "followers_url": "https://api.github.com/users/HackersSpirit/followers", "following_url": "https://api.github.com/users/HackersSpirit/following{/other_user}", "gists_url": "https://api.github.com/users/HackersSpirit/gists{/gist_id}", "starred_url": "https://api.github.com/users/HackersSpirit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HackersSpirit/subscriptions", "organizations_url": "https://api.github.com/users/HackersSpirit/orgs", "repos_url": "https://api.github.com/users/HackersSpirit/repos", "events_url": "https://api.github.com/users/HackersSpirit/events{/privacy}", "received_events_url": "https://api.github.com/users/HackersSpirit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-03T10:38:59Z", "updated_at": "2019-01-02T21:56:56Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64-bit\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:No\r\n- TensorFlow installed from (source or binary):Source\r\n- TensorFlow version (use command below):r1.11\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): 0.19\r\n- GCC/Compiler version (if compiling from source):msvc 2017\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nProblem Statement:\r\nI have build tensorflow r1.11 library. During the build it was giving following error:\r\nhttps://github.com/tensorflow/tensorflow/issues/23402\r\nAs a solution to the problem i used the one of the suggested solution on the forum:\r\nbazel build --define=grpc_no_ares=true -c opt //tensorflow:libtensorflow_cc.so\r\nThe bazel is built successfully and when i try to run a sample program i get the following error:\r\n:1: error: dependent '..\\..\\..\\..\\Downloads\\tensorflow-r1.11\\bazel-tensorflow-r1.11\\external\\eigen_archive\\unsupported\\Eigen\\src\\SpecialFunctions\\arch\\CUDA\\CudaSpecialFunctions.h' does not exist.\r\nEariler i have build other version of library but this was not the issue.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24111", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24111/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24111/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24111/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24111", "id": 386631509, "node_id": "MDU6SXNzdWUzODY2MzE1MDk=", "number": 24111, "title": "Bug when passing multiple output of Lambda Layer to the Model API", "user": {"login": "Anton-Velikodnyy", "id": 30283914, "node_id": "MDQ6VXNlcjMwMjgzOTE0", "avatar_url": "https://avatars0.githubusercontent.com/u/30283914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anton-Velikodnyy", "html_url": "https://github.com/Anton-Velikodnyy", "followers_url": "https://api.github.com/users/Anton-Velikodnyy/followers", "following_url": "https://api.github.com/users/Anton-Velikodnyy/following{/other_user}", "gists_url": "https://api.github.com/users/Anton-Velikodnyy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anton-Velikodnyy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anton-Velikodnyy/subscriptions", "organizations_url": "https://api.github.com/users/Anton-Velikodnyy/orgs", "repos_url": "https://api.github.com/users/Anton-Velikodnyy/repos", "events_url": "https://api.github.com/users/Anton-Velikodnyy/events{/privacy}", "received_events_url": "https://api.github.com/users/Anton-Velikodnyy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-03T02:05:19Z", "updated_at": "2019-01-10T21:43:54Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nLinux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\nsource\r\n- TensorFlow version (use command below):\r\n1.11.0\r\n- Python version:\r\n3.6.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n5.2.0\r\n- CUDA/cuDNN version:\r\n9/7\r\n- GPU model and memory:\r\nGTX 1080, 8GB\r\n\r\n\r\n**Describe the current behavior**\r\nAttempting to receive multiple outputs from a lambda layer.  When passing them through the Model API, causes them to have an unexpected behavior. if all the outputs of that lambda layer are stored into a single variable, passing that variable as output for model fails with \r\n`AssertionError: Could not compute output Tensor...`\r\n\r\nUsing index[0] gives me behavior I would have expected when receiving with no index specified. Using index 1 or 2 gives same error as not giving an index. TLDR: index 0 gives behavior you would expect from not having an index. Index 1,2 give error same as no index \r\n**Describe the expected behavior**\r\nspecifying no index means that I am accessing a list of tensors, where as specifying an index gives me the tensor at that index.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nfrom tensorflow.python.keras.layers import Input, Lambda\r\nfrom tensorflow.python.keras.models import Model\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nins = Input([1])\r\n\r\ndef test(x):\r\n    return tf.constant(2,name='one'),tf.constant([2]),tf.constant([[2],[4]])\r\n\r\nous = Lambda(test)(ins)\r\nmodel = Model(ins,ous[0]) # changing this 0 to 1 or 2 fails, removing index also fails\r\n# model = Model(ins,ous) # FAILS\r\n# model = Model(ins,ous[1]) # FAILS\r\n\r\nnew = model(np.asarray([1]))\r\n\r\nwith tf.Session() as sess:\r\n    print(sess.run(new))  #(2, array([2], dtype=int32), array([[2], [4]], dtype=int32))\r\n```\r\n**Other info / logs**"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24105", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24105/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24105/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24105/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24105", "id": 386563425, "node_id": "MDU6SXNzdWUzODY1NjM0MjU=", "number": 24105, "title": "Add an ability to terminate tf.data.choose_from_datasets/sample_from_datasets early", "user": {"login": "eiennohito", "id": 1021694, "node_id": "MDQ6VXNlcjEwMjE2OTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1021694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eiennohito", "html_url": "https://github.com/eiennohito", "followers_url": "https://api.github.com/users/eiennohito/followers", "following_url": "https://api.github.com/users/eiennohito/following{/other_user}", "gists_url": "https://api.github.com/users/eiennohito/gists{/gist_id}", "starred_url": "https://api.github.com/users/eiennohito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eiennohito/subscriptions", "organizations_url": "https://api.github.com/users/eiennohito/orgs", "repos_url": "https://api.github.com/users/eiennohito/repos", "events_url": "https://api.github.com/users/eiennohito/events{/privacy}", "received_events_url": "https://api.github.com/users/eiennohito/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-02T14:13:22Z", "updated_at": "2018-12-28T22:12:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Don't know\r\n\r\n**Describe the feature and the current behavior/state.**\r\nPresently, choose_from_datasets terminates as soon all datasets finish. \r\nIt would be nice ho have an option to terminate as soon as *any* of datasets finish as well.\r\n\r\nSuppose you have a main dataset which you use for training and a secondary dataset you mix into your first one. They can be of completely different sizes, but you want training to terminate as soon as main dataset terminates without any regard to the secondary dataset.\r\n\r\n**Will this change the current api? How?**\r\nAdd a flag to choose_from_datasets/sample_from_datasets\r\n\r\n**Who will benefit with this feature?**\r\nUsers who write complex tf.data pipelines\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24103", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24103/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24103/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24103/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24103", "id": 386550585, "node_id": "MDU6SXNzdWUzODY1NTA1ODU=", "number": 24103, "title": "SparseTensor file format", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-02T11:24:38Z", "updated_at": "2019-01-02T21:42:46Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12+\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently there does not seem to be a way to save just a `SparseTensor`.\r\nThis is problematic as 1. the initialization of an instance can take a _long_ time 2. some models might require a constant sparse tensor. \r\n\r\nThis is further supported by the fact that the Saver class is under the `train` api.\r\n\r\nI propose a `save_variable` method under `tf.data` which can save _any_ TensorFlow native variable to a file for later retrieval.\r\n\r\nIn addition, there should be a corresponding `load_variable` method under `tf.data`. \r\n\r\nNotably, unlike TensorFlow Records, `save_variable` should require nothing more than two arguments, `file` (where to save the variable) and `var` (the variable to save) and `load_varriable` should require nothing more than `file`. \r\n\r\n_Any_ necessary information for reconstructing the variable (e.g. shape, class type) can be hashed as a header in the file.\r\n\r\n\r\nAlternatively, provide users with a serialization function so we can use `pickle` as a short term fix.\r\n\r\n**Will this change the current api? How?**\r\n\r\nIt adds 2 methods to `tf.data`\r\n\r\n**Who will benefit with this feature?**\r\n\r\nEveryone.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24079", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24079/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24079/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24079/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24079", "id": 386350433, "node_id": "MDU6SXNzdWUzODYzNTA0MzM=", "number": 24079, "title": "Inconsistent keras API regarding variable_scope", "user": {"login": "unrealwill", "id": 11304248, "node_id": "MDQ6VXNlcjExMzA0MjQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/11304248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unrealwill", "html_url": "https://github.com/unrealwill", "followers_url": "https://api.github.com/users/unrealwill/followers", "following_url": "https://api.github.com/users/unrealwill/following{/other_user}", "gists_url": "https://api.github.com/users/unrealwill/gists{/gist_id}", "starred_url": "https://api.github.com/users/unrealwill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unrealwill/subscriptions", "organizations_url": "https://api.github.com/users/unrealwill/orgs", "repos_url": "https://api.github.com/users/unrealwill/repos", "events_url": "https://api.github.com/users/unrealwill/events{/privacy}", "received_events_url": "https://api.github.com/users/unrealwill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-30T21:07:30Z", "updated_at": "2018-12-04T21:35:58Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to reuse some layers (share the weights), so I've used some variable_scope and inside I created some keras layers. For some type of layers like tf.keras.layers.Dense, the weights are shared, for others like tf.keras.layers.Embedding for example new weights are created instead of being reused.\r\n\r\nProbably similar to https://github.com/tensorflow/tensorflow/issues/20426 and https://github.com/tensorflow/tensorflow/issues/14703 \r\n\r\nCan you advise a fix as it seems variable_scope are being deprecated in TF2.0 ?\r\n\r\nThanks\r\n\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndef mlp( s ):\r\n    word_embeddings = tf.get_variable(\"we\",[3, 10])\r\n    emb = tf.nn.embedding_lookup(word_embeddings, s)\r\n    return emb\r\n\r\ndef mlpkeras( s ):\r\n    emb = tf.keras.layers.Embedding( 3, 10)(s)\r\n    return emb\r\n\r\ndef mlp2( s ):\r\n    emb = tf.keras.layers.Dense(10)(s)\r\n    return emb\r\n\r\ndef testEmbeddingTFLayer():\r\n    sess = tf.Session()\r\n    input = tf.placeholder(tf.int32, ((None,20)))\r\n\r\n    with (tf.variable_scope(\"main\", reuse=False) ):\r\n        res1 = mlp(input)\r\n\r\n    with (tf.variable_scope(\"main\", reuse=True) ):\r\n        res2 = mlp(input)\r\n\r\n    sess.run(tf.global_variables_initializer())\r\n    print(\"TestEmbeddingTFLayer :\")\r\n    print( sess.run( [tf.reduce_sum( (res1-res2)**2)] , feed_dict= {input:np.zeros((1,20)) } ) ) \r\n\r\ndef testDenseLayer():\r\n    sess = tf.Session()\r\n    input = tf.placeholder(tf.float32, ((None,20)))\r\n\r\n    with (tf.variable_scope(\"main\", reuse=False) ):\r\n        res1 = mlp2(input)\r\n\r\n    with (tf.variable_scope(\"main\", reuse=True) ):\r\n        res2 = mlp2(input)\r\n\r\n    sess.run(tf.global_variables_initializer())\r\n    print(\"TestDenseLayer : \")\r\n    print( sess.run( [tf.reduce_sum( (res1-res2)**2)] , feed_dict= {input:np.zeros((1,20)) } ) ) \r\n\r\n\r\ndef testEmbeddingKerasLayer():\r\n    sess = tf.Session()\r\n    input = tf.placeholder(tf.int32, ((None,20)))\r\n\r\n    with (tf.variable_scope(\"main\", reuse=False) ):\r\n        res1 = mlpkeras(input)\r\n\r\n    with (tf.variable_scope(\"main\", reuse=True) ):\r\n        res2 = mlpkeras(input)\r\n\r\n    sess.run(tf.global_variables_initializer())\r\n    print(\"TestEmbeddingKerasLayer :\")\r\n    print( sess.run( [tf.reduce_sum( (res1-res2)**2)] , feed_dict= {input:np.zeros((1,20)) } ) ) \r\n\r\n\r\n\r\ntestEmbeddingTFLayer() \r\ntestDenseLayer()\r\ntestEmbeddingKerasLayer()\r\n```\r\nPrints 0 , 0 , and not 0 (expecting 0)\r\n\r\n\r\n<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below):v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: CUDA Driver Version / Runtime Version          9.2 / 8.0\r\n- GPU model and memory: 1080Ti\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24076", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24076/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24076/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24076/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24076", "id": 386303187, "node_id": "MDU6SXNzdWUzODYzMDMxODc=", "number": 24076, "title": "CMake build Tensorflow C++ on Windows 10 Error : Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - failed", "user": {"login": "bluemonk482", "id": 6764450, "node_id": "MDQ6VXNlcjY3NjQ0NTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6764450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluemonk482", "html_url": "https://github.com/bluemonk482", "followers_url": "https://api.github.com/users/bluemonk482/followers", "following_url": "https://api.github.com/users/bluemonk482/following{/other_user}", "gists_url": "https://api.github.com/users/bluemonk482/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluemonk482/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluemonk482/subscriptions", "organizations_url": "https://api.github.com/users/bluemonk482/orgs", "repos_url": "https://api.github.com/users/bluemonk482/repos", "events_url": "https://api.github.com/users/bluemonk482/events{/privacy}", "received_events_url": "https://api.github.com/users/bluemonk482/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-30T18:38:39Z", "updated_at": "2018-12-05T14:27:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: the latest version\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): I am using CMake\r\n- GCC/Compiler version (if compiling from source): gcc 6.30\r\n- CUDA/cuDNN version: Installing only the CPU version\r\n- I am also using Microsoft Visual Studio Community 2017 Version 15.9.3, btw\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am following the \"Step by step Windows Build\" from https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/cmake. However, at step 3, I can't seem to pass `Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED`, which resulting failed building process. \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\nPS C:\\Users\\bw\\tensorflow\\tensorflow\\contrib\\cmake\\build> cmake .. -A x64 -Thost=x64 -DCMAKE_BUILD_TYPE=Release `\r\n>> -DSWIG_EXECUTABLE='C:\\Program Files\\swigwin-3.0.12\\swig.exe' `\r\n>> -DPYTHON_EXECUTABLE='C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python36_64\\python.exe' `\r\n>> -DPYTHON_LIBRARIES='C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python36_64\\libs\\python36.lib'\r\n-- Building for: Visual Studio 15 2017\r\nCMake Warning at CMakeLists.txt:9 (message):\r\n  Your current cmake generator is set to use 32 bit toolset architecture.\r\n  This may cause \"compiler out of heap space\" errors when building.  Consider\r\n  using the flag -Thost=x64 when running cmake.\r\n\r\n\r\n-- The C compiler identification is MSVC 19.16.27024.1\r\n-- The CXX compiler identification is MSVC 19.16.27024.1\r\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.16.27023/bin/Hostx64/x64/cl.exe\r\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.16.27023/bin/Hostx64/x64/cl.exe -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.16.27023/bin/Hostx64/x64/cl.exe\r\n-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.16.27023/bin/Hostx64/x64/cl.exe -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED\r\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - Failed\r\n-- Performing Test MSVC_OPENMP_SUPPORT\r\n-- Performing Test MSVC_OPENMP_SUPPORT - Success\r\n-- Found PythonInterp: C:/Program Files (x86)/Microsoft Visual Studio/Shared/Python36_64/python.exe (found version \"3.6.7\")\r\n-- Found PythonLibs: optimized;C:/Program Files (x86)/Microsoft Visual Studio/Shared/Python36_64/libs/python36.lib;debug;C:/Program Files (x86)/Microsoft Visual Studio/Shared/Python36_64/libs/python36_d.lib (found version \"3.6.7\")\r\n-- Found SWIG: C:/Program Files/swigwin-3.0.12/swig.exe (found version \"3.0.12\")\r\nCMake Error at tf_python.cmake:811 (string):\r\n  string sub-command REPLACE requires at least four arguments.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:583 (include)\r\n\r\n\r\nCMake Error at tf_python.cmake:812 (string):\r\n  string sub-command REPLACE requires at least four arguments.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:583 (include)\r\n\r\n\r\nCMake Error at tf_python.cmake:813 (string):\r\n  string sub-command REPLACE requires at least four arguments.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:583 (include)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"C:/Users/bw/tensorflow/tensorflow/contrib/cmake/build/CMakeFiles/CMakeOutput.log\".\r\nSee also \"C:/Users/bw/tensorflow/tensorflow/contrib/cmake/build/CMakeFiles/CMakeError.log\".\r\n```\r\n\r\n**Any other info / logs**\r\nCMakeOutput.log: https://www.dropbox.com/s/7fweyunxdbmxa1k/CMakeOutput.log?dl=0\r\nCMakeError.log: https://www.dropbox.com/s/tucx0tl6346kdpd/CMakeError.log?dl=0\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24073", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24073/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24073/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24073/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24073", "id": 386234610, "node_id": "MDU6SXNzdWUzODYyMzQ2MTA=", "number": 24073, "title": "TPU runs as slow as CPU when using keras_to_tpu_model", "user": {"login": "WangHexie", "id": 31768052, "node_id": "MDQ6VXNlcjMxNzY4MDUy", "avatar_url": "https://avatars1.githubusercontent.com/u/31768052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WangHexie", "html_url": "https://github.com/WangHexie", "followers_url": "https://api.github.com/users/WangHexie/followers", "following_url": "https://api.github.com/users/WangHexie/following{/other_user}", "gists_url": "https://api.github.com/users/WangHexie/gists{/gist_id}", "starred_url": "https://api.github.com/users/WangHexie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WangHexie/subscriptions", "organizations_url": "https://api.github.com/users/WangHexie/orgs", "repos_url": "https://api.github.com/users/WangHexie/repos", "events_url": "https://api.github.com/users/WangHexie/events{/privacy}", "received_events_url": "https://api.github.com/users/WangHexie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-30T15:30:57Z", "updated_at": "2019-06-17T15:05:08Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Custom\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): [run in colab](https://colab.research.google.com)\r\n- TensorFlow installed from (source or binary):[Pre-installed in colab](https://colab.research.google.com)\r\n- TensorFlow version (use command below):[1.12.0 Pre-installed in colab](https://colab.research.google.com)\r\n- Python version:3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0]\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: TPU\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n`v1.12.0-0-ga6d8ffae09 1.12.0`\r\n**Describe the current behavior**\r\nI use tf.contrib.tpu.keras_to_tpu_model to make my code be able to run on TPU,but it took 170 hours to finish an epoch while CPU took the same time and GPU took only 40 hours per epoch.I tried to adjust batch size but nothing changed.And I've tested the input function may take up 20% of the run time when running on GPU, so I think it's maybe not the main reason.\r\n**Describe the expected behavior**\r\nRun faster than GPU\r\n\r\n**Code to reproduce the issue**\r\nHere is my code:[https://github.com/WangHexie/DHNE/blob/master/src/hypergraph_embedding.py](https://github.com/WangHexie/DHNE/blob/master/src/hypergraph_embedding.py)\r\nRun on colab:         \r\n 1. TPU:[https://colab.research.google.com/gist/WangHexie/30c385509f9cd93be747f04c39f039a4/tpu-error.ipynb](https://colab.research.google.com/gist/WangHexie/30c385509f9cd93be747f04c39f039a4/tpu-error.ipynb)       \r\n 2. GPU\uff1a[https://colab.research.google.com/gist/WangHexie/5bfac53bf92ef0ad527f15ddbf8705e1/-gpu-ipynb.ipynb](https://colab.research.google.com/gist/WangHexie/5bfac53bf92ef0ad527f15ddbf8705e1/-gpu-ipynb.ipynb)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24047", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24047/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24047/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24047/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24047", "id": 385876191, "node_id": "MDU6SXNzdWUzODU4NzYxOTE=", "number": 24047, "title": "Major memory leak after calling `tf.estimator.DNNClassifier.train` with certain `tf.train` optimizers.", "user": {"login": "yoavz", "id": 2341691, "node_id": "MDQ6VXNlcjIzNDE2OTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2341691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoavz", "html_url": "https://github.com/yoavz", "followers_url": "https://api.github.com/users/yoavz/followers", "following_url": "https://api.github.com/users/yoavz/following{/other_user}", "gists_url": "https://api.github.com/users/yoavz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoavz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoavz/subscriptions", "organizations_url": "https://api.github.com/users/yoavz/orgs", "repos_url": "https://api.github.com/users/yoavz/repos", "events_url": "https://api.github.com/users/yoavz/events{/privacy}", "received_events_url": "https://api.github.com/users/yoavz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-11-29T18:50:59Z", "updated_at": "2019-07-31T02:54:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Reproduced on OS X and Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: not sure.\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.11 and 1.12 tested\r\n- Python version: 3.6.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: (tested on CPU)\r\n- GPU model and memory: (tested on CPU)\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nWhen using the pre-canned `DNNClassifier` together with `tf.train.RMSPropOptimizer`, I noticed that a `tf.Graph()` instance is left allocated in memory _after_ an `estimator.train()` call terminates. When running `estimator.train()` in a loop N times, there will be N `tf.Graph()` instances allocated in memory. Therefore, calling `estimator.train()` in a loop will lead to unbounded memory growth, and eventually, an OOM error.\r\n\r\nTo track down the root cause of this behaviour, I have used the [`objgraph`](https://mg.pov.lt/objgraph/) dependency together with the [`iris premade estimator`](https://github.com/tensorflow/models/blob/master/samples/core/get_started/premade_estimator.py) example. The script is attached in the code section. After 5 iterations of `train()`, the following is a visualization of all the `tf.Graph` instances that exist in memory (a total of 5):\r\n\r\n![iter-4](https://user-images.githubusercontent.com/2341691/49243825-2cc3c580-f3c3-11e8-8909-6ef4d41a1f41.png)\r\n\r\nYou can clearly see that the root cause is a `_slots` attribute on `tf.train.RMSPropOptimizer` that saves a reference to some variable associated with the graph every time `train()` runs. \r\n\r\nI have noticed this behaviour with `tf.train.AdamOptimizer`, `tf.train.RMSPropOptimizer`, and `tf.train.AdadeltaOptimizer`. I would be willing to bet that most provided optimizers that save some state in the optimization procedure run into this same issue. I have observed that this issue does _not_ occur with optimizers that _do not_ save state (see below).\r\n\r\nI would also be willing to bet that this issue is not specific to `DNNClassifier` and occurs with many different pre-canned and custom estimators. However, I have not yet investigated reproducing this issue on other types of estimators. \r\n\r\n**Describe the expected behavior**\r\nThe expected behaviour is that the `tf.Graph()` instance used by an invocation of `train()` is garbage collected by the Python GC after `train()` terminates. I've observed this expected behaviour when using `tf.train.GradientDescentOptimizer` and `tf.train.AdagradOptimizer`. \r\n\r\n**Code to reproduce the issue**\r\n[memory-leak-example.zip](https://github.com/tensorflow/tensorflow/files/2630449/memory-leak-example.zip)\r\n\r\nThe above code is a modified version of the [`iris premade estimator`](https://github.com/tensorflow/models/blob/master/samples/core/get_started/premade_estimator.py) example to loop over `train()` multiple times. It requires the [`objgraph`](https://mg.pov.lt/objgraph/) to show the peak memory growth every iteration and generate an visualization of in-memory `tf.Graph` instances. \r\n\r\nHere is an example log provided of an example invocation: `python premade_estimator.py --optimizer=rmsprop`\r\n\r\n[rmsprop.log](https://github.com/tensorflow/tensorflow/files/2630465/rmsprop.log)\r\n\r\nNote the object growth result after the 5th iteration. As can be seen, 5 `tf.Graph` instances remain in memory, along with all the `Tensor`, `TensorShape`, `Dimension`, and other objects that go along with it.\r\n```\r\nObject growth after iteration 4\r\ntuple                         82229    +14171\r\nlist                          21693     +2862\r\ndict                          24251     +2475\r\nTensorShape                    2806      +561\r\nTensor                         2775      +555\r\nOperation                      2745      +549\r\n_InputList                     2735      +547\r\nDimension                      2455      +491\r\ncell                           6487      +312\r\nfunction                      31199      +218\r\nweakref                        5083       +25\r\nVariable                         95       +19\r\nSaveSliceInfo                    90       +18\r\nset                            1409        +8\r\nCondContext                      30        +6\r\nPartitionedVariable              30        +6\r\ntype                           3077        +5\r\nbuiltin_function_or_method     3143        +4\r\nOrderedDict                      48        +1\r\nCondition                        10        +1\r\ndeque                            11        +1\r\n_local                            8        +1\r\nGraph                             5        +1\r\nGroupLock                         5        +1\r\nTraceableStack                    5        +1\r\nScopedTFGraph                     5        +1\r\n_VariableScopeStore               5        +1\r\n_VariableStore                    5        +1\r\nSaver                             5        +1\r\nTFShouldUseWarningWrapper         5        +1\r\nBulkSaverBuilder                  5        +1\r\nVariableScope                     5        +1\r\nGraph written to /var/folders/rc/_2lrng15575d3bsd9t75br840000gn/T/objgraph-sejl5tm3.dot (276 nodes)\r\nImage generated as /tmp/iter-4.png\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24046", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24046/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24046/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24046/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24046", "id": 385824410, "node_id": "MDU6SXNzdWUzODU4MjQ0MTA=", "number": 24046, "title": "Error compiling iterator_ops.cc when building from source with MSVC 2017", "user": {"login": "RugnirViking", "id": 18635337, "node_id": "MDQ6VXNlcjE4NjM1MzM3", "avatar_url": "https://avatars3.githubusercontent.com/u/18635337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RugnirViking", "html_url": "https://github.com/RugnirViking", "followers_url": "https://api.github.com/users/RugnirViking/followers", "following_url": "https://api.github.com/users/RugnirViking/following{/other_user}", "gists_url": "https://api.github.com/users/RugnirViking/gists{/gist_id}", "starred_url": "https://api.github.com/users/RugnirViking/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RugnirViking/subscriptions", "organizations_url": "https://api.github.com/users/RugnirViking/orgs", "repos_url": "https://api.github.com/users/RugnirViking/repos", "events_url": "https://api.github.com/users/RugnirViking/events{/privacy}", "received_events_url": "https://api.github.com/users/RugnirViking/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-11-29T16:39:46Z", "updated_at": "2018-12-17T10:27:50Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 \r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: latest from git - 1.12.0\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.19.2\r\n- GCC/Compiler version (if compiling from source): \r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: NVIDIA GeForce 940MX 4096mb\r\n\r\n\r\n\r\n**When building tensorflow from source using bazel on windows 10 I encountered an error in iterator_ops.cc.**\r\nTo the best of my ability I think the error that stopped the build was \r\n`\"binary '*': no operator found which takes a left-hand operand of type 'const tensorflow::OpInputList::Iterator' (or there is no acceptable conversion)\"`\r\nBut I'm not familliar with tensorflow or the building process being used.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nbazel build :loader (loader being a barebones .cc file with tensorflow as a dependancy)\r\n\r\n**Any other info / logs**\r\nThe relevant build logs: (somewhat long error message)\r\nhttps://pastebin.com/akqRxB0P"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24044", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24044/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24044/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24044/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24044", "id": 385765956, "node_id": "MDU6SXNzdWUzODU3NjU5NTY=", "number": 24044, "title": "Secondary algorithm not provided error when not using cuDNN autotune", "user": {"login": "mavrov", "id": 31657104, "node_id": "MDQ6VXNlcjMxNjU3MTA0", "avatar_url": "https://avatars1.githubusercontent.com/u/31657104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mavrov", "html_url": "https://github.com/mavrov", "followers_url": "https://api.github.com/users/mavrov/followers", "following_url": "https://api.github.com/users/mavrov/following{/other_user}", "gists_url": "https://api.github.com/users/mavrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/mavrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mavrov/subscriptions", "organizations_url": "https://api.github.com/users/mavrov/orgs", "repos_url": "https://api.github.com/users/mavrov/repos", "events_url": "https://api.github.com/users/mavrov/events{/privacy}", "received_events_url": "https://api.github.com/users/mavrov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-29T14:37:03Z", "updated_at": "2019-02-23T17:50:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 9.0 / 7.1.4\r\n- GPU model and memory: Nvidia Tesla K80, Quadro M1200\r\n\r\n**Describe the current behavior**\r\nI get the following error message when I set TF_CUDNN_USE_AUTOTUNE=0:\r\n 2018-11-22 10:10:01.227780: E tensorflow/stream_executor/cuda/cuda_dnn.cc:82] The primary convolution algorithm failed memory allocation, while a secondary algorithm is not provided.\r\n\r\n**Describe the expected behavior**\r\nI would expect a secondary algorithm that does not require any workspace to kick in should the scratch allocation for the primary algorithm fail even when I am not using autotune.\r\n\r\n**Other info / logs**\r\nI traced back the error message to when it was [first introduced](https://github.com/tensorflow/tensorflow/blob/466eb299f0ce20cf929b9e06d3d3c16959360c59/tensorflow/stream_executor/cuda/cuda_dnn.cc#L706) in the code base to revise the logic.\r\n\r\nIt seems to me that years of refactoring have disabled the [fallback mechanism](https://github.com/tensorflow/tensorflow/blob/466eb299f0ce20cf929b9e06d3d3c16959360c59/tensorflow/stream_executor/cuda/cuda_dnn.cc#L792) when both the primary and secondary algorithms are the default ones.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24043", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24043/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24043/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24043/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24043", "id": 385738901, "node_id": "MDU6SXNzdWUzODU3Mzg5MDE=", "number": 24043, "title": "Pruning: Multi-GPU support", "user": {"login": "barrh", "id": 29775567, "node_id": "MDQ6VXNlcjI5Nzc1NTY3", "avatar_url": "https://avatars0.githubusercontent.com/u/29775567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barrh", "html_url": "https://github.com/barrh", "followers_url": "https://api.github.com/users/barrh/followers", "following_url": "https://api.github.com/users/barrh/following{/other_user}", "gists_url": "https://api.github.com/users/barrh/gists{/gist_id}", "starred_url": "https://api.github.com/users/barrh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barrh/subscriptions", "organizations_url": "https://api.github.com/users/barrh/orgs", "repos_url": "https://api.github.com/users/barrh/repos", "events_url": "https://api.github.com/users/barrh/events{/privacy}", "received_events_url": "https://api.github.com/users/barrh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-11-29T13:34:37Z", "updated_at": "2019-01-29T12:48:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): modified models/official/resnet/resnet_model.py to utilize Pruning's masked layers.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): v1.10.0\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): 16.1\r\n- GCC/Compiler version (if compiling from source): gcc\r\n- CUDA/cuDNN version: 8/6\r\n- GPU model and memory: x2 nvidia titan Xp\r\n\r\n**Describe the current behavior**\r\nMulti-GPU training session of modified tensorflow/models for pruning, the session won't boot.\r\nThe same modified Resnet model _does_ execute iff num_gpus=1.\r\n\r\nThe error is:\r\nValueError: You must specify an aggregation method to update a MirroredVariable in Tower Context.\r\nRaised from tensorflow/contrib/distribute/python/values.py\", line 336\r\n\r\n[out_batch64.log](https://github.com/tensorflow/tensorflow/files/2629288/out_batch64.log)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24040", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24040/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24040/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24040/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24040", "id": 385595758, "node_id": "MDU6SXNzdWUzODU1OTU3NTg=", "number": 24040, "title": "TensorForest: the base random seed takes no effects", "user": {"login": "whatbeg", "id": 10257524, "node_id": "MDQ6VXNlcjEwMjU3NTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/10257524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whatbeg", "html_url": "https://github.com/whatbeg", "followers_url": "https://api.github.com/users/whatbeg/followers", "following_url": "https://api.github.com/users/whatbeg/following{/other_user}", "gists_url": "https://api.github.com/users/whatbeg/gists{/gist_id}", "starred_url": "https://api.github.com/users/whatbeg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whatbeg/subscriptions", "organizations_url": "https://api.github.com/users/whatbeg/orgs", "repos_url": "https://api.github.com/users/whatbeg/repos", "events_url": "https://api.github.com/users/whatbeg/events{/privacy}", "received_events_url": "https://api.github.com/users/whatbeg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-11-29T06:59:17Z", "updated_at": "2018-12-22T19:01:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary, pip install tensorflow==1.12.0\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: No usage\r\n- GPU model and memory: No usage\r\n\r\n**Describe the current behavior**\r\n\r\nI found that setting the same base_random_seed for TensorForest generate different classification performance.\r\n\r\n**Describe the expected behavior**\r\n\r\nSetting the **same** base_random_seed for TensorForest should generate the **same** classification performance so that we can reproduce every experiment.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport sklearn.datasets\r\nfrom sklearn.metrics import accuracy_score\r\nfrom sklearn.model_selection import train_test_split\r\n\r\nX, y = sklearn.datasets.load_digits(return_X_y=True)\r\nx_train, x_test, y_train, y_test = train_test_split(X, y, test_size=0.33, random_state=42)\r\nx_train = x_train.astype(np.float32)\r\nx_test = x_test.astype(np.float32)\r\n\r\nparams = tf.contrib.tensor_forest.python.tensor_forest.ForestHParams(\r\nnum_classes=10, num_features=64, regression=False,\r\nnum_trees=50, max_nodes=1000, base_random_seed=2)\r\n\r\nclassifier = tf.contrib.tensor_forest.client.random_forest.TensorForestEstimator(params)\r\nclassifier.fit(x=x_train, y=y_train)\r\ny_out = classifier.predict(x=x_test)\r\n\r\nyyy = [x for x in y_out]\r\n\r\ny_hat = np.array([x['classes'] for x in yyy])\r\nprint(accuracy_score(y_test, y_pred=y_hat))\r\n# first run:  0.9629629629629629\r\n# second run: 0.968013468013468\r\n# third run:  0.9646464646464646\r\n```\r\n\r\nThe base random seed is non-zero, it's supposed to produce the same result.\r\nThus, I wonder where else does the code have randomness?\r\n@yupbank "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24009", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24009/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24009/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24009/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24009", "id": 385024157, "node_id": "MDU6SXNzdWUzODUwMjQxNTc=", "number": 24009, "title": "Keras feature DropConnect", "user": {"login": "autoih", "id": 41447049, "node_id": "MDQ6VXNlcjQxNDQ3MDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/41447049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/autoih", "html_url": "https://github.com/autoih", "followers_url": "https://api.github.com/users/autoih/followers", "following_url": "https://api.github.com/users/autoih/following{/other_user}", "gists_url": "https://api.github.com/users/autoih/gists{/gist_id}", "starred_url": "https://api.github.com/users/autoih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/autoih/subscriptions", "organizations_url": "https://api.github.com/users/autoih/orgs", "repos_url": "https://api.github.com/users/autoih/repos", "events_url": "https://api.github.com/users/autoih/events{/privacy}", "received_events_url": "https://api.github.com/users/autoih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-27T22:55:22Z", "updated_at": "2019-06-23T20:24:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using):1.1.0 (Keras version: 2.2.2)\r\n- Are you willing to contribute it (Yes/No):Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI would like to know if you would accept a pull request in ``DropConnect\u2019\u2019,i.e., https://cs.nyu.edu/~wanli/dropc/, which is a generalization of Hinton\u2019s Dropout. \r\nIn experiments, we may sometimes want to drop edges(weights) instead of neurons, I think it is very convenient to have the general version for regularizing layers. \r\nIf so, I am willing to work on this. I would add a flag to the operator so that users can decide it to run. This changes should not be difficult to make.\r\n\r\n**Will this change the current api? How?**\r\nNo. Probably based on current api. \r\n\r\n**Who will benefit with this feature?**\r\nUsers build their own architectures/algorithms.  \r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24005", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24005/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24005/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24005/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24005", "id": 384839991, "node_id": "MDU6SXNzdWUzODQ4Mzk5OTE=", "number": 24005, "title": "tf.ConditionalAccumulator does not behave as expected", "user": {"login": "ylfzr", "id": 22250974, "node_id": "MDQ6VXNlcjIyMjUwOTc0", "avatar_url": "https://avatars3.githubusercontent.com/u/22250974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ylfzr", "html_url": "https://github.com/ylfzr", "followers_url": "https://api.github.com/users/ylfzr/followers", "following_url": "https://api.github.com/users/ylfzr/following{/other_user}", "gists_url": "https://api.github.com/users/ylfzr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ylfzr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ylfzr/subscriptions", "organizations_url": "https://api.github.com/users/ylfzr/orgs", "repos_url": "https://api.github.com/users/ylfzr/repos", "events_url": "https://api.github.com/users/ylfzr/events{/privacy}", "received_events_url": "https://api.github.com/users/ylfzr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-27T15:08:05Z", "updated_at": "2019-01-18T21:04:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.12.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):  binary\r\n- TensorFlow version (use command below): 1.10 cpu\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: \r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nResult of the accumulator.take_grad() not predictable if apply more gradients than num_required.\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nNUM_REQUIRED = 3\r\n\r\na = np.arange(12).reshape((3, 4)).astype(np.float32)\r\ndataset = tf.data.Dataset.from_tensor_slices((a, a))\r\ndataset = dataset.repeat(1000).batch(1)\r\niterator = dataset.make_one_shot_iterator()\r\nx, y = iterator.get_next()\r\n\r\npredict = tf.layers.dense(x, 4)\r\nloss = tf.nn.l2_loss(predict - y)\r\n\r\noptimizer = tf.train.AdamOptimizer(learning_rate=0.01)\r\ntrainable_vars = tf.trainable_variables()[1]\r\n\r\ngrads_vars = optimizer.compute_gradients(loss, var_list=[trainable_vars])\r\ngrads = [grad_var[0] for grad_var in grads_vars]\r\nvars = [grad_var[1] for grad_var in grads_vars]\r\nshapes = [grad_var[1].get_shape() for grad_var in grads_vars]\r\n\r\nlocal_step = tf.get_variable('accu_local_step', dtype=tf.int32, initializer=0, trainable=False)\r\naccumulators = [tf.ConditionalAccumulator(tf.float32, shape=shapes[i]) for i in range(len(vars))]\r\nwith tf.control_dependencies([tf.assign_add(local_step, 1)]):\r\n    apply_ops = [accumulators[i].apply_grad(grads[i], local_step=local_step) for i in range(len(vars))]\r\n    apply_ops = tf.group(*apply_ops)\r\ngrads_mean = [accumulators[i].take_grad(num_required=NUM_REQUIRED) for i in range(len(vars))]\r\nnum_acc = [accumulators[i].num_accumulated() for i in range(len(vars))]\r\n\r\n# #\r\nsess_local = tf.train.MonitoredSession()\r\nfor i in range(100):\r\n    # print(i)\r\n    if (i + 1) % (NUM_REQUIRED + 1) != 0:\r\n        local_step_np, num_acc_np, grad_tmp, _ = sess_local.run([local_step, num_acc, grads, apply_ops])\r\n        # sess_local.run(reset_op)\r\n        print('local_step_np is: {}, num_ncc_np is: {}'.format(local_step_np, num_acc_np))\r\n        print(grad_tmp)\r\n    else:\r\n        # grad_tmp, _ = sess_local.run([grads, apply_ops])\r\n        # print(grad_tmp)\r\n        grad_tmp, num_acc_np, _, grads_mean_np = sess_local.run([grads, num_acc, apply_ops, grads_mean])\r\n        print('num_ncc_np is: {}'.format(num_acc_np))\r\n        print(grad_tmp)\r\n    # num_acc_np = sess_local.run(num_acc)\r\n        print('grads_mean_np:', grads_mean_np)\r\n```\r\n\r\n**Other info / logs**\r\nRuning the above code gives result:\r\nlocal_step_np is: 1, num_ncc_np is: [0]\r\n[array([ 1.9753755,  1.9916878,  0.9389882, -5.003906 ], dtype=float32)]\r\nlocal_step_np is: 2, num_ncc_np is: [1]\r\n[array([  3.120553 ,   1.0842252,   3.9395618, -11.656693 ], dtype=float32)]\r\nlocal_step_np is: 3, num_ncc_np is: [2]\r\n[array([  4.26573   ,   0.17676353,   6.940136  , -18.30948   ],\r\n      dtype=float32)]\r\nnum_ncc_np is: [0]\r\n[array([ 1.9753755,  1.9916878,  0.9389882, -5.003906 ], dtype=float32)]\r\ngrads_mean_np: [array([  3.1205528,   1.0842255,   3.9395618, -11.6566925], dtype=float32)]\r\nlocal_step_np is: 5, num_ncc_np is: [1]\r\n[array([  3.120553 ,   1.0842252,   3.9395618, -11.656693 ], dtype=float32)]\r\nlocal_step_np is: 6, num_ncc_np is: [2]\r\n[array([  4.26573   ,   0.17676353,   6.940136  , -18.30948   ],\r\n      dtype=float32)]\r\nlocal_step_np is: 7, num_ncc_np is: [3]\r\n[array([ 1.9753755,  1.9916878,  0.9389882, -5.003906 ], dtype=float32)]\r\nnum_ncc_np is: [4]\r\n[array([  3.120553 ,   1.0842252,   3.9395618, -11.656693 ], dtype=float32)]\r\ngrads_mean_np: [array([ 2.8342583,  1.3110911,  3.1894183, -9.993496 ], dtype=float32)]\r\nlocal_step_np is: 9, num_ncc_np is: [1]\r\n[array([  4.26573   ,   0.17676353,   6.940136  , -18.30948   ],\r\n      dtype=float32)]\r\nlocal_step_np is: 10, num_ncc_np is: [2]\r\n[array([ 1.9753755,  1.9916878,  0.9389882, -5.003906 ], dtype=float32)]\r\nlocal_step_np is: 11, num_ncc_np is: [3]\r\n[array([  3.120553 ,   1.0842252,   3.9395618, -11.656693 ], dtype=float32)]\r\nnum_ncc_np is: [0]\r\n[array([  4.26573   ,   0.17676353,   6.940136  , -18.30948   ],\r\n      dtype=float32)]\r\ngrads_mean_np: [array([  3.1205528,   1.0842254,   3.9395618, -11.656693 ], dtype=float32)]\r\nlocal_step_np is: 13, num_ncc_np is: [1]\r\n[array([ 1.9753755,  1.9916878,  0.9389882, -5.003906 ], dtype=float32)]\r\nlocal_step_np is: 14, num_ncc_np is: [2]\r\n\r\ngrads_mean_np is not the mean of previously applied grad. \r\n\r\nIf we just set run 'apply_ops' 'NUM_REQUIRED' times before run 'grads_mean'(take_grads()), ConditionalAccumulator seems to work properly, but when we run different number of 'apply_ops' before(as in the example, we run 'NUM_REQUIRED' + 1 times), the computed grads_mean(averaged grads) becomes mysterious. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24003", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24003/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24003/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24003/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24003", "id": 384804036, "node_id": "MDU6SXNzdWUzODQ4MDQwMzY=", "number": 24003, "title": "Unable to train a LinearClassifier with categorical columns and CollectiveAllReduce", "user": {"login": "nateagr", "id": 41445208, "node_id": "MDQ6VXNlcjQxNDQ1MjA4", "avatar_url": "https://avatars1.githubusercontent.com/u/41445208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nateagr", "html_url": "https://github.com/nateagr", "followers_url": "https://api.github.com/users/nateagr/followers", "following_url": "https://api.github.com/users/nateagr/following{/other_user}", "gists_url": "https://api.github.com/users/nateagr/gists{/gist_id}", "starred_url": "https://api.github.com/users/nateagr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nateagr/subscriptions", "organizations_url": "https://api.github.com/users/nateagr/orgs", "repos_url": "https://api.github.com/users/nateagr/repos", "events_url": "https://api.github.com/users/nateagr/events{/privacy}", "received_events_url": "https://api.github.com/users/nateagr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, {"login": "dubey", "id": 2314265, "node_id": "MDQ6VXNlcjIzMTQyNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2314265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dubey", "html_url": "https://github.com/dubey", "followers_url": "https://api.github.com/users/dubey/followers", "following_url": "https://api.github.com/users/dubey/following{/other_user}", "gists_url": "https://api.github.com/users/dubey/gists{/gist_id}", "starred_url": "https://api.github.com/users/dubey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dubey/subscriptions", "organizations_url": "https://api.github.com/users/dubey/orgs", "repos_url": "https://api.github.com/users/dubey/repos", "events_url": "https://api.github.com/users/dubey/events{/privacy}", "received_events_url": "https://api.github.com/users/dubey/received_events", "type": "User", "site_admin": false}, {"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2018-11-27T13:50:52Z", "updated_at": "2019-08-06T08:10:42Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS 7\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version: 3.6.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\nI'm trying to train a simple model LinearClassifier (tf.estimator.LinearClassifier) with different distribution strategies. \r\nI've successfully managed to train a model with parameter servers with numeric columns (tf.feature_column.numeric_column) and categorical columns (tf.feature_column.categorical_column_with_*). \r\nI've also successfully managed to train a model with CollectiveAllReduce and only numeric columns. \r\nBut unfortunately, I'm getting the following error whith the same model (with CollectiveAllReduce) but with one categorical column in place of a numeric column:\r\n\r\n> ValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\n\r\nSee below for the all traceback and logs.\r\n\r\nHere is a part of the code I am running:\r\n\r\n```\r\nestimator = tf.estimator.LinearClassifier(\r\n        feature_columns=[\r\n            tf.feature_column.categorical_column_with_hash_bucket(\"partnerid\", 13, dtype=tf.int64),\r\n            tf.feature_column.numeric_column(\"campaignid\", dtype=tf.int64)\r\n        ],\r\n        model_dir=\"my_path\",\r\n        n_classes=2,\r\n        optimizer=\"Adam\",\r\n        config=tf.estimator.RunConfig(\r\n            experimental_distribute=tf.contrib.distribute.DistributeConfig(\r\n                train_distribute=tf.contrib.distribute.CollectiveAllReduceStrategy(),\r\n                remote_cluster=cluster_spec\r\n            )\r\n        )\r\n    )\r\n\r\n    tf.estimator.train_and_evaluate(\r\n        estimator,\r\n        tf.estimator.TrainSpec(\r\n            input_fn_train,\r\n            max_steps=training_steps\r\n        ),\r\n        tf.estimator.EvalSpec(\r\n            input_fn_test,\r\n            steps=evaluation_steps,\r\n            start_delay_secs=0,\r\n            throttle_secs=evaluation_throttle_secs\r\n        )\r\n    )\r\n```\r\nIs it a known issue ? Are there current limitations with CollectiveAllReduce ?\r\n\r\n```\r\nINFO:tensorflow:Waiting for worker:0/init\r\ntensorflow - Waiting for worker:0/init\r\nINFO:tensorflow:Waiting for worker:1/init\r\ntensorflow - Waiting for worker:1/init\r\ncluster_spec: ClusterSpec({'worker': ['10.188.17.14:42897', '10.188.50.21:48063']})\r\nINFO:tensorflow:CollectiveAllReduceStrategy with local_devices = ['/device:CPU:0']\r\ntensorflow - CollectiveAllReduceStrategy with local_devices = ['/device:CPU:0']\r\nINFO:tensorflow:Initializing RunConfig with distribution strategies.\r\ntensorflow - Initializing RunConfig with distribution strategies.\r\nINFO:tensorflow:RunConfig initialized for Distribute Coordinator with STANDALONE_CLIENT mode\r\ntensorflow - RunConfig initialized for Distribute Coordinator with STANDALONE_CLIENT mode\r\nINFO:tensorflow:Using config: {'_model_dir': 'hdfs://root/user/username/model_dir', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7bef60>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': DistributeConfig(train_distribute=<tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7bef60>, eval_distribute=None, remote_cluster=<tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a7d3208>), '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a7d3208>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': '', '_evaluation_master': '', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_distribute_coordinator_mode': 'standalone_client'}\r\ntensorflow - Using config: {'_model_dir': 'hdfs://root/user/username/model_dir', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7bef60>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': DistributeConfig(train_distribute=<tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7bef60>, eval_distribute=None, remote_cluster=<tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a7d3208>), '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a7d3208>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': '', '_evaluation_master': '', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_distribute_coordinator_mode': 'standalone_client'}\r\nINFO:tensorflow:Running `train_and_evaluate` with Distribute Coordinator.\r\ntensorflow - Running `train_and_evaluate` with Distribute Coordinator.\r\nINFO:tensorflow:Running Distribute Coordinator with mode = 'standalone_client', cluster_spec = {'worker': ['10.188.17.14:42897', '10.188.50.21:48063']}, task_type = None, task_id = None, environment = None, rpc_layer = 'grpc'\r\ntensorflow - Running Distribute Coordinator with mode = 'standalone_client', cluster_spec = {'worker': ['10.188.17.14:42897', '10.188.50.21:48063']}, task_type = None, task_id = None, environment = None, rpc_layer = 'grpc'\r\nWARNING:tensorflow:`eval_strategy` is not passed in. No distribution strategy will be used for evaluation.\r\ntensorflow - `eval_strategy` is not passed in. No distribution strategy will be used for evaluation.\r\nINFO:tensorflow:Multi-worker CollectiveAllReduceStrategy with cluster_spec = {'worker': ['10.188.17.14:42897', '10.188.50.21:48063']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ['/job:worker/task:0']\r\ntensorflow - Multi-worker CollectiveAllReduceStrategy with cluster_spec = {'worker': ['10.188.17.14:42897', '10.188.50.21:48063']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ['/job:worker/task:0']\r\nINFO:tensorflow:Multi-worker CollectiveAllReduceStrategy with cluster_spec = {'worker': ['10.188.17.14:42897', '10.188.50.21:48063']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ['/job:worker/task:1']\r\ntensorflow - Multi-worker CollectiveAllReduceStrategy with cluster_spec = {'worker': ['10.188.17.14:42897', '10.188.50.21:48063']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ['/job:worker/task:1']\r\nINFO:tensorflow:Updated config: {'_model_dir': 'hdfs://root/user/username/model_dir', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7d3710>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': DistributeConfig(train_distribute=<tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7601d0>, eval_distribute=None, remote_cluster=<tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a760438>), '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a7603c8>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': 'grpc://10.188.17.14:42897', '_evaluation_master': 'grpc://10.188.17.14:42897', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 2, '_distribute_coordinator_mode': 'standalone_client'}\r\ntensorflow - Updated config: {'_model_dir': 'hdfs://root/user/username/model_dir', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7d3710>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': DistributeConfig(train_distribute=<tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7601d0>, eval_distribute=None, remote_cluster=<tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a760438>), '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a7603c8>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': 'grpc://10.188.17.14:42897', '_evaluation_master': 'grpc://10.188.17.14:42897', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 2, '_distribute_coordinator_mode': 'standalone_client'}INFO:tensorflow:Updated config: {'_model_dir': 'hdfs://root/user/username/model_dir', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7d3cc0>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': DistributeConfig(train_distribute=<tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a760630>, eval_distribute=None, remote_cluster=<tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a760898>), '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a760828>, '_task_type': 'worker', '_task_id': 1, '_global_id_in_cluster': 1, '_master': 'grpc://10.188.50.21:48063', '_evaluation_master': 'grpc://10.188.50.21:48063', '_is_chief': False, '_num_ps_replicas': 0, '_num_worker_replicas': 2, '_distribute_coordinator_mode': 'standalone_client'}\r\n\r\ntensorflow - Updated config: {'_model_dir': 'hdfs://root/user/username/model_dir', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a7d3cc0>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': DistributeConfig(train_distribute=<tensorflow.contrib.distribute.python.collective_all_reduce_strategy.CollectiveAllReduceStrategy object at 0x7f1c4a760630>, eval_distribute=None, remote_cluster=<tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a760898>), '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f1c4a760828>, '_task_type': 'worker', '_task_id': 1, '_global_id_in_cluster': 1, '_master': 'grpc://10.188.50.21:48063', '_evaluation_master': 'grpc://10.188.50.21:48063', '_is_chief': False, '_num_ps_replicas': 0, '_num_worker_replicas': 2, '_distribute_coordinator_mode': 'standalone_client'}\r\n2018-11-27 13:25:56.606318: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\nINFO:tensorflow:Calling model_fn.\r\ntensorflow - Calling model_fn.\r\nWARNING:tensorflow:Partitioned variables are disabled when using DistributionStrategy.\r\ntensorflow - Partitioned variables are disabled when using DistributionStrategy.\r\nINFO:tensorflow:Calling model_fn.\r\ntensorflow - Calling model_fn.\r\nDEBUG:tensorflow:Transforming feature_column _NumericColumn(key='campaignid', shape=(1,), default_value=None, dtype=tf.int64, normalizer_fn=None).\r\ntensorflow - Transforming feature_column _NumericColumn(key='campaignid', shape=(1,), default_value=None, dtype=tf.int64, normalizer_fn=None).\r\nDEBUG:tensorflow:Transforming feature_column _NumericColumn(key='campaignid', shape=(1,), default_value=None, dtype=tf.int64, normalizer_fn=None).\r\ntensorflow - Transforming feature_column _NumericColumn(key='campaignid', shape=(1,), default_value=None, dtype=tf.int64, normalizer_fn=None).\r\nDEBUG:tensorflow:Transforming feature_column _HashedCategoricalColumn(key='partnerid', hash_bucket_size=13, dtype=tf.int64).\r\ntensorflow - Transforming feature_column _HashedCategoricalColumn(key='partnerid', hash_bucket_size=13, dtype=tf.int64).\r\nDEBUG:tensorflow:Transforming feature_column _HashedCategoricalColumn(key='partnerid', hash_bucket_size=13, dtype=tf.int64).\r\ntensorflow - Transforming feature_column _HashedCategoricalColumn(key='partnerid', hash_bucket_size=13, dtype=tf.int64).\r\nINFO:tensorflow:Error reported to Coordinator: `IndexSlices` is not supported for Collective All-Reduce.\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 661, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 776, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 628, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 829, in _batch_reduce\r\n    \"`IndexSlices` is not supported for Collective All-Reduce.\")\r\nValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\ntensorflow - Error reported to Coordinator: `IndexSlices` is not supported for Collective All-Reduce.\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 661, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 776, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 628, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 829, in _batch_reduce\r\n    \"`IndexSlices` is not supported for Collective All-Reduce.\")\r\nValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\nException in thread Thread-5:\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/distribute/distribute_coordinator.py\", line 344, in _run_single_worker\r\n    worker_fn(strategy)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/distribute/estimator_training.py\", line 246, in _worker_fn\r\n    hooks=hooks)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 354, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1205, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1316, in _train_model_distributed\r\n    self.config)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 721, in call_for_each_tower\r\n    return self._call_for_each_tower(fn, *args, **kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 556, in _call_for_each_tower\r\n    return _call_for_each_tower(self, fn, *args, **kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 183, in _call_for_each_tower\r\n    coord.join(threads)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 661, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 776, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 628, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 829, in _batch_reduce\r\n    \"`IndexSlices` is not supported for Collective All-Reduce.\")\r\nValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\n\r\nINFO:tensorflow:Error reported to Coordinator: `IndexSlices` is not supported for Collective All-Reduce.\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 661, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 776, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 628, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 829, in _batch_reduce\r\n    \"`IndexSlices` is not supported for Collective All-Reduce.\")\r\nValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\ntensorflow - Error reported to Coordinator: `IndexSlices` is not supported for Collective All-Reduce.\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 661, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 776, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 628, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 829, in _batch_reduce\r\n    \"`IndexSlices` is not supported for Collective All-Reduce.\")\r\nValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\nException in thread Thread-4:\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/distribute/distribute_coordinator.py\", line 344, in _run_single_worker\r\n    worker_fn(strategy)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/distribute/estimator_training.py\", line 246, in _worker_fn\r\n    hooks=hooks)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 354, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1205, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1316, in _train_model_distributed\r\n    self.config)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 721, in call_for_each_tower\r\n    return self._call_for_each_tower(fn, *args, **kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 556, in _call_for_each_tower\r\n    return _call_for_each_tower(self, fn, *args, **kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 183, in _call_for_each_tower\r\n    coord.join(threads)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 661, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/python/training/distribute.py\", line 776, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 628, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/home/username/miniconda3/envs/explorer2/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 829, in _batch_reduce\r\n    \"`IndexSlices` is not supported for Collective All-Reduce.\")\r\nValueError: `IndexSlices` is not supported for Collective All-Reduce.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23990", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23990/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23990/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23990/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23990", "id": 384608911, "node_id": "MDU6SXNzdWUzODQ2MDg5MTE=", "number": 23990, "title": "Does GanEstimator support multi GPU ?", "user": {"login": "paigeQ", "id": 43838395, "node_id": "MDQ6VXNlcjQzODM4Mzk1", "avatar_url": "https://avatars3.githubusercontent.com/u/43838395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paigeQ", "html_url": "https://github.com/paigeQ", "followers_url": "https://api.github.com/users/paigeQ/followers", "following_url": "https://api.github.com/users/paigeQ/following{/other_user}", "gists_url": "https://api.github.com/users/paigeQ/gists{/gist_id}", "starred_url": "https://api.github.com/users/paigeQ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paigeQ/subscriptions", "organizations_url": "https://api.github.com/users/paigeQ/orgs", "repos_url": "https://api.github.com/users/paigeQ/repos", "events_url": "https://api.github.com/users/paigeQ/events{/privacy}", "received_events_url": "https://api.github.com/users/paigeQ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-27T03:48:27Z", "updated_at": "2020-02-08T01:11:13Z", "closed_at": null, "author_association": "NONE", "body": "Does GanEstimator support multi gpu?\r\nHow could I using multi GPU by ganEstimator?\r\n\r\nThanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23973", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23973/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23973/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23973/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23973", "id": 384203669, "node_id": "MDU6SXNzdWUzODQyMDM2Njk=", "number": 23973, "title": "Update ExternalOptimizerInterface for use with Eager Execution", "user": {"login": "johnpjust", "id": 31108737, "node_id": "MDQ6VXNlcjMxMTA4NzM3", "avatar_url": "https://avatars3.githubusercontent.com/u/31108737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnpjust", "html_url": "https://github.com/johnpjust", "followers_url": "https://api.github.com/users/johnpjust/followers", "following_url": "https://api.github.com/users/johnpjust/following{/other_user}", "gists_url": "https://api.github.com/users/johnpjust/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnpjust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnpjust/subscriptions", "organizations_url": "https://api.github.com/users/johnpjust/orgs", "repos_url": "https://api.github.com/users/johnpjust/repos", "events_url": "https://api.github.com/users/johnpjust/events{/privacy}", "received_events_url": "https://api.github.com/users/johnpjust/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-11-26T07:24:47Z", "updated_at": "2019-12-08T15:16:56Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No):\r\nI suppose yes...although i'm not confident i can produce a general code framework for this in any reasonable time.\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently the external scipy optimizer interface is coded to work with delayed [graph model] execution only.  Would like it updated for eager inclusion.\r\n\r\n**Will this change the current api? How?**\r\nJust need an option for eager.\r\n\r\n**Who will benefit with this feature?**\r\nEveryone that wants to user eager execution and the scipy optimizer in tensorflow\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23970", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23970/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23970/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23970/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23970", "id": 384176544, "node_id": "MDU6SXNzdWUzODQxNzY1NDQ=", "number": 23970, "title": "yolo-v3 has correctness issue at tf-nightly", "user": {"login": "guizili0", "id": 40055917, "node_id": "MDQ6VXNlcjQwMDU1OTE3", "avatar_url": "https://avatars2.githubusercontent.com/u/40055917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guizili0", "html_url": "https://github.com/guizili0", "followers_url": "https://api.github.com/users/guizili0/followers", "following_url": "https://api.github.com/users/guizili0/following{/other_user}", "gists_url": "https://api.github.com/users/guizili0/gists{/gist_id}", "starred_url": "https://api.github.com/users/guizili0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guizili0/subscriptions", "organizations_url": "https://api.github.com/users/guizili0/orgs", "repos_url": "https://api.github.com/users/guizili0/repos", "events_url": "https://api.github.com/users/guizili0/events{/privacy}", "received_events_url": "https://api.github.com/users/guizili0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-11-26T05:09:47Z", "updated_at": "2019-03-19T05:26:00Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):NA\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Centos 7.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:NA\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below):  tf-nightly==1.13.0.dev20181115\r\n- Python version: 3.4\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\n**Describe the current behavior**\r\n Start from tf-nightly==1.13.0.dev20181115, yolo-v3(https://github.com/mystic123/tensorflow-yolo-v3) meet correctness issue, the TF output did not consistent with the previous version\r\n**Describe the expected behavior**\r\nWith same command, tf-nightly==1.13.0.dev20181114 can get the right result and plot the bounding box.\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nhttps://github.com/mystic123/tensorflow-yolo-v3#how-to-run-the-demo\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23947", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23947/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23947/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23947/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23947", "id": 384008188, "node_id": "MDU6SXNzdWUzODQwMDgxODg=", "number": 23947, "title": "Network Bandwidth Un-expected Behavior ", "user": {"login": "salemmohammed", "id": 6541193, "node_id": "MDQ6VXNlcjY1NDExOTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6541193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salemmohammed", "html_url": "https://github.com/salemmohammed", "followers_url": "https://api.github.com/users/salemmohammed/followers", "following_url": "https://api.github.com/users/salemmohammed/following{/other_user}", "gists_url": "https://api.github.com/users/salemmohammed/gists{/gist_id}", "starred_url": "https://api.github.com/users/salemmohammed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salemmohammed/subscriptions", "organizations_url": "https://api.github.com/users/salemmohammed/orgs", "repos_url": "https://api.github.com/users/salemmohammed/repos", "events_url": "https://api.github.com/users/salemmohammed/events{/privacy}", "received_events_url": "https://api.github.com/users/salemmohammed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-24T17:48:03Z", "updated_at": "2019-01-28T23:52:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: Linux Ubuntu\r\n- TensorFlow installed from (source or binary): Yes\r\n- TensorFlow version (use command below): 1.11.0\r\n- Python version: 3.5\r\n- GCC/Compiler version (if compiling from source): 5.4.0\r\n- CUDA/cuDNN version: None\r\n- GPU model and memory: No GPU only CPU.\r\n\r\n\r\nI have a simple model 2.8 MB. I wrote a distributed Tensorflow code with one parameter server and one worker. I measured the network bandwidth for in and out from worker.\r\nI found that worker utilized bandwidth-in is 53 MB and worker utilized bandwidth-out is 26 MB. \r\nMy dataset is MNIST dataset which is 46 MB. \r\nThe total worker and server bandwidth are 92.5 MB.\r\n\r\nMy question is that I thought I will see only the size of my model in and out from to worker but where these 53, 26 data come from.\r\n\r\nThis is my code:\r\n\r\nhttps://github.com/salemmohammed/TensorflowDistributedExample/blob/master/PS_Dist1.py\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23928", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23928/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23928/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23928/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23928", "id": 383646643, "node_id": "MDU6SXNzdWUzODM2NDY2NDM=", "number": 23928, "title": "C++ compilation of rule '//tensorflow/python:cost_analyzer_lib' failed (Exit 2): msvc_wrapper_for_nvcc.bat failed: error executing command", "user": {"login": "port513", "id": 1289206, "node_id": "MDQ6VXNlcjEyODkyMDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1289206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/port513", "html_url": "https://github.com/port513", "followers_url": "https://api.github.com/users/port513/followers", "following_url": "https://api.github.com/users/port513/following{/other_user}", "gists_url": "https://api.github.com/users/port513/gists{/gist_id}", "starred_url": "https://api.github.com/users/port513/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/port513/subscriptions", "organizations_url": "https://api.github.com/users/port513/orgs", "repos_url": "https://api.github.com/users/port513/repos", "events_url": "https://api.github.com/users/port513/events{/privacy}", "received_events_url": "https://api.github.com/users/port513/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-11-22T20:04:11Z", "updated_at": "2019-01-17T01:30:11Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNo\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nWindows 10 Professional\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**:\r\nTrying to compile to CUDA 10\r\n- **TensorFlow version (use command below)**:\r\n1.12\r\n- **Python version**:\r\n3.6 64-bits\r\n- **Bazel version (if compiling from source)**:\r\n0.19.2\r\n- **GCC/Compiler version (if compiling from source)**:\r\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.16.27024.1 for x86\r\n- **CUDA/cuDNN version**:\r\nCUDA 10\r\n- **GPU model and memory**:\r\nGeForce GTX 1080 Ti \r\n11 GB GDDR5X\r\n- **Exact command to reproduce**:\r\nWhen buiilding from source:\r\nbazel --output_base=C:\\Temp\\finalbuild build --config=opt --config=cuda --define=no_tensorflow_py_deps=true //tensorflow/tools/pip_package:build_pip_package\r\n\r\n### Describe the problem\r\nAfter many atempts to compile this for use with CUDA 10 I get this error in the end of a really long compile. Tried everything but I still get this annoying error.\r\nI use VS 2017 Enterprise and CUDA 10\r\n\r\n### Source code / logs\r\nERROR: C:/temp/tensorflow/tensorflow/python/BUILD:247:1: C++ compilation of rule '//tensorflow/python:cost_analyzer_lib' failed (Exit 2): msvc_wrapper_for_nvcc.bat failed: error executing command\r\n  cd C:/temp/finalbuild/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET CUDNN_INSTALL_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\include;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\cppwinrt\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\lib\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX64\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\MSBuild\\15.0\\bin\\Roslyn;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.17763.0\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\\\MSBuild\\15.0\\bin;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\Tools\\;;C:\\WINDOWS\\system32;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\Ninja\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Program Files (x86)/Microsoft Visual Studio/Shared/Python36_64/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/<USERNAME>/AppData/Roaming/Python/Python36/site-packages\r\n    SET TEMP=C:\\Users\\<USERNAME>~1\\AppData\\Local\\Temp\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_CUDA_VERSION=10.0\r\n    SET TF_CUDNN_VERSION=7\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n    SET TMP=C:\\Users\\<USERNAME>~1\\AppData\\Local\\Temp\r\n\r\n\r\nDriver Version | 416.94\r\n-- | --\r\nDriver Model | WDDM\r\nCUDA Device Index | 0\r\nGPU Family | GP102-A\r\nCompute Capability | 6.1\r\nNumber of SMs | 28\r\nFrame Buffer Physical Size (MB) | 11264\r\nFrame Buffer Bandwidth (GB/s) | 484,44\r\nFrame Buffer Bus Width (bits) | 352\r\nFrame Buffer Location | Dedicated\r\nGraphics Clock (Mhz) | 803\r\nMemory Clock (Mhz) | 5505\r\nProcessor Clock (Mhz) | 1607\r\nRAM Type | GDDR5X\r\nAttached Monitors | 2\r\n\r\n\r\nName | AMD Ryzen Threadripper 1950X 16-Core Processor\r\n-- | --\r\nArchitecture | x64\r\nFrequency | 3\u00a0750 MHz\r\nNumber of Cores | 32\r\nPage Size | 4\u00a0096\r\nTotal Physical Memory | 16\u00a0258,00 MB\r\nAvailable Physical Memory | 11\u00a0372,00 MB\r\nHybrid Graphics Enabled | False\r\nVersion Name | Windows 10 Pro\r\nVersion Number | 10.0.17134\r\nNsight Version | 6.0.0.18227\r\nNsight Edition | Standard\r\nVisual Studio Version | 15.0\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23918", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23918/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23918/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23918/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23918", "id": 383415895, "node_id": "MDU6SXNzdWUzODM0MTU4OTU=", "number": 23918, "title": "tf.dynamic_partition may cause NaN loss when use it with multi gpus and it performs normally with single gpu", "user": {"login": "mzhaoshuai", "id": 22476764, "node_id": "MDQ6VXNlcjIyNDc2NzY0", "avatar_url": "https://avatars1.githubusercontent.com/u/22476764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzhaoshuai", "html_url": "https://github.com/mzhaoshuai", "followers_url": "https://api.github.com/users/mzhaoshuai/followers", "following_url": "https://api.github.com/users/mzhaoshuai/following{/other_user}", "gists_url": "https://api.github.com/users/mzhaoshuai/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzhaoshuai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzhaoshuai/subscriptions", "organizations_url": "https://api.github.com/users/mzhaoshuai/orgs", "repos_url": "https://api.github.com/users/mzhaoshuai/repos", "events_url": "https://api.github.com/users/mzhaoshuai/events{/privacy}", "received_events_url": "https://api.github.com/users/mzhaoshuai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-11-22T07:49:42Z", "updated_at": "2019-07-31T18:17:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **_no_**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): _**Ubuntu 16.04.5 LTS**_\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:**_no_**\r\n- TensorFlow installed from (source or binary):**_binary_**\r\n- TensorFlow version (use command below):**_1.12.0_**\r\n- Python version: **_Python 3.5.2_**\r\n- Bazel version (if compiling from source): _**None**_\r\n- GCC/Compiler version (if compiling from source):  **_5.4.0_**\r\n- CUDA/cuDNN version: **_cuda-9.0.176/cudnn-7.2.1_**\r\n- GPU model and memory: **_2 same GTX Titan X (Pascal), 12GB_** \r\n\r\n\r\nI just use the offical docker image of the tensorflow, the tag is `1.12.0-devel-gpu-py3`\r\n\r\n**Describe the problem**\r\n\r\n**The api `tf.dynamic_partition` may cause NaN loss when use it with multi gpus and it is normal with single gpu.**\r\n\r\nThe code to reproduce the problem:\r\n```\r\n#coding=utf-8\r\n\r\nimport os\r\nimport time\r\nimport tensorflow as tf\r\n\r\nos.environ[\"CUDA_DEVICE_ORDER\"]=\"PCI_BUS_ID\"  \r\nos.environ[\"CUDA_VISIBLE_DEVICES\"]=\"0\"\r\nnum_gpus = len(os.environ[\"CUDA_VISIBLE_DEVICES\"].split(','))\r\n\r\ndef dp_and_bm_api_test(argv=None):\r\n\ta = tf.constant([[1, 2, 3],\r\n\t\t\t\t\t[4, 5, 6],\r\n\t\t\t\t\t[7, 8, 9],\r\n\t\t\t\t\t[10, 11, 12]])\r\n\t\r\n\tmask = tf.constant([1, 0, 1, 0])\r\n\tres_01 = tf.boolean_mask(a, mask)\r\n\tres_02 = tf.dynamic_partition(a, mask, num_partitions=2)[1]\r\n\r\n\twith tf.Session() as sess:\r\n\t\tr_1, r_2 = sess.run([res_01, res_02])\r\n\t\tprint(\"r_1\\n\", r_1)\r\n\t\tprint(\"r_2\\n\", r_2)\r\n\r\n\r\ndef tower_model_fn(features, labels, api_sel=0):\r\n\t\"\"\"a test tower fn\"\"\"\r\n\tnum_classes = 10\r\n\tnet = tf.layers.conv2d(features, num_classes * 2, [3,3], padding=\"same\")\r\n\tnet = tf.layers.batch_normalization(net)\r\n\tnet = tf.nn.relu(net)\r\n\tnet = tf.layers.conv2d(net, num_classes, [3,3], padding=\"same\")\r\n\tnet = tf.layers.batch_normalization(net)\r\n\tlogits = tf.nn.relu(net)\r\n\r\n\tlabels = tf.squeeze(labels, axis=3)  # reduce the channel dimension.\r\n\tlogits_by_num_classes = tf.reshape(logits, [-1, num_classes])\r\n\tlabels_flat = tf.reshape(labels, [-1, ])\r\n\tvalid_indices = tf.to_int32(labels_flat <= num_classes - 1)\r\n\r\n\tif api_sel == 0:\r\n\t\tvalid_logits = tf.boolean_mask(logits_by_num_classes, valid_indices)\r\n\t\tvalid_labels = tf.boolean_mask(labels_flat, valid_indices)\r\n\telse:\r\n\t\tvalid_logits = tf.dynamic_partition(logits_by_num_classes, valid_indices, num_partitions=2)[1]\r\n\t\tvalid_labels = tf.dynamic_partition(labels_flat, valid_indices, num_partitions=2)[1]\r\n\r\n\r\n\tcross_entropy = tf.losses.sparse_softmax_cross_entropy(logits=valid_logits, labels=valid_labels, \r\n\t\t\t\t\t\t\tloss_collection=None)\r\n\ttf.add_to_collection(tf.GraphKeys.LOSSES, cross_entropy)\r\n\treturn None\r\n\r\ndef train(api_sel=0):\r\n\t## variable strategy\r\n\tvariable_strategy = 'CPU'\r\n\tinput_device = '/cpu:0'\r\n\t#var_device = '/gpu:0'\r\n\tvar_device = '/cpu:0'\r\n\tnum_devices = num_gpus\r\n\tdevice_type = 'gpu'\r\n\t\r\n\twith tf.Graph().as_default() as graph:\r\n\t\twith tf.device(var_device):\r\n\t\t\t## some collector\r\n\t\t\ttower_ce_loss = []\r\n\r\n\t\t\tglobal_step = tf.train.get_or_create_global_step()\t\r\n\r\n\t\t\tname_scopes = ['tower_%d' % i for i in range(num_devices)]\r\n\t\t\tfor i in range(num_devices):\r\n\t\t\t\twith tf.variable_scope(tf.get_variable_scope(), reuse=bool(i > 0)):\r\n\t\t\t\t\tworker_device = '/{0}:{1}'.format(device_type, i)\r\n\t\t\t\t\twith tf.name_scope(name_scopes[i]) as name_scope:\r\n\t\t\t\t\t\twith tf.device(worker_device):\t\r\n\r\n\t\t\t\t\t\t\timages = tf.ones([8, 321, 321, 3])\r\n\t\t\t\t\t\t\tlabels = tf.zeros([8, 321, 321, 1], dtype=tf.int32)\r\n\t\t\t\t\t\t\ttower_model_fn(images, labels, api_sel=api_sel)\r\n\t\t\t\t\t\t\tce_now = tf.get_collection(tf.GraphKeys.LOSSES, scope=name_scope)\r\n\t\t\t\t\t\t\ttower_ce_loss.append(tf.add_n(ce_now))\r\n\r\n\t\t\r\n\t\twith tf.device(var_device):\r\n\t\t\tupdate_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS, name_scopes[0])\t\r\n\r\n\t\t\tce_loss = tf.add_n(tower_ce_loss)\r\n\t\t\tsession_config = tf.ConfigProto(allow_soft_placement=True,\r\n\t\t\t\t\t\t\t\t\t\t\tlog_device_placement=False\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t# Build an initialization operation to run below.\r\n\t\t\tinit_op = tf.global_variables_initializer()\r\n\t\t\tmax_steps = 30\r\n\t\t\tstep_gap_init_time = 0.0\r\n\t\t\twith tf.Session(config=session_config) as sess:\r\n\t\t\t\tsess.run(init_op)\r\n\t\t\t\tfor steps in range(1, max_steps + 1, 1):\r\n\t\t\t\t\tstep_gap_init_time = time.time()\r\n\t\t\t\t\tc_l = sess.run([ce_loss])\r\n\t\t\t\t\tif steps % 10 == 0:\r\n\t\t\t\t\t\tgap_time = (time.time() - step_gap_init_time) / 10\r\n\t\t\t\t\t\tprint(\"ce loss{0}, {1:1.4f}s per steps\".format(c_l, gap_time))\r\n\ttf.keras.backend.clear_session()\r\n\ttf.reset_default_graph()\r\n\r\nif __name__ == '__main__':\r\n\ttf.logging.set_verbosity(tf.logging.INFO)\r\n\tprint(\"\\nTest the two apis\")\r\n\tdp_and_bm_api_test()\r\n\tprint(\"The number of gpus is {0}\".format(num_gpus))\r\n\tprint(\"\\nUsing tf.boolean_mask\")\r\n\ttrain(api_sel=0)\r\n\tprint(\"\\nUsing tf.dynamic_partition\")\r\n\ttrain(api_sel=1)\r\n```\r\n\r\nWhen I use two gpus, I set `os.environ[\"CUDA_VISIBLE_DEVICES\"]=\"0, 1\"`\r\n\r\n\r\n```\r\n2018-11-22 07:37:36.070340: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1\r\n2018-11-22 07:37:36.478438: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-11-22 07:37:36.478486: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1\r\n2018-11-22 07:37:36.478498: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N Y\r\n2018-11-22 07:37:36.478511: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   Y N\r\n2018-11-22 07:37:36.478930: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 11421 MB memory) -> physical GPU (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:17:00.0, compute capability: 5.2)\r\n2018-11-22 07:37:36.479432: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 11421 MB memory) -> physical GPU (device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:18:00.0, compute capability: 5.2)\r\nr_1\r\n [[1 2 3]\r\n [7 8 9]]\r\nr_2\r\n [[1 2 3]\r\n [7 8 9]]\r\nThe number of gpus is 2\r\n\r\nUsing tf.boolean_mask\r\n\r\nce loss[5.088441], 0.0010s per steps\r\nce loss[5.088441], 0.0010s per steps\r\nce loss[5.088441], 0.0010s per steps\r\n\r\n\r\nUsing tf.dynamic_partition\r\nce loss[nan], 0.0010s per steps\r\nce loss[nan], 0.0011s per steps\r\nce loss[nan], 0.0011s per steps\r\n```\r\n\r\n\r\nWhen I use one gpus, I set `os.environ[\"CUDA_VISIBLE_DEVICES\"]=\"0\"`\r\nThen I get\r\n```\r\n\r\nTest the two apis\r\n2018-11-22 07:41:32.112369: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2018-11-22 07:41:34.385976: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties:\r\nname: GeForce GTX TITAN X major: 5 minor: 2 memoryClockRate(GHz): 1.076\r\npciBusID: 0000:17:00.0\r\ntotalMemory: 11.92GiB freeMemory: 11.80GiB\r\n2018-11-22 07:41:34.386009: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0\r\n2018-11-22 07:41:34.586971: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-11-22 07:41:34.587016: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0\r\n2018-11-22 07:41:34.587024: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N\r\n2018-11-22 07:41:34.587249: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 11421 MB memory) -> physical GPU (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:17:00.0, compute capability: 5.2)\r\nr_1\r\n [[1 2 3]\r\n [7 8 9]]\r\nr_2\r\n [[1 2 3]\r\n [7 8 9]]\r\nThe number of gpus is 1\r\n\r\n\r\nUsing tf.boolean_mask\r\n\r\nce loss[2.3863728], 0.0009s per steps\r\nce loss[2.3863728], 0.0009s per steps\r\nce loss[2.3863728], 0.0009s per steps\r\n\r\n\r\n\r\nUsing tf.dynamic_partition\r\nce loss[2.1562214], 0.0010s per steps\r\nce loss[2.1562214], 0.0013s per steps\r\nce loss[2.1562214], 0.0010s per steps\r\n\r\n```\r\n\r\nI think the implementation of the  api `tf.dynamic_partition` is really terrible, \r\nI also reported that this api may cuase memory leak under certain situation\r\nhttps://github.com/tensorflow/tensorflow/issues/22464\r\n\r\nIt also cost me lots of time to find that it is not suitable with mulit gpus.....\r\nI think there may other potential issues about the  `tf.dynamic_partition`.\r\nAnd I don't figure out why I still use it......\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23917", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23917/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23917/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23917/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23917", "id": 383405880, "node_id": "MDU6SXNzdWUzODM0MDU4ODA=", "number": 23917, "title": "error raised when convert srgan model to .tflite", "user": {"login": "zzqiuzz", "id": 24356886, "node_id": "MDQ6VXNlcjI0MzU2ODg2", "avatar_url": "https://avatars0.githubusercontent.com/u/24356886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzqiuzz", "html_url": "https://github.com/zzqiuzz", "followers_url": "https://api.github.com/users/zzqiuzz/followers", "following_url": "https://api.github.com/users/zzqiuzz/following{/other_user}", "gists_url": "https://api.github.com/users/zzqiuzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzqiuzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzqiuzz/subscriptions", "organizations_url": "https://api.github.com/users/zzqiuzz/orgs", "repos_url": "https://api.github.com/users/zzqiuzz/repos", "events_url": "https://api.github.com/users/zzqiuzz/events{/privacy}", "received_events_url": "https://api.github.com/users/zzqiuzz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-22T07:09:29Z", "updated_at": "2018-12-06T22:04:07Z", "closed_at": null, "author_association": "NONE", "body": "Hi! Recently, I've tried a lot to convert a SRGan model(.ckpt) to .tflite version.However,things dont go that smoothly.When i called the converted model(.tflite) in android studio, it ran just collapsed. Finally , i find it is two modules contained in the code which is pixelShuffler() that  account for the raised error. Because when i set input of that module as output node in the frozen graph,it works.But  i dived into the problematic module and found no operator not supported by tensorflow lite.And the code is @https://github.com/brade31919/SRGAN-tensorflow. So Has anyone converted GAN to .tflite successfully?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23906", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23906/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23906/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23906/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23906", "id": 383278896, "node_id": "MDU6SXNzdWUzODMyNzg4OTY=", "number": 23906, "title": "Copy value of trainable variable to another trainable variable.", "user": {"login": "Firyuza", "id": 5341864, "node_id": "MDQ6VXNlcjUzNDE4NjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5341864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Firyuza", "html_url": "https://github.com/Firyuza", "followers_url": "https://api.github.com/users/Firyuza/followers", "following_url": "https://api.github.com/users/Firyuza/following{/other_user}", "gists_url": "https://api.github.com/users/Firyuza/gists{/gist_id}", "starred_url": "https://api.github.com/users/Firyuza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Firyuza/subscriptions", "organizations_url": "https://api.github.com/users/Firyuza/orgs", "repos_url": "https://api.github.com/users/Firyuza/repos", "events_url": "https://api.github.com/users/Firyuza/events{/privacy}", "received_events_url": "https://api.github.com/users/Firyuza/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-11-21T20:18:51Z", "updated_at": "2019-05-05T21:28:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.4.1\r\n- Are you willing to contribute it (Yes/No): No.\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nNow Tensorflow doesn't allow to copy value of trainable variable to another one. Operations like tf.assight, tf.identity, tf.Variable(source_variable.initialized_value()) or tf.contrib.copy_graph.copy_variable_to_graph(var, self.graph) DO NOT copy just value. After such operations the destination variable referes to the source variable and I can't pass this variable to optimizer for computing gradients: \"ValueError: No gradients provided for any variable, check your graph for ops that do not support gradients, ... \"\r\n**Will this change the current api? How?**\r\nThis change won't change the existing functions, just will add new opportunity for trainable variables.\r\n**Who will benefit with this feature?**\r\nIt will make more flexible structure that can be good for GANs, or when we have two networks and it is neccessary to copy values of one network parameters to second network parameters, and still train two networks independently.\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23901", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23901/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23901/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23901/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23901", "id": 383097929, "node_id": "MDU6SXNzdWUzODMwOTc5Mjk=", "number": 23901, "title": "reduce_prod EXTREMELY slow", "user": {"login": "sjeps", "id": 5072539, "node_id": "MDQ6VXNlcjUwNzI1Mzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5072539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjeps", "html_url": "https://github.com/sjeps", "followers_url": "https://api.github.com/users/sjeps/followers", "following_url": "https://api.github.com/users/sjeps/following{/other_user}", "gists_url": "https://api.github.com/users/sjeps/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjeps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjeps/subscriptions", "organizations_url": "https://api.github.com/users/sjeps/orgs", "repos_url": "https://api.github.com/users/sjeps/repos", "events_url": "https://api.github.com/users/sjeps/events{/privacy}", "received_events_url": "https://api.github.com/users/sjeps/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-21T12:34:14Z", "updated_at": "2018-11-29T21:02:08Z", "closed_at": null, "author_association": "NONE", "body": "I have a custom operation running tf.reduce_sum over an axis of a Rank 5 tensor, doing an NN training.\r\nAs soon as i switch to tf.reduce_prod I get a performance drop of about 20x slower training time.\r\n\r\nThis was somewhat unexpected since reduce_max or other reductions run at the same speed of reduce_sum.\r\n\r\nIs this expected behaviour?\r\n\r\nTested on windows & linux, tensorflow versions tested from 1.5 to 1.11"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23900", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23900/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23900/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23900/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23900", "id": 383045276, "node_id": "MDU6SXNzdWUzODMwNDUyNzY=", "number": 23900, "title": "No clear_devices in BestExporter", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-21T10:12:58Z", "updated_at": "2019-10-24T08:45:43Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes, please see this [Colab](https://colab.research.google.com/drive/1GKAqEo7qSr6kMAgxPrOrudA5eLndQ6Ub)\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): n/a\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): n/a\r\n- TensorFlow version (use command below): 1.10+\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: whatever is on Colab\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nOne can not train a distributed-`Estimator` and export the model, then load it on a non-distributive device because if we look at the TensorFlow docs for BestExporter\r\n\r\n```\r\n__init__(\r\n    name='best_exporter',\r\n    serving_input_receiver_fn=None,\r\n    event_file_pattern='eval/*.tfevents.*',\r\n    compare_fn=_loss_smaller,\r\n    assets_extra=None,\r\n    as_text=False,\r\n    exports_to_keep=5\r\n)\r\n```\r\nit is apparent that `clear_devices` is not an option.\r\n\r\n**Describe the expected behavior**\r\n\r\nLet me easily export and import `Estimators`\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n see this [Colab](https://colab.research.google.com/drive/1GKAqEo7qSr6kMAgxPrOrudA5eLndQ6Ub)\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23898", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23898/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23898/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23898/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23898", "id": 382990515, "node_id": "MDU6SXNzdWUzODI5OTA1MTU=", "number": 23898, "title": "Error occurs when importing metagraph that contains cudnnRNN cells", "user": {"login": "sjtuldl", "id": 20456694, "node_id": "MDQ6VXNlcjIwNDU2Njk0", "avatar_url": "https://avatars3.githubusercontent.com/u/20456694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjtuldl", "html_url": "https://github.com/sjtuldl", "followers_url": "https://api.github.com/users/sjtuldl/followers", "following_url": "https://api.github.com/users/sjtuldl/following{/other_user}", "gists_url": "https://api.github.com/users/sjtuldl/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjtuldl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjtuldl/subscriptions", "organizations_url": "https://api.github.com/users/sjtuldl/orgs", "repos_url": "https://api.github.com/users/sjtuldl/repos", "events_url": "https://api.github.com/users/sjtuldl/events{/privacy}", "received_events_url": "https://api.github.com/users/sjtuldl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "protoget", "id": 5117188, "node_id": "MDQ6VXNlcjUxMTcxODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5117188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protoget", "html_url": "https://github.com/protoget", "followers_url": "https://api.github.com/users/protoget/followers", "following_url": "https://api.github.com/users/protoget/following{/other_user}", "gists_url": "https://api.github.com/users/protoget/gists{/gist_id}", "starred_url": "https://api.github.com/users/protoget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protoget/subscriptions", "organizations_url": "https://api.github.com/users/protoget/orgs", "repos_url": "https://api.github.com/users/protoget/repos", "events_url": "https://api.github.com/users/protoget/events{/privacy}", "received_events_url": "https://api.github.com/users/protoget/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "protoget", "id": 5117188, "node_id": "MDQ6VXNlcjUxMTcxODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5117188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protoget", "html_url": "https://github.com/protoget", "followers_url": "https://api.github.com/users/protoget/followers", "following_url": "https://api.github.com/users/protoget/following{/other_user}", "gists_url": "https://api.github.com/users/protoget/gists{/gist_id}", "starred_url": "https://api.github.com/users/protoget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protoget/subscriptions", "organizations_url": "https://api.github.com/users/protoget/orgs", "repos_url": "https://api.github.com/users/protoget/repos", "events_url": "https://api.github.com/users/protoget/events{/privacy}", "received_events_url": "https://api.github.com/users/protoget/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2018-11-21T07:33:20Z", "updated_at": "2020-01-17T13:58:29Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS 7.4\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip install .whl\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 2.7.14\r\n- Bazel version (if compiling from source): \r\n- GCC/Compiler version (if compiling from source): c++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)\r\n- CUDA/cuDNN version: cuda: 9.0 cuDNN: 7.1.3\r\n- GPU model and memory: GTX1050Ti/4GB\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/2603030/tf_env.txt)\r\n\r\n\r\n**Describe the current behavior**\r\nI try to import graph from a MetaGraphDef proto that contains a CudnnRNN cell, the error below raises:\r\n\r\n```\r\n Traceback (most recent call last):\r\n  File \"test.py\", line 21, in <module>\r\n    saver = tf.train.import_meta_graph(mgd)\r\n  File \"/root/anaconda2/envs/tf12/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1674, in import_meta_graph\r\n    meta_graph_or_file, clear_devices, import_scope, **kwargs)[0]\r\n  File \"/root/anaconda2/envs/tf12/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1696, in _import_meta_graph_with_return_elements\r\n    **kwargs))\r\n  File \"/root/anaconda2/envs/tf12/lib/python2.7/site-packages/tensorflow/python/framework/meta_graph.py\", line 852, in import_scoped_meta_graph_with_return_elements\r\n    ops.prepend_name_scope(value, scope_to_prepend_to_names))\r\n  File \"/root/anaconda2/envs/tf12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3490, in as_graph_element\r\n    return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\r\n  File \"/root/anaconda2/envs/tf12/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3550, in _as_graph_element_locked\r\n    \"graph.\" % repr(name))\r\nKeyError: \"The name 'cudnn_lstm/opaque_kernel_saveable' refers to an Operation not in the graph.\"\r\n```\r\n\r\nWhat I've done:\r\nI've debuged the souce code and found out that a CudnnLSTMSaveable instance is created when cudnnRNN cell gets called and corresponding op was saved in tf.GraphKeys.SAVEABLE_OBJECTS collections with the name \"cudnn_lstm/opaque_kernel_saveable\".\r\nwhen executing saver.import_meta_graph, in saver.save_op(line 189 of saver.py) function the saveable object mentioned above is somehow transfered into \"cudnn_lstm/rnn/multi_rnn_cell/cell_0/cudnn_compatible_lstm_cell/kernel\" and \"cudnn_lstm/rnn/multi_rnn_cell/cell_0/cudnn_compatible_lstm_cell/bias\" and gets saved. But the op named \"cudnn_lstm/opaque_kernel_saveable\" didn't gets saved. I'm wandering if this is a bug.\r\n\r\n**Describe the expected behavior**\r\ngraph gets imported\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nnum_layers = 1\r\nnum_units = 128\r\ndirection = \"unidirectional\"\r\ninputs    = tf.placeholder(tf.float32, [None, None, 32], name=\"inputs\")\r\nconvolved = tf.transpose(inputs, [1, 0, 2])\r\n\r\nlstm      =  tf.contrib.cudnn_rnn.CudnnLSTM(num_layers, num_units, direction=direction)\r\noutputs, output_states = lstm(convolved, training=True)\r\nenc_output = tf.transpose(outputs, [1, 0, 2])\r\noptimizer  = tf.train.AdamOptimizer(0.001)\r\noptim = optimizer.minimize(enc_output)\r\nsaver     = tf.train.Saver()\r\ninit      = tf.global_variables_initializer()\r\nwith tf.Session() as session:\r\n    session.run(init)\r\n    # export MetaGraphDef proto to mgd\r\n    mgd=saver.export_meta_graph()\r\nwith tf.Session(graph=tf.Graph()) as session:\r\n    # import graph from mgd on another graph\r\n    saver = tf.train.import_meta_graph(mgd)\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23893", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23893/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23893/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23893/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23893", "id": 382907005, "node_id": "MDU6SXNzdWUzODI5MDcwMDU=", "number": 23893, "title": "StructuralEnsembleRegressor gives warning: Converting sparse IndexedSlices to a dense Tensor of unknown shape", "user": {"login": "wliangaz", "id": 25938350, "node_id": "MDQ6VXNlcjI1OTM4MzUw", "avatar_url": "https://avatars1.githubusercontent.com/u/25938350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wliangaz", "html_url": "https://github.com/wliangaz", "followers_url": "https://api.github.com/users/wliangaz/followers", "following_url": "https://api.github.com/users/wliangaz/following{/other_user}", "gists_url": "https://api.github.com/users/wliangaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wliangaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wliangaz/subscriptions", "organizations_url": "https://api.github.com/users/wliangaz/orgs", "repos_url": "https://api.github.com/users/wliangaz/repos", "events_url": "https://api.github.com/users/wliangaz/events{/privacy}", "received_events_url": "https://api.github.com/users/wliangaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, {"login": "agarwal-ashish", "id": 19335798, "node_id": "MDQ6VXNlcjE5MzM1Nzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/19335798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agarwal-ashish", "html_url": "https://github.com/agarwal-ashish", "followers_url": "https://api.github.com/users/agarwal-ashish/followers", "following_url": "https://api.github.com/users/agarwal-ashish/following{/other_user}", "gists_url": "https://api.github.com/users/agarwal-ashish/gists{/gist_id}", "starred_url": "https://api.github.com/users/agarwal-ashish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agarwal-ashish/subscriptions", "organizations_url": "https://api.github.com/users/agarwal-ashish/orgs", "repos_url": "https://api.github.com/users/agarwal-ashish/repos", "events_url": "https://api.github.com/users/agarwal-ashish/events{/privacy}", "received_events_url": "https://api.github.com/users/agarwal-ashish/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-21T00:40:41Z", "updated_at": "2019-02-25T20:31:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nI break down the stock example and run it on debug mode. I used my own sample data which has 1000 rows x 15 cols.  here's the code:\r\n#----\r\n    reader = tf.contrib.timeseries.CSVReader(csv_file_name,column_names=((tf.contrib.timeseries.TrainEvalFeatures.TIMES,)+ (tf.contrib.timeseries.TrainEvalFeatures.VALUES,) * N_COLS))\r\n    train_input_fn = tf.contrib.timeseries.RandomWindowInputFn(reader, batch_size=N_COLS, window_size = 15)\r\n    training_steps=150\r\n    structural = tf.contrib.timeseries.StructuralEnsembleRegressor(periodicities=[7,100], num_features=N_COLS, cycle_num_latent_values=3)\r\n    ff = structural.train(input_fn=train_input_fn, steps=training_steps)\r\n#----\r\n- OS Platform and Distribution: Windows 10, Anaconda, Python3.6\r\n- TensorFlow installed from (source or binary): 1.12.0\r\n- GPU model and memory: Quadro K2200\r\n\r\nChecked related SO posts and tf source code (gradients_impl.py), looks to me this was due to that TensorFlow automatically densifies the tf.IndexedSlices for unknown shape.  This also makes it throw OOM error for slightly larger dataset (1000rows x 25cols). I also saw a note from gradient_impl.py that reads:\r\n  # TODO(mrry): Consider adding static shape information to\r\n  # IndexedSlices, to avoid using numpy here.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23888", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23888/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23888/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23888/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23888", "id": 382793804, "node_id": "MDU6SXNzdWUzODI3OTM4MDQ=", "number": 23888, "title": "Error: ...tensorflow/core/common_runtime/bfc_allocator.cc:373] tried to deallocate nullptr", "user": {"login": "muarvyn", "id": 10672197, "node_id": "MDQ6VXNlcjEwNjcyMTk3", "avatar_url": "https://avatars0.githubusercontent.com/u/10672197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muarvyn", "html_url": "https://github.com/muarvyn", "followers_url": "https://api.github.com/users/muarvyn/followers", "following_url": "https://api.github.com/users/muarvyn/following{/other_user}", "gists_url": "https://api.github.com/users/muarvyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/muarvyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muarvyn/subscriptions", "organizations_url": "https://api.github.com/users/muarvyn/orgs", "repos_url": "https://api.github.com/users/muarvyn/repos", "events_url": "https://api.github.com/users/muarvyn/events{/privacy}", "received_events_url": "https://api.github.com/users/muarvyn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-11-20T18:27:41Z", "updated_at": "2019-11-08T23:17:02Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\nUbuntu 18.04 (bionic);\r\ng++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0;\r\nbazel release 0.18.1\r\nPython 2.7.15rc1\r\n- CUDA/cuDNN version: none\r\n- GPU model and memory: none\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/2601035/tf_env.txt)\r\n\r\n**Current behavior**\r\nI've built TensorFlow from commit\r\n`git log -1`\r\n`commit a6d8ffae097d0132989ae4688d224121ec6d8f35 (HEAD, tag: v1.12.0, origin/r1.12)`\r\n`Author: Todd Wang <toddwang@gmail.com>`\r\n`Date:   Thu Nov 1 18:35:10 2018 -0700`\r\n`Fix a bug in tpu.py and xla.py that while creating an identity node for control input edges under rewrite context, the parent control flow context is lost. (#23446)\r\nPiperOrigin-RevId: 219724472`\r\nwith command line\r\n`bazel build --config=mkl -c opt --copt=-mavx --copt=-mavx2 //tensorflow/tools/pip_package:build_pip_package`\r\nand got the error, repeatedly appearing in terminal:\r\n`E tensorflow/core/common_runtime/bfc_allocator.cc:373] tried to deallocate nullptr`\r\nwhile attempting to run the example [Text generation using a RNN with eager execution](https://www.tensorflow.org/tutorials/sequences/text_generation).\r\nAlso can be reproduced with the package, installed with `pip install https://storage.googleapis.com/intel-optimized-tensorflow/tensorflow-1.11.0-cp27-cp27mu-linux_x86_64.whl `.\r\n\r\n\r\n**Expected behavior**\r\nRunning without error messages.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23875", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23875/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23875/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23875/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23875", "id": 382592421, "node_id": "MDU6SXNzdWUzODI1OTI0MjE=", "number": 23875, "title": "DCGAN implementation differs between GitHub and Colab", "user": {"login": "mr-ubik", "id": 16547060, "node_id": "MDQ6VXNlcjE2NTQ3MDYw", "avatar_url": "https://avatars0.githubusercontent.com/u/16547060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mr-ubik", "html_url": "https://github.com/mr-ubik", "followers_url": "https://api.github.com/users/mr-ubik/followers", "following_url": "https://api.github.com/users/mr-ubik/following{/other_user}", "gists_url": "https://api.github.com/users/mr-ubik/gists{/gist_id}", "starred_url": "https://api.github.com/users/mr-ubik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mr-ubik/subscriptions", "organizations_url": "https://api.github.com/users/mr-ubik/orgs", "repos_url": "https://api.github.com/users/mr-ubik/repos", "events_url": "https://api.github.com/users/mr-ubik/events{/privacy}", "received_events_url": "https://api.github.com/users/mr-ubik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-20T10:18:46Z", "updated_at": "2018-11-30T00:55:45Z", "closed_at": null, "author_association": "NONE", "body": "There's a difference between the [DCGAN](https://github.com/tensorflow/tensorflow/blob/r1.11/tensorflow/contrib/eager/python/examples/generative_examples/dcgan.ipynb) implementation present on GitHub and the one present in Colab.\r\nAlso, they both suffer the same problem as #19643 #23873 "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23873", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23873/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23873/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23873/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23873", "id": 382548282, "node_id": "MDU6SXNzdWUzODI1NDgyODI=", "number": 23873, "title": "Keras layers: no update ops added even when used as a \"simplified interface to Tensorflow\"", "user": {"login": "galeone", "id": 8427788, "node_id": "MDQ6VXNlcjg0Mjc3ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8427788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galeone", "html_url": "https://github.com/galeone", "followers_url": "https://api.github.com/users/galeone/followers", "following_url": "https://api.github.com/users/galeone/following{/other_user}", "gists_url": "https://api.github.com/users/galeone/gists{/gist_id}", "starred_url": "https://api.github.com/users/galeone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galeone/subscriptions", "organizations_url": "https://api.github.com/users/galeone/orgs", "repos_url": "https://api.github.com/users/galeone/repos", "events_url": "https://api.github.com/users/galeone/events{/privacy}", "received_events_url": "https://api.github.com/users/galeone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2018-11-20T08:20:55Z", "updated_at": "2019-10-03T09:27:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Archlinux\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: cuda 9.0, cudnn 7.1\r\n- GPU model and memory: nvidia 1080ti\r\n\r\n**Describe the current behavior**\r\n\r\nI'm migrating my codebase to a Tensorflow 2.0 compatible version, thus I'm replacing all the `tf.layers` call with their `tf.keras.layers` counterpart.\r\n\r\nI want to continue using static graphs and MonitoredSession to train my models (since I do have all the input pipelines defined with tf.data.Dataset and all the training script defined to work in this way).\r\n\r\nHowever, there's a huge problem when a layer adds some update operation (like the BatchNormalization layer).\r\n\r\nThe actual behavior is that the update operations (of moving mean and variance) are not called when training the model.\r\n\r\nThis can be OK in a full-keras solution, where the connection among models, the update operations and so on, are managed by the `train_on_batch` + `model.compile` + `model.fit` call (that do some magic in the background).\r\nIn fact, @fchollet said this is by design: https://github.com/tensorflow/tensorflow/issues/19643#issuecomment-394527486\r\n\r\nBut since I don't want to migrate to a full keras-based solution, how can I handle the updates?\r\n\r\nI found some theoretical workaround (collected the update operations `model.updates` + collect the inputs `model.inputs`, loop over the inputs, feed the correct input and execute with sess.run the updates), but those are really ugly and they don't work: I can trigger the parameter update, but the time-step of the update execution is wrong and the solution does not converge: moreover, when the model becomes complex (like in the example of BiGAN below) it can be a real mess and the code become unmaintenable.\r\n\r\n**Describe the expected behavior**\r\n\r\nWhen I'm using keras layers to define the models and I'm not calling `train_on_batch` or `compile` or any other method to train the model that's pure keras, the update operations should be placed into the graph (having thus the same behavior of the batch normalization layer present in `tf.layers`) and executed when model `.trainable` is `True`.\r\n\r\nMoreover, there's another strange behavour: when I define a model output passing a new input (hence I invoke the `Model.call` method) the update operation have no idea of this new input.\r\n\r\nProbably, the `.call` method shouln't just return the output tensor, but it should return a new `Model` that shared the same parameters of the orignial one, but defined with a new input (and thus with its update ops aware of the new input).\r\n\r\n**Code to reproduce the issue**\r\nA BiGAN implementation.\r\n\r\n```python\r\nfrom typing import Tuple, Callable, Any, Optional\r\nimport multiprocessing\r\nimport sys\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow import keras as k\r\nfrom tensorflow.python.training.summary_io import SummaryWriterCache\r\n\r\n\r\ndef dataset(\r\n    shape: Tuple[int, int],\r\n    batch_size: int = 32,\r\n    epochs: int = None,\r\n    train: bool = False,\r\n    _batch=True,\r\n) -> tf.data.Dataset:\r\n    \"\"\"Returns the dataset correcly batched and resized\r\n    Args:\r\n        shape: The output shape of the images in the Dataset\r\n        batch_size: The size of the batch to return at each invocation\r\n        epochs: The the number of times that the dataset will repeat itself\r\n                before throwing an exception\r\n        train: when True, returns the shuffled train dataset, when False returns\r\n               the test, not shuffled, dataset\r\n        _batch: private, do not use\r\n    Returns:\r\n        The dataset\r\n    \"\"\"\r\n\r\n    def _process(image, label):\r\n        \"\"\"The function used to resize the image to the specified shape.\r\n        Used in the tf.data.Dataset.map function\r\n        Args:\r\n            image: the input image\r\n            label: the input label\r\n        Return:\r\n            resized_image, label\r\n        \"\"\"\r\n        nonlocal shape\r\n        image = tf.image.resize_images(\r\n            tf.expand_dims(image, axis=0), shape, tf.image.ResizeMethod.NEAREST_NEIGHBOR\r\n        )\r\n        image = tf.cast(image, tf.float32)\r\n        image = tf.squeeze(image, axis=[0])\r\n        return image, label\r\n\r\n    (train_images, train_labels), (\r\n        test_images,\r\n        test_labels,\r\n    ) = k.datasets.cifar10.load_data()\r\n    if not train:\r\n        train_images = test_images\r\n        train_labels = test_labels\r\n    train_images = (train_images - 127.5) / 127.5\r\n\r\n    def _generator():\r\n        r\"\"\"The generator that returns the pair image,label\r\n        This must be used in order to don't use tf.data.Dataset.from_tensor_slices.abs\r\n        In this way, we can build a dataset from a generator and solve the problem of huge\r\n        graphs created by from_tensor_slices (it creates a constant in the graph :\\)\r\n        \"\"\"\r\n        for image, label in zip(train_images, train_labels):\r\n            yield image, label\r\n\r\n    def _set_shape(image, label):\r\n        \"\"\"Set the static + dynamic shape of the image, in order to correctly build the\r\n        input pipeline in both phases\r\n        Args:\r\n            image: the input image\r\n            label: the input label\r\n        Return:\r\n            image, label\r\n        \"\"\"\r\n        image.set_shape((32, 32, 3))  # static\r\n        image = tf.reshape(image, (32, 32, 3))  # dynamic\r\n        return image, label\r\n\r\n    _dataset = tf.data.Dataset.from_generator(\r\n        _generator, (tf.float32, tf.int32)\r\n    )  # unkown shape\r\n    _dataset = _dataset.map(\r\n        _set_shape, num_parallel_calls=multiprocessing.cpu_count()\r\n    )  # known static chsape\r\n\r\n    _dataset = _dataset.map(\r\n        _process, num_parallel_calls=multiprocessing.cpu_count()\r\n    )  # resize to desired input shape\r\n\r\n    if _batch:\r\n        _dataset = _dataset.batch(batch_size, drop_remainder=True)\r\n        if epochs:\r\n            _dataset = _dataset.repeat(epochs)\r\n    elif epochs:\r\n        _dataset = _dataset.repeat(epochs)\r\n\r\n    _dataset = _dataset.prefetch(1)\r\n    return _dataset\r\n\r\n\r\nKERNEL_INITIALIZER = k.initializers.RandomNormal(mean=0.0, stddev=0.02)\r\nALMOST_ONE = k.initializers.RandomNormal(mean=1.0, stddev=0.02)\r\n\r\n\r\ndef discriminator(\r\n    visual_shape: tf.TensorShape,\r\n    encoding_shape: tf.TensorShape,\r\n    conditioning: Optional[Any] = None,\r\n    l2_penalty: float = 0.0,\r\n) -> k.Model:\r\n    \"\"\"\r\n    Build the Discriminator model.\r\n\r\n    Returns a k.Model with 2 inputs and a single output.\r\n    The inputs are an image and its encoded/latent representation.\r\n\r\n    Args:\r\n        visual_shape: The shape of the visual input, 3D tensor\r\n        encoding_shape: The shape of the latent/encoded representation\r\n        # NOT IMPLEMENTED: Conditioning: data used as GAN conditioning\r\n        # UNUSED: l2_penalty: l2 regularization strength\r\n\r\n    Returns:\r\n        The discriminator model.\r\n\r\n    \"\"\"\r\n    kernel_size = (5, 5)\r\n\r\n    # Inputs\r\n    # (64, 64, C)\r\n    # (Latent Dimension, )\r\n    input_visual = k.layers.Input(shape=visual_shape)\r\n    input_encoding = k.layers.Input(shape=encoding_shape)\r\n\r\n    # Data\r\n    # ### Layer 0\r\n    # (64, 64, 32)\r\n    visual = k.layers.Conv2D(\r\n        filters=32,\r\n        kernel_size=kernel_size,\r\n        strides=(1, 1),\r\n        padding=\"same\",\r\n        kernel_initializer=KERNEL_INITIALIZER,\r\n        kernel_regularizer=k.regularizers.l2(l2_penalty),\r\n    )(input_visual)\r\n    visual = k.layers.LeakyReLU(alpha=0.1)(visual)\r\n\r\n    # Data\r\n    # ### Layer 1\r\n    # (32, 32, 32)\r\n    visual = k.layers.Conv2D(\r\n        filters=32,\r\n        kernel_size=kernel_size,\r\n        strides=(2, 2),\r\n        padding=\"same\",\r\n        kernel_initializer=KERNEL_INITIALIZER,\r\n        kernel_regularizer=k.regularizers.l2(l2_penalty),\r\n    )(visual)\r\n    visual = k.layers.BatchNormalization()(visual)\r\n    visual = k.layers.LeakyReLU(alpha=0.1)(visual)\r\n    visual = k.layers.Dropout(rate=0.5)(visual)\r\n\r\n    # ### Layer 2\r\n    # (16, 16, 64)\r\n    visual = k.layers.Conv2D(\r\n        filters=64,\r\n        kernel_size=kernel_size,\r\n        strides=(2, 2),\r\n        padding=\"same\",\r\n        kernel_initializer=KERNEL_INITIALIZER,\r\n    )(visual)\r\n    visual = k.layers.BatchNormalization()(visual)\r\n    visual = k.layers.LeakyReLU(alpha=0.1)(visual)\r\n    visual = k.layers.Dropout(rate=0.5)(visual)\r\n\r\n    # Flatten\r\n    visual = k.layers.Flatten()(visual)\r\n\r\n    # Encoding\r\n    # ### Layer 5 D(z)\r\n    # (512,)\r\n    encoding = k.layers.Dense(units=512, kernel_initializer=KERNEL_INITIALIZER)(\r\n        input_encoding\r\n    )\r\n    encoding = k.layers.LeakyReLU(alpha=0.1)(encoding)\r\n    encoding = k.layers.Dropout(rate=0.5)(encoding)\r\n\r\n    # Data + Encoding\r\n    # ### Layer 6 D(x, z)\r\n    # (4608,)\r\n    mixed = k.layers.Concatenate()([visual, encoding])\r\n    mixed = k.layers.Dense(units=1024, kernel_initializer=KERNEL_INITIALIZER)(mixed)\r\n    mixed = k.layers.LeakyReLU(alpha=0.1)(mixed)\r\n    mixed = k.layers.Dropout(rate=0.5)(mixed)\r\n    features = mixed\r\n\r\n    # Final Step\r\n    # ### Layer 7\r\n    # (1)\r\n    out = k.layers.Dense(1, kernel_initializer=KERNEL_INITIALIZER)(mixed)\r\n\r\n    # Use the functional interface\r\n    model = k.Model(inputs=[input_visual, input_encoding], outputs=[out, features])\r\n    model.summary()\r\n    return model\r\n\r\n\r\ndef generator(\r\n    input_shape: int,\r\n    output_depth: int = 3,\r\n    conditioning: Optional[Any] = None,\r\n    l2_penalty: float = 0.0,\r\n) -> k.Model:\r\n    \"\"\"\r\n    Build the Generator model.\r\n\r\n    Given a latent representation, generates a meaningful image.\r\n    The input shape must be in the form of a vector 1x1xD.\r\n\r\n    Args:\r\n        input_shape: The shape of the noise prior\r\n        output_depth: The number of channels of the generated image\r\n        # NOT IMPLEMENTED: Conditioning: data used as GAN conditioning\r\n        l2_penalty: l2 regularization strength\r\n\r\n    Returns:\r\n        The Generator model.\r\n\r\n    \"\"\"\r\n    kernel_size = (5, 5)\r\n    model = k.Sequential(name=\"generator\")\r\n\r\n    # Project and Reshape the latent space\r\n    # ### Layer 1\r\n    # (4*4*64,)\r\n    model.add(\r\n        k.layers.Dense(\r\n            units=4 * 4 * 64,\r\n            kernel_initializer=KERNEL_INITIALIZER,\r\n            input_shape=input_shape,\r\n            kernel_regularizer=k.regularizers.l2(l2_penalty),\r\n        )\r\n    )\r\n    model.add(k.layers.Activation(k.activations.relu))\r\n    model.add(k.layers.Reshape((4, 4, 64)))\r\n\r\n    # Starting Deconvolutions\r\n    # ### Layer 2\r\n    # (8, 8, 64)\r\n    model.add(\r\n        k.layers.Conv2DTranspose(\r\n            filters=64,\r\n            kernel_size=kernel_size,\r\n            strides=(2, 2),\r\n            padding=\"same\",\r\n            kernel_initializer=KERNEL_INITIALIZER,\r\n        )\r\n    )\r\n    model.add(k.layers.BatchNormalization())\r\n    model.add(k.layers.Activation(k.activations.relu))\r\n\r\n    # Starting Deconvolutions\r\n    # ### Layer 3\r\n    # (16, 16, 128)\r\n    model.add(\r\n        k.layers.Conv2DTranspose(\r\n            filters=128,\r\n            kernel_size=kernel_size,\r\n            strides=(2, 2),\r\n            padding=\"same\",\r\n            kernel_initializer=KERNEL_INITIALIZER,\r\n        )\r\n    )\r\n    model.add(k.layers.BatchNormalization())\r\n    model.add(k.layers.Activation(k.activations.relu))\r\n\r\n    # ### Layer 4\r\n    # (32, 32, 256)\r\n    model.add(\r\n        k.layers.Conv2DTranspose(\r\n            filters=256,\r\n            kernel_size=kernel_size,\r\n            strides=(2, 2),\r\n            padding=\"same\",\r\n            kernel_initializer=KERNEL_INITIALIZER,\r\n        )\r\n    )\r\n    model.add(k.layers.BatchNormalization())\r\n    model.add(k.layers.Activation(k.activations.relu))\r\n\r\n    # ### Layer 5\r\n    # (64, 64, C)\r\n    model.add(\r\n        k.layers.Conv2DTranspose(\r\n            filters=output_depth,\r\n            kernel_size=kernel_size,\r\n            strides=(2, 2),\r\n            padding=\"same\",\r\n            kernel_initializer=KERNEL_INITIALIZER,\r\n        )\r\n    )\r\n    model.add(k.layers.Activation(k.activations.tanh))  # G(z) in [-1,1]\r\n\r\n    model.summary()\r\n    return model\r\n\r\n\r\ndef encoder(\r\n    visual_shape: int, latent_dimension: int, l2_penalty: float = 0.0\r\n) -> k.Model:\r\n    \"\"\"\r\n    Build the Encoder model.\r\n\r\n    The encoder encodes the input in a vector with shape 1x1xlatent_dimension.\r\n\r\n    Args:\r\n        visual_shape: The shape of the input to encode\r\n        latent_dimension: The number of dimensions (along the depth) to use.\r\n        # NOT IMPLEMENTED: conditioning: Data used as GAN conditioning\r\n        l2_penalty: l2 regularization strength\r\n\r\n    Returns:\r\n        The Encoder model.\r\n\r\n    \"\"\"\r\n\r\n    kernel_size = (5, 5)\r\n\r\n    # Inputs\r\n    # (64, 64, C)\r\n    # (Latent Dimension, )\r\n    input_visual = k.layers.Input(shape=visual_shape)\r\n\r\n    # Data\r\n    # ### Layer 0\r\n    # (64, 64, 32)\r\n    visual = k.layers.Conv2D(\r\n        filters=32,\r\n        kernel_size=kernel_size,\r\n        strides=(1, 1),\r\n        padding=\"same\",\r\n        kernel_initializer=KERNEL_INITIALIZER,\r\n        kernel_regularizer=k.regularizers.l2(l2_penalty),\r\n    )(input_visual)\r\n    visual = k.layers.LeakyReLU(alpha=0.1)(visual)\r\n\r\n    # Data\r\n    # ### Layer 1\r\n    # (32, 32, 32)\r\n    visual = k.layers.Conv2D(\r\n        filters=32,\r\n        kernel_size=kernel_size,\r\n        strides=(2, 2),\r\n        padding=\"same\",\r\n        kernel_initializer=KERNEL_INITIALIZER,\r\n        kernel_regularizer=k.regularizers.l2(l2_penalty),\r\n    )(visual)\r\n    visual = k.layers.BatchNormalization()(visual)\r\n    visual = k.layers.LeakyReLU(alpha=0.1)(visual)\r\n    visual = k.layers.Dropout(rate=0.5)(visual)\r\n\r\n    # ### Layer 2\r\n    # (16, 16, 64)\r\n    visual = k.layers.Conv2D(\r\n        filters=128,\r\n        kernel_size=kernel_size,\r\n        strides=(2, 2),\r\n        padding=\"same\",\r\n        kernel_initializer=KERNEL_INITIALIZER,\r\n    )(visual)\r\n    visual = k.layers.BatchNormalization()(visual)\r\n    visual = k.layers.LeakyReLU(alpha=0.1)(visual)\r\n    visual = k.layers.Dropout(rate=0.5)(visual)\r\n\r\n    # Flatten\r\n    visual = k.layers.Flatten()(visual)\r\n\r\n    # Encoding\r\n    # (Latent space, )\r\n    # ### Layer 5\r\n    visual = k.layers.Dense(\r\n        units=latent_dimension, kernel_initializer=KERNEL_INITIALIZER\r\n    )(visual)\r\n\r\n    model = k.Model(inputs=input_visual, outputs=visual)\r\n    model.summary()\r\n    return model\r\n\r\n\r\ndef bce(x: tf.Tensor, label: tf.Tensor) -> tf.Tensor:\r\n    \"\"\"Returns the discrete binary cross entropy between x and the discrete label\r\n    Args:\r\n        x: a 2D tensor\r\n        label: the discrite label, aka, the distribution to match\r\n\r\n    Returns:\r\n        The binary cros entropy\r\n    \"\"\"\r\n    assert len(x.shape) == 2 and len(label.shape) == 0\r\n\r\n    return tf.losses.sigmoid_cross_entropy(tf.ones_like(x) * label, x)\r\n\r\n\r\ndef min_max(positive: tf.Tensor, negative: tf.Tensor) -> tf.Tensor:\r\n    \"\"\"Returns the discriminator (min max) loss\r\n    Args:\r\n        positive: the discriminator output for the positive class: 2D tensor\r\n        negative: the discriminator output for the negative class: 2D tensor\r\n    Returns:\r\n        The sum of 2 BCE\r\n    \"\"\"\r\n    one = tf.constant(1.0)\r\n    zero = tf.constant(0.0)\r\n    d_loss = bce(positive, one) + bce(negative, zero)\r\n    return d_loss\r\n\r\n\r\ndef train():\r\n    \"\"\"Train the GAN.\"\"\"\r\n    batch_size = 32\r\n    epochs = 100\r\n    latent_dimension = 100\r\n    l2_penalty = 0.0\r\n\r\n    x_, y_ = dataset((64, 64), batch_size, epochs).make_one_shot_iterator().get_next()\r\n\r\n    x = tf.placeholder(tf.float32, list(x_.shape))\r\n    tf.summary.image(\"x\", x, max_outputs=3)\r\n\r\n    # Define the Models\r\n    E = encoder(x.shape[1:], latent_dimension, l2_penalty)\r\n\r\n    z_ = tf.random_normal([batch_size, latent_dimension], mean=0.0, stddev=1.0)\r\n\r\n    z = tf.placeholder(tf.float32, list(z_.shape))\r\n    G = generator(z.shape[1:], x.shape[-1].value, l2_penalty)\r\n    D = discriminator(x.shape[1:], E.output.shape[1:], l2_penalty)\r\n\r\n    # Generate from latent representation z\r\n    G_z = G(z)\r\n    tf.summary.image(\"G(z)\", G_z, max_outputs=3)\r\n\r\n    # encode x to a latent representation\r\n    E_x = E(x)\r\n\r\n    G_Ex = G(E_x)\r\n    tf.summary.image(\"G(E(x))\", G_Ex, max_outputs=3)\r\n\r\n    # plot image difference\r\n    tf.summary.image(\r\n        \"G(E(x)) - x\", tf.norm(G_Ex - x_, axis=3, keepdims=True), max_outputs=3\r\n    )\r\n\r\n    # The output of the discriminator is a bs,n,n,value\r\n    # hence flatten all the values of the map and compute\r\n    # the loss element wise\r\n    D_Gz, F_Gz = D(inputs=[G_z, z])\r\n    D_x, F_x = D(inputs=[x, E_x])\r\n    D_Gz = k.layers.Flatten()(D_Gz)\r\n    F_Gz = k.layers.Flatten()(F_Gz)\r\n    D_x = k.layers.Flatten()(D_x)\r\n    F_x = k.layers.Flatten()(F_x)\r\n\r\n    ## Discriminator\r\n    d_loss = min_max(D_x, D_Gz)\r\n\r\n    ## Generator\r\n    g_loss = bce(D_Gz, tf.constant(1.0))\r\n    # Encoder\r\n    e_loss = bce(D_x, tf.constant(0.0))\r\n\r\n    # add regularizations defined in the keras layers\r\n    d_loss += tf.add_n(D.losses)\r\n    e_loss += tf.add_n(E.losses)\r\n    g_loss += tf.add_n(G.losses)\r\n\r\n    tf.summary.scalar(\"d_loss\", d_loss)\r\n    tf.summary.scalar(\"g_loss\", g_loss)\r\n    tf.summary.scalar(\"e_loss\", e_loss)\r\n\r\n    global_step = tf.train.get_or_create_global_step()\r\n\r\n    lr = 1e-4\r\n    tf.summary.scalar(\"lr\", lr)\r\n\r\n    # Define the D train op\r\n    train_d = tf.train.AdamOptimizer(lr, beta1=0.5).minimize(\r\n        d_loss, var_list=D.trainable_variables\r\n    )\r\n\r\n    # Define the G + E train ops (the models can be trained\r\n    # the same step, but separately)\r\n    train_g = tf.train.AdamOptimizer(lr, beta1=0.5).minimize(\r\n        g_loss, global_step=global_step, var_list=G.trainable_variables\r\n    )\r\n\r\n    train_e = tf.train.AdamOptimizer(lr, beta1=0.5).minimize(\r\n        e_loss, var_list=E.trainable_variables\r\n    )\r\n\r\n    log_dir = f\"logs/test\"\r\n    summary_op = tf.summary.merge_all()\r\n\r\n    scaffold = tf.train.Scaffold()\r\n    config = tf.ConfigProto()\r\n    config.gpu_options.allow_growth = True\r\n    session_creator = tf.train.ChiefSessionCreator(\r\n        config=config, scaffold=scaffold, checkpoint_dir=log_dir\r\n    )\r\n\r\n    def _loop(func: Callable) -> None:\r\n        \"\"\"\r\n        Execute func for the specified number of epochs or max_steps.\r\n\r\n        Args:\r\n            func: callable to loop\r\n\r\n        Returns:\r\n            None.\r\n        \"\"\"\r\n        try:\r\n            while True:\r\n                func()\r\n        except tf.errors.OutOfRangeError:\r\n            pass\r\n\r\n    with tf.train.MonitoredSession(\r\n        session_creator=session_creator,\r\n        hooks=[\r\n            tf.train.CheckpointSaverHook(log_dir, save_steps=100, scaffold=scaffold)\r\n            # tf.train.ProfilerHook(save_steps=1000, output_dir=log_dir),\r\n        ],\r\n    ) as sess:\r\n        # Get the summary writer.\r\n        # The rational behind using the writer (from the scaffold)\r\n        # and not using the SummarySaverHook is that we want to log\r\n        # every X steps the output of G, G(E(x)) and x\r\n        # But since we need to use placeholders to feed the same data\r\n        # to G, D and E, we can't use the Hook, because the first\r\n        # sess.run on the data, will trigger the summary save op\r\n        # and the summary save op needs the data from the placeholder\r\n        writer = SummaryWriterCache.get(log_dir)\r\n\r\n        def _train():\r\n            # First create the input, that must be shared between the 2\r\n            # training iteration\r\n            real, noise = sess.run([x_, z_])\r\n            feed_dict = {x: real, z: noise}\r\n\r\n            # train D\r\n            d_gz_, d_x, _, d_loss_value = sess.run(\r\n                [D_Gz, D_x, train_d, d_loss], feed_dict\r\n            )\r\n\r\n            # train G+E\r\n            _, g_loss_value, _, e_loss_value, step = sess.run(\r\n                [train_g, g_loss, train_e, e_loss, global_step], feed_dict\r\n            )\r\n\r\n            if step % 100 == 0:\r\n                summaries = sess.run(summary_op, feed_dict)\r\n                print(\r\n                    f\"[{step}] d: {d_loss_value} - g: {g_loss_value} - e: {e_loss_value}\"\r\n                )\r\n                print(np.mean(d_gz_), np.mean(d_x))\r\n                writer.add_summary(summaries, step)\r\n                writer.flush()\r\n\r\n        _loop(_train)\r\n    return 0\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    sys.exit(train())\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23870", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23870/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23870/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23870/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23870", "id": 382498550, "node_id": "MDU6SXNzdWUzODI0OTg1NTA=", "number": 23870, "title": "In implementation of ConvLSTM,I  want to know where is the w_ci dot C_t-1 in paper formula (3)", "user": {"login": "TolicWang", "id": 16443701, "node_id": "MDQ6VXNlcjE2NDQzNzAx", "avatar_url": "https://avatars3.githubusercontent.com/u/16443701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TolicWang", "html_url": "https://github.com/TolicWang", "followers_url": "https://api.github.com/users/TolicWang/followers", "following_url": "https://api.github.com/users/TolicWang/following{/other_user}", "gists_url": "https://api.github.com/users/TolicWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/TolicWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TolicWang/subscriptions", "organizations_url": "https://api.github.com/users/TolicWang/orgs", "repos_url": "https://api.github.com/users/TolicWang/repos", "events_url": "https://api.github.com/users/TolicWang/events{/privacy}", "received_events_url": "https://api.github.com/users/TolicWang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-20T04:44:20Z", "updated_at": "2018-11-30T06:50:22Z", "closed_at": null, "author_association": "NONE", "body": "```\r\n\r\n  def call(self, inputs, state, scope=None):\r\n    cell, hidden = state\r\n    new_hidden = _conv([inputs, hidden], self._kernel_shape,\r\n                       4 * self._output_channels, self._use_bias)\r\n    gates = array_ops.split(\r\n        value=new_hidden, num_or_size_splits=4, axis=self._conv_ndims + 1)\r\n\r\n    input_gate, new_input, forget_gate, output_gate = gates\r\n    new_cell = math_ops.sigmoid(forget_gate + self._forget_bias) * cell\r\n    new_cell += math_ops.sigmoid(input_gate) * math_ops.tanh(new_input)\r\n    output = math_ops.tanh(new_cell) * math_ops.sigmoid(output_gate)\r\n\r\n    if self._skip_connection:\r\n      output = array_ops.concat([output, inputs], axis=-1)\r\n    new_state = rnn_cell_impl.LSTMStateTuple(new_cell, output)\r\nreturn output, new_state\r\n```\r\n\r\nIn this implementation, I wonder where is  w_ci dot C_t-1 appearing in paper formula (3)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23868", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23868/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23868/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23868/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23868", "id": 382495217, "node_id": "MDU6SXNzdWUzODI0OTUyMTc=", "number": 23868, "title": "Exporting GraphDef from File and using the resulting TFLite model in the TFLite Android App doesn't work.", "user": {"login": "Zeit42", "id": 1715673, "node_id": "MDQ6VXNlcjE3MTU2NzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1715673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zeit42", "html_url": "https://github.com/Zeit42", "followers_url": "https://api.github.com/users/Zeit42/followers", "following_url": "https://api.github.com/users/Zeit42/following{/other_user}", "gists_url": "https://api.github.com/users/Zeit42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zeit42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zeit42/subscriptions", "organizations_url": "https://api.github.com/users/Zeit42/orgs", "repos_url": "https://api.github.com/users/Zeit42/repos", "events_url": "https://api.github.com/users/Zeit42/events{/privacy}", "received_events_url": "https://api.github.com/users/Zeit42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-20T04:24:31Z", "updated_at": "2019-05-15T18:54:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS High Sierra 10.13.4\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Lenovo Tab 10\r\n- TensorFlow installed from (source or binary): source I think\r\n- TensorFlow version (use command below): 1.11.0\r\n- Python version: 3.6.5\r\n- Bazel version (if compiling from source): 0.16.1\r\n- GCC/Compiler version (if compiling from source): 4.2.1\r\n- CUDA/cuDNN version: I don't have CUDA\r\n- GPU model and memory: I'm not running on a GPU\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\nI have downloaded the tensorflow Release 1.12.0.\r\nUsing Android Studio, I imported the Tensorflow-Lite sample for Android located in tensorflow/tensorflow/lite/examples/android folder. I edited the Manifest so that only the DetectActivity would be installed and would run. I deployed it in my Lenovo Tab 10 Tablet and it ran well.\r\n\r\nI wanted to use my own model, and while checking [this TensorFlow Guide](https://www.tensorflow.org/lite/convert/python_api#exporting_a_graphdef_from_file_), I downloaded the Mobilenet_1.0_224 to see how the conversion would go. As I was using TensorFlow 1.11, my Python Script looked like:\r\n\r\n\timport tensorflow as tf\r\n\r\n\tgraph_def_file = \"mobilenet_v1_1.0_224/frozen_graph.pb\"\r\n\tinput_arrays = [\"input\"]\r\n\toutput_arrays = [\"MobilenetV1/Predictions/Softmax\"]\r\n\r\n\tconverter = tf.contrib.lite.TocoConverter.from_frozen_graph(\r\n\t  graph_def_file, \r\n\t  input_arrays, \r\n\t  output_arrays)\r\n\ttflite_model = converter.convert()\r\n\topen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n\r\nI got the converted_model.tflite and the labels.txt and copied it to the assets folder. I ran the app again, expecting it to run like before, but I hit an error:\r\n\r\n    java.lang.IllegalArgumentException: Cannot convert between a TensorFlowLite buffer with 602112 bytes and a ByteBuffer with 270000 bytes.\r\n\r\nThe line at fault is this line from TFLiteObejctDetectionAPIModel:\r\n    tfLite.runForMultipleInputsOutputs(inputArray, outputMap);\r\n\r\nI had expected the app to run again and use my new model since I'm feeding the converted model from what TensorFlow showed in their example. But it seems that this is not the case.\r\n\r\nI also changed the variable TF_OD_API_IS_QUANTIZED to false.\r\n\r\n**Code to reproduce the issue**\r\nTo reproduce the issue I had encountered, download the TensorFlow-Lite example. Check the manifest and comment out the other activities and just leave the DetectorActivity. Run it and it should run as expected. Now, use the guide linked above to convert a GraphDef to a TFLite example, and then copy the resulting tflite model to the assets folder of the Android Sample code. Update the value of TF_OD_API_IS_QUANTIZED to false, and then run it. \r\n\r\n\r\n**Other info / logs**\r\n    java.lang.IllegalArgumentException: Cannot convert between a TensorFlowLite buffer with 602112 bytes and a ByteBuffer with 270000 bytes.\r\n        at org.tensorflow.lite.Tensor.throwExceptionIfTypeIsIncompatible(Tensor.java:175)\r\n        at org.tensorflow.lite.Tensor.setTo(Tensor.java:65)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:126)\r\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:168)\r\n        at org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:216)\r\n        at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:249)\r\n        at android.os.Handler.handleCallback(Handler.java:751)\r\n        at android.os.Handler.dispatchMessage(Handler.java:95)\r\n        at android.os.Looper.loop(Looper.java:154)\r\n        at android.os.HandlerThread.run(HandlerThread.java:61)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23867", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23867/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23867/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23867/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23867", "id": 382489876, "node_id": "MDU6SXNzdWUzODI0ODk4NzY=", "number": 23867, "title": "Document about using custom op to build graph in C++", "user": {"login": "egolearner", "id": 45122959, "node_id": "MDQ6VXNlcjQ1MTIyOTU5", "avatar_url": "https://avatars1.githubusercontent.com/u/45122959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/egolearner", "html_url": "https://github.com/egolearner", "followers_url": "https://api.github.com/users/egolearner/followers", "following_url": "https://api.github.com/users/egolearner/following{/other_user}", "gists_url": "https://api.github.com/users/egolearner/gists{/gist_id}", "starred_url": "https://api.github.com/users/egolearner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/egolearner/subscriptions", "organizations_url": "https://api.github.com/users/egolearner/orgs", "repos_url": "https://api.github.com/users/egolearner/repos", "events_url": "https://api.github.com/users/egolearner/events{/privacy}", "received_events_url": "https://api.github.com/users/egolearner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-20T03:53:14Z", "updated_at": "2019-11-23T05:25:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version: ALL\r\n- Doc Link: \r\nCustom op: https://www.tensorflow.org/guide/extend/op\r\nBuild graph in c++: https://www.tensorflow.org/guide/extend/cc\r\n\r\n\r\n**Describe the documentation issue**\r\nPlease provide documentation about how to build graph using custom OP.\r\nRelated StackOverflow question: https://stackoverflow.com/questions/53384454/how-to-use-custom-op-to-build-tensorflow-graph-in-c\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23861", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23861/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23861/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23861/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23861", "id": 382392037, "node_id": "MDU6SXNzdWUzODIzOTIwMzc=", "number": 23861, "title": "matmul with large matrices fails with float16, but succeeds with float32", "user": {"login": "ilia-nikiforov", "id": 25756250, "node_id": "MDQ6VXNlcjI1NzU2MjUw", "avatar_url": "https://avatars2.githubusercontent.com/u/25756250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilia-nikiforov", "html_url": "https://github.com/ilia-nikiforov", "followers_url": "https://api.github.com/users/ilia-nikiforov/followers", "following_url": "https://api.github.com/users/ilia-nikiforov/following{/other_user}", "gists_url": "https://api.github.com/users/ilia-nikiforov/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilia-nikiforov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilia-nikiforov/subscriptions", "organizations_url": "https://api.github.com/users/ilia-nikiforov/orgs", "repos_url": "https://api.github.com/users/ilia-nikiforov/repos", "events_url": "https://api.github.com/users/ilia-nikiforov/events{/privacy}", "received_events_url": "https://api.github.com/users/ilia-nikiforov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-11-19T21:03:56Z", "updated_at": "2019-04-02T20:50:44Z", "closed_at": null, "author_association": "NONE", "body": "- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes. see below\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux Ubuntu 16.04\r\n\r\n- **TensorFlow installed from (source or binary)**:\r\nThis bug occurs with every version of GPU tensorflow I've tried or built, including several binaries and currently building from source.\r\n\r\n- **TensorFlow version (use command below)**:\r\nv1.12.0-rc0-2836-gd63e3ea\r\n\r\n- **Python version**:\r\n2.7\r\n\r\n- **Bazel version (if compiling from source)**:\r\n0.19.1\r\n\r\n- **GCC/Compiler version (if compiling from source)**:\r\n5.4.0\r\n\r\n- **CUDA/cuDNN version**:\r\nCurrently building from source with CUDA 10.0 and cuDNN 7.4, but previously the bug occurred with binaries using CUDA 9.0 and cuDNN 7.4 and cuDNN 7.0\r\n\r\n- **GPU model and memory**:\r\nGeForce GTX 1070 8GB\r\n\r\n- **Exact command to reproduce**:\r\nRun the following python script:\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nxvar = tf.placeholder (tf.float16, name=\"x\",shape=[None,2])\r\n\r\nweight_init = tf.uniform_unit_scaling_initializer (factor=1,dtype=tf.float16)\r\nW = tf.get_variable (\"W\",[2,2],initializer=weight_init,dtype=tf.float16)\r\n\r\noutput = tf.matmul (xvar,W)\r\n\r\ninit = tf.global_variables_initializer ()\r\n\r\nwith tf.Session () as sess:\r\n    sess.run (init)\r\n    o = sess.run (output, feed_dict = {xvar:np.zeros ((8500000,2),dtype=np.float16)})\r\n```\r\n\r\n### Describe the problem\r\nMatmul fails with large float16 matrices. If you reduce the size of the matrix to 8e6, the code runs. If you keep the size of the matrix the same, but change all the data types to float32, it runs. The limiting factor seems to be the single largest dimension. For example, doing the matmul with sizes (8e6,100) and (100,100) works in float16\r\n\r\nPerhaps this is not a Tensorflow issue, but an internal CUDA issue?\r\n\r\n### Source code / logs\r\n```\r\nWARNING:tensorflow:From float16_demo.py:6: __init__ (from tensorflow.python.ops.init_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.initializers.variance_scaling instead with distribution=uniform to get equivalent behavior.\r\nWARNING:tensorflow:From /home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\n2018-11-19 15:49:01.787213: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:993] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-11-19 15:49:01.787660: I tensorflow/compiler/xla/service/service.cc:149] XLA service 0x4863200 executing computations on platform CUDA. Devices:\r\n2018-11-19 15:49:01.787676: I tensorflow/compiler/xla/service/service.cc:157]   StreamExecutor device (0): GeForce GTX 1070, Compute Capability 6.1\r\n2018-11-19 15:49:01.787882: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties: \r\nname: GeForce GTX 1070 major: 6 minor: 1 memoryClockRate(GHz): 1.7465\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.92GiB freeMemory: 7.52GiB\r\n2018-11-19 15:49:01.787894: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n2018-11-19 15:49:01.788392: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-11-19 15:49:01.788401: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 \r\n2018-11-19 15:49:01.788405: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N \r\n2018-11-19 15:49:01.788537: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7316 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1070, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n2018-11-19 15:49:03.017490: E tensorflow/stream_executor/cuda/cuda_blas.cc:652] failed to run cuBLAS routine cublasSgemmEx: CUBLAS_STATUS_EXECUTION_FAILED\r\nTraceback (most recent call last):\r\n  File \"float16_demo.py\", line 15, in <module>\r\n    o = sess.run (output, feed_dict = {xvar:np.zeros ((8500000,2),dtype=np.float16)})\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1152, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1328, in _do_run\r\n    run_metadata)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1348, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InternalError: Blas GEMM launch failed : a.shape=(8500000, 2), b.shape=(2, 2), m=8500000, n=2, k=2\r\n\t [[node MatMul (defined at float16_demo.py:9) ]]\r\n\r\nCaused by op u'MatMul', defined at:\r\n  File \"float16_demo.py\", line 9, in <module>\r\n    output = tf.matmul (xvar,W)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 2272, in matmul\r\n    a, b, transpose_a=transpose_a, transpose_b=transpose_b, name=name)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 4763, in mat_mul\r\n    name=name)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 512, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3268, in create_op\r\n    op_def=op_def)\r\n  File \"/home/ilia/tensorflow/venv-source-nightly-2018nov19/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1831, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nInternalError (see above for traceback): Blas GEMM launch failed : a.shape=(8500000, 2), b.shape=(2, 2), m=8500000, n=2, k=2\r\n\t [[node MatMul (defined at float16_demo.py:9) ]]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23859", "id": 382374796, "node_id": "MDU6SXNzdWUzODIzNzQ3OTY=", "number": 23859, "title": "Android Bazel Build Error ", "user": {"login": "iwsmith", "id": 2998356, "node_id": "MDQ6VXNlcjI5OTgzNTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2998356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iwsmith", "html_url": "https://github.com/iwsmith", "followers_url": "https://api.github.com/users/iwsmith/followers", "following_url": "https://api.github.com/users/iwsmith/following{/other_user}", "gists_url": "https://api.github.com/users/iwsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/iwsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iwsmith/subscriptions", "organizations_url": "https://api.github.com/users/iwsmith/orgs", "repos_url": "https://api.github.com/users/iwsmith/repos", "events_url": "https://api.github.com/users/iwsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/iwsmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-11-19T20:11:37Z", "updated_at": "2019-03-09T14:52:15Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: \r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: master (5c60fb7e9b90d6641c2b5848773ef49956ed54e3)\r\n- Python version: Python 2.7.15rc1\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.19.1\r\n- GCC/Compiler version (if compiling from source): gcc 7.3.0\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nI am trying to build `//tensorflow/contrib/android:libtensorflow_inference.so` so I can use some new ops (cos specifically) in my graph, but am getting build errors:\r\n```\r\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\r\nIn file included from external/llvm/lib/Support/Path.cpp:1111:                        \r\nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\r\n  if (::futimens(FD, Times))                                                                                                     \r\n      ~~^                                                                                                                                                                             1 error generated.                                                    \r\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\r\n```\r\nNDK: r17c\r\nSDK: 28\r\n```iwsmith@bob:~/sdk/tools$ bin/sdkmanager --list                                                                                                       \r\nWarning: File /home/iwsmith/.android/repositories.cfg could not be loaded.                                                                                           \r\nInstalled packages:=====================] 100% Computing updates...                                                                                  \r\n  Path                 | Version | Description                       | Location                                                                      \r\n  -------              | ------- | -------                           | -------                                                                        \r\n  build-tools;28.0.3   | 28.0.3  | Android SDK Build-Tools 28.0.3    | build-tools/28.0.3/                                                          \r\n  platform-tools       | 28.0.1  | Android SDK Platform-Tools 28.0.1 | platform-tools/                                                                \r\n  platforms;android-28 | 6       | Android SDK Platform 28           | platforms/android-28/                                                        \r\n  tools                | 26.1.1  | Android SDK Tools 26.1.1          | tools/    \r\n```\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n1. `git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git`\r\n1. `./configure`\r\n1. `bazel clean`\r\n1. `bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so --crosstool_top=//external:android/crosstool    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain    --cxxopt=-std=c++11    --cpu=armeabi-v7a`\r\n\r\n**Any other info / logs**\r\nI have tried with a variety of NDK versions (18b, 14b) and get different build errors each time. I also tried with `--cpu=arm64-v8a` and got build errors. I am unsure which cpu architecture to target for the Pixel.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23848", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23848/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23848/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23848/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23848", "id": 382133609, "node_id": "MDU6SXNzdWUzODIxMzM2MDk=", "number": 23848, "title": "Object detection example for TFLite", "user": {"login": "SiddhantKapil", "id": 22622863, "node_id": "MDQ6VXNlcjIyNjIyODYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22622863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SiddhantKapil", "html_url": "https://github.com/SiddhantKapil", "followers_url": "https://api.github.com/users/SiddhantKapil/followers", "following_url": "https://api.github.com/users/SiddhantKapil/following{/other_user}", "gists_url": "https://api.github.com/users/SiddhantKapil/gists{/gist_id}", "starred_url": "https://api.github.com/users/SiddhantKapil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SiddhantKapil/subscriptions", "organizations_url": "https://api.github.com/users/SiddhantKapil/orgs", "repos_url": "https://api.github.com/users/SiddhantKapil/repos", "events_url": "https://api.github.com/users/SiddhantKapil/events{/privacy}", "received_events_url": "https://api.github.com/users/SiddhantKapil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-19T09:50:44Z", "updated_at": "2019-02-27T07:03:57Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No):Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI want to add an example for converting an object detection model say, ssd_mobilenet_v1 to TFLite. The code will have a Makefile for setting up everything and a jupyter notebook for showing step by step procedure for conversion.\r\n**Will this change the current api? How?**\r\nNo\r\n**Who will benefit with this feature?**\r\nI see that a lot of people ask questions around this as they don't follow the correct procedure. Even I have invested a lot of time in it and I think that a working example can help them in saving a lot of time.\r\n**Any Other info.**\r\nAfter that, I can even write script for running it on Raspberry Pi 3."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23847", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23847/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23847/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23847/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23847", "id": 382128918, "node_id": "MDU6SXNzdWUzODIxMjg5MTg=", "number": 23847, "title": "~40% performance decrease since Tensorflow 1.9 when training large models", "user": {"login": "DavidWiesner", "id": 243115, "node_id": "MDQ6VXNlcjI0MzExNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/243115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidWiesner", "html_url": "https://github.com/DavidWiesner", "followers_url": "https://api.github.com/users/DavidWiesner/followers", "following_url": "https://api.github.com/users/DavidWiesner/following{/other_user}", "gists_url": "https://api.github.com/users/DavidWiesner/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidWiesner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidWiesner/subscriptions", "organizations_url": "https://api.github.com/users/DavidWiesner/orgs", "repos_url": "https://api.github.com/users/DavidWiesner/repos", "events_url": "https://api.github.com/users/DavidWiesner/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidWiesner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-19T09:38:43Z", "updated_at": "2019-12-11T01:09:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.9.0-0-g25c197e 1.9.0\r\n- Python version: 3\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: 9.0.176/7.1.4.18\r\n- GPU model and memory: 8 x Tesla V100-SXM2-16GB major: 7 minor: 0 memoryClockRate(GHz): 1.53\r\n\r\n**Describe the current behavior**\r\nI train a model using slim in tensorflow models with the flowers dataset and the large nasnet. This were run on the official tensorflow docker images.\r\nOn my Tesla V100 for tensorflow 1.8.0-devel-gpu-py3 I got around \r\n`INFO:tensorflow:global_step/sec: 1.33334`\r\nWith tensorflow 1.9.0-devel-gpu-py3 a maximum at\r\n`INFO:tensorflow:global_step/sec: 0.89946`\r\nWith the current tensorflow 1.12.0-devel-gpu-py3 a maximum at\r\n`INFO:tensorflow:global_step/sec: 0.900003`\r\n\r\n**Describe the expected behavior**\r\nThere should not be an performance decrease in this drastic \r\n\r\n**Code to reproduce the issue**\r\n```shell\r\n#!/usr/bin/env bash\r\n[ ! -d \"models\" ] && git clone https://github.com/tensorflow/models.git\r\ncd models/research/slim/\r\nMODEL_NAME=\"nasnet_large\"\r\nTRAIN_DIR=/tmp/flowers-models/${MODEL_NAME}\r\nDATASET_DIR=/tmp/flowers\r\nrm -rf \"$TRAIN_DIR\"\r\nexport CUDA_DEVICE_ORDER=\"PCI_BUS_ID\"\r\nexport CUDA_VISIBLE_DEVICES=\"0,1\"\r\n\r\npython download_and_convert_data.py \\\r\n    --dataset_name=flowers \\\r\n    --dataset_dir=${DATASET_DIR}\r\n\r\npython train_image_classifier.py \\\r\n    --train_dir=${TRAIN_DIR}/all \\\r\n    --dataset_name=flowers \\\r\n    --dataset_split_name=train \\\r\n    --dataset_dir=${DATASET_DIR} \\\r\n    --model_name=${MODEL_NAME} \\\r\n    --max_number_of_steps=500 \\\r\n    --batch_size=16 \\\r\n    --learning_rate=0.015 \\\r\n    --save_interval_secs=60000 \\\r\n    --save_summaries_secs=60 \\\r\n    --log_every_n_steps=10 \\\r\n    --optimizer=rmsprop \\\r\n    --num_preprocessing_threads 4 \\\r\n    --num_readers 8 \\\r\n    --moving_average_decay=0.9999 \\\r\n    --weight_decay=0.00005 \\\r\n    --learning_rate_decay_type=exponential \\\r\n    --learning_rate_decay_factor=0.97 \\\r\n    --label_smoothing=0.1\r\n```\r\n\r\n**Other info / logs**\r\nI thought this issue #20843 is related to the problem but I have done a git bisect between the `v1.8.0` and the `v1.9.0` tag and running the script above for every commit and found the one that introduce the largest drop in performance: d4976f7. This commit enabled the layout optimizer by default for all gpu cluster. As a workaround and a proof I disabled the layout optimizer with the following config:\r\n```python\r\nrewrite_options = rewriter_config_pb2.RewriterConfig(layout_optimizer=rewriter_config_pb2.RewriterConfig.OFF)\r\ngraph_options = tf.GraphOptions(rewrite_options=rewrite_options)\r\nconfig = tf.ConfigProto(graph_options=graph_options) \r\n```  \r\nAnd most of the performance were back again in `tensorflow 1.9.0-devel-gpu-py3`:\r\n`INFO:tensorflow:global_step/sec: 1.18333`\r\nAnd in the latest release `tensorflow 1.12.0-devel-gpu-py3`:\r\n`INFO:tensorflow:global_step/sec: 1.23337`\r\n[Here](https://gist.github.com/DavidWiesner/c6af3238a90b3a8b1209543a9f8d7127#file-git-bisect-log) is a full log of my bisect script. [One another log](https://gist.github.com/DavidWiesner/c6af3238a90b3a8b1209543a9f8d7127#file-git-bisect-layout_optimizer-on-off-log) shows the influence of disabling the layout-optimizer in commit d4976f7 (that introducing the drop in performance) and some release versions of tensorflow. \r\nMaybe @yaozhang can answer why the layout optimizer was disabled for some architectures until 1.8.0 in f0d1abbf2 and why @zhangyaobit enabled for all architectures since 1.9.0 in d4976f7\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23845", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23845/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23845/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23845/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23845", "id": 382087294, "node_id": "MDU6SXNzdWUzODIwODcyOTQ=", "number": 23845, "title": "Some confusion about Gather OP implement", "user": {"login": "candyzone", "id": 7778833, "node_id": "MDQ6VXNlcjc3Nzg4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/7778833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/candyzone", "html_url": "https://github.com/candyzone", "followers_url": "https://api.github.com/users/candyzone/followers", "following_url": "https://api.github.com/users/candyzone/following{/other_user}", "gists_url": "https://api.github.com/users/candyzone/gists{/gist_id}", "starred_url": "https://api.github.com/users/candyzone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/candyzone/subscriptions", "organizations_url": "https://api.github.com/users/candyzone/orgs", "repos_url": "https://api.github.com/users/candyzone/repos", "events_url": "https://api.github.com/users/candyzone/events{/privacy}", "received_events_url": "https://api.github.com/users/candyzone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-19T07:24:25Z", "updated_at": "2018-12-25T03:01:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/gather_functor.h#L137\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/gather_functor.h#L139\r\n\r\nIn TensorFlow master branch, gather_functor::GatherFunctorCPU template specialization when slice_size==10 or slice_size==20, why this two magic number?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23834", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23834/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23834/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23834/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23834", "id": 381937326, "node_id": "MDU6SXNzdWUzODE5MzczMjY=", "number": 23834, "title": "Relative Device Placement", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-11-18T07:48:25Z", "updated_at": "2019-10-24T08:45:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.10+\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nFrom the [Using GPUs] Guide (under [multiple gpus][Using Multiple GPUs])  there is a part about using multiple GPUs in a \"multi-tower fashion\":\r\n\r\n```\r\nfor d in ['/device:GPU:2', '/device:GPU:3']:\r\n  with tf.device(d):\r\n```\r\n\r\nSeeing this, one might be tempted to leverage this style for multiple GPU training in a custom Estimator to indicate to the model that it can be distributed across multiple GPUs efficiently.\r\n\r\nTo my knowledge, if manual device placement is absent TensorFlow does not have some form of optimal device mapping (expect perhaps if you have the GPU version installed and a GPU is available, using it over the CPU). So what other choice do you have?\r\n\r\nAnyway, you carry on with training your estimator and export it to a `SavedModel` via `estimator.export_savedmodel(...)` and wish to use this `SavedModel` later... perhaps on a different machine, one which may not have as many GPUs as the device on which the model was trained (or maybe no GPUs)\r\n\r\nso when you run\r\n\r\n```\r\nfrom tensorflow.contrib import predictor\r\npredict_fn = predictor.from_saved_model(model_dir)\r\n```\r\n\r\nyou get\r\n\r\n```\r\nCannot assign a device for operation <OP-NAME>. Operation was \r\nexplicitly assigned to <DEVICE-NAME> but available devices are \r\n[<AVAILABLE-DEVICE-0>,...]\r\n```\r\n\r\nNow if you share a GPU cluster and are specifying TensorFlow to run your model on `GPU:3` and `GPU:6`, then go to run your model on your local machine, which may have 2 GPUs, you get the same problem.\r\n\r\n## Putative Solution\r\n\r\nI propose either:\r\n\r\n1. machine device mapping\r\n\r\n2. introducing relative device placement with automatic fallback. \r\n\r\n\r\nFor the former, this means that I can tell TensorFlow that at the beginning to treat the manual placement of devices in the graph to another via a dictionary:\r\n\r\n```\r\n# map all GPUs to single core CPU\r\nmachine_device_map = {\"device:GPU:{}\".format(i): \"device/CPU:0\" for i in range(8)}\r\n\r\n# map odd GPUs to GPU 0 and even GPUs to GPU 1 on smaller GPU machine\r\nmachine_device_map = {\r\n    \"device/GPU:{}\".format(i): \"device:GPU:{}\".format(i % 2)\r\n    for i in range(8)\r\n}\r\n\r\n\r\n# then something like this goes after importing TensorFlow\r\ntf.devices.map_device(machine_device_map)\r\n```\r\n\r\nFor the latter if I train my model on GPUs 1,4,6,7  and my machine only has GPUs 0 and 1 then  device placement 1,4 falls back to 0 and 6,7 falls back to 1. If my device only has a single CPU\r\n\r\nThis would be done with something like:\r\n\r\n```\r\nwith tf.relative_device('GPU:0'):\r\n```\r\n\r\nwhere, given 'device/relative/GPU:0' relative device calls\r\n\r\n```\r\nfrom TensorFlow's.python.client import device_lib\r\ndevices = device_lib.list_local_devices()\r\n\r\nrelative_device_num = 0\r\nrelative_device_type = 'GPU'\r\n\r\ncpus = [d for d in devices if d.device_type == 'CPU']\r\ngpus = [d for d in devices if d.device_type == 'GPU']\r\n\r\nif relative_device_type=='GPU':\r\n    if gpus:\r\n        return gpus[relative_device_num % len(gpus)] \r\n\r\nreturn cpus[relative_device_num % len(cpus)]\r\n\r\n```\r\n\r\n\r\n\r\n[Using GPUs]: https://www.tensorflow.org/guide/using_gpu#manual_device_placement\r\n[Using Multiple GPUs]: https://www.tensorflow.org/guide/using_gpu#using_multiple_gpus\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo. It would add the ability to change device placement for distributed models after training\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAll TF users\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23830", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23830/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23830/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23830/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23830", "id": 381932554, "node_id": "MDU6SXNzdWUzODE5MzI1NTQ=", "number": 23830, "title": "Not compatible with tf.float16", "user": {"login": "Shwetago", "id": 36664302, "node_id": "MDQ6VXNlcjM2NjY0MzAy", "avatar_url": "https://avatars1.githubusercontent.com/u/36664302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shwetago", "html_url": "https://github.com/Shwetago", "followers_url": "https://api.github.com/users/Shwetago/followers", "following_url": "https://api.github.com/users/Shwetago/following{/other_user}", "gists_url": "https://api.github.com/users/Shwetago/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shwetago/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shwetago/subscriptions", "organizations_url": "https://api.github.com/users/Shwetago/orgs", "repos_url": "https://api.github.com/users/Shwetago/repos", "events_url": "https://api.github.com/users/Shwetago/events{/privacy}", "received_events_url": "https://api.github.com/users/Shwetago/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Harshini-Gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Harshini-Gadige", "html_url": "https://github.com/Harshini-Gadige", "followers_url": "https://api.github.com/users/Harshini-Gadige/followers", "following_url": "https://api.github.com/users/Harshini-Gadige/following{/other_user}", "gists_url": "https://api.github.com/users/Harshini-Gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/Harshini-Gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Harshini-Gadige/subscriptions", "organizations_url": "https://api.github.com/users/Harshini-Gadige/orgs", "repos_url": "https://api.github.com/users/Harshini-Gadige/repos", "events_url": "https://api.github.com/users/Harshini-Gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/Harshini-Gadige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Harshini-Gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Harshini-Gadige", "html_url": "https://github.com/Harshini-Gadige", "followers_url": "https://api.github.com/users/Harshini-Gadige/followers", "following_url": "https://api.github.com/users/Harshini-Gadige/following{/other_user}", "gists_url": "https://api.github.com/users/Harshini-Gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/Harshini-Gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Harshini-Gadige/subscriptions", "organizations_url": "https://api.github.com/users/Harshini-Gadige/orgs", "repos_url": "https://api.github.com/users/Harshini-Gadige/repos", "events_url": "https://api.github.com/users/Harshini-Gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/Harshini-Gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-11-18T06:13:00Z", "updated_at": "2018-12-21T18:54:24Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **OS Platform - Windows10 (64-bit OS and x64-based processor)**:\r\n- **TensorFlow installed from Anaconda**:\r\n- **TensorFlow version - 1.11.0**:\r\n- **Python version - 3.6.5**:\r\n\r\nfloat16 not in the list of allowed values.\r\n**Command:**\r\n```\r\na = tf.placeholder(tf.float16, shape=[2, 2])\r\ngen_linalg_ops.qr(a)\r\n```\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-11-9aca9b273d31> in <module>\r\n      1 a = tf.placeholder(tf.float16, shape=[2, 2])\r\n----> 2 gen_linalg_ops.qr(a)\r\n\r\nG:\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\ops\\gen_linalg_ops.py in qr(input, full_matrices, name)\r\n   1486     full_matrices = _execute.make_bool(full_matrices, \"full_matrices\")\r\n   1487     _, _, _op = _op_def_lib._apply_op_helper(\r\n-> 1488         \"Qr\", input=input, full_matrices=full_matrices, name=name)\r\n   1489     _result = _op.outputs[:]\r\n   1490     _inputs_flat = _op.inputs\r\n\r\nG:\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py in _apply_op_helper(self, op_type_name, name, **keywords)\r\n    607               _SatisfiesTypeConstraint(base_type,\r\n    608                                        _Attr(op_def, input_arg.type_attr),\r\n--> 609                                        param_name=input_name)\r\n    610             attrs[input_arg.type_attr] = attr_value\r\n    611             inferred_from[input_arg.type_attr] = input_name\r\n\r\nG:\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py in _SatisfiesTypeConstraint(dtype, attr_def, param_name)\r\n     58           \"allowed values: %s\" %\r\n     59           (param_name, dtypes.as_dtype(dtype).name,\r\n---> 60            \", \".join(dtypes.as_dtype(x).name for x in allowed_list)))\r\n     61 \r\n     62 \r\n\r\nTypeError: Value passed to parameter 'input' has DataType float16 not in list of allowed values: float64, float32, complex64, complex128\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23822", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23822/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23822/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23822/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23822", "id": 381889271, "node_id": "MDU6SXNzdWUzODE4ODkyNzE=", "number": 23822, "title": "Event files created by estimator are not closed after training/evaluation", "user": {"login": "phil510", "id": 30630542, "node_id": "MDQ6VXNlcjMwNjMwNTQy", "avatar_url": "https://avatars3.githubusercontent.com/u/30630542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phil510", "html_url": "https://github.com/phil510", "followers_url": "https://api.github.com/users/phil510/followers", "following_url": "https://api.github.com/users/phil510/following{/other_user}", "gists_url": "https://api.github.com/users/phil510/gists{/gist_id}", "starred_url": "https://api.github.com/users/phil510/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phil510/subscriptions", "organizations_url": "https://api.github.com/users/phil510/orgs", "repos_url": "https://api.github.com/users/phil510/repos", "events_url": "https://api.github.com/users/phil510/events{/privacy}", "received_events_url": "https://api.github.com/users/phil510/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-11-17T18:43:16Z", "updated_at": "2019-06-02T22:15:05Z", "closed_at": null, "author_association": "NONE", "body": "I'm using the estimator API and a custom implementation of several hyperparameter search methods (random search, hyperband, etc.) to train multiple models and select the best hyperparameters. At the end of the algorithm I would like to delete all the files created during the trainings/evaluations (e.g., the checkpoint files, event files, etc.). I'm trying this with shutil.rmtree; however, I am not able to delete the event files as it appears they are still in use.\r\n\r\nHere is an example code - mostly pulled from the Iris example scripts - along with the error to illustrate the issue. The actual code uses a custom estimator implementation instead of the DNNClassifier, but this has the same problem.\r\n\r\n```\r\nimport tensorflow as tf\r\nimport pandas as pd\r\nimport os\r\nimport shutil\r\n\r\ndef load_data(y_name='Species'):\r\n    train_url = \"http://download.tensorflow.org/data/iris_training.csv\"\r\n    test_url = \"http://download.tensorflow.org/data/iris_test.csv\"\r\n\r\n    train_data = pd.read_csv(train_url)\r\n    train_data.columns = ['sepal_length', 'sepal_width', 'petal_length', 'petal_width', 'class']\r\n    test_data = pd.read_csv(test_url)\r\n    test_data.columns = ['sepal_length', 'sepal_width', 'petal_length', 'petal_width', 'class']\r\n    \r\n    train_x = train_data.iloc[:, 0:4]\r\n    train_y = train_data.iloc[:, 4]\r\n    \r\n    test_x = test_data.iloc[:, 0:4]\r\n    test_y = test_data.iloc[:, 4]\r\n    \r\n    return (train_x, train_y), (test_x, test_y)\r\n\r\ndef train_input_fn(features, labels, batch_size):\r\n    \"\"\"An input function for training\"\"\"\r\n    # Convert the inputs to a Dataset.\r\n    dataset = tf.data.Dataset.from_tensor_slices((dict(features), labels))\r\n\r\n    # Shuffle, repeat, and batch the examples.\r\n    dataset = dataset.shuffle(1000).repeat().batch(batch_size)\r\n\r\n    # Return the dataset.\r\n    return dataset\r\n\r\ndef eval_input_fn(features, labels, batch_size):\r\n    \"\"\"An input function for evaluation or prediction\"\"\"\r\n    features=dict(features)\r\n    if labels is None:\r\n        # No labels, use only features.\r\n        inputs = features\r\n    else:\r\n        inputs = (features, labels)\r\n\r\n    # Convert the inputs to a Dataset.\r\n    dataset = tf.data.Dataset.from_tensor_slices(inputs)\r\n\r\n    # Batch the examples\r\n    assert batch_size is not None, \"batch_size must not be None\"\r\n    dataset = dataset.batch(batch_size)\r\n\r\n    # Return the dataset.\r\n    return dataset\r\n\r\nmodel_dir = os.path.join(os.getcwd(), *['estimator_test', 'test_1'])\r\n\r\n(train_x, train_y), (test_x, test_y) = load_data()\r\n\r\n# Feature columns describe how to use the input.\r\nmy_feature_columns = []\r\nfor key in train_x.keys():\r\n    my_feature_columns.append(tf.feature_column.numeric_column(key=key))\r\n\r\n# Build 2 hidden layer DNN with 10, 10 units respectively.\r\nclassifier = tf.estimator.DNNClassifier(\r\n    feature_columns=my_feature_columns,\r\n    # Two hidden layers of 10 nodes each.\r\n    hidden_units=[10, 10],\r\n    # The model must choose between 3 classes.\r\n    n_classes=3,\r\n    model_dir = model_dir)\r\n\r\n# Train the Model.\r\nclassifier.train(\r\n    input_fn=lambda: train_input_fn(train_x, train_y, 100),\r\n    steps=100)\r\n\r\n# Evaluate the model.\r\neval_result = classifier.evaluate(\r\n    input_fn=lambda: eval_input_fn(test_x, test_y, 100))\r\n\r\nprint('\\nTest set accuracy: {accuracy:0.3f}\\n'.format(**eval_result))\r\n\r\nshutil.rmtree(model_dir)\r\n```\r\nHere is the error:\r\n```OSError                                   Traceback (most recent call last)\r\n<ipython-input-40-beccd7cbb56e> in <module>()\r\n----> 1 shutil.rmtree(os.path.join(os.getcwd(), *['estimator_test', 'delete_test_1']))\r\n\r\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\shutil.py in rmtree(path, ignore_errors, onerror)\r\n    492             os.close(fd)\r\n    493     else:\r\n--> 494         return _rmtree_unsafe(path, onerror)\r\n    495 \r\n    496 # Allow introspection of whether or not the hardening against symlink\r\n\r\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\shutil.py in _rmtree_unsafe(path, onerror)\r\n    391         os.rmdir(path)\r\n    392     except OSError:\r\n--> 393         onerror(os.rmdir, path, sys.exc_info())\r\n    394 \r\n    395 # Version using fd-based APIs to protect against races\r\n\r\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\shutil.py in _rmtree_unsafe(path, onerror)\r\n    389                 onerror(os.unlink, fullname, sys.exc_info())\r\n    390     try:\r\n--> 391         os.rmdir(path)\r\n    392     except OSError:\r\n    393         onerror(os.rmdir, path, sys.exc_info())\r\n\r\nOSError: [WinError 145] The directory is not empty:\r\n```\r\nI looked at all the files that were open by Python processes, and it's only the event files that are still in use.  I would expect that all files would be closed after training/evaluation are complete. Unfortunately, I cannot find a way to manually close these after training.\r\n\r\nOn a related note (and this is more of a feature request), it would be great to be able to disable writing summaries in the estimator configuration as the files are pretty large. This would remove the need to delete them after training altogether. \r\n\r\nSystem information\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Custom code\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): 1.11 (CPU version)\r\n- Python version: 3.6\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23814", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23814/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23814/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23814/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23814", "id": 381814116, "node_id": "MDU6SXNzdWUzODE4MTQxMTY=", "number": 23814, "title": "[DeepLabV3+] How to get class probabilities in C++ using frozen graph?", "user": {"login": "ZF-AR", "id": 2267796, "node_id": "MDQ6VXNlcjIyNjc3OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/2267796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZF-AR", "html_url": "https://github.com/ZF-AR", "followers_url": "https://api.github.com/users/ZF-AR/followers", "following_url": "https://api.github.com/users/ZF-AR/following{/other_user}", "gists_url": "https://api.github.com/users/ZF-AR/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZF-AR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZF-AR/subscriptions", "organizations_url": "https://api.github.com/users/ZF-AR/orgs", "repos_url": "https://api.github.com/users/ZF-AR/repos", "events_url": "https://api.github.com/users/ZF-AR/events{/privacy}", "received_events_url": "https://api.github.com/users/ZF-AR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aquariusjay", "id": 9902093, "node_id": "MDQ6VXNlcjk5MDIwOTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/9902093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aquariusjay", "html_url": "https://github.com/aquariusjay", "followers_url": "https://api.github.com/users/aquariusjay/followers", "following_url": "https://api.github.com/users/aquariusjay/following{/other_user}", "gists_url": "https://api.github.com/users/aquariusjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aquariusjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aquariusjay/subscriptions", "organizations_url": "https://api.github.com/users/aquariusjay/orgs", "repos_url": "https://api.github.com/users/aquariusjay/repos", "events_url": "https://api.github.com/users/aquariusjay/events{/privacy}", "received_events_url": "https://api.github.com/users/aquariusjay/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aquariusjay", "id": 9902093, "node_id": "MDQ6VXNlcjk5MDIwOTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/9902093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aquariusjay", "html_url": "https://github.com/aquariusjay", "followers_url": "https://api.github.com/users/aquariusjay/followers", "following_url": "https://api.github.com/users/aquariusjay/following{/other_user}", "gists_url": "https://api.github.com/users/aquariusjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aquariusjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aquariusjay/subscriptions", "organizations_url": "https://api.github.com/users/aquariusjay/orgs", "repos_url": "https://api.github.com/users/aquariusjay/repos", "events_url": "https://api.github.com/users/aquariusjay/events{/privacy}", "received_events_url": "https://api.github.com/users/aquariusjay/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-17T01:31:22Z", "updated_at": "2019-10-24T18:04:00Z", "closed_at": null, "author_association": "NONE", "body": "It looks like I should get the output from layer ResizeBilinear_3? This is the layer before argmax, according to tensorflow/models#4045. @aquariusjay\r\nHowever, the numbers I got do not look like probabilities as they contained negative numbers and numbers much bigger than 1.\r\n![image](https://user-images.githubusercontent.com/2267796/48654874-4af1f480-e9c5-11e8-9b20-215e144c3566.png)\r\nFYI, the model I'm using is **deeplabv3_xception_ade20k_train** from the model zoo. It has 150 object classes + 1 unknown class so in total 151 classes.\r\n\r\nThank you!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23807", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23807/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23807/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23807/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23807", "id": 381720177, "node_id": "MDU6SXNzdWUzODE3MjAxNzc=", "number": 23807, "title": "Convert pb model to tflite model failed in docker environment", "user": {"login": "cruzsoma", "id": 18193482, "node_id": "MDQ6VXNlcjE4MTkzNDgy", "avatar_url": "https://avatars2.githubusercontent.com/u/18193482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cruzsoma", "html_url": "https://github.com/cruzsoma", "followers_url": "https://api.github.com/users/cruzsoma/followers", "following_url": "https://api.github.com/users/cruzsoma/following{/other_user}", "gists_url": "https://api.github.com/users/cruzsoma/gists{/gist_id}", "starred_url": "https://api.github.com/users/cruzsoma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cruzsoma/subscriptions", "organizations_url": "https://api.github.com/users/cruzsoma/orgs", "repos_url": "https://api.github.com/users/cruzsoma/repos", "events_url": "https://api.github.com/users/cruzsoma/events{/privacy}", "received_events_url": "https://api.github.com/users/cruzsoma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-16T18:55:55Z", "updated_at": "2019-09-30T07:21:15Z", "closed_at": null, "author_association": "NONE", "body": "I m using the docker image pulled from here:\r\nhttps://hub.docker.com/r/tensorflow/tensorflow/tags\r\nthe tag is nightly-devel-py3.\r\nAnd then I upgrade the tf-nightly to  tf-nightly 1.13.0.dev20181116 using pip.\r\n\r\n**System information**\r\n- i7-8650U+16G+ 1060\r\n- Windows Pro Docker Environment(CPU mode)\r\n- tf-nightly 1.13.0.dev20181116\r\n- Python version:\r\n\r\nIt failed when I trying to convert pb model to tflite model.\r\nThe error info says that some operators doesn't supported in the TFLiteConverter.\r\nCan anyone help me to fix it?\r\nThanks.\r\n\r\n**My Command Line**\r\ntflite_convert --output_file='/data/fast-neural-style-train&test/models/result.tflite' --graph_def_file='/data/fast-neural-style-train&test/models/test_model.pb' --input_arrays=input --output_arrays=output_new --input_shapes=256,256,3\r\n\r\n**Error Info**\r\n2018-11-16 03:45:33.142433: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/tflite_convert\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/python/tflite_convert.py\", line 421, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/python/tflite_convert.py\", line 417, in run_main\r\n    _convert_model(tflite_flags)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/python/tflite_convert.py\", line 170, in _convert_model\r\n    output_data = converter.convert()\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/python/lite.py\", line 456, in convert\r\n    **converter_kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/python/convert.py\", line 397, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/python/convert.py\", line 172, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2018-11-16 03:45:34.088574: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: Round\r\n2018-11-16 03:45:34.095390: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: Round\r\n2018-11-16 03:45:34.095586: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2018-11-16 03:45:34.095621: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2018-11-16 03:45:34.095652: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2018-11-16 03:45:34.095684: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2018-11-16 03:45:34.095801: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2018-11-16 03:45:34.095848: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2018-11-16 03:45:34.095925: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.096229: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.096281: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: SquaredDifference\r\n2018-11-16 03:45:34.096329: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.096374: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: SquaredDifference\r\n2018-11-16 03:45:34.096455: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.096501: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: SquaredDifference\r\n2018-11-16 03:45:34.096631: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.096783: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.096957: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.097208: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.097403: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.097626: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.097862: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.098174: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.098459: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.098733: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.098940: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.098991: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: SquaredDifference\r\n2018-11-16 03:45:34.099099: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.099149: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: SquaredDifference\r\n2018-11-16 03:45:34.099194: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: MirrorPad\r\n2018-11-16 03:45:34.099242: I tensorflow/lite/toco/import_tensorflow.cc:1280] Converting unsupported operation: SquaredDifference\r\n2018-11-16 03:45:34.100307: F tensorflow/lite/toco/tooling_util.cc:1020] Check failed: array->has_shape()\r\nAborted\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23803", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23803/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23803/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23803/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23803", "id": 381594365, "node_id": "MDU6SXNzdWUzODE1OTQzNjU=", "number": 23803, "title": "TF1.12 building w/ py3.6.4 on HPC", "user": {"login": "ClaudioCimarelli", "id": 7337279, "node_id": "MDQ6VXNlcjczMzcyNzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7337279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ClaudioCimarelli", "html_url": "https://github.com/ClaudioCimarelli", "followers_url": "https://api.github.com/users/ClaudioCimarelli/followers", "following_url": "https://api.github.com/users/ClaudioCimarelli/following{/other_user}", "gists_url": "https://api.github.com/users/ClaudioCimarelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/ClaudioCimarelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ClaudioCimarelli/subscriptions", "organizations_url": "https://api.github.com/users/ClaudioCimarelli/orgs", "repos_url": "https://api.github.com/users/ClaudioCimarelli/repos", "events_url": "https://api.github.com/users/ClaudioCimarelli/events{/privacy}", "received_events_url": "https://api.github.com/users/ClaudioCimarelli/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-11-16T13:13:41Z", "updated_at": "2019-11-11T16:46:37Z", "closed_at": null, "author_association": "NONE", "body": "Hello, \r\nI am trying to (re-)build Tensorflow on the HPC I use. I already managed to build once TF 1.9 but with Python 3.4 and probably another compiler. For the rest I tried to keep everything the same, such as bazel with the suggested version. Unfortunately I was able to build only GCC 5.5.0 instead of 4.8.0, but I don't think it is the problem here as I am using the flag --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\". \r\n\r\nIn this case I am trying to build TF 1.12 with Py3.6.4, but I am experiencing problems (a bit different) with TF 1.9 as well. I am not sure of the path to the Python Library that I give at the beginning.\r\nThanks.\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 3.16.51-3\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.12\r\n- Python version: 3.6.4\r\n- Installed using virtualenv? pip? conda?: virtualenv\r\n- Bazel version (if compiling from source): 1.5.0\r\n- GCC/Compiler version (if compiling from source): 5.5.0\r\n- CUDA/cuDNN version: 9.1.85/7.1.2\r\n- GPU model and memory: K80\r\n\r\n**Problem Description**\r\nERROR: /mnt/gaiagpfs/users/homedirs/ccimarelli/.cache/bazel/_bazel_ccimarelli/9669602cb65c53050fa19def8832a149/external/nasm/BUILD.bazel:8:1: undeclared\r\ninclusion(s) in rule '@nasm//:nasm':\r\nthis rule is missing dependency declarations for the following files included by 'external/nasm/x86/regflags.c':\r\n  '/home/users/ccimarelli/opt/gcc/GCC-5.5.0/lib/gcc/x86_64-unknown-linux-gnu/5.5.0/include-fixed/limits.h'\r\n  '/home/users/ccimarelli/opt/gcc/GCC-5.5.0/lib/gcc/x86_64-unknown-linux-gnu/5.5.0/include-fixed/syslimits.h'\r\n  '/home/users/ccimarelli/opt/gcc/GCC-5.5.0/lib/gcc/x86_64-unknown-linux-gnu/5.5.0/include/stddef.h'\r\n  '/home/users/ccimarelli/opt/gcc/GCC-5.5.0/lib/gcc/x86_64-unknown-linux-gnu/5.5.0/include/stdarg.h'\r\n\r\n**Sequence of commands / steps executed before running into the problem**\r\n$ ./cofigure\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.15.0 installed.\r\nPlease specify the location of python. [Default is /home/users/.../virtualenvs/ml-full/bin/python]:\r\nPlease input the desired Python library path to use.  Default is [/home/users/.../virtualenvs/ml-full/lib/python3.6/site-packages]\r\n\r\nDo you wish to build TensorFlow with Apache Ignite support? [Y/n]: n\r\nNo Apache Ignite support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: n\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n\r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: n\r\nNo ROCm support will be enabled for TensorFlow.\r\n Do you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 9.0]: 9.1\r\n\r\nPlease specify the location where CUDA 9.1 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /opt/apps/resif/data/production/v1.1-20180718/default/software/system/CUDA/9.1.85\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: 7.1\r\n\r\nPlease specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is /opt/apps/resif/data/production/v1.1-20180718/default/software/system/CUDA/9.1.85]: /opt/apps/resif/data/production/v1.1-20180718/default/software/numlib/cuDNN/7.1.2-CUDA-9.1.85\r\n\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]:\r\nNo TensorRT support will be enabled for TensorFlow.\r\n\r\nPlease specify the NCCL version you want to use. If NCCL 2.2 is not installed, then you can use version 1.3 that can be fetched automatically but it may\r\nhave worse performance with multiple GPUs. [Default is 2.2]: 1.3\r\n\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7]: 3.5,3.7,7.0\r\n\r\nDo you want to use clang as CUDA compiler? [y/N]:\r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /home/users/ccimarelli/opt/gcc/GCC-5.5.0/bin/gcc]:\r\n\r\n$ bazel build --config=opt --config=cuda --spawn_strategy=standalone --action_env=TMP=/home/users/ccimarelli/tmp --verbose_failures --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23802", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23802/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23802/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23802/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23802", "id": 381585985, "node_id": "MDU6SXNzdWUzODE1ODU5ODU=", "number": 23802, "title": "Reduced redundancy in Estimator api", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-11-16T12:48:36Z", "updated_at": "2019-06-12T07:58:58Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.10+\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThe TensorFlow estimator api, while a welcomed addition, seems to add a lot of redundancy to the workflow as well as unnecessary complexity. While a prominent goal of the estimator API is to decouple the input pipelines from the model, unfortunately this is not fully realized due to this redundancy and complexity.\r\n\r\n# Example\r\n\r\nSuppose we wish to make a custom estimator that has an `input_fn` which reads from TF `Record` files via `tf.data.TFRecordDataset(files)` and further, we wish to save our trained model so we can use it later (i.e. we need a `serving_input_reciever_fn`).  \r\n\r\nFor simplicity lets assume for a single \"example\" that after our input pipeline we are left with a tensor with shape [2,3], perhaps:\r\n\r\n    [[0,0,1],[1,0,0]]\r\n\r\nand let us say that contextually we will refer to this feature as \"main_input\".\r\n\r\nThen we now need to wrap this into a `(Sequence)Example` (*NOTE*: see this [S.O. post](https://stackoverflow.com/questions/52035692/tensorflow-v1-10-store-images-as-byte-strings-or-per-channel) for the lack of clarity the documentation provides on how to best do this)\r\n\r\n\r\n\r\n```\r\n# all of input pipeline here\r\n\r\n# processed data\r\nmain_input = np.array([\r\n    [0, 0, 1],\r\n    [1, 0, 0],\r\n])\r\n\r\n# wrap each channel in Feature then wrap all in FeatureList\r\nmain_input_feat_list = tf.train.FeatureList(\r\n    feature=[\r\n        tf.train.Feature(float_list=tf.train.FloatList(value=value)) \r\n        for value in main_input\r\n    ]\r\n)\r\n\r\n# wrap in SequenceExample\r\nexample = tf.train.SequenceExample(\r\n    context={\r\n        # other stuff could go here\r\n    }, \r\n    feature_lists=tf.train.FeatureLists(feature_list={\r\n        'main_input': main_input_feat_list,\r\n        # other stuff could go here\r\n    })\r\n)\r\n\r\n\r\n# write to record\r\nwith tf.python_io.TFRecordWriter('demo_example.tfrecord') as writer:\r\n    writer.write(example.SerializeToString())\r\n```\r\n\r\nfrom here, we now need to unwrap this from TF `Record` in our `Estimator`'s `input_fn` using a _different_ api:\r\n```\r\n\r\ndef parse_record(record):\r\n    return tf.parse_single_sequence_example(\r\n        record, \r\n        context_features={\r\n            # get context features here\r\n        }, \r\n        sequence_features={\r\n            'main_input': tf.FixedLenSequenceFeature((3, ), tf.float32), # <---- REDUNDANT\r\n            # get other sequence features here\r\n        }\r\n    )\r\n\r\n\r\ndef input_fn(files:list=['demo_example.tfrecord'], params:dict):\r\n    dataset = tf.data.TFRecordDataset(files).map(lambda record: parse_record(record))\r\n    # reformat dataset to return feature, label pairs\r\n    return dataset\r\n\r\n\r\n```\r\n\r\nNow if we want to use `tf.estimator.BestExporter` we need a `serving_input_receiver_fn` so lets go ahead and get that written:\r\n\r\n\r\n```\r\ndef serving_input_receiver_fn():\r\n    batch_size = None\r\n    main_input = tf.placeholder(tf.float32, (batch_size, 2, 3), name='main_input') # <---- REDUNDANT\r\n\r\n   \r\n    features = {'main_input': main_input}\r\n    \r\n    # unclear what the difference is between features and receiver tensors\r\n    receiver_tensors = features\r\n    return  tf.estimator.export.ServingInputReceiver(features, receiver_tensors)\r\n\r\n\r\nexporter = tf.estimator.BestExporter(\r\n    name='best_exporter', \r\n    serving_input_receiver_fn= serving_input_receiver_fn,\r\n    exports_to_keep=3\r\n)\r\n```\r\n\r\nSo while the input pipeline should be decoupled from the model, the model's first layer at the very least is defined by the input. Therefore I should not have to three different times, in three different ways tell TensorFlow what my input features are.\r\n\r\n```\r\n\r\n        # 1st to write to TF Records \r\n        feature_lists=tf.train.FeatureLists(feature_list={\r\n            'main_input':  tf.train.FeatureList(\r\n                feature=[\r\n                    tf.train.Feature(float_list=tf.train.FloatList(value=value)) \r\n                    for value in main_input\r\n                ]\r\n            ),\r\n            # other stuff could go here\r\n        })\r\n\r\n\r\n        # then to get it out of TF Records with an asymmetric api\r\n        #...\r\n        'main_input': tf.FixedLenSequenceFeature((3, ), tf.float32)\r\n        #...\r\n\r\n        # and once more I have to define placeholders for the features in the serving_input_receiver_fn\r\n        main_input = tf.placeholder(tf.float32, (batch_size, 2, 3), name='main_input') # <---- REDUNDANT\r\n        \r\n\r\n```\r\n\r\n# Proposal to solve\r\n\r\nIn this [colab](https://colab.research.google.com/drive/1HrSYF1I7rBGaNQ7388Ss3epWPLTloEC6) I demonstrate the fledgling idea of how to solve this, named [\"FIO\" (Feature Input / Output)](https://pypi.org/project/fio/) whereby instead of having to redefine everything many times over with different apis depending on the case, you can define everything once in a data \"schema\" e.g.\r\n\r\n\r\n```\r\n# features here are of an actual example (not batched)\r\nfeatures = {\r\n    'my-feature': 'hi',\r\n    'seq': np.array([\r\n        # ch1, ch2, ch3\r\n        [   1,   1,  1], # element 1\r\n        [   2,   2,  2], # element 2\r\n        [   3,   3,  3], # element 3\r\n        [   4,   5,  6]  # element 4\r\n    ])\r\n}\r\n\r\n\r\n# here we specify what is needed to encode and decode from `(Sequence)Example` and `TF Records`\r\n\r\nSCHEMA = {\r\n    'my-feature': {'length': 'fixed', 'dtype': tf.string,  'shape': []},\r\n    'seq': {\r\n        'length': 'fixed',\r\n        'dtype': tf.int64,\r\n        'shape': [4, 3],\r\n        'encode': 'channels',\r\n        'channel_names': ['A', 'B', 'C'],\r\n        'data_format': 'channels_last'\r\n    }\r\n}\r\n```\r\n\r\nthen\r\n```\r\n\r\n# define our converter\r\nfio = FIO(SCHEMA, etype='example')\r\n\r\n# write to example\r\nfile = 'example.tfrecord'\r\n\r\nexample = fio.to_example(features)\r\nwith tf.python_io.TFRecordWriter(file) as writer:\r\n    writer.write(example.SerializeToString())\r\n\r\n# use a sequence example instead\r\nfio = FIO(SCHEMA, etype='sequence_example', sequence_features=['seq'])\r\nfile = 'sequence_example.tfrecord'\r\nwith tf.python_io.TFRecordWriter(file) as writer:\r\n    writer.write(example.SerializeToString())\r\n\r\n```\r\n\r\nwhere in both cases we can read from records with\r\n\r\n```\r\ntf.data.TFRecordDataset(DATASET_FILENAMES).map(lambda r: fio.from_record(r))\r\n```\r\n\r\nThus I propose that TensorFlow add's a new component to the estimator class, which would be the bride between the input pipelines / serving input functions and the `model_fn`. This would be something like the data schema. \r\n\r\nA user can define a data schema instance once and import it into the input pipeline to write their inputs to TF Record, import the same schema into their `Estimator`'s `input_fn` to read from TF `Record`s (or change the TF Record file format slightly so that you do not have define how it should be read, like how I do not have to define the keys in a json file to read a json file) and then once more it can be passed to (or automatically used by the `Estimator`) for the `serving_input_receiver_fn`.  \r\n\r\nI believe letting users declaratively, upfront, define what the `Estimator` accepts in terms of data and then not forcing them to, at least trice, re-write what the data is, would be a great simplifier and clean up the `Estimator` api\r\n\r\n\r\n**Will this change the current api? How?**\r\n\r\nTechnically, everything \"under the hood\" could remain the same. The changes would be made to `tf.data` to introduce a `Schema` class which would work as a unifier across the multiple ways of encoding / decoding `tf`/`np` tensors to / from TF Records. In addition, the `Estimator` class would be updated to accept a `tf.data.Schema` instance, from which it would automate the redundancy described above.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone who uses the `Estimator` api, anyone who uses `TF Records`, anyone who acknowledges that TensorFlow's documentation is far from complete and examples are needed to bridge how the \"high\" level apis quite often interface directly with lower (or even the lowest) level apis (e.g. `Estimators` which deal with `Records` or users who want to have an exporter which requires a `ServingInputReceiver`)\r\n\r\n**Any Other info.**\r\nPlease look at [FIO](https://pypi.org/project/fio/) and generalize this to work as described above.\r\n\r\n\r\nSee these S.O. Posts and their linked Colab's to follow my journey in trying to decipher what should be a high level api, but it turns out to be fairly tethered to lower features.\r\n\r\n\r\n[optimal way to store tensors at TF Records](https://stackoverflow.com/questions/52035692/tensorflow-v1-10-store-images-as-byte-strings-or-per-channel)\r\n\r\n[recovering TF Records](https://stackoverflow.com/questions/52064866/tensorflow-1-10-tfrecorddataset-recovering-tfrecords)\r\n\r\n[early stopping](https://stackoverflow.com/questions/52641737/tensorflow-1-10-custom-estimator-early-stopping-with-train-and-evaluate)\r\n\r\n[what are serving_input_receiver_fn](https://stackoverflow.com/questions/52874647/tensorflow-v1-10-why-is-an-input-serving-receiver-function-needed-when-checkpoi)\r\n\r\n[using an estimator after training](https://stackoverflow.com/questions/53307954/tensorflow-custom-estimator-predict-throwing-value-error)\r\n\r\n[defining estimator spec throws error](https://stackoverflow.com/questions/53317235/tensorflow-custom-estimators-defining-estimator-spec-triggers-error)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23798", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23798/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23798/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23798/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23798", "id": 381544696, "node_id": "MDU6SXNzdWUzODE1NDQ2OTY=", "number": 23798, "title": "Docs Needed", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-11-16T10:42:01Z", "updated_at": "2019-03-06T23:24:41Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: 1.10+\r\n- Doc Link: https://www.tensorflow.org/api_docs/python/tf/estimator/export/ServingInputReceiver\r\n\r\n\r\n**Describe the documentation issue**\r\n\r\nIt is unclear:\r\n\r\n1. what a `serving_input_receiver_fn` is\r\n2. why one is needed\r\n3. how one should be written (e.g. what arguments are required in the function definition)\r\n4. what should be returned \r\n5. what the difference is between the `features` argument of `tf.estimator.export.ServingInputReceiver` and the `receiver_tensors` argument is and why they are needed.\r\n\r\n\r\nSee this [S.O. post](https://stackoverflow.com/questions/52874647/tensorflow-v1-10-why-is-an-input-serving-receiver-function-needed-when-checkpoi) for an example of why it is unclear\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23785", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23785/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23785/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23785/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23785", "id": 381419870, "node_id": "MDU6SXNzdWUzODE0MTk4NzA=", "number": 23785, "title": "Infinite loop when printing CSV data in eager execution mode ", "user": {"login": "magnusart", "id": 58892, "node_id": "MDQ6VXNlcjU4ODky", "avatar_url": "https://avatars3.githubusercontent.com/u/58892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magnusart", "html_url": "https://github.com/magnusart", "followers_url": "https://api.github.com/users/magnusart/followers", "following_url": "https://api.github.com/users/magnusart/following{/other_user}", "gists_url": "https://api.github.com/users/magnusart/gists{/gist_id}", "starred_url": "https://api.github.com/users/magnusart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magnusart/subscriptions", "organizations_url": "https://api.github.com/users/magnusart/orgs", "repos_url": "https://api.github.com/users/magnusart/repos", "events_url": "https://api.github.com/users/magnusart/events{/privacy}", "received_events_url": "https://api.github.com/users/magnusart/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-11-16T02:26:13Z", "updated_at": "2019-07-11T16:28:41Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nMac OS X Mojave\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNo\r\n- TensorFlow installed from (source or binary):\r\nbinary via pip (1.12.0)\r\n- TensorFlow version (use command below):\r\nv1.12.0-rc2-3-ga6d8ffae09 1.12.0\r\n- Python version:\r\nPython 3.6.5\r\n- Bazel version (if compiling from source):\r\nN/A\r\n- GCC/Compiler version (if compiling from source):\r\nN/A\r\n- CUDA/cuDNN version:\r\nN/A\r\n- GPU model and memory:\r\nN/A\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nFollowing the docs at: https://www.tensorflow.org/tutorials/eager/eager_basics\r\nWhen using `ds_file = tf.data.TextLineDataset(filename)` the docs works as expected, but when using `tf.data.experimental.make_csv_dataset` function then then the first statement in the print loop is repeated infinitely.\r\n\r\nExample output\r\n```\r\n1.12.0\r\n\r\nElements in ds_file:\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\nOrderedDict([('Line 1', ), ('1', )])\r\n... etc\r\n```\r\n\r\n**Describe the expected behavior**\r\nI expect the data API to allow me exploring data in eager execution mode even if I use the CsvDataset class. I can't use `TextLineDataset` as my CSV file contain multi line values in quotation marks. \r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```python\r\nimport tempfile\r\nimport tensorflow as tf\r\n\r\nprint(tf.__version__)\r\ntf.enable_eager_execution()\r\n_, filename = tempfile.mkstemp()\r\n\r\nwith open(filename, 'w') as f:\r\n  f.write(\"\"\"\"Line 1\",1\r\n\"Line 2\",2\r\n\"Line 3\",3\"\"\")\r\n#ds_file = tf.data.TextLineDataset(filename)\r\nds_file = tf.data.experimental.make_csv_dataset(filename, 1)\r\n\r\nprint('\\nElements in ds_file:')\r\nfor x in ds_file:\r\n  print(x)\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nSee above."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23783", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23783/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23783/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23783/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23783", "id": 381365089, "node_id": "MDU6SXNzdWUzODEzNjUwODk=", "number": 23783, "title": "CudaRoot() during compilation should not be used ", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-15T22:23:21Z", "updated_at": "2019-06-13T10:57:27Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):linux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:n/a\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):n/a\r\n- GCC/Compiler version (if compiling from source):n/a\r\n- CUDA/cuDNN version:9.0/7.2\r\n- GPU model and memory:n/a\r\n\r\n\r\n**Describe the current behavior**\r\nIt can be seen from https://github.com/tensorflow/tensorflow/search?q=CudaRoot&unscoped_q=CudaRoot, that the `CudaRoot()` function is used by tensorflow to:\r\n\r\n1. Get the path to libdevice library\r\n2. Get the path to ptxas binary \r\n\r\nHowever, the return value of `CudaRoot()` function is a constant that's determined during compilation.\r\nAs a result, tensorflow's XLA cannot work properly, if it is used on a machine where the path to CUDA is different from the compilation machine.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe path to cuda should be dynamically obtained (by configuration or environment variables).\r\n\r\n**Code to reproduce the issue**\r\nUsing the command in the end of https://medium.com/tensorflow/pushing-the-limits-of-gpu-performance-with-xla-53559db8e473, posted yesterday by @tfboyd .\r\n\r\n**Other info / logs**\r\nWith XLA, saw errors like:\r\n```\r\n2018-11-15 14:07:40.696214: W tensorflow/compiler/xla/service/gpu/nvptx_compiler.cc:794] Failed to compile ptx to cubin.  Will attempt to let GPU driver compile the ptx. Not found: /usr/local/cuda\r\n-9.0/bin/ptxas not found\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23780", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23780/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23780/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23780/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23780", "id": 381263377, "node_id": "MDU6SXNzdWUzODEyNjMzNzc=", "number": 23780, "title": "Repeated \"Already exists: Resource\" errors when I increase my model size", "user": {"login": "aidanw95", "id": 17017085, "node_id": "MDQ6VXNlcjE3MDE3MDg1", "avatar_url": "https://avatars3.githubusercontent.com/u/17017085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aidanw95", "html_url": "https://github.com/aidanw95", "followers_url": "https://api.github.com/users/aidanw95/followers", "following_url": "https://api.github.com/users/aidanw95/following{/other_user}", "gists_url": "https://api.github.com/users/aidanw95/gists{/gist_id}", "starred_url": "https://api.github.com/users/aidanw95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aidanw95/subscriptions", "organizations_url": "https://api.github.com/users/aidanw95/orgs", "repos_url": "https://api.github.com/users/aidanw95/repos", "events_url": "https://api.github.com/users/aidanw95/events{/privacy}", "received_events_url": "https://api.github.com/users/aidanw95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 34, "created_at": "2018-11-15T17:23:47Z", "updated_at": "2020-02-27T00:57:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Custom model built by creating convolutional network tf graph with SGD optimizer and running\r\n- Windows 10\r\n- TensorFlow installed from pip\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.6\r\n- Running on cpu\r\n\r\nI've created a convolutional network by making a custom graph for feed forward and using a tensorflow optimizer to train it (I've tried with SGD and Adam). \r\n\r\n```\r\n`sess = tf.Session()\r\noptimizer = tf.train.GradientDescentOptimizer(learning_rate=.01)\r\n\r\ninput_size = 16\r\ninput_matrix = tf.placeholder(tf.float32, shape=[1,input_size,input_size])\r\nlabel_ph = tf.placeholder(tf.float32, shape=[28*28])\r\nmodel_out = Model.feed_forward(input_matrix)\r\n\r\ninit = tf.global_variables_initializer()\r\nsess.run(init)\r\n\r\nloss = tf.losses.mean_squared_error([tf.convert_to_tensor(label_ph, tf.float32)], [model_out])\r\ntrain = optimizer.minimize(loss)\r\nsess.graph.finalize()`\r\n```\r\n\r\nThis is my graph definition. I know Model.feed_forward is opaque but it's basically a series of functions that get variable weights and feed input through layers. Just to give you an idea here's an example of a convolutional feed forward:\r\n\r\n```\r\n`def feed_input(input_tensors, filters, biases, stride, zero_pad=True):\r\n        if zero_pad:\r\n            pad_size = int((int(filters[0].shape[0]) + 1)/2 - 1)\r\n            input_tensors = tf.map_fn(lambda inp:\r\n                tf.pad(inp, [[pad_size, pad_size], [pad_size, pad_size]]), input_tensors)\r\n\r\n        _, shape_x, _ = input_tensors.shape\r\n\r\n        unflattened_output = tf.map_fn(lambda input_tensor: tf.convert_to_tensor([[[tf.add(tf.tensordot(curr_filter,\r\n            ConvLayer.__get_input_slice__(input_tensor, x, y, tf.shape(curr_filter)[0]), 2), biases[filter_ind])\r\n         for x in range(0, shape_x - curr_filter.shape[0] + 1, stride)]\r\n         for y in range(0, shape_x - curr_filter.shape[0] + 1, stride)]\r\n         for filter_ind, curr_filter in enumerate(filters)], dtype=tf.float32), input_tensors)\r\n\r\n        shape_1, shape_2, shape_3, shape_4 = unflattened_output.shape\r\n\r\n        return tf.reshape(unflattened_output, [shape_1 * shape_2, shape_3, shape_4])`\r\n\r\n```\r\nAfter defining my graph I am running a loop that gets some input and runs sess.run(train, feed_dict={input_matrix:img, label_ph:label_image}). If I make input_size smaller (e.g. 4) or if I reduce the number of layers in my network, everything runs fine and it does exactly what I expect it to do. However, when my network grows in the ways I just mentioned it consistently spits out these errors during sess.run(train, feed_dict={input_matrix:img, label_ph:label_image}):\r\n\r\n> 2018-11-15 00:46:31.069913: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.069914: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.069914: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.069927: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.070138: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.078467: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.080434: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.081575: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.083125: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.085370: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.089281: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.090932: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.091080: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.091398: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.091916: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.092735: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.098503: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.094920: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.099036: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.101236: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.101988: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.101966: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.103264: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.102945: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.106092: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.106858: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.108494: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.109495: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.109987: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.112326: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.112525: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.113595: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.113831: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.115342: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.115418: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.120685: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.122569: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.122708: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.123904: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.124832: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.126926: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.127336: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.129575: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.128498: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.115477: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.130180: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.130601: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.131469: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.135938: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.132834: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.139111: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_20/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.139728: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.140827: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.141429: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.142202: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.140004: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.142621: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.144039: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.147757: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.145043: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.149502: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.146723: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.148971: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.145861: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.149850: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.151642: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.152947: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.154227: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.155666: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.157249: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.157877: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.159295: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_24/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.160204: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.163481: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.163750: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot_256/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.164518: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.166533: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/strided_slice_1/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.172400: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.174768: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n2018-11-15 00:46:31.174793: W tensorflow/core/framework/op_kernel.cc:1273] OP_REQUIRES failed at variable_ops.cc:104 : Already exists: Resource __per_step_4/gradients/map_22/while/Tensordot/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1334, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1319, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1407, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.AlreadyExistsError: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n\t [[{{node gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var}} = TemporaryVariable[dtype=DT_FLOAT, shape=[5,5], var_name=\"gradients/...dd/tmp_var\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^gradients/map_24/while/Tensordot_580/Reshape_grad/Reshape)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/Aidan/Documents/PycharmProjects/SketchIt/src/network/FeedImages.py\", line 57, in <module>\r\n    sess.run(train, feed_dict={input_matrix:img, label_ph:label_image})\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1152, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1328, in _do_run\r\n    run_metadata)\r\n  File \"C:\\Users\\Aidan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1348, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.AlreadyExistsError: Resource __per_step_4/gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var/struct tensorflow::TemporaryVariableOp::TmpVar\r\n\t [[{{node gradients/map_24/while/Tensordot_512/transpose/Enter_grad/ArithmeticOptimizer/AddOpsRewrite_Add/tmp_var}} = TemporaryVariable[dtype=DT_FLOAT, shape=[5,5], var_name=\"gradients/...dd/tmp_var\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](^gradients/map_24/while/Tensordot_580/Reshape_grad/Reshape)]]\r\n\r\nAnyone know what might be the cause? Maybe some concurrency issue since its telling me things that shouldn't exist have already been created? Help would be much appreciated, I'm close to making this thing work! Thanks for your time."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23766", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23766/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23766/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23766/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23766", "id": 381090333, "node_id": "MDU6SXNzdWUzODEwOTAzMzM=", "number": 23766, "title": "TfLite performance is way worse comapred to Tensorflow mobile", "user": {"login": "Noltibus", "id": 15614838, "node_id": "MDQ6VXNlcjE1NjE0ODM4", "avatar_url": "https://avatars3.githubusercontent.com/u/15614838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Noltibus", "html_url": "https://github.com/Noltibus", "followers_url": "https://api.github.com/users/Noltibus/followers", "following_url": "https://api.github.com/users/Noltibus/following{/other_user}", "gists_url": "https://api.github.com/users/Noltibus/gists{/gist_id}", "starred_url": "https://api.github.com/users/Noltibus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Noltibus/subscriptions", "organizations_url": "https://api.github.com/users/Noltibus/orgs", "repos_url": "https://api.github.com/users/Noltibus/repos", "events_url": "https://api.github.com/users/Noltibus/events{/privacy}", "received_events_url": "https://api.github.com/users/Noltibus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2018-11-15T10:14:53Z", "updated_at": "2019-06-18T17:10:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Samsung Galaxy S8\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): On PC: current tf-nightly (14.11.2018), on phone current org.tensorflow:tensorflow-lite:0.0.0-nightly\r\n- Python version: 3.6.6\r\n- Bazel version (if compiling from source): - \r\n- GCC/Compiler version (if compiling from source): - \r\n- CUDA/cuDNN version: - \r\n- GPU model and memory: CPU only\r\n\r\n**Describe the current behavior**\r\nI build a model with this code:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow.python.tools import freeze_graph\r\n\r\n\r\nclass AlexNet(object):\r\n    \"\"\"Implementation of the AlexNet.\"\"\"\r\n\r\n    def __init__(self, x, keep_prob, num_classes, skip_layer,\r\n                 weights_path='DEFAULT'):\r\n        \"\"\"Create the graph of the AlexNet model.\r\n        Args:\r\n            x: Placeholder for the input tensor.\r\n            keep_prob: Dropout probability.\r\n            num_classes: Number of classes in the dataset.\r\n            skip_layer: List of names of the layer, that get trained from\r\n                scratch\r\n            weights_path: Complete path to the pretrained weight file, if it\r\n                isn't in the same folder as this code\r\n        \"\"\"\r\n        # Parse input arguments into class variables\r\n        self.X = x\r\n        self.NUM_CLASSES = num_classes\r\n        self.KEEP_PROB = keep_prob\r\n        self.SKIP_LAYER = skip_layer\r\n\r\n        if weights_path == 'DEFAULT':\r\n            self.WEIGHTS_PATH = 'bvlc_alexnet.npy'\r\n        else:\r\n            self.WEIGHTS_PATH = weights_path\r\n\r\n        # Call the create function to build the computational graph of AlexNet\r\n        self.create()\r\n\r\n    def create(self):\r\n        \"\"\"Create the network graph.\"\"\"\r\n        # 1st Layer: Conv (w ReLu) -> Lrn -> Pool\r\n        conv1 = conv(self.X, 11, 11, 96, 4, 4, padding='VALID', name='conv1')\r\n        norm1 = lrn(conv1, 2, 2e-05, 0.75, name='norm1')\r\n        pool1 = max_pool(norm1, 3, 3, 2, 2, padding='VALID', name='pool1')\r\n\r\n        # 2nd Layer: Conv (w ReLu)  -> Lrn -> Pool with 2 groups\r\n        conv2 = conv(pool1, 5, 5, 256, 1, 1, groups=2, name='conv2')\r\n        norm2 = lrn(conv2, 2, 2e-05, 0.75, name='norm2')\r\n        pool2 = max_pool(norm2, 3, 3, 2, 2, padding='VALID', name='pool2')\r\n\r\n        # 3rd Layer: Conv (w ReLu)\r\n        self.conv3 = conv(pool2, 3, 3, 384, 1, 1, name='conv3')\r\n\r\n        # 4th Layer: Conv (w ReLu) splitted into two groups\r\n        conv4 = conv(self.conv3, 3, 3, 384, 1, 1, groups=2, name='conv4')\r\n\r\n        # 5th Layer: Conv (w ReLu) -> Pool splitted into two groups\r\n        conv5 = conv(conv4, 3, 3, 256, 1, 1, groups=2, name='conv5')\r\n        self.pool5 = max_pool(conv5, 3, 3, 2, 2, padding='VALID', name='pool5')\r\n\r\n        # 6th Layer: Flatten -> FC (w ReLu) -> Dropout\r\n        self.flattened = tf.reshape(self.pool5, [1, 9216], name='output')\r\n\r\n    def load_initial_weights(self, session):\r\n        \"\"\"Load weights from file into network.\r\n        As the weights from http://www.cs.toronto.edu/~guerzhoy/tf_alexnet/\r\n        come as a dict of lists (e.g. weights['conv1'] is a list) and not as\r\n        dict of dicts (e.g. weights['conv1'] is a dict with keys 'weights' &\r\n        'biases') we need a special load function\r\n        \"\"\"\r\n        # Load the weights into memory\r\n        weights_dict = np.load(self.WEIGHTS_PATH, encoding='bytes').item()\r\n\r\n        # Loop over all layer names stored in the weights dict\r\n        for op_name in weights_dict:\r\n\r\n            # Check if layer should be trained from scratch\r\n            if op_name not in self.SKIP_LAYER:\r\n\r\n                with tf.variable_scope(op_name, reuse=True):\r\n\r\n                    # Assign weights/biases to their corresponding tf variable\r\n                    for data in weights_dict[op_name]:\r\n\r\n                        # Biases\r\n                        if len(data.shape) == 1:\r\n                            var = tf.get_variable('biases', trainable=False)\r\n                            session.run(var.assign(data))\r\n\r\n                        # Weights\r\n                        else:\r\n                            var = tf.get_variable('weights', trainable=False)\r\n                            session.run(var.assign(data))\r\n\r\n\r\ndef conv(x, filter_height, filter_width, num_filters, stride_y, stride_x, name,\r\n         padding='SAME', groups=1):\r\n    \"\"\"Create a convolution layer.\r\n    Adapted from: https://github.com/ethereon/caffe-tensorflow\r\n    \"\"\"\r\n    # Get number of input channels\r\n    input_channels = int(x.get_shape()[-1])\r\n\r\n    # Create lambda function for the convolution\r\n    convolve = lambda i, k: tf.nn.conv2d(i, k,\r\n                                         strides=[1, stride_y, stride_x, 1],\r\n                                         padding=padding)\r\n\r\n    with tf.variable_scope(name) as scope:\r\n        # Create tf variables for the weights and biases of the conv layer\r\n        weights = tf.get_variable('weights', shape=[filter_height,\r\n                                                    filter_width,\r\n                                                    input_channels/groups,\r\n                                                    num_filters])\r\n        biases = tf.get_variable('biases', shape=[num_filters])\r\n\r\n    if groups == 1:\r\n        conv = convolve(x, weights)\r\n\r\n    # In the cases of multiple groups, split inputs & weights and\r\n    else:\r\n        # Split input and weights and convolve them separately\r\n        input_groups = tf.split(axis=3, num_or_size_splits=groups, value=x)\r\n        weight_groups = tf.split(axis=3, num_or_size_splits=groups,\r\n                                 value=weights)\r\n        output_groups = [convolve(i, k) for i, k in zip(input_groups, weight_groups)]\r\n\r\n        # Concat the convolved output together again\r\n        conv = tf.concat(axis=3, values=output_groups)\r\n\r\n    # Add biases\r\n    bias = tf.reshape(tf.nn.bias_add(conv, biases), tf.shape(conv))\r\n\r\n    # Apply relu function\r\n    relu = tf.nn.relu(bias, name=scope.name)\r\n\r\n    return relu\r\n\r\n\r\ndef fc(x, num_in, num_out, name, relu=True):\r\n    \"\"\"Create a fully connected layer.\"\"\"\r\n    with tf.variable_scope(name) as scope:\r\n\r\n        # Create tf variables for the weights and biases\r\n        weights = tf.get_variable('weights', shape=[num_in, num_out],\r\n                                  trainable=True)\r\n        biases = tf.get_variable('biases', [num_out], trainable=True)\r\n\r\n        # Matrix multiply weights and inputs and add bias\r\n        act = tf.nn.xw_plus_b(x, weights, biases, name=scope.name)\r\n\r\n    if relu:\r\n        # Apply ReLu non linearity\r\n        relu = tf.nn.relu(act)\r\n        return relu\r\n    else:\r\n        return act\r\n\r\n\r\ndef max_pool(x, filter_height, filter_width, stride_y, stride_x, name,\r\n             padding='SAME'):\r\n    \"\"\"Create a max pooling layer.\"\"\"\r\n    return tf.nn.max_pool(x, ksize=[1, filter_height, filter_width, 1],\r\n                          strides=[1, stride_y, stride_x, 1],\r\n                          padding=padding, name=name)\r\n\r\n\r\ndef lrn(x, radius, alpha, beta, name, bias=1.0):\r\n    \"\"\"Create a local response normalization layer.\"\"\"\r\n    return tf.nn.local_response_normalization(x, depth_radius=radius,\r\n                                              alpha=alpha, beta=beta,\r\n                                              bias=bias, name=name)\r\n\r\n\r\ndef dropout(x, keep_prob):\r\n    \"\"\"Create a dropout layer.\"\"\"\r\n    return tf.nn.dropout(x, keep_prob)\r\n\r\n\r\n\r\n\r\ng = tf.Graph()\r\nwith g.as_default():\r\n    # Initialize all variables\r\n    x = tf.placeholder(tf.float32, [1, 227, 227, 3])\r\n    y = tf.placeholder(tf.float32, [1, 1000])\r\n    keep_prob = tf.placeholder(tf.float32)\r\n    alex_net = AlexNet(x, keep_prob, 1000, [\"fc6\", \"fc7\", \"fc8\"])\r\n```\r\n\r\nThen I froze the model. In the first try I converted it to TFlite directly, in a second try I set the `converter.post_training_quantize = True` option in the conversion process to quantize my model and in a second try I optimized my model for inference before converting and quantizing.\r\nThe code for the tflite conversion is the following:\r\n```\r\nimport tensorflow as tf\r\n\r\ngraph_def_file = \"alex_frozen_optimized.pb\"\r\ninput_arrays = [\"Placeholder\"]\r\noutput_arrays = [\"output\"]\r\n\r\nconverter = tf.contrib.lite.TFLiteConverter.from_frozen_graph(\r\n    graph_def_file, input_arrays, output_arrays, input_shapes={\"Placeholder\" : [1, 227, 227, 3]})\r\nconverter.post_training_quantize = True\r\ntflite_model = converter.convert()\r\nopen(\"save_path/alex_frozen_optimized_quantized.tflite\", \"wb\").write(tflite_model)\r\n```\r\nThe code for optimizing for inference was the following terminal call: `python -m tensorflow.python.tools.optimize_for_inference --input alex_frozen.pb --output alex_frozen_optimized.pb --input_names=Placeholder --output_names=output`\r\n\r\nAll my models, including the plain, unconverted model is uploaded here for testing: [models.zip](https://www.dropbox.com/s/gyu9cfkn3yn07oc/models.zip?dl=0)\r\n\r\n**Describe the expected behavior**\r\nI deployed those models to my phone. I get runtime of around 290 ms for the unconverted model, while having runtimes of about 420 ms for the quantized tflite, the optimized and quantized tflite and the plain tflite model. That can't be right, can it?\r\n\r\n**Code to reproduce the issue**\r\nThe code for running inference on the phone for the tflite models is the following:\r\n```\r\nimport android.content.res.AssetFileDescriptor;\r\nimport android.content.res.AssetManager;\r\nimport android.graphics.Bitmap;\r\nimport android.os.Trace;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.ByteOrder;\r\nimport java.nio.MappedByteBuffer;\r\nimport java.nio.channels.FileChannel;\r\nimport one.realnote.app.PpmItem;\r\nimport one.realnote.app.Util;\r\nimport org.tensorflow.lite.Interpreter;\r\nimport org.tensorflow.lite.Interpreter.Options;\r\n\r\npublic class AlexFeatureExtractionLite {\r\n\r\n  private static final String TAG = \"TFLiteAPIAlex\";\r\n\r\n  // Only return this many results.\r\n  private boolean isModelQuantized;\r\n  // Float model\r\n  // Number of threads in the java app\r\n  private static final int NUM_THREADS = 4;\r\n  // Config values.\r\n  private int inputSize;\r\n  // Pre-allocated buffers.\r\n  private float[][] outputVector;\r\n  private int[] intValues;\r\n\r\n  private static PpmItem ppm_tfRun = PpmItem.createDebugItem(\"TFA\", \"runAlex\", String.class);\r\n\r\n  private ByteBuffer imgData;\r\n  private Interpreter tfLite;\r\n\r\n  /**\r\n   * Memory-map the model file in Assets.\r\n   */\r\n  private static MappedByteBuffer loadModelFile(AssetManager assets)\r\n      throws IOException {\r\n    AssetFileDescriptor fileDescriptor = assets.openFd(\"tf/alex_frozen_optimized_quantized.tflite\");\r\n    FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\r\n    FileChannel fileChannel = inputStream.getChannel();\r\n    long startOffset = fileDescriptor.getStartOffset();\r\n    long declaredLength = fileDescriptor.getDeclaredLength();\r\n    return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\r\n  }\r\n\r\n  /**\r\n   * Initializes a native TensorFlow session for classifying images.\r\n   *\r\n   * @param assetManager The asset manager to be used to load assets.\r\n   * @param inputSize The size of image input\r\n   * @param isQuantized Boolean representing model is quantized or not\r\n   */\r\n  public static AlexFeatureExtractionLite create(final AssetManager assetManager,\r\n      final int inputSize, final boolean isQuantized) {\r\n    final AlexFeatureExtractionLite d = new AlexFeatureExtractionLite();\r\n\r\n    d.inputSize = inputSize;\r\n    Interpreter.Options options = new Options();\r\n    options.setUseNNAPI(false);\r\n    options.setAllowFp16PrecisionForFp32(false);\r\n    options.setNumThreads(4);\r\n    try {\r\n      d.tfLite = new Interpreter(loadModelFile(assetManager), options);\r\n    } catch (Exception e) {\r\n      Util.logError(e);\r\n      throw new RuntimeException(e);\r\n    }\r\n\r\n    d.isModelQuantized = isQuantized;\r\n    // Pre-allocate buffers.\r\n    int numBytesPerChannel;\r\n    if (isQuantized) {\r\n      numBytesPerChannel = 1; // Quantized\r\n    } else {\r\n      numBytesPerChannel = 4; // Floating point\r\n    }\r\n    d.imgData = ByteBuffer.allocateDirect(1 * d.inputSize * d.inputSize * 3 * numBytesPerChannel);\r\n    d.imgData.order(ByteOrder.nativeOrder());\r\n    d.intValues = new int[d.inputSize * d.inputSize];\r\n    d.outputVector = new float[1][9216];\r\n\r\n    //d.tfLite.setNumThreads(NUM_THREADS);\r\n    return d;\r\n  }\r\n\r\n  private AlexFeatureExtractionLite() {\r\n  }\r\n\r\n\r\n  public float[] calcFeatureVector(final Bitmap bitmap) {\r\n    // Log this method so that it can be analyzed with systrace.\r\n    Trace.beginSection(\"recognizeImage\");\r\n\r\n    Trace.beginSection(\"preprocessBitmap\");\r\n    // Preprocess the image data from 0-255 int to normalized float based\r\n    // on the provided parameters.\r\n    bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n\r\n    imgData.rewind();\r\n    for (int i = 0; i < inputSize; ++i) {\r\n      for (int j = 0; j < inputSize; ++j) {\r\n        int pixelValue = intValues[i * inputSize + j];\r\n        if (isModelQuantized) {\r\n          // Quantized model\r\n          imgData.put((byte) ((pixelValue >> 16) & 0xFF));\r\n          imgData.put((byte) ((pixelValue >> 8) & 0xFF));\r\n          imgData.put((byte) (pixelValue & 0xFF));\r\n        } else { // Float model\r\n          imgData.putFloat((((pixelValue >> 16) & 0xFF) - 104f));\r\n          imgData.putFloat((((pixelValue >> 8) & 0xFF) - 117f));\r\n          imgData.putFloat(((pixelValue & 0xFF) - 124f));\r\n        }\r\n      }\r\n    }\r\n    Trace.endSection(); // preprocessBitmap\r\n\r\n    // Copy the input data into TensorFlow.\r\n    Trace.beginSection(\"feed\");\r\n    outputVector = new float[1][9216];\r\n\r\n    Trace.endSection();\r\n\r\n    // Run the inference call.\r\n    Trace.beginSection(\"run\");\r\n    ppm_tfRun.start();\r\n    tfLite.run(imgData, outputVector);\r\n    ppm_tfRun.stop();\r\n    Trace.endSection();\r\n\r\n    Trace.endSection(); // \"recognizeImage\"\r\n    return outputVector[0];\r\n  }\r\n}\r\n```\r\n\r\nThe code to run inference for the unconverted model is:\r\n```\r\nimport android.content.res.AssetManager;\r\nimport android.graphics.Bitmap;\r\nimport android.os.Trace;\r\nimport one.realnote.app.PpmItem;\r\nimport org.tensorflow.Graph;\r\nimport org.tensorflow.Operation;\r\nimport org.tensorflow.contrib.android.TensorFlowInferenceInterface;\r\n\r\npublic class AlexFeatureExtraction {\r\n\r\n    private static final String TAG = \"AlexFeatureExtraction\";\r\n\r\n    // Config values.\r\n    private String inputName;\r\n    private int inputSize;\r\n\r\n    // Pre-allocated buffers.\r\n    private float[] outputVector;\r\n\r\n    private int[] intValues;\r\n    private float[] floatValues;\r\n\r\n    private TensorFlowInferenceInterface inferenceInterface;\r\n\r\n    public static AlexFeatureExtraction create(\r\n        final AssetManager assetManager) {\r\n\r\n        final AlexFeatureExtraction d = new AlexFeatureExtraction();\r\n\r\n\r\n        final String modelFilename = \"file:///android_asset/tf/alex.pb\";\r\n        final int inputSize = 227;\r\n\r\n        d.inferenceInterface = new TensorFlowInferenceInterface(assetManager, modelFilename);\r\n\r\n        final Graph g = d.inferenceInterface.graph();\r\n\r\n        d.inputName = \"Placeholder\"; // ssd: \"image_tensor\";\r\n\r\n        // The inputName node has a shape of [N, H, W, C], where\r\n        // N is the batch size\r\n        // H = W are the height and width\r\n        // C is the number of channels (3 for our purposes - RGB)\r\n        final Operation inputOp = g.operation(d.inputName);\r\n        if (inputOp == null) {\r\n            throw new RuntimeException(\"Failed to find input Node '\" + d.inputName + \"'\");\r\n        }\r\n        d.inputSize = inputSize;\r\n        // The outputScoresName node has a shape of [N, NumLocations], where N\r\n        // is the batch size.\r\n\r\n        // ssd: final Operation outputOp1 = g.operation(\"detection_scores\");\r\n        final Operation outputOp1 = g.operation(\"output\");\r\n        if (outputOp1 == null) {\r\n            throw new RuntimeException(\"Failed to find output Node 'detection_scores'\");\r\n        }\r\n\r\n        // Pre-allocate buffers.\r\n        d.outputVector = new float[9216];\r\n\r\n        d.intValues = new int[d.inputSize * d.inputSize];\r\n        d.floatValues = new float[d.inputSize * d.inputSize * 3];\r\n\r\n        return d;\r\n    }\r\n\r\n\r\n    private AlexFeatureExtraction() {\r\n    }\r\n\r\n\r\n    private static PpmItem ppm_tfFeed = PpmItem.createDebugItem(\"TFA\", \"feed\", String.class);\r\n    private static PpmItem ppm_tfRun = PpmItem.createDebugItem(\"TFA\", \"runAlex\", String.class);\r\n\r\n\r\n    public float[] calcFeatureVector(final Bitmap bitmap) {\r\n        // Log this method so that it can be analyzed with systrace.\r\n        Trace.beginSection(\"recognizeImage\");\r\n\r\n        Trace.beginSection(\"preprocessBitmap\");\r\n        // Preprocess the image data from 0-255 int to normalized float based\r\n        // on the provided parameters.\r\n        bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n\r\n        for (int i = 0; i < intValues.length; ++i) {\r\n            floatValues[i * 3 + 2] = (float) (intValues[i] & 0xFF) - 124f;\r\n            floatValues[i * 3 + 1] = (float) ((intValues[i] >> 8) & 0xFF) - 117f;\r\n            floatValues[i * 3 + 0] = (float) ((intValues[i] >> 16) & 0xFF) -104f;\r\n        }\r\n\r\n        Trace.endSection(); // preprocessBitmap\r\n\r\n        // Copy the input data into TensorFlow.\r\n        Trace.beginSection(\"feed\");\r\n        ppm_tfFeed.start();\r\n        inferenceInterface.feed(inputName, floatValues, 1, inputSize, inputSize, 3);\r\n        ppm_tfFeed.stop();\r\n        Trace.endSection();\r\n\r\n        // Run the inference call.\r\n        Trace.beginSection(\"run\");\r\n        ppm_tfRun.start();\r\n        inferenceInterface.run(new String[]{\"output\"}, false);\r\n        ppm_tfRun.stop();\r\n        Trace.endSection();\r\n\r\n        // Copy the output Tensor back into the output array.\r\n        Trace.beginSection(\"fetch\");\r\n\r\n\r\n        inferenceInterface.fetch(\"output\", outputVector);\r\n\r\n        Trace.endSection();\r\n\r\n        Trace.endSection(); // \"recognizeImage\"\r\n\r\n        return outputVector;\r\n    }\r\n\r\n    public void close() {\r\n        inferenceInterface.close();\r\n    }\r\n}\r\n```\r\n\r\n**Other info / logs**\r\nOutput behavior is as expected for all models. Activating the useNNAPI option doesn't really do anything performance wise aswell as setting the number of threads.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23762", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23762/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23762/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23762/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23762", "id": 381019631, "node_id": "MDU6SXNzdWUzODEwMTk2MzE=", "number": 23762, "title": "TypeError: visualize_boxes_and_labels_on_image_array() takes at least 7 arguments (8 given)", "user": {"login": "jbhhhhh", "id": 45059644, "node_id": "MDQ6VXNlcjQ1MDU5NjQ0", "avatar_url": "https://avatars1.githubusercontent.com/u/45059644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbhhhhh", "html_url": "https://github.com/jbhhhhh", "followers_url": "https://api.github.com/users/jbhhhhh/followers", "following_url": "https://api.github.com/users/jbhhhhh/following{/other_user}", "gists_url": "https://api.github.com/users/jbhhhhh/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbhhhhh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbhhhhh/subscriptions", "organizations_url": "https://api.github.com/users/jbhhhhh/orgs", "repos_url": "https://api.github.com/users/jbhhhhh/repos", "events_url": "https://api.github.com/users/jbhhhhh/events{/privacy}", "received_events_url": "https://api.github.com/users/jbhhhhh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-15T06:32:59Z", "updated_at": "2018-12-19T18:52:40Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**My code**\r\n\r\nfor image_path in TEST_IMAGE_PATHS:\r\n  image = Image.open(image_path)\r\n  image_np = load_image_into_numpy_array(image)\r\n  image_np_expanded = np.expand_dims(image_np, axis=0)\r\n  output_dict = run_inference_for_single_image(image_np, detection_graph)\r\n  vis_util.visualize_boxes_and_labels_on_image_array(\r\n      image_np,\r\n      output_dict['detection_boxes'],\r\n      output_dict['detection_classes'],\r\n      output_dict['detection_scores'],\r\n      category_index,\r\n      instance_masks=output_dict.get('detection_masks'),\r\n      use_normalized_coordinates=True,\r\n      line_thickness=8)\r\n  plt.figure(figsize=IMAGE_SIZE)\r\n  plt.imshow(image_np)\r\n\r\n**Describe the current behavior**\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-12-b19082c2666b> in <module>()\r\n     17       instance_masks=output_dict.get('detection_masks'),\r\n     18       use_normalized_coordinates=True,\r\n---> 19       line_thickness=8)\r\n     20   plt.figure(figsize=IMAGE_SIZE)\r\n     21   plt.imshow(image_np)\r\n\r\nTypeError: visualize_boxes_and_labels_on_image_array() takes at least 7 arguments (8 given)\r\n\r\n**Describe the expected behavior**\r\ndetected files(.jpg)\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23761", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23761/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23761/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23761/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23761", "id": 381009496, "node_id": "MDU6SXNzdWUzODEwMDk0OTY=", "number": 23761, "title": "C++  TensorShape from std::vector or std::array", "user": {"login": "semin-park", "id": 30904140, "node_id": "MDQ6VXNlcjMwOTA0MTQw", "avatar_url": "https://avatars2.githubusercontent.com/u/30904140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semin-park", "html_url": "https://github.com/semin-park", "followers_url": "https://api.github.com/users/semin-park/followers", "following_url": "https://api.github.com/users/semin-park/following{/other_user}", "gists_url": "https://api.github.com/users/semin-park/gists{/gist_id}", "starred_url": "https://api.github.com/users/semin-park/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semin-park/subscriptions", "organizations_url": "https://api.github.com/users/semin-park/orgs", "repos_url": "https://api.github.com/users/semin-park/repos", "events_url": "https://api.github.com/users/semin-park/events{/privacy}", "received_events_url": "https://api.github.com/users/semin-park/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-15T05:46:45Z", "updated_at": "2018-12-21T18:54:11Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): **r1.12**\r\n- Are you willing to contribute it (Yes/No): **Yes**\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nAccording to [`tensor_shape.h`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/tensor_shape.h), it seems like currently `TensorShape` can only be initialized through `gtl::ArraySlice` or through `std::initializer_list`. It would be nice to initialize it with `std::vector` or `std::array`.\r\n\r\n**Will this change the current api? How?**\r\n\r\nExplained above.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nIf the shape of the Tensors used are stored in some other place as something like a `std::vector`, it will be easier to just pass the shape variable as the shape argument when creating a Tensor."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23756", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23756/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23756/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23756/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23756", "id": 380933571, "node_id": "MDU6SXNzdWUzODA5MzM1NzE=", "number": 23756, "title": "Fix technical issues with README.md", "user": {"login": "claytonjian", "id": 33940002, "node_id": "MDQ6VXNlcjMzOTQwMDAy", "avatar_url": "https://avatars3.githubusercontent.com/u/33940002?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claytonjian", "html_url": "https://github.com/claytonjian", "followers_url": "https://api.github.com/users/claytonjian/followers", "following_url": "https://api.github.com/users/claytonjian/following{/other_user}", "gists_url": "https://api.github.com/users/claytonjian/gists{/gist_id}", "starred_url": "https://api.github.com/users/claytonjian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claytonjian/subscriptions", "organizations_url": "https://api.github.com/users/claytonjian/orgs", "repos_url": "https://api.github.com/users/claytonjian/repos", "events_url": "https://api.github.com/users/claytonjian/events{/privacy}", "received_events_url": "https://api.github.com/users/claytonjian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-14T23:31:32Z", "updated_at": "2018-12-19T18:52:36Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version:\r\n- Doc Link:\r\n\r\n\r\n**Describe the documentation issue**\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23754", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23754/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23754/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23754/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23754", "id": 380911702, "node_id": "MDU6SXNzdWUzODA5MTE3MDI=", "number": 23754, "title": "Sparsification of huge matrix", "user": {"login": "jonasrauber", "id": 5837385, "node_id": "MDQ6VXNlcjU4MzczODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/5837385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonasrauber", "html_url": "https://github.com/jonasrauber", "followers_url": "https://api.github.com/users/jonasrauber/followers", "following_url": "https://api.github.com/users/jonasrauber/following{/other_user}", "gists_url": "https://api.github.com/users/jonasrauber/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonasrauber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonasrauber/subscriptions", "organizations_url": "https://api.github.com/users/jonasrauber/orgs", "repos_url": "https://api.github.com/users/jonasrauber/repos", "events_url": "https://api.github.com/users/jonasrauber/events{/privacy}", "received_events_url": "https://api.github.com/users/jonasrauber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-11-14T22:17:56Z", "updated_at": "2019-01-07T23:41:21Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**Describe the current behavior**\r\nCurrently, the only way in TensorFlow to convert a dense matrix into a sparse one (assuming it has only few non-zero values) is to use `tf.where` (afaik). `tf.where` does however allocate a lot of memory (it seems like 4 times the size of the dense matrix). So for huge dense matrices, this approach fails.\r\n\r\n**Describe the expected behavior**\r\nBy first counting the number of nonzero elements, then allocating the appropriate amount of memory, and then determining the non-zero values, this can be be done with very little memory (as much as there are non-zero elements).\r\nThis is the approach that the `cusparse` library follows and it works great. Unfortunately, there is no way to use e.g. `dense2csr` or `dense2coo` in TensorFlow.\r\n\r\nIn my opinion this is a bug, because `tf.where` requires far too much memory."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23747", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23747/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23747/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23747/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23747", "id": 380767804, "node_id": "MDU6SXNzdWUzODA3Njc4MDQ=", "number": 23747, "title": "Feature Request - Deeplab TFLITE Android Application", "user": {"login": "SanthoshRajendiran", "id": 41156980, "node_id": "MDQ6VXNlcjQxMTU2OTgw", "avatar_url": "https://avatars3.githubusercontent.com/u/41156980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SanthoshRajendiran", "html_url": "https://github.com/SanthoshRajendiran", "followers_url": "https://api.github.com/users/SanthoshRajendiran/followers", "following_url": "https://api.github.com/users/SanthoshRajendiran/following{/other_user}", "gists_url": "https://api.github.com/users/SanthoshRajendiran/gists{/gist_id}", "starred_url": "https://api.github.com/users/SanthoshRajendiran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SanthoshRajendiran/subscriptions", "organizations_url": "https://api.github.com/users/SanthoshRajendiran/orgs", "repos_url": "https://api.github.com/users/SanthoshRajendiran/repos", "events_url": "https://api.github.com/users/SanthoshRajendiran/events{/privacy}", "received_events_url": "https://api.github.com/users/SanthoshRajendiran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 83, "created_at": "2018-11-14T16:03:37Z", "updated_at": "2020-02-27T08:57:37Z", "closed_at": null, "author_association": "NONE", "body": "<em>Feature request, requesting an android application for Deeplab tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): Tensorflow 1.12 [tensorflow-lite-1.12 ]\r\n- Model Information: Deeplab V3 MobilenetV2\r\n- Are you willing to contribute it (Yes/No): No\r\n- Android API Version: API 24 (Android Nougat)\r\n\r\n\r\n\r\n**Feature Current Behavior**\r\nThere is no mobile application to test out the working of Deeplab tflite model in Android or IOS. This seems as a direct need for developers and it will be helpful for knowing the parsing mechanism for tflite where we get semantic predictions as an output, as there is an unclear way of parsing the specific data type in android and ios(prediction?) as it involves pixel data.\r\n\r\n**Current API: Need of change**\r\nWe are in need of new API model to help in with parsing the model input. Could be released as a subsequent fix. \r\n\r\n**Beneficiaries**\r\nPeople who are developing camera applications can directly benefit from this as it involves playing with segmentation on android devices.\r\n\r\n**Other information.**\r\nWe are trying building the application tweaking with available applications. We are currently facing up some issues. Hereby with, we are attaching the issue links.\r\n\r\n[https://stackoverflow.com/questions/53228969/unable-to-test-and-deploy-a-deeplabv3-mobilenetv2-tensorflow-lite-segmentation-m](https://stackoverflow.com/questions/53228969/unable-to-test-and-deploy-a-deeplabv3-mobilenetv2-tensorflow-lite-segmentation-m)\r\n\r\n[https://stackoverflow.com/questions/53236290/unable-to-load-tflite-deeplab-segmentation-model-in-android-application-error](https://stackoverflow.com/questions/53236290/unable-to-load-tflite-deeplab-segmentation-model-in-android-application-error)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23735", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23735/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23735/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23735/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23735", "id": 380660542, "node_id": "MDU6SXNzdWUzODA2NjA1NDI=", "number": 23735, "title": "Riccati solver suggest", "user": {"login": "zgbkdlm", "id": 18639917, "node_id": "MDQ6VXNlcjE4NjM5OTE3", "avatar_url": "https://avatars1.githubusercontent.com/u/18639917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zgbkdlm", "html_url": "https://github.com/zgbkdlm", "followers_url": "https://api.github.com/users/zgbkdlm/followers", "following_url": "https://api.github.com/users/zgbkdlm/following{/other_user}", "gists_url": "https://api.github.com/users/zgbkdlm/gists{/gist_id}", "starred_url": "https://api.github.com/users/zgbkdlm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zgbkdlm/subscriptions", "organizations_url": "https://api.github.com/users/zgbkdlm/orgs", "repos_url": "https://api.github.com/users/zgbkdlm/repos", "events_url": "https://api.github.com/users/zgbkdlm/events{/privacy}", "received_events_url": "https://api.github.com/users/zgbkdlm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-14T11:43:08Z", "updated_at": "2019-01-10T21:49:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.7.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe Discrete/Continuous Algebraic Riccati Equation is very important to linear quadratic regulator system. A solution of solving this need to be implemented in Tensorflow if one wants to combine machine learning with control theory. \r\n\r\nThe solver has been implemented in [Matlab](https://se.mathworks.com/help/control/ref/dare.html)/Scipy etc. But there are also possibilities to implement in Tensorflow CPU/GPU.\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nThose who wants to combine control theory with machine learning and deep leanring\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23725", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23725/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23725/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23725/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23725", "id": 380425534, "node_id": "MDU6SXNzdWUzODA0MjU1MzQ=", "number": 23725, "title": "Sparse Precision Matrix implemetations (for gaussian processes or GMRFs)", "user": {"login": "sadatnfs", "id": 19790145, "node_id": "MDQ6VXNlcjE5NzkwMTQ1", "avatar_url": "https://avatars2.githubusercontent.com/u/19790145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sadatnfs", "html_url": "https://github.com/sadatnfs", "followers_url": "https://api.github.com/users/sadatnfs/followers", "following_url": "https://api.github.com/users/sadatnfs/following{/other_user}", "gists_url": "https://api.github.com/users/sadatnfs/gists{/gist_id}", "starred_url": "https://api.github.com/users/sadatnfs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sadatnfs/subscriptions", "organizations_url": "https://api.github.com/users/sadatnfs/orgs", "repos_url": "https://api.github.com/users/sadatnfs/repos", "events_url": "https://api.github.com/users/sadatnfs/events{/privacy}", "received_events_url": "https://api.github.com/users/sadatnfs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-13T21:12:32Z", "updated_at": "2018-11-26T15:27:42Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Are there any plans in the near future to implement sparse precision matrix computations for TensorFlow? My main use case when I'll be using this is for models like a Gaussian Process where a sparse precision matrix can be fed in as a Gaussian Markov Random Field to evaluate the GP (the sparse representation of an AR(1) GP is only tri-diagonal whereas the covariance matrix is dense).\r\n\r\nBeing able to evaluate on sparse matrices would be super helpful in computation speeds I think. Thoughts?\r\n\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n**Will this change the current api? How?**\r\nOnly additions I hope\r\n\r\n**Who will benefit with this feature?**\r\nStatistical modelers with high dimensional sparse data\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23716", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23716/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23716/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23716/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23716", "id": 380170384, "node_id": "MDU6SXNzdWUzODAxNzAzODQ=", "number": 23716, "title": "aarch64 support", "user": {"login": "sanjaybharadwaj", "id": 12497743, "node_id": "MDQ6VXNlcjEyNDk3NzQz", "avatar_url": "https://avatars2.githubusercontent.com/u/12497743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjaybharadwaj", "html_url": "https://github.com/sanjaybharadwaj", "followers_url": "https://api.github.com/users/sanjaybharadwaj/followers", "following_url": "https://api.github.com/users/sanjaybharadwaj/following{/other_user}", "gists_url": "https://api.github.com/users/sanjaybharadwaj/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjaybharadwaj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjaybharadwaj/subscriptions", "organizations_url": "https://api.github.com/users/sanjaybharadwaj/orgs", "repos_url": "https://api.github.com/users/sanjaybharadwaj/repos", "events_url": "https://api.github.com/users/sanjaybharadwaj/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjaybharadwaj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-11-13T11:01:26Z", "updated_at": "2019-07-12T11:58:34Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n-Target device - NVIDIA DrivePX2 and NVIDIA JetsonTX2\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nSupport aarch64 target architectures.\r\n\r\n**Will this change the current api? How?**\r\nNO, the current apis are not changed, this just enables bazel to find aarch64 tool chain during a native compilation on the aarch target.\r\n\r\n**Who will benefit with this feature?**\r\nPeople using NVIDIA Drive/Jetson platforms containing aarch64 devices.\r\n\r\n**Any Other info.**\r\n\r\nPlease add the following lines in the files to enable to support\r\n1. \r\nAdd -\r\n ```\r\nstatic int TryToReadNumaNode(const string &pci_bus_id, int device_ordinal) {\r\n-#if defined(__APPLE__)\r\n+#ifdef __aarch64__\r\n+    LOG(INFO) << \"ARM64 does not support NUMA - returning NUMA node zero\";\r\n+    return 0;\r\n+#elif defined(__APPLE__)\r\n   LOG(INFO) << \"OS X does not support NUMA - returning NUMA node zero\";\r\n   return 0;N\r\n #elif defined(PLATFORM_WINDOWS)\r\n```\r\nin the file -  /tensorflow/stream_executor/cuda/cuda_gpu_executor.cc \r\n\r\n2. https://github.com/tensorflow/tensorflow/issues/21852\r\nadd\r\n```\r\ndefault_toolchain {\r\n  cpu: \"aarch64\"\r\n  toolchain_identifier: \"local_linux\"\r\n}\r\n```\r\nin the file - ./third_party/gpus/crosstool/CROSSTOOL.tpl\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23714", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23714/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23714/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23714/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23714", "id": 380151200, "node_id": "MDU6SXNzdWUzODAxNTEyMDA=", "number": 23714, "title": "How to remove NMS ops in mobilenet+ssd model?", "user": {"login": "StephenGreat", "id": 23132594, "node_id": "MDQ6VXNlcjIzMTMyNTk0", "avatar_url": "https://avatars3.githubusercontent.com/u/23132594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StephenGreat", "html_url": "https://github.com/StephenGreat", "followers_url": "https://api.github.com/users/StephenGreat/followers", "following_url": "https://api.github.com/users/StephenGreat/following{/other_user}", "gists_url": "https://api.github.com/users/StephenGreat/gists{/gist_id}", "starred_url": "https://api.github.com/users/StephenGreat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StephenGreat/subscriptions", "organizations_url": "https://api.github.com/users/StephenGreat/orgs", "repos_url": "https://api.github.com/users/StephenGreat/repos", "events_url": "https://api.github.com/users/StephenGreat/events{/privacy}", "received_events_url": "https://api.github.com/users/StephenGreat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-11-13T10:15:22Z", "updated_at": "2019-05-09T19:44:18Z", "closed_at": null, "author_association": "NONE", "body": "I use mobilenet+ssd for detection with android NN. But  TFLite is not supported for NMS such customized ops.  So I want to remove NMS ops in the .pb model. Is there any method for that?\r\nOr any case of translating mobilnet+ssd to TFLite with android NN?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23713", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23713/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23713/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23713/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23713", "id": 380148552, "node_id": "MDU6SXNzdWUzODAxNDg1NTI=", "number": 23713, "title": "Audio recognition on 8,000 samples per second audio data, label_wav.py", "user": {"login": "FarhanAhmad4473", "id": 39615127, "node_id": "MDQ6VXNlcjM5NjE1MTI3", "avatar_url": "https://avatars2.githubusercontent.com/u/39615127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FarhanAhmad4473", "html_url": "https://github.com/FarhanAhmad4473", "followers_url": "https://api.github.com/users/FarhanAhmad4473/followers", "following_url": "https://api.github.com/users/FarhanAhmad4473/following{/other_user}", "gists_url": "https://api.github.com/users/FarhanAhmad4473/gists{/gist_id}", "starred_url": "https://api.github.com/users/FarhanAhmad4473/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FarhanAhmad4473/subscriptions", "organizations_url": "https://api.github.com/users/FarhanAhmad4473/orgs", "repos_url": "https://api.github.com/users/FarhanAhmad4473/repos", "events_url": "https://api.github.com/users/FarhanAhmad4473/events{/privacy}", "received_events_url": "https://api.github.com/users/FarhanAhmad4473/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-13T10:08:55Z", "updated_at": "2018-12-13T19:00:39Z", "closed_at": null, "author_association": "NONE", "body": "I followed the Simple Audio Recognition tutorial given on tensorflow website. Everything went good. I downloaded the google speech command data set, trained a model using default setting, got 87% test accuracy, and then tested on some other simple audio clips using  label_wav.py code given as tutorial.\r\n\r\nBut I need to decode audio files of 8,000 sps. The results of this model is not good on 8000 sps audios. reading from tensorflow audio recognition tutorial I got to know that I need to use 8000 sps data for training.\r\n\r\nI downsampled all audio files in data set and trained the model again with this downsampled data using the following command:\r\n\r\npython tensorflow/examples/speech_commands/train.py --data_url= --data_dir=C:\\tmp\\speech_dataset --sample_rate=8000\r\n\r\nThe accuracy of this model is good i.e. Final test accuracy = 87.2% . But the problem is when I am testing (labeling) any audio file using this model and by using the code label_wav.py I am not getting the right results even for the audio files from the data set.\r\n\r\nI am not getting where the problem is? I searched alot but didn't find any solution. I also read the complete tensorflow tutorial on audio recognition.\r\n\r\nKindly Help me!!!! How to decode 8k sps audio clips using the model trained on 8k sps audio data and by using the given label_wav.py Python code?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23709", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23709/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23709/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23709/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23709", "id": 380105478, "node_id": "MDU6SXNzdWUzODAxMDU0Nzg=", "number": 23709, "title": "image_ocr.py running error on tf.keras", "user": {"login": "shijie001", "id": 25165513, "node_id": "MDQ6VXNlcjI1MTY1NTEz", "avatar_url": "https://avatars3.githubusercontent.com/u/25165513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shijie001", "html_url": "https://github.com/shijie001", "followers_url": "https://api.github.com/users/shijie001/followers", "following_url": "https://api.github.com/users/shijie001/following{/other_user}", "gists_url": "https://api.github.com/users/shijie001/gists{/gist_id}", "starred_url": "https://api.github.com/users/shijie001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shijie001/subscriptions", "organizations_url": "https://api.github.com/users/shijie001/orgs", "repos_url": "https://api.github.com/users/shijie001/repos", "events_url": "https://api.github.com/users/shijie001/events{/privacy}", "received_events_url": "https://api.github.com/users/shijie001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-13T08:12:52Z", "updated_at": "2019-02-19T23:52:28Z", "closed_at": null, "author_association": "NONE", "body": "I try to run image_ocr.py on tf.keras.\r\nimage_ocr.py is the example code from keras\r\nhttps://github.com/keras-team/keras/blob/master/examples/image_ocr.py\r\n\r\n>>> import tensorflow as tf\r\n>>> tf.__version__\r\n'1.11.0'\r\n>>> tf.keras.__version__\r\n'2.1.6-tf'\r\n>>>\r\n\r\nI only modify some imports to use tf.keras.\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import backend as K\r\nfrom tensorflow.keras.layers import Conv2D, MaxPooling2D\r\n...\r\n\r\nThe error code\r\n  File \"D:\\Anaconda2\\envs\\tf-cpu\\lib\\site-packages\\tensorflow\\python\\keras\\utils\\data_utils.py\", line 689, in _data_generator_task\r\n    generator_output = next(self._generator)\r\n  File \"image_ocr.py\", line 312, in next_train\r\n    print(self.cur_train_index)\r\nAttributeError: 'TextImageGenerator' object has no attribute 'cur_train_index'\r\n\r\nThe problem is occurs in model.fit_generator().\r\nI found next_train() and build_word_list() run in different python thread.\r\n\r\nthe next_train() is called before the build_word_list(). So the initializeation of TextImageGenerator is incorrect.\r\n\r\nI also try to set  \"workers=0\" to use single thread. \r\n    model.fit_generator(\r\n        generator=img_gen.next_train(),\r\n        steps_per_epoch=(words_per_epoch - val_words) // minibatch_size,\r\n        epochs=stop_epoch,\r\n        validation_data=img_gen.next_val(),\r\n        validation_steps=val_words // minibatch_size,\r\n        callbacks=[viz_cb, img_gen],\r\n        initial_epoch=start_epoch,\r\n        workers=0)\r\n\r\nNow it can run. But the traing does not converge. 100% error result.\r\nBut there is no problem if use Keras intead of tf.keras.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23692", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23692/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23692/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23692/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23692", "id": 379930503, "node_id": "MDU6SXNzdWUzNzk5MzA1MDM=", "number": 23692, "title": "Tensor RT 5 Windows", "user": {"login": "jtavrisov", "id": 7612877, "node_id": "MDQ6VXNlcjc2MTI4Nzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/7612877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtavrisov", "html_url": "https://github.com/jtavrisov", "followers_url": "https://api.github.com/users/jtavrisov/followers", "following_url": "https://api.github.com/users/jtavrisov/following{/other_user}", "gists_url": "https://api.github.com/users/jtavrisov/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtavrisov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtavrisov/subscriptions", "organizations_url": "https://api.github.com/users/jtavrisov/orgs", "repos_url": "https://api.github.com/users/jtavrisov/repos", "events_url": "https://api.github.com/users/jtavrisov/events{/privacy}", "received_events_url": "https://api.github.com/users/jtavrisov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 23, "created_at": "2018-11-12T19:59:58Z", "updated_at": "2019-12-26T18:34:49Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 1.12\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.18.1\r\n- GCC/Compiler version (if compiling from source): Visual Stuido 2015\r\n- CUDA/cuDNN version: CUDA 10/ cudnn 7\r\n- GPU model and memory: Titan V\r\n\r\n\r\n\r\n**Describe the problem**\r\nUnable to build with Tensor RT in windows. Newest version (Tensor RT5) claims windows support but build script (configure.py) assumes linux only.\r\n\r\nHas anybody successfully built with TensorRT5 on windows? Will TF 1.13 include support?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23689", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23689/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23689/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23689/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23689", "id": 379845180, "node_id": "MDU6SXNzdWUzNzk4NDUxODA=", "number": 23689, "title": "Object detection demo crashing using custom model", "user": {"login": "cabahug2", "id": 14116745, "node_id": "MDQ6VXNlcjE0MTE2NzQ1", "avatar_url": "https://avatars3.githubusercontent.com/u/14116745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cabahug2", "html_url": "https://github.com/cabahug2", "followers_url": "https://api.github.com/users/cabahug2/followers", "following_url": "https://api.github.com/users/cabahug2/following{/other_user}", "gists_url": "https://api.github.com/users/cabahug2/gists{/gist_id}", "starred_url": "https://api.github.com/users/cabahug2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cabahug2/subscriptions", "organizations_url": "https://api.github.com/users/cabahug2/orgs", "repos_url": "https://api.github.com/users/cabahug2/repos", "events_url": "https://api.github.com/users/cabahug2/events{/privacy}", "received_events_url": "https://api.github.com/users/cabahug2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-11-12T16:07:14Z", "updated_at": "2019-05-31T20:03:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): just changed configuration values to match my model \r\n\r\n`  private static final int TF_OD_API_INPUT_SIZE = 640;`\r\n` private static final boolean TF_OD_API_IS_QUANTIZED = false;`\r\n`private static final String TF_OD_API_MODEL_FILE = \"ssd.tflite\";`\r\n`private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/ssd_labels.txt\";`\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Pixel 2 XL\r\n- TensorFlow installed from (source or binary): demo commit 61c6c84\r\n- TensorFlow version (use command below):\r\n- Python version: na\r\n- Bazel version (if compiling from source):  na\r\n- GCC/Compiler version (if compiling from source): na\r\n- CUDA/cuDNN version: na\r\n- GPU model and memory: na\r\n\r\n**Describe the current behavior**\r\nCamera view opens for a few seconds, then crashes with output log below\r\n\r\n>  --------- beginning of crash\r\n2018-11-12 10:51:23.193 22685-22703/org.tensorflow.lite.demo A/libc: Fatal signal 6 (SIGABRT), code -6 in tid 22703 (inference), pid 22685 (rflow.lite.demo)\r\n2018-11-12 10:51:23.240 22860-22860/? I/crash_dump64: obtaining output fd from tombstoned, type: kDebuggerdTombstone\r\n2018-11-12 10:51:23.241 872-872/? I//system/bin/tombstoned: received crash request for pid 22685\r\n2018-11-12 10:51:23.241 22860-22860/? I/crash_dump64: performing dump of process 22685 (target tid = 22703)\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG: Build fingerprint: 'Android/aosp_taimen/taimen:8.1.0/OPM2.171026.006.H1/mcabah10301330:userdebug/test-keys'\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG: Revision: 'rev_10'\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG: ABI: 'arm64'\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG: pid: 22685, tid: 22703, name: inference  >>> org.tensorflow.lite.demo <<<\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG: signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x0   0000000000000000  x1   00000000000058af  x2   0000000000000006  x3   0000000000000008\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x4   0000007674fb8000  x5   0000007674fb8000  x6   0000007674fb8000  x7   0000001400000002\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x8   0000000000000083  x9   0000000010000000  x10  0000007688956a90  x11  0000000000000001\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x12  0000001400000002  x13  0000010000000002  x14  00000000000000ff  x15  00000076811417c4\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x16  000000594a538fa8  x17  000000771f8c352c  x18  0000000000000400  x19  000000000000589d\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x20  00000000000058af  x21  0000000000000083  x22  0000007688956d58  x23  0000007688956d70\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x24  000000000000004c  x25  000000769d28aac0  x26  000000767e6328c0  x27  000000769d28aaf8\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     x28  000000769d2439a0  x29  0000007688956ad0  x30  000000771f878760\r\n2018-11-12 10:51:23.242 22860-22860/? A/DEBUG:     sp   0000007688956a90  pc   000000771f878788  pstate 0000000060000000\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG: backtrace:\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #00 pc 000000000001d788  /system/lib64/libc.so (abort+120)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #01 pc 00000000000cab70  /data/app/org.tensorflow.lite.demo-_VB0X9UVAsVLe_Ef7nDX7g==/lib/arm64/libtensorflowlite_jni.so\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #02 pc 00000000000cc5d8  /data/app/org.tensorflow.lite.demo-_VB0X9UVAsVLe_Ef7nDX7g==/lib/arm64/libtensorflowlite_jni.so\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #03 pc 00000000000c9084  /data/app/org.tensorflow.lite.demo-_VB0X9UVAsVLe_Ef7nDX7g==/lib/arm64/libtensorflowlite_jni.so\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #04 pc 000000000011cfb8  /data/app/org.tensorflow.lite.demo-_VB0X9UVAsVLe_Ef7nDX7g==/lib/arm64/libtensorflowlite_jni.so\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #05 pc 0000000000011278  /data/app/org.tensorflow.lite.demo-_VB0X9UVAsVLe_Ef7nDX7g==/lib/arm64/libtensorflowlite_jni.so (Java_org_tensorflow_lite_NativeInterpreterWrapper_run+32)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #06 pc 0000000000553bf0  /system/lib64/libart.so (art_quick_generic_jni_trampoline+144)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #07 pc 000000000054ae4c  /system/lib64/libart.so (art_quick_invoke_static_stub+604)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #08 pc 00000000000dc5d0  /system/lib64/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+264)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #09 pc 000000000029b49c  /system/lib64/libart.so (art::interpreter::ArtInterpreterToCompiledCodeBridge(art::Thread*, art::ArtMethod*, art::ShadowFrame*, unsigned short, art::JValue*)+344)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #10 pc 0000000000295a90  /system/lib64/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+700)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #11 pc 0000000000533f50  /system/lib64/libart.so (MterpInvokeStatic+264)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #12 pc 000000000053ca94  /system/lib64/libart.so (ExecuteMterpImpl+14612)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #13 pc 0000000000275c00  /system/lib64/libart.so (art::interpreter::Execute(art::Thread*, art::DexFile::CodeItem const*, art::ShadowFrame&, art::JValue, bool)+444)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #14 pc 000000000027b7cc  /system/lib64/libart.so (art::interpreter::ArtInterpreterToInterpreterBridge(art::Thread*, art::DexFile::CodeItem const*, art::ShadowFrame*, art::JValue*)+216)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #15 pc 0000000000295a70  /system/lib64/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+668)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #16 pc 0000000000532ad8  /system/lib64/libart.so (MterpInvokeVirtual+652)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #17 pc 000000000053c914  /system/lib64/libart.so (ExecuteMterpImpl+14228)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #18 pc 0000000000275c00  /system/lib64/libart.so (art::interpreter::Execute(art::Thread*, art::DexFile::CodeItem const*, art::ShadowFrame&, art::JValue, bool)+444)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #19 pc 0000000000525450  /system/lib64/libart.so (artQuickToInterpreterBridge+1052)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #20 pc 0000000000553d0c  /system/lib64/libart.so (art_quick_to_interpreter_bridge+92)\r\n2018-11-12 10:51:23.250 22860-22860/? A/DEBUG:     #21 pc 0000000000009644  /dev/ashmem/dalvik-jit-code-cache (deleted)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23687", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23687/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23687/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23687/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23687", "id": 379804742, "node_id": "MDU6SXNzdWUzNzk4MDQ3NDI=", "number": 23687, "title": "scatter_max doesn't work with MirroredStrategy since v1.11.0", "user": {"login": "ZhouYuChen", "id": 3125695, "node_id": "MDQ6VXNlcjMxMjU2OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3125695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhouYuChen", "html_url": "https://github.com/ZhouYuChen", "followers_url": "https://api.github.com/users/ZhouYuChen/followers", "following_url": "https://api.github.com/users/ZhouYuChen/following{/other_user}", "gists_url": "https://api.github.com/users/ZhouYuChen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhouYuChen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhouYuChen/subscriptions", "organizations_url": "https://api.github.com/users/ZhouYuChen/orgs", "repos_url": "https://api.github.com/users/ZhouYuChen/repos", "events_url": "https://api.github.com/users/ZhouYuChen/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhouYuChen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-11-12T14:36:11Z", "updated_at": "2019-12-08T04:28:30Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: tensorflow-gpu v1.12.0-0-ga6d8ffae09, v1.11.0-0-gc19e29306c\r\n- Python version: python 2.7.12\r\n- Bazel version: N/A\r\n- GCC/Compiler version: N/A \r\n- CUDA/cuDNN version: CUDA 9.0 / cuDNN 7.1.4.18-1+cuda9.0\r\n- GPU model and memory: (GeForce GTX 1080Ti / 11172MiB) x 2\r\n\r\n**Describe the current behavior**\r\nscatter_max does not work with MirroredStrategy since v1.11.0.\r\n\r\n**Describe the expected behavior**\r\nscatter_max can work with MirroredStrategy in tensorflow-gpu 1.10.0\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nfrom __future__ import absolute_import, division, print_function\r\nimport tensorflow as tf\r\nimport os, sys\r\n\r\ndef model_func(features, labels, mode, params):\r\n    tmp_var = tf.Variable(tf.zeros(shape=[2]), trainable=False)\r\n    a=tf.get_variable('a', initializer=tf.ones(shape=[]), trainable=True, aggregation=tf.VariableAggregation.MEAN)\r\n    with tf.control_dependencies([tmp_var.initializer]):\r\n        y = tf.stop_gradient(tf.scatter_max(tmp_var, [0, 1], tf.random_uniform([2])))\r\n        loss = tf.reduce_sum(y * a)\r\n    opt = tf.train.AdamOptimizer().minimize(loss, tf.train.get_global_step())\r\n    return tf.estimator.EstimatorSpec(mode=tf.estimator.ModeKeys.TRAIN, loss=loss, train_op=opt)\r\n\r\ndef input_fn():\r\n    features =  tf.data.Dataset.from_tensors([[0.]]).repeat()\r\n    labels = tf.data.Dataset.from_tensors(0.).repeat()\r\n    return tf.data.Dataset.zip((features, labels))\r\n\r\ndef main(argv):\r\n    os.environ['CUDA_VISIBLE_DEVICES'] = \"0,1\"\r\n    run_config = tf.estimator.RunConfig(\r\n        train_distribute=tf.contrib.distribute.MirroredStrategy(num_gpus=2),\r\n        session_config=tf.ConfigProto(\r\n            allow_soft_placement=True,\r\n            gpu_options=tf.GPUOptions(force_gpu_compatible=True))\r\n    )\r\n    model = tf.estimator.Estimator(model_fn=model_func, config=run_config)\r\n\r\n    model.train(input_fn=input_fn, steps=100)\r\n\r\ntf.logging.set_verbosity(tf.logging.INFO)\r\ntf.app.run(argv=[sys.argv[0]])\r\n```\r\n\r\n**Other info / logs**\r\n\r\nerror logs from up code running in v1.12.0\r\n```\r\nINFO:tensorflow:Initializing RunConfig with distribution strategies.\r\nINFO:tensorflow:Not using Distribute Coordinator.\r\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmpiGysT0\r\nINFO:tensorflow:Using config: {'_save_checkpoints_secs': 600, '_session_config': gpu_options {\r\n  force_gpu_compatible: true\r\n}\r\nallow_soft_placement: true\r\n, '_keep_checkpoint_max': 5, '_task_type': 'worker', '_train_distribute': <tensorflow.contrib.distribute.python.mirrored_strategy.MirroredStrategy object at 0x7f7bc01ee910>, '_is_chief': True, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f7bc01ee890>, '_model_dir': '/tmp/tmpiGysT0', '_protocol': None, '_save_checkpoints_steps': None, '_keep_checkpoint_every_n_hours': 10000, '_service': None, '_num_ps_replicas': 0, '_tf_random_seed': None, '_save_summary_steps': 100, '_device_fn': None, '_experimental_distribute': None, '_num_worker_replicas': 1, '_task_id': 0, '_log_step_count_steps': 100, '_evaluation_master': '', '_eval_distribute': None, '_global_id_in_cluster': 0, '_master': '', '_distribute_coordinator_mode': None}\r\nWARNING:tensorflow:Estimator's model_fn (<function model_func at 0x7f7bc5e48578>) includes params argument, but params are not passed to Estimator.\r\n2018-11-12 06:18:54.074313: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-11-12 06:18:55.364237: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:03:00.0\r\ntotalMemory: 10.91GiB freeMemory: 10.75GiB\r\n2018-11-12 06:18:55.511370: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 1 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:04:00.0\r\ntotalMemory: 10.91GiB freeMemory: 10.75GiB\r\n2018-11-12 06:18:55.512283: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1\r\n2018-11-12 06:18:55.949305: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-11-12 06:18:55.949341: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1 \r\n2018-11-12 06:18:55.949347: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N Y \r\n2018-11-12 06:18:55.949351: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   Y N \r\n2018-11-12 06:18:55.949765: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/device:GPU:0 with 10400 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:03:00.0, compute capability: 6.1)\r\n2018-11-12 06:18:55.950082: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/device:GPU:1 with 10400 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1080 Ti, pci bus id: 0000:04:00.0, compute capability: 6.1)\r\nINFO:tensorflow:Device is available but not used by distribute strategy: /device:CPU:0\r\nINFO:tensorflow:Device is available but not used by distribute strategy: /device:XLA_GPU:0\r\nINFO:tensorflow:Device is available but not used by distribute strategy: /device:XLA_CPU:0\r\nINFO:tensorflow:Configured nccl all-reduce.\r\n2018-11-12 06:18:55.968070: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1\r\n2018-11-12 06:18:55.968135: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-11-12 06:18:55.968145: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1 \r\n2018-11-12 06:18:55.968150: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N Y \r\n2018-11-12 06:18:55.968155: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   Y N \r\n2018-11-12 06:18:55.968526: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10400 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:03:00.0, compute capability: 6.1)\r\n2018-11-12 06:18:55.968672: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 10400 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1080 Ti, pci bus id: 0000:04:00.0, compute capability: 6.1)\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Error reported to Coordinator: \r\nTraceback (most recent call last):\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 795, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1195, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/tmp/model_test.py\", line 9, in model_func\r\n    y = tf.stop_gradient(tf.scatter_max(tmp_var, [0, 1], tf.random_uniform([2])))\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\", line 719, in scatter_max\r\n    use_locking=use_locking, name=name)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\r\n    preferred_dtype=default_dtype)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1146, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 439, in _tensor_conversion_mirrored\r\n    assert not as_ref\r\nAssertionError\r\nTraceback (most recent call last):\r\n  File \"/tmp/model_test.py\", line 33, in <module>\r\n    tf.app.run(argv=[sys.argv[0]])\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/tmp/model_test.py\", line 30, in main\r\n    model.train(input_fn=input_fn, steps=100)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 354, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1205, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1316, in _train_model_distributed\r\n    self.config)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 721, in call_for_each_tower\r\n    return self._call_for_each_tower(fn, *args, **kwargs)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 556, in _call_for_each_tower\r\n    return _call_for_each_tower(self, fn, *args, **kwargs)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 183, in _call_for_each_tower\r\n    coord.join(threads)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 795, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1195, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/tmp/model_test.py\", line 9, in model_func\r\n    y = tf.stop_gradient(tf.scatter_max(tmp_var, [0, 1], tf.random_uniform([2])))\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_state_ops.py\", line 719, in scatter_max\r\n    use_locking=use_locking, name=name)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\r\n    preferred_dtype=default_dtype)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1146, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/data/tf1.12/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 439, in _tensor_conversion_mirrored\r\n    assert not as_ref\r\nAssertionError\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23679", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23679/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23679/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23679/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23679", "id": 379730035, "node_id": "MDU6SXNzdWUzNzk3MzAwMzU=", "number": 23679, "title": "Installation of tensorflow r1.10 on windows with visual studio c++ (with gpu) help.", "user": {"login": "Afroman1996", "id": 44968618, "node_id": "MDQ6VXNlcjQ0OTY4NjE4", "avatar_url": "https://avatars2.githubusercontent.com/u/44968618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Afroman1996", "html_url": "https://github.com/Afroman1996", "followers_url": "https://api.github.com/users/Afroman1996/followers", "following_url": "https://api.github.com/users/Afroman1996/following{/other_user}", "gists_url": "https://api.github.com/users/Afroman1996/gists{/gist_id}", "starred_url": "https://api.github.com/users/Afroman1996/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Afroman1996/subscriptions", "organizations_url": "https://api.github.com/users/Afroman1996/orgs", "repos_url": "https://api.github.com/users/Afroman1996/repos", "events_url": "https://api.github.com/users/Afroman1996/events{/privacy}", "received_events_url": "https://api.github.com/users/Afroman1996/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-11-12T11:15:11Z", "updated_at": "2018-12-04T20:21:42Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64bit\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version: 1.10\r\n- Python version:3.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA 9.2, cuDNN 7.4.1.5\r\n- GPU model and memory: 940mx 2GB Vram\r\n\r\n\r\n\r\n**Describe the problem**\r\nCUDA and cuDNN were succesfully installed. CMake to configure and generate build files for tensorflow was also done. MSBuild to build the ALL_BUILD.vcxproj project was invoked and an error was encountered during this. The error message shown in the command prompt is given below.\r\n\r\n\r\n**Any other info / logs**\r\n\"C:\\Users\\Allosimanious\\Documents\\cud\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\ALL_BUILD.vcxproj\" (default targe\r\nt) (1) ->\r\n\"C:\\Users\\Allosimanious\\Documents\\cud\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\tensorflow.vcxproj\" (default targ\r\net) (135) ->\r\n\"C:\\Users\\Allosimanious\\Documents\\cud\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\tensorflow_static.vcxproj\" (defau\r\nlt target) (136) ->\r\n\"C:\\Users\\Allosimanious\\Documents\\cud\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\tf_c.vcxproj\" (default target) (1\r\n37) ->\r\n(ClCompile target) ->\r\n  C:\\Users\\Allosimanious\\Documents\\cud\\tensorflow-r1.10\\tensorflow/core/distributed_runtime/rpc/grpc_server_lib.h(21):\r\nfatal error C1083: Cannot open include file: 'grpcpp/grpcpp.h': No such file or directory [C:\\Users\\Allosimanious\\Docum\r\nents\\cud\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\tf_c.vcxproj]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23677", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23677/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23677/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23677/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23677", "id": 379682641, "node_id": "MDU6SXNzdWUzNzk2ODI2NDE=", "number": 23677, "title": "Sparc compatibility", "user": {"login": "fuzzy13337", "id": 44906228, "node_id": "MDQ6VXNlcjQ0OTA2MjI4", "avatar_url": "https://avatars3.githubusercontent.com/u/44906228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fuzzy13337", "html_url": "https://github.com/fuzzy13337", "followers_url": "https://api.github.com/users/fuzzy13337/followers", "following_url": "https://api.github.com/users/fuzzy13337/following{/other_user}", "gists_url": "https://api.github.com/users/fuzzy13337/gists{/gist_id}", "starred_url": "https://api.github.com/users/fuzzy13337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fuzzy13337/subscriptions", "organizations_url": "https://api.github.com/users/fuzzy13337/orgs", "repos_url": "https://api.github.com/users/fuzzy13337/repos", "events_url": "https://api.github.com/users/fuzzy13337/events{/privacy}", "received_events_url": "https://api.github.com/users/fuzzy13337/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-12T09:11:40Z", "updated_at": "2018-11-27T17:25:41Z", "closed_at": null, "author_association": "NONE", "body": "<em> Tensorflow Lite Sparc Support tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: r1.10\r\n- Are you willing to contribute it: if able to \r\n\r\n\r\nTensorflow currently supports intel x86 (Windows,IOS) and ARM (raspberry pi), but not sparc architecture. Would be nice to also have support for sparc architecture.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23660", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23660/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23660/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23660/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23660", "id": 379482103, "node_id": "MDU6SXNzdWUzNzk0ODIxMDM=", "number": 23660, "title": "__manage.py__ not found", "user": {"login": "dah512", "id": 26016414, "node_id": "MDQ6VXNlcjI2MDE2NDE0", "avatar_url": "https://avatars2.githubusercontent.com/u/26016414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dah512", "html_url": "https://github.com/dah512", "followers_url": "https://api.github.com/users/dah512/followers", "following_url": "https://api.github.com/users/dah512/following{/other_user}", "gists_url": "https://api.github.com/users/dah512/gists{/gist_id}", "starred_url": "https://api.github.com/users/dah512/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dah512/subscriptions", "organizations_url": "https://api.github.com/users/dah512/orgs", "repos_url": "https://api.github.com/users/dah512/repos", "events_url": "https://api.github.com/users/dah512/events{/privacy}", "received_events_url": "https://api.github.com/users/dah512/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-11T02:18:50Z", "updated_at": "2018-12-14T19:01:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS 10.11.6\r\n- TensorFlow installed from (source or binary): source, if this means from tensorflow.org\r\n- TensorFlow version:  TensorFlow version 1.12\r\n- Python version: Python 3.6\r\n- Installed using virtualenv? pip? condo?: installed using pip, conda and in a virtual environment\r\n- Bazel version (if compiling from source): not yet\r\n- GCC/Compiler version (if compiling from source): CPU version\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nI installed tensorflow three weeks ago, via pip.  Then tried to start running tutorials or at least verify install.  Kept getting \"file not found\",  checked \"pip list\", it was there, but in downloads.  Then after further checking, noted it to be in site-packages under downloads.  I've done the installation as pip, as conda and in a virtual environment.  Comments like \"virtualenv\" not found frustrated the installation but I was eventually able to get set up a virtual environment.  Last night I tested it using the \"pip --upgrade tensorflow\", command.  Requirements had been met.  Then I tried opening both keras and tensorflow apps.  Okay,  tensorflow has an outer and inner directory.  No prob.  Still now I get \"__manage.py__\" not found in package.  Could not copy entire traceback from terminal but using the conda console I still get errors.  Here's a copy of the last commands I tried today and the traceback from the console,...albeit, the terminal traceback is much larger:\r\n\r\npython -c \"import tensorflow as tf; tf.enable_eager_execution(); print(tf.reduce_sum(tf.random_normal([1000, 1000])))\"\r\n\r\n1. File \"<ipython-input-1-77841da38ed1>\", line 1\r\n    python -c \"import tensorflow as tf; tf.enable_eager_execution(); print(tf.reduce_sum(tf.random_normal([1000, 1000])))\"\r\n                                                                                                                         ^\r\nSyntaxError: invalid syntax\r\n\r\n2.  File \"<ipython-input-2-92d0143764a7>\", line 1\r\n    python -c \"import tensorflow as tf; tf.enable_eager_execution()\r\n                                                                   ^\r\nSyntaxError: EOL while scanning string literal\r\n\r\n3.  File \"<ipython-input-3-7e790e56de0e>\", line 1\r\n    python -c \"import tensorflow as tf; tf.enable_eager_execution();\r\n                                                                    ^\r\nSyntaxError: EOL while scanning string literal\r\n\r\n4. File \"<ipython-input-4-77841da38ed1>\", line 1\r\n    python -c \"import tensorflow as tf; tf.enable_eager_execution(); print(tf.reduce_sum(tf.random_normal([1000, 1000])))\"\r\n                                                                                                                         ^\r\nSyntaxError: invalid syntax\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n5.   File \"<ipython-input-5-50ca0a742afa>\", line 1  [without quotes]\r\n    python -c import tensorflow as tf; tf.enable_eager_execution(); print(tf.reduce_sum(tf.random_normal([1000, 1000])))\r\n                   ^\r\nSyntaxError: invalid syntax\r\n**Any other info / logs**\r\n\r\nTrying to copy the terminal log, and traceback.\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23649", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23649/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23649/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23649/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23649", "id": 379395506, "node_id": "MDU6SXNzdWUzNzkzOTU1MDY=", "number": 23649, "title": "cannot link static library libtensorflow.a by go for tensorflow", "user": {"login": "raven1989", "id": 7405273, "node_id": "MDQ6VXNlcjc0MDUyNzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7405273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raven1989", "html_url": "https://github.com/raven1989", "followers_url": "https://api.github.com/users/raven1989/followers", "following_url": "https://api.github.com/users/raven1989/following{/other_user}", "gists_url": "https://api.github.com/users/raven1989/gists{/gist_id}", "starred_url": "https://api.github.com/users/raven1989/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raven1989/subscriptions", "organizations_url": "https://api.github.com/users/raven1989/orgs", "repos_url": "https://api.github.com/users/raven1989/repos", "events_url": "https://api.github.com/users/raven1989/events{/privacy}", "received_events_url": "https://api.github.com/users/raven1989/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-11-10T06:19:19Z", "updated_at": "2020-02-18T09:03:34Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOCACHE=\"/search/odin/tensorflow/.cache/go-build\"\r\nGOEXE=\"\"\r\nGOFLAGS=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"linux\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/search/odin/tensorflow/gopath/\"\r\nGOPROXY=\"\"\r\nGORACE=\"\"\r\nGOROOT=\"/search/odin/tensorflow/go\"\r\nGOTMPDIR=\"\"\r\nGOTOOLDIR=\"/search/odin/tensorflow/go/pkg/tool/linux_amd64\"\r\nGCCGO=\"gccgo\"\r\nCC=\"gcc\"\r\nCXX=\"g++\"\r\nCGO_ENABLED=\"1\"\r\nGOMOD=\"\"\r\nCGO_CFLAGS=\"-I/search/odin/tensorflow/lib64/include\"\r\nCGO_CPPFLAGS=\"\"\r\nCGO_CXXFLAGS=\"-g -O2\"\r\nCGO_FFLAGS=\"-g -O2\"\r\nCGO_LDFLAGS=\"-L/search/odin/tensorflow/lib64/lib\"\r\nPKG_CONFIG=\"pkg-config\"\r\nGOGCCFLAGS=\"-std=gnu99 -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build821586571=/tmp/go-build -gno-record-gcc-switches\"\r\n\r\n\r\n**Describe the problem**\r\nI'm trying to build an executable binary file by go for tensorflow. I followed the official hello-world instructions and successfully go build everything. \r\nHowever, what I need is to link a static library libtensorflow.a instead of the dynamic one so that the executable binary file has no dependencies. **I managed to build the static library libtensorflow.a** through makefile offered with src(https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile) and put it in **/search/odin/tensorflow/lib64/lib**, then I go build with the command below, and I get ld errors which I will post under **Any other info / logs**.\r\nA similar issue is [here](https://github.com/tensorflow/tensorflow/issues/15563). It seems the same problem but It's not. From what I see, it tries to build the libtensorflow.a by Go for Tensorflow then link it, but I have already got a libtensorflow.a in advance. All I need is to link the static library.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\ngo build -ldflags '-linkmode \"external\" -extldflags \"-static -L /search/odin/tensorflow/lib64/lib\"' hello_tf.go\r\n\r\n**Any other info / logs**\r\ncommand-line-arguments\r\n/search/odin/tensorflow/go/pkg/tool/linux_amd64/link: running gcc failed: exit status 1\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrBool':\r\nattrs.cgo2.c:(.text+0x6d): undefined reference to `TF_OperationGetAttrBool'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrBoolList':\r\nattrs.cgo2.c:(.text+0xb4): undefined reference to `TF_OperationGetAttrBoolList'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrFloat':\r\nattrs.cgo2.c:(.text+0xf1): undefined reference to `TF_OperationGetAttrFloat'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrFloatList':\r\nattrs.cgo2.c:(.text+0x138): undefined reference to `TF_OperationGetAttrFloatList'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrInt':\r\nattrs.cgo2.c:(.text+0x175): undefined reference to `TF_OperationGetAttrInt'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrIntList':\r\nattrs.cgo2.c:(.text+0x1bc): undefined reference to `TF_OperationGetAttrIntList'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrMetadata':\r\nattrs.cgo2.c:(.text+0x1fe): undefined reference to `TF_OperationGetAttrMetadata'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrShape':\r\nattrs.cgo2.c:(.text+0x27f): undefined reference to `TF_OperationGetAttrShape'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrShapeList':\r\nattrs.cgo2.c:(.text+0x2e6): undefined reference to `TF_OperationGetAttrShapeList'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrString':\r\nattrs.cgo2.c:(.text+0x32e): undefined reference to `TF_OperationGetAttrString'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrStringList':\r\nattrs.cgo2.c:(.text+0x397): undefined reference to `TF_OperationGetAttrStringList'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrTensor':\r\nattrs.cgo2.c:(.text+0x3d4): undefined reference to `TF_OperationGetAttrTensor'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrTensorList':\r\nattrs.cgo2.c:(.text+0x41b): undefined reference to `TF_OperationGetAttrTensorList'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrType':\r\nattrs.cgo2.c:(.text+0x458): undefined reference to `TF_OperationGetAttrType'\r\n/tmp/go-link-707261891/000001.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationGetAttrTypeList':\r\nattrs.cgo2.c:(.text+0x49f): undefined reference to `TF_OperationGetAttrTypeList'\r\n/tmp/go-link-707261891/000002.o: In function `TF_SetAttrShapeList_Helper':\r\ngraph.cgo2.c:(.text+0xf2): undefined reference to `TF_SetAttrShapeList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_AddControlInput':\r\ngraph.cgo2.c:(.text+0x12e): undefined reference to `TF_AddControlInput'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_AddInput':\r\ngraph.cgo2.c:(.text+0x163): undefined reference to `TF_AddInput'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_AddInputList':\r\ngraph.cgo2.c:(.text+0x19a): undefined reference to `TF_AddInputList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteBuffer':\r\ngraph.cgo2.c:(.text+0x1bf): undefined reference to `TF_DeleteBuffer'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteGraph':\r\ngraph.cgo2.c:(.text+0x1e4): undefined reference to `TF_DeleteGraph'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteImportGraphDefOptions':\r\ngraph.cgo2.c:(.text+0x209): undefined reference to `TF_DeleteImportGraphDefOptions'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_FinishOperation':\r\ngraph.cgo2.c:(.text+0x242): undefined reference to `TF_FinishOperation'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GraphImportGraphDef':\r\ngraph.cgo2.c:(.text+0x2a5): undefined reference to `TF_GraphImportGraphDef'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GraphNextOperation':\r\ngraph.cgo2.c:(.text+0x2de): undefined reference to `TF_GraphNextOperation'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GraphOperationByName':\r\ngraph.cgo2.c:(.text+0x33d): undefined reference to `TF_GraphOperationByName'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GraphToGraphDef':\r\ngraph.cgo2.c:(.text+0x39b): undefined reference to `TF_GraphToGraphDef'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_ImportGraphDefOptionsSetPrefix':\r\ngraph.cgo2.c:(.text+0x3cb): undefined reference to `TF_ImportGraphDefOptionsSetPrefix'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewBuffer':\r\ngraph.cgo2.c:(.text+0x3f4): undefined reference to `TF_NewBuffer'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewGraph':\r\ngraph.cgo2.c:(.text+0x442): undefined reference to `TF_NewGraph'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewImportGraphDefOptions':\r\ngraph.cgo2.c:(.text+0x490): undefined reference to `TF_NewImportGraphDefOptions'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewOperation':\r\ngraph.cgo2.c:(.text+0x4f6): undefined reference to `TF_NewOperation'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrBool':\r\ngraph.cgo2.c:(.text+0x557): undefined reference to `TF_SetAttrBool'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrBoolList':\r\ngraph.cgo2.c:(.text+0x593): undefined reference to `TF_SetAttrBoolList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrFloat':\r\ngraph.cgo2.c:(.text+0x5d2): undefined reference to `TF_SetAttrFloat'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrFloatList':\r\ngraph.cgo2.c:(.text+0x60e): undefined reference to `TF_SetAttrFloatList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrInt':\r\ngraph.cgo2.c:(.text+0x646): undefined reference to `TF_SetAttrInt'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrIntList':\r\ngraph.cgo2.c:(.text+0x682): undefined reference to `TF_SetAttrIntList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrShape':\r\ngraph.cgo2.c:(.text+0x6be): undefined reference to `TF_SetAttrShape'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrShapeList':\r\ngraph.cgo2.c:(.text+0x705): undefined reference to `TF_SetAttrShapeList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrString':\r\ngraph.cgo2.c:(.text+0x789): undefined reference to `TF_SetAttrString'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrStringList':\r\ngraph.cgo2.c:(.text+0x7d0): undefined reference to `TF_SetAttrStringList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrTensor':\r\ngraph.cgo2.c:(.text+0x80d): undefined reference to `TF_SetAttrTensor'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrTensorList':\r\ngraph.cgo2.c:(.text+0x854): undefined reference to `TF_SetAttrTensorList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrType':\r\ngraph.cgo2.c:(.text+0x88b): undefined reference to `TF_SetAttrType'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetAttrTypeList':\r\ngraph.cgo2.c:(.text+0x8c7): undefined reference to `TF_SetAttrTypeList'\r\n/tmp/go-link-707261891/000002.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetDevice':\r\ngraph.cgo2.c:(.text+0x8f7): undefined reference to `TF_SetDevice'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GraphGetTensorNumDims':\r\noperation.cgo2.c:(.text+0x73): undefined reference to `TF_GraphGetTensorNumDims'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GraphGetTensorShape':\r\noperation.cgo2.c:(.text+0xe5): undefined reference to `TF_GraphGetTensorShape'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationDevice':\r\noperation.cgo2.c:(.text+0x113): undefined reference to `TF_OperationDevice'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationInput':\r\noperation.cgo2.c:(.text+0x16c): undefined reference to `TF_OperationInput'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationInputType':\r\noperation.cgo2.c:(.text+0x1d5): undefined reference to `TF_OperationInputType'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationName':\r\noperation.cgo2.c:(.text+0x226): undefined reference to `TF_OperationName'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationNumInputs':\r\noperation.cgo2.c:(.text+0x27a): undefined reference to `TF_OperationNumInputs'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationNumOutputs':\r\noperation.cgo2.c:(.text+0x2cb): undefined reference to `TF_OperationNumOutputs'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationOpType':\r\noperation.cgo2.c:(.text+0x31c): undefined reference to `TF_OperationOpType'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationOutputConsumers':\r\noperation.cgo2.c:(.text+0x384): undefined reference to `TF_OperationOutputConsumers'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationOutputListLength':\r\noperation.cgo2.c:(.text+0x3e8): undefined reference to `TF_OperationOutputListLength'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationOutputNumConsumers':\r\noperation.cgo2.c:(.text+0x43e): undefined reference to `TF_OperationOutputNumConsumers'\r\n/tmp/go-link-707261891/000004.o: In function `_cgo_d969e426e2e3_Cfunc_TF_OperationOutputType':\r\noperation.cgo2.c:(.text+0x494): undefined reference to `TF_OperationOutputType'\r\n/tmp/go-link-707261891/000005.o: In function `_cgo_d969e426e2e3_Cfunc_TF_LoadSessionFromSavedModel':\r\nsaved_model.cgo2.c:(.text+0xa2): undefined reference to `TF_LoadSessionFromSavedModel'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_CloseSession':\r\nsession.cgo2.c:(.text+0x60): undefined reference to `TF_CloseSession'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteDeviceList':\r\nsession.cgo2.c:(.text+0x85): undefined reference to `TF_DeleteDeviceList'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeletePRunHandle':\r\nsession.cgo2.c:(.text+0xaa): undefined reference to `TF_DeletePRunHandle'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteSession':\r\nsession.cgo2.c:(.text+0xda): undefined reference to `TF_DeleteSession'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteSessionOptions':\r\nsession.cgo2.c:(.text+0xff): undefined reference to `TF_DeleteSessionOptions'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeviceListCount':\r\nsession.cgo2.c:(.text+0x12d): undefined reference to `TF_DeviceListCount'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeviceListMemoryBytes':\r\nsession.cgo2.c:(.text+0x18f): undefined reference to `TF_DeviceListMemoryBytes'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeviceListName':\r\nsession.cgo2.c:(.text+0x1f4): undefined reference to `TF_DeviceListName'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeviceListType':\r\nsession.cgo2.c:(.text+0x259): undefined reference to `TF_DeviceListType'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewSession':\r\nsession.cgo2.c:(.text+0x2c0): undefined reference to `TF_NewSession'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewSessionOptions':\r\nsession.cgo2.c:(.text+0x30f): undefined reference to `TF_NewSessionOptions'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SessionListDevices':\r\nsession.cgo2.c:(.text+0x36d): undefined reference to `TF_SessionListDevices'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SessionPRun':\r\nsession.cgo2.c:(.text+0x428): undefined reference to `TF_SessionPRun'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SessionPRunSetup':\r\nsession.cgo2.c:(.text+0x4a5): undefined reference to `TF_SessionPRunSetup'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SessionRun':\r\nsession.cgo2.c:(.text+0x54a): undefined reference to `TF_SessionRun'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetConfig':\r\nsession.cgo2.c:(.text+0x590): undefined reference to `TF_SetConfig'\r\n/tmp/go-link-707261891/000006.o: In function `_cgo_d969e426e2e3_Cfunc_TF_SetTarget':\r\nsession.cgo2.c:(.text+0x5c0): undefined reference to `TF_SetTarget'\r\n/tmp/go-link-707261891/000007.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteStatus':\r\nstatus.cgo2.c:(.text+0x55): undefined reference to `TF_DeleteStatus'\r\n/tmp/go-link-707261891/000007.o: In function `_cgo_d969e426e2e3_Cfunc_TF_GetCode':\r\nstatus.cgo2.c:(.text+0x83): undefined reference to `TF_GetCode'\r\n/tmp/go-link-707261891/000007.o: In function `_cgo_d969e426e2e3_Cfunc_TF_Message':\r\nstatus.cgo2.c:(.text+0xd4): undefined reference to `TF_Message'\r\n/tmp/go-link-707261891/000007.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NewStatus':\r\nstatus.cgo2.c:(.text+0x123): undefined reference to `TF_NewStatus'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_AllocateTensor':\r\ntensor.cgo2.c:(.text+0x73): undefined reference to `TF_AllocateTensor'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_DeleteTensor':\r\ntensor.cgo2.c:(.text+0xbe): undefined reference to `TF_DeleteTensor'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_Dim':\r\ntensor.cgo2.c:(.text+0xf5): undefined reference to `TF_Dim'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_NumDims':\r\ntensor.cgo2.c:(.text+0x149): undefined reference to `TF_NumDims'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_StringDecode':\r\ntensor.cgo2.c:(.text+0x1bd): undefined reference to `TF_StringDecode'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_StringEncode':\r\ntensor.cgo2.c:(.text+0x234): undefined reference to `TF_StringEncode'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_StringEncodedSize':\r\ntensor.cgo2.c:(.text+0x288): undefined reference to `TF_StringEncodedSize'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_TensorByteSize':\r\ntensor.cgo2.c:(.text+0x2dc): undefined reference to `TF_TensorByteSize'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_TensorData':\r\ntensor.cgo2.c:(.text+0x330): undefined reference to `TF_TensorData'\r\n/tmp/go-link-707261891/000008.o: In function `_cgo_d969e426e2e3_Cfunc_TF_TensorType':\r\ntensor.cgo2.c:(.text+0x384): undefined reference to `TF_TensorType'\r\n/tmp/go-link-707261891/000009.o: In function `_cgo_d969e426e2e3_Cfunc_TF_Version':\r\nversion.cgo2.c:(.text+0x59): undefined reference to `TF_Version'\r\ncollect2: error: ld returned 1 exit status\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23648", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23648/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23648/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23648/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23648", "id": 379390221, "node_id": "MDU6SXNzdWUzNzkzOTAyMjE=", "number": 23648, "title": "run error when i use xla", "user": {"login": "dongAxis", "id": 5328674, "node_id": "MDQ6VXNlcjUzMjg2NzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5328674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dongAxis", "html_url": "https://github.com/dongAxis", "followers_url": "https://api.github.com/users/dongAxis/followers", "following_url": "https://api.github.com/users/dongAxis/following{/other_user}", "gists_url": "https://api.github.com/users/dongAxis/gists{/gist_id}", "starred_url": "https://api.github.com/users/dongAxis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dongAxis/subscriptions", "organizations_url": "https://api.github.com/users/dongAxis/orgs", "repos_url": "https://api.github.com/users/dongAxis/repos", "events_url": "https://api.github.com/users/dongAxis/events{/privacy}", "received_events_url": "https://api.github.com/users/dongAxis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-10T04:47:06Z", "updated_at": "2019-03-11T17:12:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): centos 7.0\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version:  master branch and commit id is b300c78a889aa75b04f6bcff2a6a5fb5d0976b4d\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: no\r\n- Bazel version (if compiling from source): 0.18.0\r\n- GCC/Compiler version (if compiling from source): gcc 4.9.2\r\n- CUDA/cuDNN version: no\r\n- GPU model and memory: 131G\r\n\r\n\r\n\r\n**Describe the problem**\r\nThe below is my building step:\r\n1. bazel build --jobs 32  -c opt -c dbg --strip=never  //tensorflow/tools/pip_package:build_pip_package\r\nor bazel build --jobs 32  -c opt -c dbg //tensorflow/tools/pip_package:build_pip_package\r\n\r\n2. ./bazel-bin/tensorflow/tools/pip_package/build_pip_package ./tmp/tensorflow_pkg\r\n3. pip3.6 install ./tensorflow-1.12.0rc0-cp36-cp36m-linux_x86_64.whl\r\n\r\nBut when i run the code with command\uff1a\r\nTF_XLA_FLAGS=\"--xla_hlo_graph_path=/tmp --xla_generate_hlo_graph=.*\" python3.6 mnist_softmax_xla.py\r\ni got an error:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/local/lib64/python3.6/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/local/lib64/python3.6/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: /usr/local/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN10tensorflow19XlaCompilationCache28kDefaultCompilationThresholdE\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"mnist_softmax_xla.py\", line 26, in <module>\r\n    import tensorflow as tf\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/local/lib64/python3.6/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/local/lib64/python3.6/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: /usr/local/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN10tensorflow19XlaCompilationCache28kDefaultCompilationThresholdE\r\n\r\nit is just like kDefaultCompilationThreshold dose not existed in tensorflow_framework.so\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\ncheck the above \r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23639", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23639/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23639/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23639/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23639", "id": 379334309, "node_id": "MDU6SXNzdWUzNzkzMzQzMDk=", "number": 23639, "title": "`var_list` will cause untrainable variables to be trained", "user": {"login": "machinaut", "id": 79779, "node_id": "MDQ6VXNlcjc5Nzc5", "avatar_url": "https://avatars3.githubusercontent.com/u/79779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/machinaut", "html_url": "https://github.com/machinaut", "followers_url": "https://api.github.com/users/machinaut/followers", "following_url": "https://api.github.com/users/machinaut/following{/other_user}", "gists_url": "https://api.github.com/users/machinaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/machinaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/machinaut/subscriptions", "organizations_url": "https://api.github.com/users/machinaut/orgs", "repos_url": "https://api.github.com/users/machinaut/repos", "events_url": "https://api.github.com/users/machinaut/events{/privacy}", "received_events_url": "https://api.github.com/users/machinaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-09T21:51:06Z", "updated_at": "2018-12-14T19:01:02Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): below\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Mac 10.13\r\n- TensorFlow installed from (source or binary): `pip`\r\n- TensorFlow version (use command below): `v1.9.0-0-g25c197e023 1.9.0`\r\n- Python version: `3.6.5`\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n```v1.9.0-0-g25c197e023 1.9.0```\r\n\r\n**Describe the current behavior**\r\nBoth trainable and untrainable variables are updated by the optimizer\r\n\r\n**Describe the expected behavior**\r\nExpected: trainable variables are updated by optimizer, but untrainable variables are not.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nx = tf.Variable([1.0], trainable=False)\r\ny = tf.Variable([1.0], trainable=True)\r\nz = x + y\r\n\r\ntrain_op = tf.train.GradientDescentOptimizer(0.1).minimize(z, var_list=[x, y])\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\nsess.run(train_op)\r\n\r\nprint(sess.run(x))  # [0.9]  Unexpected\r\nprint(sess.run(y))  # [0.9]  Expected\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23631", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23631/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23631/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23631/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23631", "id": 379155217, "node_id": "MDU6SXNzdWUzNzkxNTUyMTc=", "number": 23631, "title": "Default argument of tf.placeholder", "user": {"login": "MasKong", "id": 23203109, "node_id": "MDQ6VXNlcjIzMjAzMTA5", "avatar_url": "https://avatars1.githubusercontent.com/u/23203109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MasKong", "html_url": "https://github.com/MasKong", "followers_url": "https://api.github.com/users/MasKong/followers", "following_url": "https://api.github.com/users/MasKong/following{/other_user}", "gists_url": "https://api.github.com/users/MasKong/gists{/gist_id}", "starred_url": "https://api.github.com/users/MasKong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MasKong/subscriptions", "organizations_url": "https://api.github.com/users/MasKong/orgs", "repos_url": "https://api.github.com/users/MasKong/repos", "events_url": "https://api.github.com/users/MasKong/events{/privacy}", "received_events_url": "https://api.github.com/users/MasKong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Harshini-Gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Harshini-Gadige", "html_url": "https://github.com/Harshini-Gadige", "followers_url": "https://api.github.com/users/Harshini-Gadige/followers", "following_url": "https://api.github.com/users/Harshini-Gadige/following{/other_user}", "gists_url": "https://api.github.com/users/Harshini-Gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/Harshini-Gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Harshini-Gadige/subscriptions", "organizations_url": "https://api.github.com/users/Harshini-Gadige/orgs", "repos_url": "https://api.github.com/users/Harshini-Gadige/repos", "events_url": "https://api.github.com/users/Harshini-Gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/Harshini-Gadige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Harshini-Gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Harshini-Gadige", "html_url": "https://github.com/Harshini-Gadige", "followers_url": "https://api.github.com/users/Harshini-Gadige/followers", "following_url": "https://api.github.com/users/Harshini-Gadige/following{/other_user}", "gists_url": "https://api.github.com/users/Harshini-Gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/Harshini-Gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Harshini-Gadige/subscriptions", "organizations_url": "https://api.github.com/users/Harshini-Gadige/orgs", "repos_url": "https://api.github.com/users/Harshini-Gadige/repos", "events_url": "https://api.github.com/users/Harshini-Gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/Harshini-Gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-09T13:08:04Z", "updated_at": "2018-11-23T18:34:09Z", "closed_at": null, "author_association": "NONE", "body": "InvalidArgumentError (see above for traceback): You must feed a value for placeholder tensor 'x' with dtype float\r\n\t [[{{node x}} = Placeholder[dtype=DT_FLOAT, shape=<unknown>, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]()]]\r\n\r\nI think  tf.placeholder(tf.float32, shape=None, name='x') is equivalent to  tf.placeholder(tf.float32,  name='x')? But the results are different for these two lines of code.\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution Windows10:\r\n- TensorFlow installed from pip:\r\n- TensorFlow version (use command below): 1.11.0\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: 1080Ti\r\n\r\n\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nx = tf.placeholder(tf.float32, shape=None, name='x')\r\ny = tf.placeholder(tf.float32, shape=None, name='y')\r\nwith tf.Session() as sess:\r\n    total_loss = 0\r\n    sess.run(tf.global_variables_initializer())\r\n    _, loss_ = sess.run([optimizer, loss], feed_dict={x: 1.0, y: 2.0})\r\n````\r\nThe code presented above returned InvalidArgumentError.\r\n\r\n```python\r\nx = tf.placeholder(tf.float32, name='x')\r\ny = tf.placeholder(tf.float32, name='y')\r\nwith tf.Session() as sess:\r\n    total_loss = 0\r\n    sess.run(tf.global_variables_initializer())\r\n    _, loss_ = sess.run([optimizer, loss], feed_dict={x: 1.0, y: 2.0})\r\n````\r\nThese code works well.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23621", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23621/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23621/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23621/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23621", "id": 379068325, "node_id": "MDU6SXNzdWUzNzkwNjgzMjU=", "number": 23621, "title": "tf.assign does not support gradient?", "user": {"login": "ahatamiz", "id": 26806394, "node_id": "MDQ6VXNlcjI2ODA2Mzk0", "avatar_url": "https://avatars2.githubusercontent.com/u/26806394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahatamiz", "html_url": "https://github.com/ahatamiz", "followers_url": "https://api.github.com/users/ahatamiz/followers", "following_url": "https://api.github.com/users/ahatamiz/following{/other_user}", "gists_url": "https://api.github.com/users/ahatamiz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahatamiz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahatamiz/subscriptions", "organizations_url": "https://api.github.com/users/ahatamiz/orgs", "repos_url": "https://api.github.com/users/ahatamiz/repos", "events_url": "https://api.github.com/users/ahatamiz/events{/privacy}", "received_events_url": "https://api.github.com/users/ahatamiz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-09T08:34:38Z", "updated_at": "2018-12-13T19:00:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04.1 LTS\r\n- TensorFlow version (use command below):1.11\r\n- Python version:3.6\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:CUDA release 9.0, V9.0.176\r\n- GPU model and memory: TITAN Xp / 12Gb\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nIt seems like tf.assign does not support gradients. In the forward pass, everything seems to work ok. But when I try to do backpropogate the gradients,it does not work. The error specifies that there are no variables to optimize which is not certainly the case. \r\n**Describe the expected behavior**\r\ntf.assign should simply allow for gradient to flow, just like its python counterpart Python assign operator.\r\n\r\n**Code to reproduce the issue**\r\n\r\n    import tensorflow as tf\r\n    import numpy as np\r\n\r\n    def func_foo(x):\r\n \r\n        phi = tf.Variable(tf.zeros([1,10,10,1], dtype='float32'), \r\n                        dtype='float32',trainable=False)\r\n\r\n        phi=tf.assign(phi,x)\r\n\r\n        c3=tf.nn.sigmoid(phi)\r\n        c4=tf.reduce_mean(c3)\r\n\r\n    return 1-c4\r\n\r\n    a = np.random.randint(2, size=(10,10))\r\n    k = np.array([[1,1,1],[1,1,1],[1,1,1]],dtype=np.float32)\r\n    flip = [slice(None, None, -1), slice(None, None, -1)]\r\n    k = k[flip]\r\n\r\n    a=a.astype(np.float32)\r\n    a_tensor = tf.reshape(a, [1, 10, 10, 1])\r\n    k_weight = tf.reshape(np.array(k), [3,3,1,1])\r\n\r\n    c2=tf.layers.conv2d(a_tensor,filters=1, kernel_size=3, strides=1, padding=\"same\",activation=tf.nn.relu) \r\n    total_loss=func_foo(c2)    \r\n    train_op = tf.train.AdamOptimizer(1e-3).minimize(total_loss,colocate_gradients_with_ops=True)\r\n    init = tf.initialize_all_variables()\r\n    sess=tf.Session()\r\n    with tf.Session() as sess:\r\n        init = tf.initialize_all_variables()\r\n        sess.run(init)\r\n        _,=sess.run([train_op])``\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"test_tf2.py\", line 31, in <module>\r\n    train_op = tf.train.AdamOptimizer(1e-3).minimize(total_loss,colocate_gradients_with_ops=True)\r\n  File \"/home/ali/anaconda3/envs/tf19/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 406, in minimize\r\n    ([str(v) for _, v in grads_and_vars], loss))\r\nValueError: No gradients provided for any variable, check your graph for ops that do not support gradients, between variables [\"<tf.Variable 'conv2d/kernel:0' shape=(3, 3, 1, 1) dtype=float32_ref>\", \"<tf.Variable 'conv2d/bias:0' shape=(1,) dtype=float32_ref>\"] and loss Tensor(\"sub:0\", shape=(), dtype=float32).\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23615", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23615/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23615/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23615/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23615", "id": 379029274, "node_id": "MDU6SXNzdWUzNzkwMjkyNzQ=", "number": 23615, "title": "XLA does not know associative law", "user": {"login": "hzhangxyz", "id": 11623447, "node_id": "MDQ6VXNlcjExNjIzNDQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/11623447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hzhangxyz", "html_url": "https://github.com/hzhangxyz", "followers_url": "https://api.github.com/users/hzhangxyz/followers", "following_url": "https://api.github.com/users/hzhangxyz/following{/other_user}", "gists_url": "https://api.github.com/users/hzhangxyz/gists{/gist_id}", "starred_url": "https://api.github.com/users/hzhangxyz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hzhangxyz/subscriptions", "organizations_url": "https://api.github.com/users/hzhangxyz/orgs", "repos_url": "https://api.github.com/users/hzhangxyz/repos", "events_url": "https://api.github.com/users/hzhangxyz/events{/privacy}", "received_events_url": "https://api.github.com/users/hzhangxyz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-09T05:34:10Z", "updated_at": "2018-12-19T18:52:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Arch Linux**\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **1.11.0**\r\n- Python version: **3.7.1**\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\noutput: \r\n```\r\n\r\n== cat /etc/issue ===============================================\r\nLinux ZHANGHAO 4.18.16-arch1-1-ARCH #1 SMP PREEMPT Sat Oct 20 22:06:45 UTC 2018 x86_64 GNU/Linux\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (GCC) 8.2.1 20180831\r\nCopyright \u00a9 2018 Free Software Foundation, Inc.\r\n\u672c\u7a0b\u5e8f\u662f\u81ea\u7531\u8f6f\u4ef6\uff1b\u8bf7\u53c2\u770b\u6e90\u4ee3\u7801\u7684\u7248\u6743\u58f0\u660e\u3002\u672c\u8f6f\u4ef6\u6ca1\u6709\u4efb\u4f55\u62c5\u4fdd\uff1b\r\n\u5305\u62ec\u6ca1\u6709\u9002\u9500\u6027\u548c\u67d0\u4e00\u4e13\u7528\u76ee\u7684\u4e0b\u7684\u9002\u7528\u6027\u62c5\u4fdd\u3002\r\n\r\n== uname -a =====================================================\r\nLinux ZHANGHAO 4.18.16-arch1-1-ARCH #1 SMP PREEMPT Sat Oct 20 22:06:45 UTC 2018 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.11.0\r\ntf.GIT_VERSION = b'unknown'\r\ntf.COMPILER_VERSION = b'unknown'\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh:\u884c105: nvidia-smi: \u672a\u627e\u5230\u547d\u4ee4\r\n\r\n== cuda libs  ===================================================\r\n```\r\n\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\noutput: `b'unknown' 1.11.0`\r\n\r\n**Describe the current behavior**\r\nsource code:\r\nmain.py\r\n```python\r\nimport sys\r\nimport tensorflow as tf\r\n\r\nN = 10000\r\nn = 10\r\n\r\na = tf.random_normal([N,n])\r\nb = tf.random_normal([N,n])\r\nc = tf.random_normal([N,n])\r\nd = tf.random_normal([N,n])\r\n\r\nX1 = tf.tensordot(a,b,[[1],[1]],name='X1')\r\nY1 = tf.tensordot(c,d,[[1],[1]],name='Y1')\r\nZ1 = tf.tensordot(X1,Y1,[[0,1],[0,1]],name='Z1')\r\n\r\nX2 = tf.tensordot(a,c,[[0],[0]],name='X2')\r\nY2 = tf.tensordot(b,d,[[0],[0]],name='Y2')\r\nZ2 = tf.tensordot(X2,Y2,[[0,1],[0,1]],name='Z2')\r\n\r\nconfig = tf.ConfigProto()\r\nconfig.graph_options.optimizer_options.global_jit_level = tf.OptimizerOptions.ON_1\r\n\r\nsess = tf.Session(config=config)\r\n\r\nif sys.argv[1] == '1':\r\n    for i in range(10):\r\n        print(sess.run(Z1))\r\n\r\nif sys.argv[1] == '2':\r\n    for i in range(10):\r\n        print(sess.run(Z2))\r\n```\r\nwhen run `time python main.py 1` and  `time python main.py 2`, get 4.6s and 1.2s\r\n\r\n**Describe the expected behavior**\r\nIn fact Z1 and Z2 should be the same, hope there is some method to optimize Z1, since in my program, there are many similar situation. consider order of tensor contract is too complicated"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23610", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23610/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23610/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23610/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23610", "id": 378977225, "node_id": "MDU6SXNzdWUzNzg5NzcyMjU=", "number": 23610, "title": "Causal Convolutions in Tensorflow", "user": {"login": "joshim5", "id": 533735, "node_id": "MDQ6VXNlcjUzMzczNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/533735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshim5", "html_url": "https://github.com/joshim5", "followers_url": "https://api.github.com/users/joshim5/followers", "following_url": "https://api.github.com/users/joshim5/following{/other_user}", "gists_url": "https://api.github.com/users/joshim5/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshim5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshim5/subscriptions", "organizations_url": "https://api.github.com/users/joshim5/orgs", "repos_url": "https://api.github.com/users/joshim5/repos", "events_url": "https://api.github.com/users/joshim5/events{/privacy}", "received_events_url": "https://api.github.com/users/joshim5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-11-09T00:41:33Z", "updated_at": "2019-04-09T14:25:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.10\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThis is feature request to support **causal convolutions** in the Tensorflow layers API. Currently, causal convolutions require `tf.nn.conv2d(...)` with manual masking of weights. To improve speed, the data can be cropped/padded and then ordinary convolutions used.  \r\n\r\n**Will this change the current api? How?**\r\nYes, `tf.layers.conv2d` will have a `causal` boolean flag.\r\n\r\n**Who will benefit with this feature?**\r\nResearchers and practitioners working on auto-regressive convolutional models.\r\n\r\n**Any Other info.**\r\nAn analysis at OpenAI revealed that many open-source implementations of causal convolutions are slow, incorrect, and/or have uninterpretable code. This feature would help the ML community more easily develop architectures containing causal convolutions."}]