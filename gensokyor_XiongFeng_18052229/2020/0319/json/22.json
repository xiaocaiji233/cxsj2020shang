[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27822", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27822/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27822/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27822/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27822", "id": 432884525, "node_id": "MDU6SXNzdWU0MzI4ODQ1MjU=", "number": 27822, "title": "tflite support for Softplus (exp and log are already supported)", "user": {"login": "jackshi0912", "id": 10685803, "node_id": "MDQ6VXNlcjEwNjg1ODAz", "avatar_url": "https://avatars3.githubusercontent.com/u/10685803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackshi0912", "html_url": "https://github.com/jackshi0912", "followers_url": "https://api.github.com/users/jackshi0912/followers", "following_url": "https://api.github.com/users/jackshi0912/following{/other_user}", "gists_url": "https://api.github.com/users/jackshi0912/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackshi0912/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackshi0912/subscriptions", "organizations_url": "https://api.github.com/users/jackshi0912/orgs", "repos_url": "https://api.github.com/users/jackshi0912/repos", "events_url": "https://api.github.com/users/jackshi0912/events{/privacy}", "received_events_url": "https://api.github.com/users/jackshi0912/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-13T18:41:41Z", "updated_at": "2019-04-22T13:04:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- gLinux\r\n- TensorFlow installed from source\r\n- TensorFlow version head\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, MAX_POOL_2D, MEAN, MIRROR_PAD, MUL, RSQRT, SQUARED_DIFFERENCE, SUB, TRANSPOSE_CONV. Here is a list of operators for which you will need custom implementations: Softplus.\r\n```\r\n\r\nWe already support log and exp. Softplus seems like a simple addition."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27814", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27814/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27814/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27814/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/27814", "id": 432834586, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcwMjE4Mzcx", "number": 27814, "title": "[TF 2.0 API Docs] Added Documentation to tf.keras.activations.elu", "user": {"login": "Bharat123rox", "id": 13381361, "node_id": "MDQ6VXNlcjEzMzgxMzYx", "avatar_url": "https://avatars3.githubusercontent.com/u/13381361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bharat123rox", "html_url": "https://github.com/Bharat123rox", "followers_url": "https://api.github.com/users/Bharat123rox/followers", "following_url": "https://api.github.com/users/Bharat123rox/following{/other_user}", "gists_url": "https://api.github.com/users/Bharat123rox/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bharat123rox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bharat123rox/subscriptions", "organizations_url": "https://api.github.com/users/Bharat123rox/orgs", "repos_url": "https://api.github.com/users/Bharat123rox/repos", "events_url": "https://api.github.com/users/Bharat123rox/events{/privacy}", "received_events_url": "https://api.github.com/users/Bharat123rox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-04-13T10:51:04Z", "updated_at": "2019-11-26T10:11:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/27814", "html_url": "https://github.com/tensorflow/tensorflow/pull/27814", "diff_url": "https://github.com/tensorflow/tensorflow/pull/27814.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/27814.patch"}, "body": "Fix #27652 by adding required information to tf.keras.activations.elu [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/activations.py) including an image for visuals and example usage from the Intro to CNNs tutorial as suggested."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27781", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27781/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27781/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27781/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27781", "id": 432452778, "node_id": "MDU6SXNzdWU0MzI0NTI3Nzg=", "number": 27781, "title": "Fail to use tf.transpose() after tf.nn.embedding_lookup() and tf.layers.conv1d() while build a tflite file", "user": {"login": "lost-libra", "id": 9649108, "node_id": "MDQ6VXNlcjk2NDkxMDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/9649108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lost-libra", "html_url": "https://github.com/lost-libra", "followers_url": "https://api.github.com/users/lost-libra/followers", "following_url": "https://api.github.com/users/lost-libra/following{/other_user}", "gists_url": "https://api.github.com/users/lost-libra/gists{/gist_id}", "starred_url": "https://api.github.com/users/lost-libra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lost-libra/subscriptions", "organizations_url": "https://api.github.com/users/lost-libra/orgs", "repos_url": "https://api.github.com/users/lost-libra/repos", "events_url": "https://api.github.com/users/lost-libra/events{/privacy}", "received_events_url": "https://api.github.com/users/lost-libra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-04-12T08:41:21Z", "updated_at": "2019-08-02T09:02:25Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.3\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (or github SHA if from source): 1.13.1\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n2019-04-12 16:14:22.935998: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 13 operators, 22 arrays (0 quantized)\r\n2019-04-12 16:14:22.936163: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 13 operators, 22 arrays (0 quantized)\r\n2019-04-12 16:14:22.939819: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 6 operators, 14 arrays (0 quantized)\r\n2019-04-12 16:14:22.939890: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 5 operators, 12 arrays (0 quantized)\r\n2019-04-12 16:14:22.939945: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 5 operators, 12 arrays (0 quantized)\r\n2019-04-12 16:14:22.939972: F tensorflow/lite/toco/graph_transformations/propagate_fixed_sizes.cc:1605] Check failed: axis < input_shape.dimensions_count() (76044600 vs. 4)\r\nAborted (core dumped)\r\n```\r\n# Copy and paste here\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n`ipts = tf.placeholder(dtype=tf.int32, shape=(None, 50), name='x')`\r\n`embedding = tf.get_variable(name='embedding', shape=[3000, 256], initializer=initializer)`\r\n`res = tf.nn.embedding_lookup(params=embedding, ids=ipts)`\r\n`res = tf.layers.conv1d(ipts, 100, 1)`\r\n`res = tf.transpose(res, perm=[0, 2, 1])    # Here cause the BUG`\r\n`sess = tf.Session()`\r\n`sess.run(tf.global_variables_initializer())`\r\n`converter = tf.contrib.lite.TFLiteConverter.from_session(sess, [ipts], [res])`\r\n`tflite_model = converter.convert()`\r\n`open('converted_model.tflite', 'wb').write(tflite_model)`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27780", "id": 432434202, "node_id": "MDU6SXNzdWU0MzI0MzQyMDI=", "number": 27780, "title": "DepthwiseConv mixed precision train super slow(Caused byDepthwiseConv2dNativeBackpropFilter )", "user": {"login": "rootkitchao", "id": 40640909, "node_id": "MDQ6VXNlcjQwNjQwOTA5", "avatar_url": "https://avatars2.githubusercontent.com/u/40640909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rootkitchao", "html_url": "https://github.com/rootkitchao", "followers_url": "https://api.github.com/users/rootkitchao/followers", "following_url": "https://api.github.com/users/rootkitchao/following{/other_user}", "gists_url": "https://api.github.com/users/rootkitchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rootkitchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rootkitchao/subscriptions", "organizations_url": "https://api.github.com/users/rootkitchao/orgs", "repos_url": "https://api.github.com/users/rootkitchao/repos", "events_url": "https://api.github.com/users/rootkitchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rootkitchao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2019-04-12T07:52:36Z", "updated_at": "2020-02-20T20:01:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):MS Windows10 X64 1809 build 17763\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary(pip)\r\n- TensorFlow version (use command below):1.13.1\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):N/A\r\n- GCC/Compiler version (if compiling from source):N/A\r\n- CUDA/cuDNN version:10.0/7.5.0.56\r\n- GPU model and memory:NVIDIA Geforce RTX2080TI 11GB\r\n\r\n**Describe the current behavior**\r\nI am trying to port mnasnet's TPU implementation to the GPU.It works fine when using FP32.But when using mixed precision training, the speed is very slow.By using the Profiler to track the training loop, I found that DepthwiseConv2dNativeBackpropFilter consumed too much time.I tried adjusting the loss_scale but it didn't work.I want to know if Depthwise convolution does not support backpropagation at half precision, or there are performance issues.\r\n![image](https://user-images.githubusercontent.com/40640909/56020277-59a4c380-5d39-11e9-9811-3166dfec6978.png)\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nhttps://github.com/rootkitchao/mnasnet_temp\r\n\r\npython mnasnet_main.py --data_dir=D:\\dataset\\imagenet_tfrecord\\ --model_dir=D:\\tf_project\\mnasnet\\  --model_name=mnasnet-a1 --use_bfloat16=True  --use_keras=False --mode=train --train_batch_size=96 --num_gpus=1 --train_steps=2335456 --steps_per_eval=33363\r\n\r\n(Temporary version.The code does not really use bfloat16, use float16 instead.)\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nN/A\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27752", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27752/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27752/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27752/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27752", "id": 432019580, "node_id": "MDU6SXNzdWU0MzIwMTk1ODA=", "number": 27752, "title": "KeyError: 'ExperimentalFunctionBufferingResource' in Tf >= 1.13 (mkl)", "user": {"login": "prateethvnayak", "id": 34733770, "node_id": "MDQ6VXNlcjM0NzMzNzcw", "avatar_url": "https://avatars3.githubusercontent.com/u/34733770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prateethvnayak", "html_url": "https://github.com/prateethvnayak", "followers_url": "https://api.github.com/users/prateethvnayak/followers", "following_url": "https://api.github.com/users/prateethvnayak/following{/other_user}", "gists_url": "https://api.github.com/users/prateethvnayak/gists{/gist_id}", "starred_url": "https://api.github.com/users/prateethvnayak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prateethvnayak/subscriptions", "organizations_url": "https://api.github.com/users/prateethvnayak/orgs", "repos_url": "https://api.github.com/users/prateethvnayak/repos", "events_url": "https://api.github.com/users/prateethvnayak/events{/privacy}", "received_events_url": "https://api.github.com/users/prateethvnayak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tensorflow/tensorflow/milestones/2", "html_url": "https://github.com/tensorflow/tensorflow/milestone/2", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones/2/labels", "id": 3961035, "node_id": "MDk6TWlsZXN0b25lMzk2MTAzNQ==", "number": 2, "title": "assigned pvenkat (intel)", "description": null, "creator": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 8, "state": "open", "created_at": "2019-01-10T22:22:45Z", "updated_at": "2019-10-09T21:23:14Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2019-04-11T13:19:43Z", "updated_at": "2019-06-13T17:43:20Z", "closed_at": null, "author_association": "NONE", "body": "- OS Platform and Distribution - Linux Ubuntu 16.04)\r\n- TensorFlow installed from Anaconda dist 3.6.\r\n- TensorFlow version 1.13-mkl\r\n- Python version: Python 3.6.6 :: Anaconda, Inc.\r\n\r\n**Describe the current behavior**\r\nModels trained using the `Iterator-Gen` for data and saved as `meta` & `ckpt` cannot be imported using the `tf.train.import_meta_graph` function. Gives a `KeyError`. \r\n**Describe the expected behavior**\r\nWorking fine with Tensorflow1.12(mkl). Error found in Tf version >= 1.13\r\n\r\n**Other info / logs**\r\nHere is the Traceback\r\n`read=tf.train.import_meta_graph(self.paths[0], clear_devices=True)\r\n  File \"/home/pnayak/anaconda3/envs/coreml/lib/python3.6/site-packages/tensorflow/python/training/saver.py\", line 1435, in import_meta_gra                                                    ph\r\n    meta_graph_or_file, clear_devices, import_scope, **kwargs)[0]\r\n  File \"/home/pnayak/anaconda3/envs/coreml/lib/python3.6/site-packages/tensorflow/python/training/saver.py\", line 1457, in _import_meta_gr                                                    aph_with_return_elements\r\n    **kwargs))\r\n  File \"/home/pnayak/anaconda3/envs/coreml/lib/python3.6/site-packages/tensorflow/python/framework/meta_graph.py\", line 806, in import_scoped_meta_graph_with_return_elements                                         \r\n    return_elements=return_elements)\r\n  File \"/home/pnayak/anaconda3/envs/coreml/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func return func(*args, **kwargs)\r\n  File \"/home/pnayak/anaconda3/envs/coreml/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 399, in import_graph_def\r\n    _RemoveDefaultAttrs(op_dict, producer_op_list, graph_def)\r\n  File \"/home/pnayak/anaconda3/envs/coreml/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 159, in _RemoveDefaultAttrs\r\n    op_def = op_dict[node.op]\r\nKeyError: 'ExperimentalFunctionBufferingResource'`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27749", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27749/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27749/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27749/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27749", "id": 431960471, "node_id": "MDU6SXNzdWU0MzE5NjA0NzE=", "number": 27749, "title": "negative pixel values for ssim input?", "user": {"login": "eyaler", "id": 4436747, "node_id": "MDQ6VXNlcjQ0MzY3NDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/4436747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eyaler", "html_url": "https://github.com/eyaler", "followers_url": "https://api.github.com/users/eyaler/followers", "following_url": "https://api.github.com/users/eyaler/following{/other_user}", "gists_url": "https://api.github.com/users/eyaler/gists{/gist_id}", "starred_url": "https://api.github.com/users/eyaler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eyaler/subscriptions", "organizations_url": "https://api.github.com/users/eyaler/orgs", "repos_url": "https://api.github.com/users/eyaler/repos", "events_url": "https://api.github.com/users/eyaler/events{/privacy}", "received_events_url": "https://api.github.com/users/eyaler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-11T10:59:44Z", "updated_at": "2019-06-07T13:16:32Z", "closed_at": null, "author_association": "NONE", "body": "ssim, and ms_ssim take images as input and max_val which is defined as the dynamic range, implying that images can be eg in [-1,1] with maxval = 2. however they call convert_image_dtype() which assumes pixels are in [0,?]. so it is not clear whether ssim, ms_ssim can take images with negative pixel values."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27748", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27748/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27748/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27748/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27748", "id": 431916824, "node_id": "MDU6SXNzdWU0MzE5MTY4MjQ=", "number": 27748, "title": "Object detection API config file/protobuf errors", "user": {"login": "bobbi-hbrown", "id": 39564632, "node_id": "MDQ6VXNlcjM5NTY0NjMy", "avatar_url": "https://avatars1.githubusercontent.com/u/39564632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobbi-hbrown", "html_url": "https://github.com/bobbi-hbrown", "followers_url": "https://api.github.com/users/bobbi-hbrown/followers", "following_url": "https://api.github.com/users/bobbi-hbrown/following{/other_user}", "gists_url": "https://api.github.com/users/bobbi-hbrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobbi-hbrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobbi-hbrown/subscriptions", "organizations_url": "https://api.github.com/users/bobbi-hbrown/orgs", "repos_url": "https://api.github.com/users/bobbi-hbrown/repos", "events_url": "https://api.github.com/users/bobbi-hbrown/events{/privacy}", "received_events_url": "https://api.github.com/users/bobbi-hbrown/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "pkulzc", "id": 35853368, "node_id": "MDQ6VXNlcjM1ODUzMzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/35853368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkulzc", "html_url": "https://github.com/pkulzc", "followers_url": "https://api.github.com/users/pkulzc/followers", "following_url": "https://api.github.com/users/pkulzc/following{/other_user}", "gists_url": "https://api.github.com/users/pkulzc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkulzc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkulzc/subscriptions", "organizations_url": "https://api.github.com/users/pkulzc/orgs", "repos_url": "https://api.github.com/users/pkulzc/repos", "events_url": "https://api.github.com/users/pkulzc/events{/privacy}", "received_events_url": "https://api.github.com/users/pkulzc/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pkulzc", "id": 35853368, "node_id": "MDQ6VXNlcjM1ODUzMzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/35853368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkulzc", "html_url": "https://github.com/pkulzc", "followers_url": "https://api.github.com/users/pkulzc/followers", "following_url": "https://api.github.com/users/pkulzc/following{/other_user}", "gists_url": "https://api.github.com/users/pkulzc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkulzc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkulzc/subscriptions", "organizations_url": "https://api.github.com/users/pkulzc/orgs", "repos_url": "https://api.github.com/users/pkulzc/repos", "events_url": "https://api.github.com/users/pkulzc/events{/privacy}", "received_events_url": "https://api.github.com/users/pkulzc/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-11T09:18:40Z", "updated_at": "2019-04-25T06:54:39Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Google Deep Learning VM version m15, based on Debian GNU/Linux 9.8**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): **I used one of the binaries pre-built for this particular type of VM, tensorflow_gpu-1.12.0-cp27-cp27mu-linux_x86_64.whl**\r\n- TensorFlow version: **1.12**\r\n- Python version: **2.7**\r\n- Installed using virtualenv? pip? conda?: **Used pre-installed binary, however I am using a virtualenv environment for the project**\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: **1 x NVIDIA Tesla K80, 4 vCPUs, 15 GB memory, hosted on Compute Engine**\r\n\r\n**Describe the problem**\r\nIssue previously posted on Stack Overflow, as I kept running into exception `TypeError: For training mode, the  train_config must be a train_pb2.TrainConfig.` when attempting to run training using an adapted version of the faster_rcnn_resnet50_coco.config configuration. However, there are no obvious issues with config file itself.\r\n[https://stackoverflow.com/questions/55238397/tensorflow-object-detection-train-config-file-error/55287833?noredirect=1#comment97930542_55287833](url)\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nThe value of isinstance(train_config, train_pb2.TrainConfig) equated to false, which doesn't make sense as the result of printing ( type(config) ) resulted in <class 'object_detection.protos.train_pb2.TrainConfig'>, which I believe is the correct file type.\r\n\r\nI manually rebuilt the protobuf compilers as per the documentation here: [https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/installation.md#manual-protobuf-compiler-installation-and-usage](url) however I kept running into the same problem. As we thought there may still be an issue with the protoc library, I manually removed and reinstalled protobuf version 3.0, before attempting training again. This resulted in the following traceback:\r\n\r\n`Traceback (most recent call last):\r\n  File \"trainer/task.py\", line 24, in <module>\r\n    import tensorflow as tf\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/__init__.py\", line 59, in <module>\r\n    from tensorflow.core.framework.graph_pb2 import *\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/core/framework/graph_pb2.py\", line 15, in <module>\r\n    from tensorflow.core.framework import node_def_pb2 as tensorflow_dot_core_dot_framework_dot_node__def__pb2\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/core/framework/node_def_pb2.py\", line 15, in <module>\r\n    from tensorflow.core.framework import attr_value_pb2 as tensorflow_dot_core_dot_framework_dot_attr__value__pb2\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/core/framework/attr_value_pb2.py\", line 15, in <module>\r\n    from tensorflow.core.framework import tensor_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__pb2\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/core/framework/tensor_pb2.py\", line 15, in <module>\r\n    from tensorflow.core.framework import resource_handle_pb2 as tensorflow_dot_core_dot_framework_dot_resource__ha\r\nndle__pb2\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/core/framework/resource_handle_pb2.py\", line 22, in <modu\r\nle>\r\n    serialized_pb=_b('\\n/tensorflow/core/framework/resource_handle.proto\\x12\\ntensorflow\\\"r\\n\\x13ResourceHandleProt\r\no\\x12\\x0e\\n\\x06\\x64\\x65vice\\x18\\x01 \\x01(\\t\\x12\\x11\\n\\tcontainer\\x18\\x02 \\x01(\\t\\x12\\x0c\\n\\x04name\\x18\\x03 \\x01(\\t\\\r\nx12\\x11\\n\\thash_code\\x18\\x04 \\x01(\\x04\\x12\\x17\\n\\x0fmaybe_type_name\\x18\\x05 \\x01(\\tBn\\n\\x18org.tensorflow.framework\r\nB\\x0eResourceHandleP\\x01Z=github.com/tensorflow/tensorflow/tensorflow/go/core/framework\\xf8\\x01\\x01\\x62\\x06proto3')\r\nTypeError: __new__() got an unexpected keyword argument 'serialized_options'\r\n`\r\nThis problem still persists despite changing the protobuf library to version 3.4.\r\n\r\n**Any other info / logs**\r\n\r\nI also had to use the command `pip install scikit-image --force-reinstall` in order to get the correct version of NumPy for this project, as I believe the latest release of NumPy caused some incompatibility issues with python 2.7 and was resulting in the error: AttributeError: 'numpy.ufunc' object has no attribute '__module__'\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27744", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27744/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27744/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27744/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27744", "id": 431866666, "node_id": "MDU6SXNzdWU0MzE4NjY2NjY=", "number": 27744, "title": "Failed to build a debug version of tensorflow from scratch", "user": {"login": "qzhong0605", "id": 9197259, "node_id": "MDQ6VXNlcjkxOTcyNTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/9197259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qzhong0605", "html_url": "https://github.com/qzhong0605", "followers_url": "https://api.github.com/users/qzhong0605/followers", "following_url": "https://api.github.com/users/qzhong0605/following{/other_user}", "gists_url": "https://api.github.com/users/qzhong0605/gists{/gist_id}", "starred_url": "https://api.github.com/users/qzhong0605/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qzhong0605/subscriptions", "organizations_url": "https://api.github.com/users/qzhong0605/orgs", "repos_url": "https://api.github.com/users/qzhong0605/repos", "events_url": "https://api.github.com/users/qzhong0605/events{/privacy}", "received_events_url": "https://api.github.com/users/qzhong0605/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-04-11T07:17:00Z", "updated_at": "2019-04-19T12:51:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution:  ubuntu 16.04 - NVIDIA Docker \r\n- TensorFlow installed from (source or binary): source \r\n- TensorFlow version: branch  r1.13 on TensorFlow repo \r\n- Python version:  3.6.7\r\n- Bazel version (if compiling from source):  0.22.0\r\n- GCC/Compiler version (if compiling from source):  gcc version 5.4.0 20160609\r\n- CUDA/cuDNN version:  CUDA 10.0 and cuDNN 7.3 \r\n\r\n**Describe the problem**\r\n\r\n**It's failed to build a debug version of TensorFlow from scratch**\r\n\r\nI wanted to use `gdb` and `cuda-gdb` tools to debug the c++ code on TensorFlow.  I followed the instruction on `tensorflow/BUILD` file,  which indicated that `dbg` was used to build with debug symbol for Tensorflow as the following:\r\n```\r\nconfig_setting(\r\n    name = \"debug\",\r\n    values = {\r\n        \"compilation_mode\": \"dbg\",\r\n    },\r\n    visibility = [\"//visibility:public\"],\r\n)\r\n```\r\nI built the code on branch `r1.13` with the following command:\r\n```\r\nbazel build  -c dbg  --config cuda //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nand I got an error \r\n```\r\n1 error detected in the compilation of \"/tmp/tmpxft_00007343_00000000-7_zero_initializer_op_gpu.cu.compute_70.cpp1.ii\".\r\nERROR: /root/tensorflow/tensorflow/contrib/framework/BUILD:109:1: output 'tensorflow/contrib/framework/_objs/python/ops/_variable_ops_gpu/zero_initializer_op_gpu.cu.pic.o' was not created\r\nERROR: /root/tensorflow/tensorflow/contrib/framework/BUILD:109:1: not all outputs were created or valid\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps\r\n```\r\nI found the location on the `bazel-out/k8-dbg/bin/tensorflow/contrib/framework/_objs/python/ops/_variable_ops_gpu` and couldn't find the file `zero_initializer_op_gpu.cu.pic.o` indeed.  \r\nBut the error was not always on the same location. If I ran the command again,  the error was almost the same but with the other files, such as:\r\n```\r\n1 error detected in the compilation of \"/tmp/tmpxft_00007f82_00000000-7_lstm_ops_gpu.cu.compute_70.cpp1.ii\".\r\nERROR: /root/tensorflow/tensorflow/contrib/rnn/BUILD:215:1: output 'tensorflow/contrib/rnn/_objs/python/ops/_lstm_ops_gpu/lstm_ops_gpu.cu.pic.o' was not created\r\nERROR: /root/tensorflow/tensorflow/contrib/rnn/BUILD:215:1: not all outputs were created or valid\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\n``` \r\n\r\n**Another way to build with debug symbol**\r\nI noticed that I could build with `cxxopt` command line option to get debug symbol with the following command\r\n```\r\nbazel build  --cxxopt='-g' --config cuda //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nAnd I succeeded. I scan the sections on the built shared libraries and they showed the `debug` sections: \r\n```\r\nreadelf -S libtensorflow_framework.so\r\n\r\nSection Headers:\r\n  [Nr] Name              Type             Address           Offset\r\n       Size              EntSize          Flags  Link  Info  Align\r\n  [ 0]                   NULL             0000000000000000  00000000\r\n       0000000000000000  0000000000000000           0     0     0\r\n  [ 1] .note.gnu.build-i NOTE             0000000000000200  00000200\r\n       0000000000000020  0000000000000000   A       0     0     4\r\n  [ 2] .gnu.hash         GNU_HASH         0000000000000220  00000220\r\n       0000000000034ce4  0000000000000000   A       3     0     8\r\n  [ 3] .dynsym           DYNSYM           0000000000034f08  00034f08\r\n       00000000000afe30  0000000000000018   A       4     3     8\r\n  [ 4] .dynstr           STRTAB           00000000000e4d38  000e4d38\r\n       0000000000275ace  0000000000000000   A       0     0     1\r\n  [ 5] .gnu.version      VERSYM           000000000035a806  0035a806\r\n       000000000000ea84  0000000000000002   A       3     0     2\r\n  [ 6] .gnu.version_d    VERDEF           0000000000369290  00369290\r\n       0000000000000038  0000000000000000   A       4     2     8\r\n  [ 7] .gnu.version_r    VERNEED          00000000003692c8  003692c8\r\n       0000000000000280  0000000000000000   A       4     9     8\r\n  [ 8] .rela.dyn         RELA             0000000000369548  00369548\r\n       00000000000c2ca0  0000000000000018   A       3     0     8\r\n  [ 9] .init             PROGBITS         000000000042c1e8  0042c1e8\r\n       000000000000001a  0000000000000000  AX       0     0     4\r\n  [10] .plt              PROGBITS         000000000042c210  0042c210\r\n       0000000000000010  0000000000000010  AX       0     0     16\r\n  [11] .plt.got          PROGBITS         000000000042c220  0042c220\r\n       0000000000016078  0000000000000000  AX       0     0     8\r\n  [12] .text             PROGBITS         00000000004422a0  004422a0\r\n       00000000008e3cb7  0000000000000000  AX       0     0     32\r\n  [13] malloc_hook       PROGBITS         0000000000d25f60  00d25f60\r\n       0000000000000272  0000000000000000  AX       0     0     16\r\n  [14] .fini             PROGBITS         0000000000d261d4  00d261d4\r\n       0000000000000009  0000000000000000  AX       0     0     4\r\n  [15] .rodata           PROGBITS         0000000000d261e0  00d261e0\r\n       000000000007e79c  0000000000000000   A       0     0     32\r\n  [16] .eh_frame_hdr     PROGBITS         0000000000da497c  00da497c\r\n       000000000002da34  0000000000000000   A       0     0     4\r\n  [17] .eh_frame         PROGBITS         0000000000dd23b0  00dd23b0\r\n       00000000000f75fc  0000000000000000   A       0     0     8\r\n  [18] .gcc_except_table PROGBITS         0000000000ec99ac  00ec99ac\r\n       000000000002ed0e  0000000000000000   A       0     0     4\r\n  [19] .tdata            PROGBITS         00000000010f90f0  00ef90f0\r\n       0000000000000038  0000000000000000 WAT       0     0     8\r\n  [20] .tbss             NOBITS           00000000010f9128  00ef9128\r\n       0000000000000040  0000000000000000 WAT       0     0     8\r\n  [21] .init_array       INIT_ARRAY       00000000010f9128  00ef9128\r\n       0000000000000ce8  0000000000000000  WA       0     0     8\r\n  [22] .fini_array       FINI_ARRAY       00000000010f9e10  00ef9e10\r\n       0000000000000008  0000000000000000  WA       0     0     8\r\n  [23] .jcr              PROGBITS         00000000010f9e18  00ef9e18\r\n       0000000000000008  0000000000000000  WA       0     0     8\r\n  [24] .data.rel.ro      PROGBITS         00000000010f9e20  00ef9e20\r\n       0000000000025c50  0000000000000000  WA       0     0     32\r\n  [25] .dynamic          DYNAMIC          000000000111fa70  00f1fa70\r\n       0000000000000280  0000000000000010  WA       4     0     8\r\n  [26] .got              PROGBITS         000000000111fcf0  00f1fcf0\r\n       000000000001d310  0000000000000008  WA       0     0     8\r\n  [27] .data             PROGBITS         000000000113d000  00f3d000\r\n       0000000000002afc  0000000000000000  WA       0     0     32\r\n  [28] .bss              NOBITS           000000000113fb00  00f3fafc\r\n       0000000000010170  0000000000000000  WA       0     0     64\r\n  [29] .comment          PROGBITS         0000000000000000  00f3fafc\r\n       0000000000000035  0000000000000001  MS       0     0     1\r\n  [30] .debug_aranges    PROGBITS         0000000000000000  00f3fb31\r\n       0000000000069970  0000000000000000           0     0     1\r\n  [31] .debug_info       PROGBITS         0000000000000000  00fa94a1\r\n       0000000007272cf1  0000000000000000           0     0     1\r\n  [32] .debug_abbrev     PROGBITS         0000000000000000  0821c192\r\n       00000000002437ba  0000000000000000           0     0     1\r\n  [33] .debug_line       PROGBITS         0000000000000000  0845f94c\r\n       000000000057ff0f  0000000000000000           0     0     1\r\n  [34] .debug_str        PROGBITS         0000000000000000  089df85b\r\n       0000000003f8f295  0000000000000001  MS       0     0     1\r\n  [35] .debug_loc        PROGBITS         0000000000000000  0c96eaf0\r\n       00000000027734b9  0000000000000000           0     0     1\r\n  [36] .debug_ranges     PROGBITS         0000000000000000  0f0e1fa9\r\n       000000000095cfc0  0000000000000000           0     0     1\r\n  [37] .shstrtab         STRTAB           0000000000000000  0fe3e9e7\r\n       0000000000000188  0000000000000000           0     0     1\r\n  [38] .symtab           SYMTAB           0000000000000000  0fa3ef70\r\n       00000000000dd040  0000000000000018          39   7705     8\r\n  [39] .strtab           STRTAB           0000000000000000  0fb1bfb0\r\n       0000000000322a37  0000000000000000           0     0     1\r\n```   \r\n```\r\nreadelf -S _pywrap_tensorflow_internal.so\r\n\r\nSection Headers:\r\n  [Nr] Name              Type             Address           Offset\r\n       Size              EntSize          Flags  Link  Info  Align\r\n  [ 0]                   NULL             0000000000000000  00000000\r\n       0000000000000000  0000000000000000           0     0     0\r\n  [ 1] .note.gnu.build-i NOTE             0000000000000200  00000200\r\n       0000000000000020  0000000000000000   A       0     0     4\r\n  [ 2] .gnu.hash         GNU_HASH         0000000000000220  00000220\r\n       00000000000ab0d0  0000000000000000   A       3     0     8\r\n  [ 3] .dynsym           DYNSYM           00000000000ab2f0  000ab2f0\r\n       00000000002928f0  0000000000000018   A       4     3     8\r\n  [ 4] .dynstr           STRTAB           000000000033dbe0  0033dbe0\r\n       00000000011555b2  0000000000000000   A       0     0     1\r\n  [ 5] .gnu.version      VERSYM           0000000001493192  01493192\r\n       0000000000036e14  0000000000000002   A       3     0     2\r\n  [ 6] .gnu.version_d    VERDEF           00000000014c9fa8  014c9fa8\r\n       0000000000000038  0000000000000000   A       4     2     8\r\n  [ 7] .gnu.version_r    VERNEED          00000000014c9fe0  014c9fe0\r\n       0000000000000350  0000000000000000   A       4    11     8\r\n  [ 8] .rela.dyn         RELA             00000000014ca330  014ca330\r\n       00000000004469e8  0000000000000018   A       3     0     8\r\n  [ 9] .init             PROGBITS         0000000001910d18  01910d18\r\n       000000000000001a  0000000000000000  AX       0     0     4\r\n  [10] .plt              PROGBITS         0000000001910d40  01910d40\r\n       0000000000000010  0000000000000010  AX       0     0     16\r\n  [11] .plt.got          PROGBITS         0000000001910d50  01910d50\r\n       00000000000312c0  0000000000000000  AX       0     0     8\r\n  [12] .text             PROGBITS         0000000001942040  01942040\r\n       0000000004f9b080  0000000000000000  AX       0     0     64\r\n  [13] text_env          PROGBITS         00000000068dd0c0  068dd0c0\r\n       00000000000029b4  0000000000000000  AX       0     0     16\r\n  [14] .fini             PROGBITS         00000000068dfa74  068dfa74\r\n       0000000000000009  0000000000000000  AX       0     0     4\r\n  [15] .rodata           PROGBITS         00000000068e0000  068e0000\r\n       0000000000b22bf0  0000000000000000   A       0     0     4096\r\n  [16] .nv_fatbin        PROGBITS         0000000007402bf0  07402bf0\r\n       000000000dc10ba8  0000000000000000   A       0     0     8\r\n  [17] .eh_frame_hdr     PROGBITS         0000000015013798  15013798\r\n       0000000000128404  0000000000000000   A       0     0     4\r\n  [18] .eh_frame         PROGBITS         000000001513bba0  1513bba0\r\n       0000000000672ddc  0000000000000000   A       0     0     8\r\n  [19] .gcc_except_table PROGBITS         00000000157ae97c  157ae97c\r\n       0000000000069e81  0000000000000000   A       0     0     4\r\n  [20] .tdata            PROGBITS         0000000015a18a68  15818a68\r\n       0000000000000008  0000000000000000 WAT       0     0     8\r\n  [21] .tbss             NOBITS           0000000015a18a70  15818a70\r\n       00000000000000b0  0000000000000000 WAT       0     0     8\r\n  [22] .init_array       INIT_ARRAY       0000000015a18a70  15818a70\r\n       0000000000003680  0000000000000000  WA       0     0     8\r\n  [23] .fini_array       FINI_ARRAY       0000000015a1c0f0  1581c0f0\r\n       0000000000000008  0000000000000000  WA       0     0     8\r\n  [24] .jcr              PROGBITS         0000000015a1c0f8  1581c0f8\r\n       0000000000000008  0000000000000000  WA       0     0     8\r\n  [25] .data.rel.ro      PROGBITS         0000000015a1c100  1581c100\r\n       00000000001228f8  0000000000000000  WA       0     0     32\r\n  [26] .dynamic          DYNAMIC          0000000015b3e9f8  1593e9f8\r\n       00000000000002c0  0000000000000010  WA       4     0     8\r\n  [27] .got              PROGBITS         0000000015b3ecb8  1593ecb8\r\n       0000000000062330  0000000000000008  WA       0     0     8\r\n  [28] .data             PROGBITS         0000000015ba1000  159a1000\r\n       000000000000e1ac  0000000000000000  WA       0     0     32\r\n  [29] .nvFatBinSegment  PROGBITS         0000000015baf1b0  159af1b0\r\n       00000000000011b8  0000000000000000  WA       0     0     8\r\n  [30] .bss              NOBITS           0000000015bb0380  159b0368\r\n       0000000000013808  0000000000000000  WA       0     0     64\r\n  [31] .comment          PROGBITS         0000000000000000  159b0368\r\n       0000000000000035  0000000000000001  MS       0     0     1\r\n  [32] .debug_aranges    PROGBITS         0000000000000000  159b039d\r\n       00000000002afd30  0000000000000000           0     0     1\r\n  [33] .debug_info       PROGBITS         0000000000000000  15c600cd\r\n       000000003bd2d579  0000000000000000           0     0     1\r\n  [34] .debug_abbrev     PROGBITS         0000000000000000  5198d646\r\n       000000000080f1d5  0000000000000000           0     0     1\r\n  [35] .debug_line       PROGBITS         0000000000000000  5219c81b\r\n       000000000259eba1  0000000000000000           0     0     1\r\n  [36] .debug_str        PROGBITS         0000000000000000  5473b3bc\r\n       00000000767919c5  0000000000000001  MS       0     0     1\r\n  [37] .debug_loc        PROGBITS         0000000000000000  caeccd81\r\n       00000000120ceea9  0000000000000000           0     0     1\r\n  [38] .debug_ranges     PROGBITS         0000000000000000  dcf9bc2a\r\n       000000000551db30  0000000000000000           0     0     1\r\n  [39] .shstrtab         STRTAB           0000000000000000  e5913cef\r\n       00000000000001a1  0000000000000000           0     0     1\r\n  [40] .symtab           SYMTAB           0000000000000000  e24b9760\r\n       00000000005f9c28  0000000000000018          41   148688     8\r\n  [41] .strtab           STRTAB           0000000000000000  e2ab3388\r\n       0000000002e60967  0000000000000000           0     0     1\r\n```\r\nBut in this way, I couldn't debug cuda-related code with `cuda-gdb` after I dumped the sections information about the cubin files on the `_pywrap_tensorflow_internal.so` with `cuobjdump`\r\n\r\n**Question**\r\n* How to build a debug version of TensorFlow with bazel ?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27741", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27741/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27741/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27741/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27741", "id": 431841519, "node_id": "MDU6SXNzdWU0MzE4NDE1MTk=", "number": 27741, "title": "Implementation of class weights with tf.nn.softmax_cross_entropy_with_logits_v2", "user": {"login": "bipinkc19", "id": 41479925, "node_id": "MDQ6VXNlcjQxNDc5OTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/41479925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bipinkc19", "html_url": "https://github.com/bipinkc19", "followers_url": "https://api.github.com/users/bipinkc19/followers", "following_url": "https://api.github.com/users/bipinkc19/following{/other_user}", "gists_url": "https://api.github.com/users/bipinkc19/gists{/gist_id}", "starred_url": "https://api.github.com/users/bipinkc19/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bipinkc19/subscriptions", "organizations_url": "https://api.github.com/users/bipinkc19/orgs", "repos_url": "https://api.github.com/users/bipinkc19/repos", "events_url": "https://api.github.com/users/bipinkc19/events{/privacy}", "received_events_url": "https://api.github.com/users/bipinkc19/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-11T05:52:23Z", "updated_at": "2019-05-09T20:39:29Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes, if my skills are enough.\r\n\r\n\r\n__Requested Feature__\r\nCurrently while implementing weighted loss there is tf.nn.weighted_cross_entropy_with_logits which uses sigmoid so it is restricted to binary classification. For multiclass classification using softmax categorical cross entropy, there isn't any feature.\r\n\r\nAlso in many forums, while implementing the class weights people often suggest something like this:\r\n```python\r\nweighted_logits = tf.multiply(weights, logits)\r\nloss = tf.nn.softmax_cross_entropy_with_logits_v2\r\n```\r\nIs this the correct method? Because we are messing around with the output of the model, while we should have been messing around with the calculated [batch_size, num_class] shape loss tensor.\r\n\r\nI think this is the correct way:\r\n```python\r\n        y_hat_softmax = tf.nn.softmax(logits)\r\n        y_cross = y * tf.log(y_hat_softmax)\r\n        weighted_cross = tf.multiply(class_weight, y_cross)\r\n        weighted_cross_reduced = - tf.reduce_sum(weighted_cross, 1)\r\n        loss = tf.reduce_mean(weighted_cross_reduced)\r\n```\r\nHere we are changing the y_cross which should be actually changed, which then changes the gradient flow. But changing logits (by multiplying with weight) will make the model understand that the correct output is different thus biasing result.\r\n\r\neg. If a model has three classes and the output logit is [1, 4, 2] then it is making the correct decision if the actual class is the second one. But multiplying with weight [1, 1, 4] will make the result [1, 4, 8] thus saying that the third logit should have been high to the loss function, thus completely changing the supervision in supervised learning. But actually, we should have been messing around with the loss by scaling the loss according to the weights. \r\n\r\n**Will this change the current api? How?**\r\nDon't know.\r\n\r\n**Who will benefit with this feature?**\r\nWhoever is implementing this incorrectly will benefit from this, democratizing Machine Learning.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27728", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27728/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27728/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27728/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27728", "id": 431739477, "node_id": "MDU6SXNzdWU0MzE3Mzk0Nzc=", "number": 27728, "title": "Decoupling preprocessing and training", "user": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-10T22:07:43Z", "updated_at": "2019-04-10T23:13:22Z", "closed_at": null, "author_association": "MEMBER", "body": "**Describe the feature and the current behavior/state.**\r\n\r\nCurrently, TensorFlow performs preprocessing and training on the same host. In situations where the data preprocessing is efficient and yet the CPU resources available on the host are not sufficient to keep up with the training workload on the accelerator, the preprocessing becomes a bottleneck. \r\n\r\nThe proposed feature is to extend the tf.data / tf.distribute APIs to make it possible to decouple the preprocessing from training.\r\n\r\n**Will this change the current api? How?**\r\n\r\nYes. In the least, the users will need to specify the set of \"input\" hosts that should perform the preprocessing and the set of \"training\" hosts to perform the training. \r\n\r\nThe preferred solution would allow users to express their input pipeline in tf.data as if it was executing on the same host as training and through the means of tf.data / tf.distribute configuration express how it should be distributed.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nUsers that execute preprocessing intensive training jobs."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27726", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27726/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27726/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27726/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27726", "id": 431731866, "node_id": "MDU6SXNzdWU0MzE3MzE4NjY=", "number": 27726, "title": "Support large embeddings with `MirroredStrategy` and `MultiWorkerMirroredStrategy`", "user": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-10T21:44:12Z", "updated_at": "2019-04-10T22:07:13Z", "closed_at": null, "author_association": "MEMBER", "body": "**System information**\r\n- TensorFlow version (you are using): TF 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently, `MirroredStrategy` and `MultiWorkerMirroredStrategy` assume a model replica including its embeddings could fit in one GPU or one machine. Allgather is used to aggregated gradients with respect to embeddings.\r\n\r\nWe would like to understand whether it is necessary and important to support\r\n1. placing embeddings on host with `MirroredStrategy` and why using `ParameterServerStrategy` is not ideal\r\n2. replicating embeddings on host with `MultiWorkerMirroredStrategy` and why in this case using `ParameterServerStrategy` is not ideal\r\n2. sharding embeddings in `MultiWorkerMirroredStrategy` and why `ParameterServerStrategy` is not ideal.\r\n\r\n**Will this change the current api? How?**\r\nYes.\r\n\r\n**Who will benefit with this feature?**\r\nUsers who use large embeddings in their models.\r\n\r\n**Any Other info.**\r\nN/A\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27725", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27725/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27725/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27725/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27725", "id": 431727519, "node_id": "MDU6SXNzdWU0MzE3Mjc1MTk=", "number": 27725, "title": "Support synchronous training with parameter servers using Distribution Strategies", "user": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-10T21:31:38Z", "updated_at": "2020-02-21T07:34:41Z", "closed_at": null, "author_association": "MEMBER", "body": "**System information**\r\n- TensorFlow version (you are using): TF 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nRight now we have `MirroredStrategy` and `MultiWorkerMirroredStrategy` for synchronous training where variables and ops are all replicated and all-reduce is used for gradient aggregation. We also have `ParameterServerStrategy` where gradient updates from workers are purely asynchronous since `SyncReplicasOptimizer` is buggy and has been deprecated.\r\n \r\nWe would like to first collect use cases where synchronous training with `MirroredStrategy` and `MultiWorkerMirroredStrategy` is not ideal and synchronous training with parameter servers is necessary.\r\n\r\nIf this feature is necessary and important enough, we will then use this issue to track the progress of the development of this feature.\r\n\r\nWe have a separate feature request to support large embeddings with `MirroredStrategy` and `MultiWorkerMirroredStrategy`: https://github.com/tensorflow/tensorflow/issues/27726\r\n\r\n**Will this change the current api? How?**\r\nYes.\r\n\r\n**Who will benefit with this feature?** \r\nThose who use distributed training.\r\n\r\n**Any Other info.**\r\nN/A\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27724", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27724/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27724/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27724/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27724", "id": 431727234, "node_id": "MDU6SXNzdWU0MzE3MjcyMzQ=", "number": 27724, "title": "Support model parallelism in tf.distribute.Strategy", "user": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}, {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-10T21:30:48Z", "updated_at": "2019-06-24T22:31:14Z", "closed_at": null, "author_association": "MEMBER", "body": "Current tf.distribute.Strategy only supports data parallelism. We would like to support the following form of model parallelism: user specifies a number of \"logical devices\" per replica upfront, and then explicitly places ops on a specific logical device. \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27713", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27713/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27713/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27713/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27713", "id": 431456604, "node_id": "MDU6SXNzdWU0MzE0NTY2MDQ=", "number": 27713, "title": "Tensorboard file writer not working any more after nightly build tf-nightly 1.14.1.dev20190410", "user": {"login": "markste-in", "id": 33337590, "node_id": "MDQ6VXNlcjMzMzM3NTkw", "avatar_url": "https://avatars1.githubusercontent.com/u/33337590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markste-in", "html_url": "https://github.com/markste-in", "followers_url": "https://api.github.com/users/markste-in/followers", "following_url": "https://api.github.com/users/markste-in/following{/other_user}", "gists_url": "https://api.github.com/users/markste-in/gists{/gist_id}", "starred_url": "https://api.github.com/users/markste-in/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markste-in/subscriptions", "organizations_url": "https://api.github.com/users/markste-in/orgs", "repos_url": "https://api.github.com/users/markste-in/repos", "events_url": "https://api.github.com/users/markste-in/events{/privacy}", "received_events_url": "https://api.github.com/users/markste-in/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-10T11:43:34Z", "updated_at": "2019-05-31T13:07:50Z", "closed_at": null, "author_association": "NONE", "body": "I had to restart my script this morning and it automatically installs the latest nightly build of tensorflow (no other changes)\r\n\r\nUnfortunately the file write doesn't produce any output anymore.\r\nYesterday with build 2.0.0-dev20190405 it worked just fine.\r\n\r\n**System information**\r\n- Colab with tf-nightly 1.14.1.dev20190410 and w.o. HW acceleration\r\n- installed with !pip install tf-nightly-2.0-preview\r\n\r\n**Describe the current behavior**\r\nTensorboard File Writer does not create any output files. The folder itself is still created.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nwriter = tf.summary.create_file_writer(TENSORBOARD_LOG)               \r\nwith writer.as_default():\r\n    tf.summary.scalar('running_reward', running_reward,current_run)\r\n    for w in self.model.trainable_variables:\r\n        tf.summary.histogram(name=w.name, data=w, step=current_run)\r\n\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27703", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27703/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27703/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27703/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27703", "id": 431301669, "node_id": "MDU6SXNzdWU0MzEzMDE2Njk=", "number": 27703, "title": "When using long time inference TFLite GPU not working in mobile (demo app)", "user": {"login": "Nanamare", "id": 17498974, "node_id": "MDQ6VXNlcjE3NDk4OTc0", "avatar_url": "https://avatars3.githubusercontent.com/u/17498974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nanamare", "html_url": "https://github.com/Nanamare", "followers_url": "https://api.github.com/users/Nanamare/followers", "following_url": "https://api.github.com/users/Nanamare/following{/other_user}", "gists_url": "https://api.github.com/users/Nanamare/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nanamare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nanamare/subscriptions", "organizations_url": "https://api.github.com/users/Nanamare/orgs", "repos_url": "https://api.github.com/users/Nanamare/repos", "events_url": "https://api.github.com/users/Nanamare/events{/privacy}", "received_events_url": "https://api.github.com/users/Nanamare/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-10T04:44:14Z", "updated_at": "2019-04-18T06:56:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device= Pixel 2, Samsung Galaxy 6, 7, 8\r\n- TensorFlow Lite version : experimental-0.0.1\r\n- GPU : Adreno 540 \r\n\r\n**Describe the current behavior**\r\nUsing more than about 10 minutes, keep running Demo App, but not working inference.\r\nNormal inference time: about 50ms (pixel 2)\r\nAbnormal inference time: about 3ms (pixel 2)\r\nThe same problem occurs in other phones.(Galaxy series ( >= 6), Xiaomi redmi note series)\r\n\r\n**Code to reproduce the issue**\r\n[Just demo code](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/java/demo)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27686", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27686/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27686/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27686/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27686", "id": 431004232, "node_id": "MDU6SXNzdWU0MzEwMDQyMzI=", "number": 27686, "title": "axis parameter in tf.random_shuffle", "user": {"login": "GeorgeKaspar", "id": 36761521, "node_id": "MDQ6VXNlcjM2NzYxNTIx", "avatar_url": "https://avatars2.githubusercontent.com/u/36761521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GeorgeKaspar", "html_url": "https://github.com/GeorgeKaspar", "followers_url": "https://api.github.com/users/GeorgeKaspar/followers", "following_url": "https://api.github.com/users/GeorgeKaspar/following{/other_user}", "gists_url": "https://api.github.com/users/GeorgeKaspar/gists{/gist_id}", "starred_url": "https://api.github.com/users/GeorgeKaspar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GeorgeKaspar/subscriptions", "organizations_url": "https://api.github.com/users/GeorgeKaspar/orgs", "repos_url": "https://api.github.com/users/GeorgeKaspar/repos", "events_url": "https://api.github.com/users/GeorgeKaspar/events{/privacy}", "received_events_url": "https://api.github.com/users/GeorgeKaspar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-09T14:36:35Z", "updated_at": "2019-11-05T15:12:38Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): Yes, if you help me to do\r\n\r\n**Describe the feature and the current behavior/state.**\r\nNo, current behavior will not change\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nnow code is \r\nx = tf.transpose(x, [3, 0, 1, 2])\r\nx = tf.random_shuffle(x)\r\nx = tf.transpose(x, [1, 2, 3, 0]\r\n\r\ncode will be\r\nx = tf.random_shuffle(x, axis=-1)\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27684", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27684/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27684/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27684/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27684", "id": 430958843, "node_id": "MDU6SXNzdWU0MzA5NTg4NDM=", "number": 27684, "title": "nan appearing on False fork of tf.where propgates to e", "user": {"login": "cottrell", "id": 223276, "node_id": "MDQ6VXNlcjIyMzI3Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/223276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cottrell", "html_url": "https://github.com/cottrell", "followers_url": "https://api.github.com/users/cottrell/followers", "following_url": "https://api.github.com/users/cottrell/following{/other_user}", "gists_url": "https://api.github.com/users/cottrell/gists{/gist_id}", "starred_url": "https://api.github.com/users/cottrell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cottrell/subscriptions", "organizations_url": "https://api.github.com/users/cottrell/orgs", "repos_url": "https://api.github.com/users/cottrell/repos", "events_url": "https://api.github.com/users/cottrell/events{/privacy}", "received_events_url": "https://api.github.com/users/cottrell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-04-09T13:10:39Z", "updated_at": "2019-09-25T00:09:05Z", "closed_at": null, "author_association": "NONE", "body": "https://github.com/tensorflow/tensorflow/issues/20091\r\n\r\nSame issue, but that one was closed. The fix is to protect every single argument against the fork.\r\n\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nx = tf.convert_to_tensor(np.random.randn(100).astype(np.float32))\r\nalpha = tf.Variable(1, name='asdf', dtype=tf.float32, trainable=True)\r\nwith tf.GradientTape(persistent=True) as t:\r\n    safe_x = tf.where(x > 0, x, tf.ones_like(x))\r\n    # x = safe_x # this fixes it\r\n    s = tf.where(x >= 0, alpha * tf.math.log(x), tf.zeros_like(x))\r\ngradients = t.gradient(s, [alpha])\r\n\r\n\r\nIn [326]: reload(d); d.gradients\r\nOut[326]: [<tf.Tensor: id=2832835, shape=(), dtype=float32, numpy=-35.19606>]\r\n\r\nIn [327]: reload(d); d.gradients\r\nOut[327]: [<tf.Tensor: id=2832875, shape=(), dtype=float32, numpy=nan>]\r\n\r\nIn [346]: sys.version\r\nOut[346]: '3.7.3 (default, Mar 27 2019, 16:54:48) \\n[Clang 4.0.1 (tags/RELEASE_401/final)]'\r\n\r\nIn [347]: platform.platform()\r\nOut[347]: 'Darwin-17.7.0-x86_64-i386-64bit'\r\n\r\nIn [348]: tf.__version__\r\nOut[348]: '2.0.0-alpha0'\r\n\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27673", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27673/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27673/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27673/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27673", "id": 430868278, "node_id": "MDU6SXNzdWU0MzA4NjgyNzg=", "number": 27673, "title": "Build from sources fails with undefined symbol _ZN3Aws10FileSystem16GetHomeDirectoryB5cxx11Ev", "user": {"login": "PeterS2a", "id": 49434883, "node_id": "MDQ6VXNlcjQ5NDM0ODgz", "avatar_url": "https://avatars1.githubusercontent.com/u/49434883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PeterS2a", "html_url": "https://github.com/PeterS2a", "followers_url": "https://api.github.com/users/PeterS2a/followers", "following_url": "https://api.github.com/users/PeterS2a/following{/other_user}", "gists_url": "https://api.github.com/users/PeterS2a/gists{/gist_id}", "starred_url": "https://api.github.com/users/PeterS2a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PeterS2a/subscriptions", "organizations_url": "https://api.github.com/users/PeterS2a/orgs", "repos_url": "https://api.github.com/users/PeterS2a/repos", "events_url": "https://api.github.com/users/PeterS2a/events{/privacy}", "received_events_url": "https://api.github.com/users/PeterS2a/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-09T09:40:01Z", "updated_at": "2020-01-15T12:34:32Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nLinux Gentoo, Kernel 4.19.32-v7+\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nRaspberry Pi\r\n- TensorFlow installed from (source or binary):\r\ngit checkout tags/v1.12.0\r\n- TensorFlow version:\r\nv1.12.0\r\n- Python version:\r\n3.6.5\r\n- Installed using virtualenv? pip? conda?:\r\nn/a\r\n- Bazel version (if compiling from source):\r\n0.20.0\r\n- GCC/Compiler version (if compiling from source):\r\n8.2.0\r\n- CUDA/cuDNN version:\r\nn/a\r\n- GPU model and memory:\r\nn/a\r\n\r\n\r\n**Describe the problem**\r\nBuild fails with the error message \"ImportError: .../_pywrap_tensorflow_internal.so: undefined symbol: _ZN3Aws10FileSystem16GetHomeDirectoryB5cxx11Ev\"\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n- H/W Raspberry Pi with USB-SSD, 4GB swap partition\r\n- install bazel by Gentoo ebuild\r\n- clone git repo, checkout v1.12.0\r\n- configure:\r\nI did just correct the Python paths and the optimization flags. I answered all other questions from the configure script with 'n'. Nevertheless I see this content in .tf_configure.bazelrc - I don't want to use AWS or ignite or something of the like... maybe the configure script does not work like expected.\r\n```\r\nbuild --action_env PYTHON_BIN_PATH=\"/usr/bin/python\"\r\nbuild --action_env PYTHON_LIB_PATH=\"/usr/lib/python3.6/site-packages\"\r\nbuild --python_path=\"/usr/bin/python\"\r\nbuild:ignite --define with_ignite_support=true\r\nbuild:xla --define with_xla_support=true\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_ROCM=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"0\"\r\nbuild --action_env TF_DOWNLOAD_CLANG=\"0\"\r\nbuild:opt --copt=-march=armv7-a\r\nbuild:opt --copt=-mfpu=neon-vfpv4\r\nbuild:opt --host_copt=-march=native\r\nbuild:opt --define with_default_optimizations=true\r\nbuild:v2 --define=tf_api_version=2\r\n```\r\n- patch platform.h\r\nvim tensorflow/core/platform/platform.h\r\n```\r\n// Require an outside macro to tell us if we're building for Raspberry Pi or\r\n// another ARM device that's not a mobile platform.\r\n//#if !defined(RASPBERRY_PI) && !defined(ARM_NON_MOBILE)\r\n//#define IS_MOBILE_PLATFORM\r\n//#endif  // !defined(RASPBERRY_PI) && !defined(ARM_NON_MOBILE)\r\n#if defined(IS_MOBILE_PLATFORM)\r\n#error Wrong platform, stop building...\r\n#endif\r\n```\r\n- build by:\r\n```\r\nbazel --host_jvm_args=\"-Xms512m\" --host_jvm_args=\"-Xmx1024m\" \\\r\n   build -c opt --copt=\"-mfpu=neon-vfpv4\" \\\r\n   --copt=\"-funsafe-math-optimizations\" \\\r\n   --copt=\"-ftree-vectorize\" \\\r\n   --copt=\"-fomit-frame-pointer\" \\\r\n   --verbose_failures tensorflow/tools/pip_package:build_pip_package \\\r\n   --define=grpc_no_ares=true \\\r\n   --incompatible_remove_native_http_archive=false\r\n```\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\nINFO: From Compiling tensorflow/contrib/lite/toco/graph_transformations/reorder_elementwise_unary.cc:\r\ntensorflow/contrib/lite/toco/graph_transformations/reorder_elementwise_unary.cc: In member function 'virtual bool toco::ReorderElementwiseUnary::Run(toco::Model*, std::size_t)':\r\ntensorflow/contrib/lite/toco/graph_transformations/reorder_elementwise_unary.cc:125:23: warning: comparison of integer expressions of different signedness: 'int' and 'std::vector<std::unique_ptr<toco::Operator> >::size_type' {aka 'unsigned int'} [-Wsign-compare]\r\n     for (int i = 0; i < model->operators.size(); i++) {\r\n                     ~~^~~~~~~~~~~~~~~~~~~~~~~~~\r\ntensorflow/contrib/lite/toco/graph_transformations/reorder_elementwise_unary.cc:127:25: warning: comparison of integer expressions of different signedness: 'int' and 'std::vector<std::__cxx11::basic_string<char> >::size_type' {aka 'unsigned int'} [-Wsign-compare]\r\n       for (int j = 0; j < consumer->inputs.size(); j++) {\r\n                       ~~^~~~~~~~~~~~~~~~~~~~~~~~~\r\nSlow read: a 114883940-byte read from /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/_pywrap_tensorflow_internal.so took 22043 ms.\r\nERROR: /usr/src/tensorflow/tensorflow/BUILD:533:1: Executing genrule //tensorflow:tf_python_api_gen_v1 failed (Exit 1) bash failed: error executing command\r\n  (cd /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/opt/vc/bin:/usr/lib/llvm/7/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin \\\r\n    PYTHON_BIN_PATH=/usr/bin/python \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3.6/site-packages \\\r\n    TF_DOWNLOAD_CLANG=0 \\\r\n    TF_NEED_CUDA=0 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n    TF_NEED_ROCM=0 \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1 --root_init_template=tensorflow/api_template.__init__.py --apidir=bazel-out/arm-opt/genfiles/tensorflow_api/v1/ --apiname=tensorflow --apiversion=1 --package=tensorflow.python --output_package=tensorflow._api.v1 bazel-out/arm-opt/genfiles/tensorflow/_api/v1/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/app/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/bitwise/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/compat/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/data/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/data/experimental/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/debugging/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/distributions/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/dtypes/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/errors/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/feature_column/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/gfile/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/graph_util/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/image/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/io/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/initializers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/activations/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/densenet/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/inception_resnet_v2/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/inception_v3/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/mobilenet/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/mobilenet_v2/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/nasnet/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/resnet50/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/vgg16/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/vgg19/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/xception/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/backend/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/callbacks/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/constraints/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/boston_housing/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/cifar10/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/cifar100/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/fashion_mnist/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/imdb/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/mnist/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/reuters/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/estimator/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/initializers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/layers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/losses/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/metrics/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/models/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/optimizers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/image/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/sequence/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/text/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/regularizers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/utils/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/wrappers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/wrappers/scikit_learn/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/layers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/linalg/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/logging/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/losses/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/manip/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/math/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/metrics/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/nn/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/nn/rnn_cell/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/profiler/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/python_io/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/quantization/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/random/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/resource_loader/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/strings/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/builder/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/constants/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/loader/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/main_op/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/signature_constants/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/signature_def_utils/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/tag_constants/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/utils/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/sets/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/sparse/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/spectral/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/summary/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/sysconfig/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/test/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/train/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/train/queue_runner/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/user_ops/__init__.py')\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox: bash failed: error executing command\r\n  (cd /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/opt/vc/bin:/usr/lib/llvm/7/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin \\\r\n    PYTHON_BIN_PATH=/usr/bin/python \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3.6/site-packages \\\r\n    TF_DOWNLOAD_CLANG=0 \\\r\n    TF_NEED_CUDA=0 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n    TF_NEED_ROCM=0 \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1 --root_init_template=tensorflow/api_template.__init__.py --apidir=bazel-out/arm-opt/genfiles/tensorflow_api/v1/ --apiname=tensorflow --apiversion=1 --package=tensorflow.python --output_package=tensorflow._api.v1 bazel-out/arm-opt/genfiles/tensorflow/_api/v1/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/app/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/bitwise/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/compat/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/data/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/data/experimental/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/debugging/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/distributions/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/dtypes/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/errors/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/feature_column/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/gfile/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/graph_util/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/image/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/io/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/initializers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/activations/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/densenet/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/inception_resnet_v2/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/inception_v3/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/mobilenet/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/mobilenet_v2/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/nasnet/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/resnet50/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/vgg16/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/vgg19/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/applications/xception/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/backend/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/callbacks/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/constraints/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/boston_housing/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/cifar10/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/cifar100/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/fashion_mnist/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/imdb/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/mnist/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/datasets/reuters/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/estimator/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/initializers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/layers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/losses/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/metrics/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/models/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/optimizers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/image/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/sequence/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/preprocessing/text/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/regularizers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/utils/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/wrappers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/keras/wrappers/scikit_learn/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/layers/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/linalg/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/logging/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/losses/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/manip/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/math/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/metrics/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/nn/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/nn/rnn_cell/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/profiler/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/python_io/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/quantization/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/random/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/resource_loader/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/strings/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/builder/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/constants/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/loader/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/main_op/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/signature_constants/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/signature_def_utils/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/tag_constants/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/saved_model/utils/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/sets/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/sparse/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/spectral/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/summary/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/sysconfig/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/test/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/train/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/train/queue_runner/__init__.py bazel-out/arm-opt/genfiles/tensorflow/_api/v1/user_ops/__init__.py')\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN3Aws10FileSystem16GetHomeDirectoryB5cxx11Ev\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN3Aws10FileSystem16GetHomeDirectoryB5cxx11Ev\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\nSlow read: a 117326424-byte read from /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/execroot/org_tensorflow/bazel-out/arm-opt/bin/tensorflow/python/_pywrap_tensorflow_internal.so took 23412 ms.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 94586.192s, Critical Path: 40695.34s\r\nINFO: 3233 processes: 3233 linux-sandbox.\r\nFAILED: Build did NOT complete successfully\r\nanduin /usr/src/tensorflow #\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN3Aws10FileSystem16GetHomeDirectoryB5cxx11Ev\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/sandbox/linux-sandbox/3234/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN3Aws10FileSystem16GetHomeDirectoryB5cxx11Ev\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\nSlow read: a 117326424-byte read from /root/.cache/bazel/_bazel_root/cbe8b06b94787a6b39e59564d90f2497/execroot/org_tensorflow/bazel-out/arm-opt/bin/tensorflow/python/_pywrap_tensorflow_internal.so took 23412 ms.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 94586.192s, Critical Path: 40695.34s\r\nINFO: 3233 processes: 3233 linux-sandbox.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27671", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27671/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27671/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27671/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27671", "id": 430848858, "node_id": "MDU6SXNzdWU0MzA4NDg4NTg=", "number": 27671, "title": "Not found: No registered '_FusedMatMul' OpKernel for CPU devices compatible with node", "user": {"login": "SefaZeng", "id": 13918630, "node_id": "MDQ6VXNlcjEzOTE4NjMw", "avatar_url": "https://avatars2.githubusercontent.com/u/13918630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SefaZeng", "html_url": "https://github.com/SefaZeng", "followers_url": "https://api.github.com/users/SefaZeng/followers", "following_url": "https://api.github.com/users/SefaZeng/following{/other_user}", "gists_url": "https://api.github.com/users/SefaZeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/SefaZeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SefaZeng/subscriptions", "organizations_url": "https://api.github.com/users/SefaZeng/orgs", "repos_url": "https://api.github.com/users/SefaZeng/repos", "events_url": "https://api.github.com/users/SefaZeng/events{/privacy}", "received_events_url": "https://api.github.com/users/SefaZeng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-04-09T08:59:41Z", "updated_at": "2019-08-01T12:35:25Z", "closed_at": null, "author_association": "NONE", "body": "I changed the title of this post since it occurs new problems. And you can see it at the latest comment.Thx.\r\n_________________________________________________________________________________\r\n\r\n<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):linux 3.10.107\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (use command below):1.12\r\n- Python version:2.7.5\r\n- Bazel version (if compiling from source):No bazel.I use the build_all_linux.sh.\r\n- GCC/Compiler version (if compiling from source): 4.8.2\r\n- CUDA/cuDNN version: no\r\n- GPU model and memory: no\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI trained a model with python and save it as ckpt files, and then transform it to pb file. I make the tensorflow to a stastic library and then try to load the model on c++. I can create the session and ReadBinaryProto, but when I run this code ,it fails and return theis message:\r\n`tensorflow::Status status_create = m_session->Create(*m_graphdef);`\r\n\r\n> Invalid argument: No OpKernel was registered to support Op 'Sin' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n>   <no registered kernels>\r\n> \r\n>          [[{{node parallel_0/rnnsearch_0/add_timing_signal/Sin}} = Sin[T=DT_FLOAT, _device=\"/gpu:0\"](parallel_0/rnnsearch_0/add_timing_signal/mul_2)]]\r\n> \r\n\r\n**Describe the expected behavior**\r\nThe model will be loaded successfully.\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\ntensorflow::Status status_create_sess = tensorflow::NewSession(tensorflow::SessionOptions(), &m_sess);\r\n\tif(!status_create_sess.ok()){\r\n\t\tcout<<\"ERROR: FAIL TO CREATE SESSION\"<<endl;\r\n\t\tcout<<status_create_sess.ToString()<<endl;\r\n\t\tm_eris = FAIL_TO_CREATE_SESSION;\r\n\t\treturn m_eris;\r\n\t}\r\n\r\n\tm_graphdef = new(std::nothrow) tensorflow::GraphDef;\r\n\tif(m_graphdef==NULL){\r\n\t\tcout<<\"ERROR: FAIL TO LOAD MODEL\"<<endl;\r\n\t\tm_eris = FAIL_TO_LOAD_MODEL;\r\n\t\treturn m_eris;\r\n\t}\r\n\r\n\ttensorflow::Status status_load = tensorflow::ReadBinaryProto(tensorflow::Env::Default(), model_path, m_graphdef);\r\n\tif(!status_load.ok()){\r\n\t\tcout<<\"ERROR: FAIL TO LOAD MODEL\"<<endl;\r\n\t\tcout<<status_load.ToString()<<endl;\r\n\t\tm_eris = FAIL_TO_LOAD_MODEL;\r\n\t\treturn m_eris;\r\n\t}   \r\n\ttensorflow::Status status_create = m_sess->Create((*m_graphdef));\r\n\tif(!status_create.ok()){\r\n\t\tcout<<\"ERROR: FAIL TO CREATE GRAPh IN SESSION\"<<endl;\r\n\t\tcout<<status_create.ToString()<<endl;\r\n\t\tm_eris=FAIL_TO_CREATE_GRAPH;\r\n\t\treturn m_eris;\r\n\t}\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27665", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27665/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27665/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27665/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27665", "id": 430757537, "node_id": "MDU6SXNzdWU0MzA3NTc1Mzc=", "number": 27665, "title": "Add name=None argument to roll function", "user": {"login": "Gurpreetsingh9465", "id": 32022215, "node_id": "MDQ6VXNlcjMyMDIyMjE1", "avatar_url": "https://avatars2.githubusercontent.com/u/32022215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gurpreetsingh9465", "html_url": "https://github.com/Gurpreetsingh9465", "followers_url": "https://api.github.com/users/Gurpreetsingh9465/followers", "following_url": "https://api.github.com/users/Gurpreetsingh9465/following{/other_user}", "gists_url": "https://api.github.com/users/Gurpreetsingh9465/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gurpreetsingh9465/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gurpreetsingh9465/subscriptions", "organizations_url": "https://api.github.com/users/Gurpreetsingh9465/orgs", "repos_url": "https://api.github.com/users/Gurpreetsingh9465/repos", "events_url": "https://api.github.com/users/Gurpreetsingh9465/events{/privacy}", "received_events_url": "https://api.github.com/users/Gurpreetsingh9465/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-09T04:07:42Z", "updated_at": "2019-06-07T01:13:26Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version 2.0:\r\n- Are you willing to contribute it Yes:\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n`tensorflow.python.ops.manip_ops.roll` does not take name=None as parameter the current API\r\ndoes not allow that\r\n\r\n**Will this change the current api? How?**\r\nYes, roll function in `tensorflow.python.ops.manip_ops.roll` will take name=None as argument which will return a tensor with `name=name` and not the default one `roll_n`\r\n\r\n**File where roll exists**\r\n[manip_ops.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/manip_ops.py)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27662", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27662/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27662/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27662/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27662", "id": 430719234, "node_id": "MDU6SXNzdWU0MzA3MTkyMzQ=", "number": 27662, "title": "saved_model_cli fails when --input_examples option contains string feature", "user": {"login": "junwan01", "id": 8323392, "node_id": "MDQ6VXNlcjgzMjMzOTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/8323392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/junwan01", "html_url": "https://github.com/junwan01", "followers_url": "https://api.github.com/users/junwan01/followers", "following_url": "https://api.github.com/users/junwan01/following{/other_user}", "gists_url": "https://api.github.com/users/junwan01/gists{/gist_id}", "starred_url": "https://api.github.com/users/junwan01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/junwan01/subscriptions", "organizations_url": "https://api.github.com/users/junwan01/orgs", "repos_url": "https://api.github.com/users/junwan01/repos", "events_url": "https://api.github.com/users/junwan01/events{/privacy}", "received_events_url": "https://api.github.com/users/junwan01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-09T00:57:52Z", "updated_at": "2019-06-28T22:21:41Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n```\r\n(venv) []$ python --version\r\nPython 3.7.2\r\n\r\n(venv) []$ saved_model_cli --version\r\n0.1.0\r\n\r\ntensorflow: 1.13.1\r\n```\r\n\r\n**Describe the current behavior**\r\nI have a model that accepts two string features, say 'subject' and 'body', and predict if the string content is SPAM. When trying to test the inference with `saved_model_cli --input_examples`, it produced error message.\r\n\r\nHere is the model's signature def info: \r\n```\r\n(venv) [jwan@jwan-mbp15 conversation_appropriateness]$ saved_model_cli show --dir working_dir/exported_model_dir/1554752450/ --tag_set serve --signature_def classification\r\nThe given SavedModel SignatureDef contains the following input(s):\r\n  inputs['inputs'] tensor_info:\r\n      dtype: DT_STRING\r\n      shape: (-1)\r\n      name: input_example_tensor:0\r\nThe given SavedModel SignatureDef contains the following output(s):\r\n  outputs['classes'] tensor_info:\r\n      dtype: DT_STRING\r\n      shape: (-1, 2)\r\n      name: linear/head/Tile:0\r\n  outputs['scores'] tensor_info:\r\n      dtype: DT_FLOAT\r\n      shape: (-1, 2)\r\n      name: linear/head/predictions/probabilities:0\r\nMethod name is: tensorflow/serving/classify\r\n```\r\n\r\nHere is the cmd line and error:\r\n```\r\n(venv) []$ saved_model_cli run --dir working_dir/exported_model_dir/1554752450/ --tag_set serve --signature_def classification --input_examples 'inputs=[{\"subject\":[\"love\"], \"body\":[\"money\"]}]'\r\nTraceback (most recent call last):\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/bin/saved_model_cli\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/lib/python3.7/site-packages/tensorflow/python/tools/saved_model_cli.py\", line 911, in main\r\n    args.func(args)\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/lib/python3.7/site-packages/tensorflow/python/tools/saved_model_cli.py\", line 641, in run\r\n    args.inputs, args.input_exprs, args.input_examples)\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/lib/python3.7/site-packages/tensorflow/python/tools/saved_model_cli.py\", line 553, in load_inputs_from_input_arg_string\r\n    input_examples = preprocess_input_examples_arg_string(input_examples_str)\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/lib/python3.7/site-packages/tensorflow/python/tools/saved_model_cli.py\", line 472, in preprocess_input_examples_arg_string\r\n    _create_example_string(example) for example in example_list\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/lib/python3.7/site-packages/tensorflow/python/tools/saved_model_cli.py\", line 472, in <listcomp>\r\n    _create_example_string(example) for example in example_list\r\n  File \"/Users/jwan/Documents/source_code/python_snippets/venv/lib/python3.7/site-packages/tensorflow/python/tools/saved_model_cli.py\", line 490, in _create_example_string\r\n    feature_list)\r\nTypeError: 'love' has type str, but expected one of: bytes\r\n```\r\n\r\nThe problem occurs at the saved_model_cli.py line 487 (https://github.com/tensorflow/tensorflow/blob/a9fe6cb21dd725cdb4d6708c970c2d044c13ce60/tensorflow/python/tools/saved_model_cli.py#L487):\r\n\r\n```\r\n    elif isinstance(feature_list[0], str):\r\n      example.features.feature[feature_name].bytes_list.value.extend(\r\n          feature_list)\r\n```\r\n\r\nIt checks if the list `feature_list` contains string values, and then try to append the list to feature's `bytes_list` which expects the element to be bytes, and not string.\r\n\r\n**Describe the expected behavior**\r\nThe code should convert the string to the bytes, for example:\r\n```\r\n    elif isinstance(feature_list[0], str):\r\n      feature_list = list(map(lambda x: x.encode(),feature_list))\r\n      example.features.feature[feature_name].bytes_list.value.extend(\r\n          feature_list)\r\n```\r\n\r\n**Code to reproduce the issue**\r\n\r\n**Other info / logs**\r\nA [stack overflow post](https://stackoverflow.com/questions/55422537/testing-tf-serving-model-fails-with-bytes-as-strings-and-strings-as-bytes-confus) reported the same issue.\r\n\r\nPR to fix this issue: #27661\r\n\r\nThanks! "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27647", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27647/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27647/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27647/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27647", "id": 430585710, "node_id": "MDU6SXNzdWU0MzA1ODU3MTA=", "number": 27647, "title": "Kubernetes Charts for Tensorflow 2.0", "user": {"login": "ChethanUK", "id": 16241795, "node_id": "MDQ6VXNlcjE2MjQxNzk1", "avatar_url": "https://avatars1.githubusercontent.com/u/16241795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChethanUK", "html_url": "https://github.com/ChethanUK", "followers_url": "https://api.github.com/users/ChethanUK/followers", "following_url": "https://api.github.com/users/ChethanUK/following{/other_user}", "gists_url": "https://api.github.com/users/ChethanUK/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChethanUK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChethanUK/subscriptions", "organizations_url": "https://api.github.com/users/ChethanUK/orgs", "repos_url": "https://api.github.com/users/ChethanUK/repos", "events_url": "https://api.github.com/users/ChethanUK/events{/privacy}", "received_events_url": "https://api.github.com/users/ChethanUK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-08T18:05:47Z", "updated_at": "2019-04-11T18:21:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWould be nice to have Kubernetes charts which users can deploy and train or server the tf models. \r\n\r\n**Will this change the current API? How?**\r\nNO, but will help users.\r\n\r\n**Who will benefit with this feature?**\r\nThose who are using K8s already...\r\n\r\nWould need 2 charts:\r\n1. CPU Version TF-2.0\r\n2. GPU Version TF-2.0"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27646", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27646/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27646/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27646/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27646", "id": 430572380, "node_id": "MDU6SXNzdWU0MzA1NzIzODA=", "number": 27646, "title": "Training on device with TensorFlow Lite", "user": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-08T17:33:03Z", "updated_at": "2020-01-15T04:11:21Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "This ticket tracks supporting on-device training with TensorFlow Lite. \r\n\r\nA few high-level milestones:\r\n\r\n- [ ] Functional prototype for basic training (e.g. convolution / dense network)\r\n- [ ] Functional prototype for training with control flow (e.g. RNN / LSTM networks)\r\n- [ ] Productionize / optimize basic training\r\n- [ ] Productionize / optimize training with control flow\r\n\r\nSee also #17328"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27643", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27643/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27643/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27643/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27643", "id": 430536550, "node_id": "MDU6SXNzdWU0MzA1MzY1NTA=", "number": 27643, "title": "Java: add support for Alpine Linux (Docker)", "user": {"login": "neterium", "id": 30621157, "node_id": "MDQ6VXNlcjMwNjIxMTU3", "avatar_url": "https://avatars0.githubusercontent.com/u/30621157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neterium", "html_url": "https://github.com/neterium", "followers_url": "https://api.github.com/users/neterium/followers", "following_url": "https://api.github.com/users/neterium/following{/other_user}", "gists_url": "https://api.github.com/users/neterium/gists{/gist_id}", "starred_url": "https://api.github.com/users/neterium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neterium/subscriptions", "organizations_url": "https://api.github.com/users/neterium/orgs", "repos_url": "https://api.github.com/users/neterium/repos", "events_url": "https://api.github.com/users/neterium/events{/privacy}", "received_events_url": "https://api.github.com/users/neterium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-08T16:09:17Z", "updated_at": "2019-08-07T15:55:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI'm using the TF Java library to serve prediction requests and I don't have any issue there.\r\nHowever, I'm building a docker image from my server. The size is 343mb from openjdk:8-jdk-alpine, but TF does not work (Error loading shared library ld-linux-x86-64.so.2).\r\nI noticed in the doc that only Ubuntu was supported. Ok.\r\nI created the image from ubuntu:18.04 and installed the jdk over it... no more error as expected, but the size of the image jumps to 500m :(, even after cleaning out everything I could.\r\n\r\nAny plans to make it work from the openjdk:8-jdk-alpine image (or provide a minimalist dockerfile which inherits from that one) ?\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nA lot, I can imagine\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27640", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27640/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27640/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27640/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27640", "id": 430448232, "node_id": "MDU6SXNzdWU0MzA0NDgyMzI=", "number": 27640, "title": "TF Lite conversion of minimal graph with tf.matmul fails on Linux but works on MacOS", "user": {"login": "sklampfl", "id": 7127379, "node_id": "MDQ6VXNlcjcxMjczNzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/7127379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sklampfl", "html_url": "https://github.com/sklampfl", "followers_url": "https://api.github.com/users/sklampfl/followers", "following_url": "https://api.github.com/users/sklampfl/following{/other_user}", "gists_url": "https://api.github.com/users/sklampfl/gists{/gist_id}", "starred_url": "https://api.github.com/users/sklampfl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sklampfl/subscriptions", "organizations_url": "https://api.github.com/users/sklampfl/orgs", "repos_url": "https://api.github.com/users/sklampfl/repos", "events_url": "https://api.github.com/users/sklampfl/events{/privacy}", "received_events_url": "https://api.github.com/users/sklampfl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-04-08T13:21:39Z", "updated_at": "2020-02-25T21:07:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n`16.04.6 LTS (GNU/Linux 4.15.0-47-generic x86_64)` and `macOS Mojave Version 10.14.4`\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): `pip install tf-nightly`\r\n- TensorFlow version (use command below): `1.14.1-dev20190408`\r\n- Python version: `2.7.16` (Mac) and `2.7.12` (Linux)\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nThe example code below creates a minimal TensorFlow graph that computes a `tf.matmul` between two input matrices and exports the graph to TensorFlow Lite from the current session via the Python API. It invokes the TF Lite Interpreter on example input and compares the output to the result of `session.run`.\r\n\r\nThe code works on Mac, but fails on Linux during TF Lite conversion (see logs below).\r\n\r\n**Describe the expected behavior**\r\nIt should work (or at least behave the same) on both operating systems.\r\n\r\nI know that the [TF Lite Operator Compatibility](https://www.tensorflow.org/lite/guide/ops_compatibility#compatible_operations) states:\r\n\r\n> tf.matmul - as long as the second argument is constant and transposition is not used\r\n\r\nThis is not the case here, but it still curious that it works on Mac.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport numpy\r\nimport tensorflow as tf\r\n\r\ndef export_tflite_from_session(session, input_nodes, output_nodes, tflite_filename):\r\n    print(\"Converting to tflite...\")\r\n    converter = tf.lite.TFLiteConverter.from_session(session, input_nodes, output_nodes)\r\n    tflite_model = converter.convert()\r\n    with open(tflite_filename, \"wb\") as f:\r\n        f.write(tflite_model)\r\n    print(\"Converted %s.\" % tflite_filename)\r\n\r\ndef test_tflite_model(tflite_filename, examples):\r\n    print(\"Loading TFLite interpreter for %s...\" % tflite_filename)\r\n    interpreter = tf.lite.Interpreter(model_path=tflite_filename)\r\n    interpreter.allocate_tensors()\r\n    input_details = interpreter.get_input_details()\r\n    output_details = interpreter.get_output_details()\r\n    print(\"input details: %s\" % input_details)\r\n    print(\"output details: %s\" % output_details)\r\n\r\n    for i, input_tensor in enumerate(input_details):\r\n        interpreter.set_tensor(input_tensor['index'], examples[i])\r\n    interpreter.invoke()\r\n    model_output = []\r\n    for i, output_tensor in enumerate(output_details):\r\n        model_output.append(interpreter.get_tensor(output_tensor['index']))\r\n    return model_output\r\n\r\ndef main():\r\n    tflite_filename = \"model.tflite\"\r\n    shape_a = (2, 3, 4)\r\n    shape_b = (2, 4, 5)\r\n\r\n    a = tf.placeholder(dtype=tf.float32, shape=shape_a, name=\"A\")\r\n    b = tf.placeholder(dtype=tf.float32, shape=shape_b, name=\"B\")\r\n    c = tf.matmul(a, b, name=\"output\")\r\n\r\n    numpy.random.seed(1234)\r\n    a_ = numpy.random.rand(*shape_a).astype(numpy.float32)\r\n    b_ = numpy.random.rand(*shape_b).astype(numpy.float32)\r\n    with tf.Session() as session:\r\n        session_output = session.run(c, feed_dict={a: a_, b: b_})\r\n        export_tflite_from_session(session, [a, b], [c], tflite_filename)\r\n\r\n    tflite_output = test_tflite_model(tflite_filename, [a_, b_])\r\n    tflite_output = tflite_output[0]\r\n\r\n    print(\"Input example:\")\r\n    print(a_)\r\n    print(a_.shape)\r\n    print(b_)\r\n    print(b_.shape)\r\n    print(\"Session output:\")\r\n    print(session_output)\r\n    print(session_output.shape)\r\n    print(\"TFLite output:\")\r\n    print(tflite_output)\r\n    print(tflite_output.shape)\r\n    print(numpy.allclose(session_output, tflite_output))\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n**Other info / logs**\r\nOutput on Mac:\r\n```\r\n2019-04-08 14:46:05.835019: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\nConverting to tflite...\r\n2019-04-08 14:46:05.837757: I tensorflow/core/grappler/devices.cc:53] Number of eligible GPUs (core count >= 8): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-04-08 14:46:05.837803: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-04-08 14:46:05.839940: I tensorflow/core/grappler/devices.cc:53] Number of eligible GPUs (core count >= 8): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-04-08 14:46:05.839979: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\nConverted model.tflite.\r\nLoading TFLite interpreter for model.tflite...\r\nINFO: Initialized TensorFlow Lite runtime.\r\ninput details: [{'index': 0, 'shape': array([2, 3, 4], dtype=int32), 'quantization': (0.0, 0L), 'name': 'A', 'dtype': <type 'numpy.float32'>}, {'index': 1, 'shape': array([2, 4, 5], dtype=int32), 'quantization': (0.0, 0L), 'name': 'B', 'dtype': <type 'numpy.float32'>}]\r\noutput details: [{'index': 2, 'shape': array([2, 3, 5], dtype=int32), 'quantization': (0.0, 0L), 'name': 'output', 'dtype': <type 'numpy.float32'>}]\r\nInput example:\r\n[[[0.19151945 0.62210876 0.43772775 0.7853586 ]\r\n  [0.77997583 0.2725926  0.27646425 0.8018722 ]\r\n  [0.95813936 0.87593263 0.35781726 0.5009951 ]]\r\n\r\n [[0.6834629  0.71270204 0.37025076 0.5611962 ]\r\n  [0.50308317 0.01376845 0.7728266  0.8826412 ]\r\n  [0.364886   0.6153962  0.07538124 0.368824  ]]]\r\n(2, 3, 4)\r\n[[[0.9331401  0.65137815 0.39720258 0.78873014 0.31683612]\r\n  [0.56809866 0.8691274  0.4361734  0.8021476  0.14376682]\r\n  [0.70426095 0.7045813  0.21879211 0.92486763 0.44214076]\r\n  [0.90931594 0.05980922 0.18428709 0.04735528 0.6748809 ]]\r\n\r\n [[0.59462476 0.5333102  0.04332406 0.5614331  0.32966843]\r\n  [0.5029668  0.11189432 0.6071937  0.5659447  0.00676406]\r\n  [0.6174417  0.9121229  0.7905241  0.99208146 0.95880175]\r\n  [0.7919641  0.28525096 0.62491673 0.4780938  0.19567518]]]\r\n(2, 4, 5)\r\nSession output:\r\n[[[1.5545473  1.0208298  0.58792216 1.0921113  0.87367964]\r\n  [1.8065444  0.98772776 0.636969   1.1275158  0.94971865]\r\n  [2.0992541  1.6674836  0.93324846 1.812999   0.9258208 ]]\r\n\r\n [[1.437925   0.942041   1.1057518  1.422692   0.69494617]\r\n  [1.4822663  1.226527   1.1926711  1.4789319  1.0796423 ]\r\n  [0.86513305 0.43742114 0.679548   0.8042561  0.26889932]]]\r\n(2, 3, 5)\r\nTFLite output:\r\n[[[1.5545473  1.0208298  0.58792216 1.0921113  0.87367964]\r\n  [1.8065444  0.98772776 0.636969   1.1275158  0.94971865]\r\n  [2.0992541  1.6674836  0.93324846 1.812999   0.9258208 ]]\r\n\r\n [[1.437925   0.942041   1.1057518  1.422692   0.69494617]\r\n  [1.4822663  1.226527   1.1926711  1.4789319  1.0796423 ]\r\n  [0.86513305 0.43742114 0.679548   0.8042561  0.26889932]]]\r\n(2, 3, 5)\r\nTrue\r\n```\r\n\r\nOutput on Linux:\r\n```\r\n2019-04-08 14:47:09.730317: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-04-08 14:47:09.734305: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1\r\n2019-04-08 14:47:10.718760: E tensorflow/stream_executor/cuda/cuda_driver.cc:320] failed call to cuInit: CUDA_ERROR_NO_DEVICE: no CUDA-capable device is detected\r\n2019-04-08 14:47:10.718805: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:166] retrieving CUDA diagnostic information for host: everest6\r\n2019-04-08 14:47:10.718811: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:173] hostname: everest6\r\n2019-04-08 14:47:10.718867: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:197] libcuda reported version is: 410.104.0\r\n2019-04-08 14:47:10.718890: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:201] kernel reported version is: 410.104.0\r\n2019-04-08 14:47:10.718896: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:308] kernel version seems to match DSO: 410.104.0\r\n2019-04-08 14:47:10.737178: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 4200000000 Hz\r\n2019-04-08 14:47:10.737608: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x52d4340 executing computations on platform Host. Devices:\r\n2019-04-08 14:47:10.737622: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-04-08 14:47:10.738962: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1288] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.\r\nConverting to tflite...\r\n2019-04-08 14:47:10.739692: I tensorflow/core/grappler/devices.cc:50] Number of eligible GPUs (core count >= 8): 0\r\n2019-04-08 14:47:10.739747: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-04-08 14:47:10.741001: I tensorflow/core/grappler/devices.cc:50] Number of eligible GPUs (core count >= 8): 0\r\n2019-04-08 14:47:10.741033: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\nTraceback (most recent call last):\r\n  File \"minimal_tflite_test.py\", line 67, in <module>\r\n    main()\r\n  File \"minimal_tflite_test.py\", line 47, in main\r\n    export_tflite_from_session(session, [a, b], [c], tflite_filename)\r\n  File \"minimal_tflite_test.py\", line 9, in export_tflite_from_session\r\n    tflite_model = converter.convert()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/lite.py\", line 742, in convert\r\n    **converter_kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/convert.py\", line 410, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/convert.py\", line 176, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2019-04-08 14:47:11.490702: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1 operators, 3 arrays (0 quantized)\r\n2019-04-08 14:47:11.490766: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1 operators, 3 arrays (0 quantized)\r\n2019-04-08 14:47:11.490876: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 11 operators, 25 arrays (0 quantized)\r\n2019-04-08 14:47:11.490918: F tensorflow/lite/toco/graph_transformations/propagate_fixed_sizes.cc:1800] Check failed: axis >= 0 (-323499096 vs. 0)\r\nAborted (core dumped)\r\n```\r\nThe error occurs during TF Lite conversion. The erroneous axis value (`-323499096`) is different every time the script is called. If the value is positive, the error is:\r\n```\r\n2019-04-08 15:14:43.877396: F tensorflow/lite/toco/graph_transformations/propagate_fixed_sizes.cc:1801] Check failed: axis < input_shape.dimensions_count() (539352088 vs. 3)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27638", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27638/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27638/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27638/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27638", "id": 430442210, "node_id": "MDU6SXNzdWU0MzA0NDIyMTA=", "number": 27638, "title": "Typo in SpaceToBatchND and BatchToSpaceND documentation", "user": {"login": "alexeyr", "id": 24733, "node_id": "MDQ6VXNlcjI0NzMz", "avatar_url": "https://avatars2.githubusercontent.com/u/24733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeyr", "html_url": "https://github.com/alexeyr", "followers_url": "https://api.github.com/users/alexeyr/followers", "following_url": "https://api.github.com/users/alexeyr/following{/other_user}", "gists_url": "https://api.github.com/users/alexeyr/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeyr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeyr/subscriptions", "organizations_url": "https://api.github.com/users/alexeyr/orgs", "repos_url": "https://api.github.com/users/alexeyr/repos", "events_url": "https://api.github.com/users/alexeyr/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeyr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-08T13:09:40Z", "updated_at": "2019-04-12T21:08:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version: 1.13\r\n- Doc Link: https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/space-to-batch-n-d, https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/batch-to-space-n-d\r\n\r\n\r\n**Describe the documentation issue**\r\nExample 2 in https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/space-to-batch-n-d says\r\n\r\n> The output tensor has shape `[4, 1, 1, 3]` and value:\r\n\r\n>     [[[1, 2, 3]], [[4, 5, 6]], [[7, 8, 9]], [[10, 11, 12]]]\r\n\r\nHowever, that value's shape is `[4, 1, 3]`. It appears the shape is correct, but the value should be\r\n\r\n    [[[[1, 2, 3]]], [[[4, 5, 6]]], [[[7, 8, 9]]], [[[10, 11, 12]]]]\r\n\r\nThe same issue is present in https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/batch-to-space-n-d example 2.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nYes."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27634", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27634/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27634/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27634/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27634", "id": 430423386, "node_id": "MDU6SXNzdWU0MzA0MjMzODY=", "number": 27634, "title": "Missing documentation for variable ops.", "user": {"login": "smr97", "id": 18290261, "node_id": "MDQ6VXNlcjE4MjkwMjYx", "avatar_url": "https://avatars0.githubusercontent.com/u/18290261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smr97", "html_url": "https://github.com/smr97", "followers_url": "https://api.github.com/users/smr97/followers", "following_url": "https://api.github.com/users/smr97/following{/other_user}", "gists_url": "https://api.github.com/users/smr97/gists{/gist_id}", "starred_url": "https://api.github.com/users/smr97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smr97/subscriptions", "organizations_url": "https://api.github.com/users/smr97/orgs", "repos_url": "https://api.github.com/users/smr97/repos", "events_url": "https://api.github.com/users/smr97/events{/privacy}", "received_events_url": "https://api.github.com/users/smr97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-08T12:29:32Z", "updated_at": "2019-04-11T00:14:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: v1.13\r\n- Doc Link:\r\n\r\n\r\n**Describe the documentation issue**\r\nHi, I am looking for documentation on the ReadVariableOp and VarHandleOp. Specifically as to what are the inputs that they take and what do they produce exactly. I dug around the source code for mentions of these ops and found some calls [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/resource_variable_ops.py#L196) and [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/resource_variable_ops.py#L864). While this hints at the signature of these ops, I would love to look at the implementation, which probably exists in [this](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/resource_variable_ops.py#L37) module, but I can not find it in this public repo's master branch. Could someone point me to this?\r\n\r\nAlternately, is there any documentation on these ops written [this](https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/fused-batch-norm) way?\r\n\r\nThanks!\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27626", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27626/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27626/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27626/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27626", "id": 430351813, "node_id": "MDU6SXNzdWU0MzAzNTE4MTM=", "number": 27626, "title": "Huawei (android 6.0\uff0cOpenGL3.1 is Mali) GPU slower than CPU", "user": {"login": "anneyking", "id": 13847336, "node_id": "MDQ6VXNlcjEzODQ3MzM2", "avatar_url": "https://avatars0.githubusercontent.com/u/13847336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anneyking", "html_url": "https://github.com/anneyking", "followers_url": "https://api.github.com/users/anneyking/followers", "following_url": "https://api.github.com/users/anneyking/following{/other_user}", "gists_url": "https://api.github.com/users/anneyking/gists{/gist_id}", "starred_url": "https://api.github.com/users/anneyking/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anneyking/subscriptions", "organizations_url": "https://api.github.com/users/anneyking/orgs", "repos_url": "https://api.github.com/users/anneyking/repos", "events_url": "https://api.github.com/users/anneyking/events{/privacy}", "received_events_url": "https://api.github.com/users/anneyking/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-04-08T09:40:19Z", "updated_at": "2019-05-31T18:31:50Z", "closed_at": null, "author_association": "NONE", "body": "I have two mobile phones, one is XiaoMi  (Android 9.0\uff0cOpenGL3.1 is Adreno), the other is Huawei (Android 6.0, OpenGL3.1 is Mail). When I run this demo app (Tensor Flow Lite GPU delegate), GPU is faster in the XiaoMi mobile phone than CPU, but in Huawei mobile phone, GPU is slower than CPU. What's the reason, the system version problem? Or the OpenGL ES chip problem?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27617", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27617/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27617/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27617/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27617", "id": 430284853, "node_id": "MDU6SXNzdWU0MzAyODQ4NTM=", "number": 27617, "title": "'flatten_atrous_conv'  misses to flatten some atrous_convs", "user": {"login": "WenguoLi", "id": 31765154, "node_id": "MDQ6VXNlcjMxNzY1MTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/31765154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WenguoLi", "html_url": "https://github.com/WenguoLi", "followers_url": "https://api.github.com/users/WenguoLi/followers", "following_url": "https://api.github.com/users/WenguoLi/following{/other_user}", "gists_url": "https://api.github.com/users/WenguoLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/WenguoLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WenguoLi/subscriptions", "organizations_url": "https://api.github.com/users/WenguoLi/orgs", "repos_url": "https://api.github.com/users/WenguoLi/repos", "events_url": "https://api.github.com/users/WenguoLi/events{/privacy}", "received_events_url": "https://api.github.com/users/WenguoLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-08T06:56:21Z", "updated_at": "2019-08-02T06:34:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):  master\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.22.0\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nI'm trying to optimize TF Model ' [xception65_coco_voc_trainval](http://download.tensorflow.org/models/deeplabv3_pascal_trainval_2018_01_04.tar.gz)' with graph_transforms tools.\r\n\r\nOptimize for inference\r\n`\r\nbazel-bin/tensorflow/python/tools/optimize_for_inference --input=frozen.pb --output=stripped.pb --frozen_graph=True --input_names=\"sub_7\" --output_names=\"ResizeBilinear_2\"\r\n`\r\nGraph Transforms\r\n`bazel-bin/tensorflow/tools/graph_transforms/transform_graph --in_graph=\"stripped.pb\" --out_graph=\"flatten.pb\" --inputs='sub_7' --outputs='ResizeBilinear_2' --transforms='flatten_atrous_conv'`\r\n\r\n**Describe the expected behavior**\r\n'flatten_atrous_conv'  misses to flatten some atrous_convs. \r\n![transform](https://user-images.githubusercontent.com/31765154/55704734-80988800-5a0f-11e9-8985-69f0bcb7b837.jpg)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27613", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27613/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27613/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27613/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27613", "id": 430243150, "node_id": "MDU6SXNzdWU0MzAyNDMxNTA=", "number": 27613, "title": "No improvement in performance of deeplabv3_257_mv_gpu.tflite on TFLite for GPU", "user": {"login": "WenguoLi", "id": 31765154, "node_id": "MDQ6VXNlcjMxNzY1MTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/31765154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WenguoLi", "html_url": "https://github.com/WenguoLi", "followers_url": "https://api.github.com/users/WenguoLi/followers", "following_url": "https://api.github.com/users/WenguoLi/following{/other_user}", "gists_url": "https://api.github.com/users/WenguoLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/WenguoLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WenguoLi/subscriptions", "organizations_url": "https://api.github.com/users/WenguoLi/orgs", "repos_url": "https://api.github.com/users/WenguoLi/repos", "events_url": "https://api.github.com/users/WenguoLi/events{/privacy}", "received_events_url": "https://api.github.com/users/WenguoLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-08T03:50:10Z", "updated_at": "2019-05-14T18:53:58Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: MI 5\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: \r\n\r\n**Describe the current behavior**\r\nI'm trying to run TFLite Model '[deeplabv3_257_mv_gpu.tflite](https://storage.googleapis.com/download.tensorflow.org/models/tflite/gpu/deeplabv3_257_mv_gpu.tflite)' with GPU delegate on Android  devices.  According to PR for label_image #27464,  I modified the label_image code to support the gpu delegate and removed the code from [205](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/label_image/label_image.cc#L205) to [251](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/label_image/label_image.cc#L251) lines .  \r\n\r\n```\r\nvoid RunInference(Settings* s) {\r\n  if (!s->model_name.c_str()) {\r\n    LOG(ERROR) << \"no model file name\\n\";\r\n    exit(-1);\r\n  }\r\n\r\n  std::unique_ptr<tflite::FlatBufferModel> model;\r\n  std::unique_ptr<tflite::Interpreter> interpreter;\r\n  model = tflite::FlatBufferModel::BuildFromFile(s->model_name.c_str());\r\n  if (!model) {\r\n    LOG(FATAL) << \"\\nFailed to mmap model \" << s->model_name << \"\\n\";\r\n    exit(-1);\r\n  }\r\n  LOG(INFO) << \"Loaded model \" << s->model_name << \"\\n\";\r\n  model->error_reporter();\r\n  LOG(INFO) << \"resolved reporter\\n\";\r\n\r\n  tflite::ops::builtin::BuiltinOpResolver resolver;\r\n\r\n  tflite::InterpreterBuilder(*model, resolver)(&interpreter);\r\n  if (!interpreter) {\r\n    LOG(FATAL) << \"Failed to construct interpreter\\n\";\r\n    exit(-1);\r\n  }\r\n\r\n  interpreter->UseNNAPI(s->accel);\r\n  interpreter->SetAllowFp16PrecisionForFp32(s->allow_fp16);\r\n\r\n  if (s->verbose) {\r\n    LOG(INFO) << \"tensors size: \" << interpreter->tensors_size() << \"\\n\";\r\n    LOG(INFO) << \"nodes size: \" << interpreter->nodes_size() << \"\\n\";\r\n    LOG(INFO) << \"inputs: \" << interpreter->inputs().size() << \"\\n\";\r\n    LOG(INFO) << \"input(0) name: \" << interpreter->GetInputName(0) << \"\\n\";\r\n\r\n    int t_size = interpreter->tensors_size();\r\n    for (int i = 0; i < t_size; i++) {\r\n      if (interpreter->tensor(i)->name)\r\n        LOG(INFO) << i << \": \" << interpreter->tensor(i)->name << \", \"\r\n                  << interpreter->tensor(i)->bytes << \", \"\r\n                  << interpreter->tensor(i)->type << \", \"\r\n                  << interpreter->tensor(i)->params.scale << \", \"\r\n                  << interpreter->tensor(i)->params.zero_point << \"\\n\";\r\n    }\r\n  }\r\n\r\n  if (s->number_of_threads != -1) {\r\n    interpreter->SetNumThreads(s->number_of_threads);\r\n  }\r\n\r\n  int image_width = 224;\r\n  int image_height = 224;\r\n  int image_channels = 3;\r\n  std::vector<uint8_t> in = read_bmp(s->input_bmp_name, &image_width,\r\n                                     &image_height, &image_channels, s);\r\n\r\n  int input = interpreter->inputs()[0];\r\n  if (s->verbose) LOG(INFO) << \"input: \" << input << \"\\n\";\r\n\r\n  const std::vector<int> inputs = interpreter->inputs();\r\n  const std::vector<int> outputs = interpreter->outputs();\r\n\r\n  if (s->verbose) {\r\n    LOG(INFO) << \"number of inputs: \" << inputs.size() << \"\\n\";\r\n    LOG(INFO) << \"number of outputs: \" << outputs.size() << \"\\n\";\r\n  }\r\n#if defined(ANDROID) || defined(__ANDROID__)\r\n  TfLiteGpuDelegateOptions kMyOptions = {\r\n      .metadata = nullptr,\r\n      .compile_options =\r\n          {\r\n              .precision_loss_allowed = 0,\r\n              .preferred_gl_object_type = TFLITE_GL_OBJECT_TYPE_FASTEST,\r\n              .dynamic_batch_enabled = 0,\r\n          },\r\n  };\r\n  if (s->allow_fp16) kMyOptions.compile_options.precision_loss_allowed = 1;\r\n\r\n  TfLiteDelegate* delegate;\r\n  if (s->gl_backend) {\r\n    delegate = TfLiteGpuDelegateCreate(&kMyOptions);\r\n    if (interpreter->ModifyGraphWithDelegate(delegate) != kTfLiteOk) return;\r\n  } else {\r\n#endif\r\n    if (interpreter->AllocateTensors() != kTfLiteOk) {\r\n      LOG(FATAL) << \"Failed to allocate tensors!\";\r\n    }\r\n#if defined(ANDROID) || defined(__ANDROID__)\r\n  }\r\n#endif\r\n\r\n  if (s->verbose) PrintInterpreterState(interpreter.get());\r\n\r\n  // get input dimension from the input tensor metadata\r\n  // assuming one input only\r\n  TfLiteIntArray* dims = interpreter->tensor(input)->dims;\r\n  int wanted_height = dims->data[1];\r\n  int wanted_width = dims->data[2];\r\n  int wanted_channels = dims->data[3];\r\n\r\n  switch (interpreter->tensor(input)->type) {\r\n    case kTfLiteFloat32:\r\n      s->input_floating = true;\r\n      resize<float>(interpreter->typed_tensor<float>(input), in.data(),\r\n                    image_height, image_width, image_channels, wanted_height,\r\n                    wanted_width, wanted_channels, s);\r\n      break;\r\n    case kTfLiteUInt8:\r\n      resize<uint8_t>(interpreter->typed_tensor<uint8_t>(input), in.data(),\r\n                      image_height, image_width, image_channels, wanted_height,\r\n                      wanted_width, wanted_channels, s);\r\n      break;\r\n    default:\r\n      LOG(FATAL) << \"cannot handle input type \"\r\n                 << interpreter->tensor(input)->type << \" yet\";\r\n      exit(-1);\r\n  }\r\n\r\n  profiling::Profiler* profiler = new profiling::Profiler();\r\n  interpreter->SetProfiler(profiler);\r\n\r\n  if (s->profiling) profiler->StartProfiling();\r\n  if (s->loop_count > 1)\r\n    for (int i = 0; i < s->number_of_warmup_runs; i++) {\r\n      if (interpreter->Invoke() != kTfLiteOk) {\r\n        LOG(FATAL) << \"Failed to invoke tflite!\\n\";\r\n      }\r\n    }\r\n\r\n  struct timeval start_time, stop_time;\r\n  gettimeofday(&start_time, nullptr);\r\n  for (int i = 0; i < s->loop_count; i++) {\r\n    if (interpreter->Invoke() != kTfLiteOk) {\r\n      LOG(FATAL) << \"Failed to invoke tflite!\\n\";\r\n    }\r\n  }\r\n  gettimeofday(&stop_time, nullptr);\r\n  LOG(INFO) << \"invoked \\n\";\r\n  LOG(INFO) << \"average time: \"\r\n            << (get_us(stop_time) - get_us(start_time)) / (s->loop_count * 1000)\r\n            << \" ms \\n\";\r\n#if 0\r\n  if (s->profiling) {\r\n    profiler->StopProfiling();\r\n    auto profile_events = profiler->GetProfileEvents();\r\n    for (int i = 0; i < profile_events.size(); i++) {\r\n      auto op_index = profile_events[i]->event_metadata;\r\n      const auto node_and_registration =\r\n          interpreter->node_and_registration(op_index);\r\n      const TfLiteRegistration registration = node_and_registration->second;\r\n      PrintProfilingInfo(profile_events[i], op_index, registration);\r\n    }\r\n  }\r\n\r\n  const float threshold = 0.001f;\r\n\r\n  std::vector<std::pair<float, int>> top_results;\r\n\r\n  int output = interpreter->outputs()[0];\r\n  TfLiteIntArray* output_dims = interpreter->tensor(output)->dims;\r\n  // assume output dims to be something like (1, 1, ... ,size)\r\n  auto output_size = output_dims->data[output_dims->size - 1];\r\n  switch (interpreter->tensor(output)->type) {\r\n    case kTfLiteFloat32:\r\n      get_top_n<float>(interpreter->typed_output_tensor<float>(0), output_size,\r\n                       s->number_of_results, threshold, &top_results, true);\r\n      break;\r\n    case kTfLiteUInt8:\r\n      get_top_n<uint8_t>(interpreter->typed_output_tensor<uint8_t>(0),\r\n                         output_size, s->number_of_results, threshold,\r\n                         &top_results, false);\r\n      break;\r\n    default:\r\n      LOG(FATAL) << \"cannot handle output type \"\r\n                 << interpreter->tensor(input)->type << \" yet\";\r\n      exit(-1);\r\n  }\r\n\r\n  std::vector<string> labels;\r\n  size_t label_count;\r\n\r\n  if (ReadLabelsFile(s->labels_file_name, &labels, &label_count) != kTfLiteOk)\r\n    exit(-1);\r\n\r\n  for (const auto& result : top_results) {\r\n    const float confidence = result.first;\r\n    const int index = result.second;\r\n    LOG(INFO) << confidence << \": \" << index << \" \" << labels[index] << \"\\n\";\r\n  }\r\n#endif  \r\n}\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nVersion with GPUDelegate is a lot slower (228.445 ms per run vs 132.303 ms) than CPU.\r\n\r\n**Other info / logs**\r\n\r\nGPU:\r\n```\r\ngemini:/data/local/tmp $ ./label_image -g 1 -m deeplabv3_257_mv_gpu.tflite\r\nnnapi error: requires android sdk version to be at least 27\r\nLoaded model deeplabv3_257_mv_gpu.tflite\r\nresolved reporter\r\nINFO: Initialized TensorFlow Lite runtime.\r\nINFO: Created TensorFlow Lite delegate for GPU.\r\ninvoked \r\naverage time: 228.445 ms \r\n```\r\nCPU:\r\n```\r\ngemini:/data/local/tmp $ ./label_image -m deeplabv3_257_mv_gpu.tflite                                   <\r\nnnapi error: requires android sdk version to be at least 27\r\nLoaded model deeplabv3_257_mv_gpu.tflite\r\nresolved reporter\r\nINFO: Initialized TensorFlow Lite runtime.\r\ninvoked \r\naverage time: 132.303 ms\r\n```\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27559", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27559/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27559/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27559/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27559", "id": 429990242, "node_id": "MDU6SXNzdWU0Mjk5OTAyNDI=", "number": 27559, "title": "Poincare hyperbolic embeddings support", "user": {"login": "vitalyli", "id": 12679026, "node_id": "MDQ6VXNlcjEyNjc5MDI2", "avatar_url": "https://avatars0.githubusercontent.com/u/12679026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vitalyli", "html_url": "https://github.com/vitalyli", "followers_url": "https://api.github.com/users/vitalyli/followers", "following_url": "https://api.github.com/users/vitalyli/following{/other_user}", "gists_url": "https://api.github.com/users/vitalyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/vitalyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vitalyli/subscriptions", "organizations_url": "https://api.github.com/users/vitalyli/orgs", "repos_url": "https://api.github.com/users/vitalyli/repos", "events_url": "https://api.github.com/users/vitalyli/events{/privacy}", "received_events_url": "https://api.github.com/users/vitalyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "CrickWu", "id": 3087671, "node_id": "MDQ6VXNlcjMwODc2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3087671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CrickWu", "html_url": "https://github.com/CrickWu", "followers_url": "https://api.github.com/users/CrickWu/followers", "following_url": "https://api.github.com/users/CrickWu/following{/other_user}", "gists_url": "https://api.github.com/users/CrickWu/gists{/gist_id}", "starred_url": "https://api.github.com/users/CrickWu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CrickWu/subscriptions", "organizations_url": "https://api.github.com/users/CrickWu/orgs", "repos_url": "https://api.github.com/users/CrickWu/repos", "events_url": "https://api.github.com/users/CrickWu/events{/privacy}", "received_events_url": "https://api.github.com/users/CrickWu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "CrickWu", "id": 3087671, "node_id": "MDQ6VXNlcjMwODc2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3087671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CrickWu", "html_url": "https://github.com/CrickWu", "followers_url": "https://api.github.com/users/CrickWu/followers", "following_url": "https://api.github.com/users/CrickWu/following{/other_user}", "gists_url": "https://api.github.com/users/CrickWu/gists{/gist_id}", "starred_url": "https://api.github.com/users/CrickWu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CrickWu/subscriptions", "organizations_url": "https://api.github.com/users/CrickWu/orgs", "repos_url": "https://api.github.com/users/CrickWu/repos", "events_url": "https://api.github.com/users/CrickWu/events{/privacy}", "received_events_url": "https://api.github.com/users/CrickWu/received_events", "type": "User", "site_admin": false}, {"login": "bellettif", "id": 5793041, "node_id": "MDQ6VXNlcjU3OTMwNDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5793041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bellettif", "html_url": "https://github.com/bellettif", "followers_url": "https://api.github.com/users/bellettif/followers", "following_url": "https://api.github.com/users/bellettif/following{/other_user}", "gists_url": "https://api.github.com/users/bellettif/gists{/gist_id}", "starred_url": "https://api.github.com/users/bellettif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bellettif/subscriptions", "organizations_url": "https://api.github.com/users/bellettif/orgs", "repos_url": "https://api.github.com/users/bellettif/repos", "events_url": "https://api.github.com/users/bellettif/events{/privacy}", "received_events_url": "https://api.github.com/users/bellettif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-06T02:57:27Z", "updated_at": "2019-08-13T22:14:51Z", "closed_at": null, "author_association": "NONE", "body": "As you might have seen Facebook released hyperbolic embeddings training; \r\nIs there any plan to support those in Tensorflow?\r\n\r\nhttps://github.com/facebookresearch/poincare-embeddings"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27557", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27557/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27557/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27557/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27557", "id": 429979081, "node_id": "MDU6SXNzdWU0Mjk5NzkwODE=", "number": 27557, "title": "tf.keras lambda layer with sparse tensor caused AttributeError: 'SparseTensor' object has no attribute 'tocoo'", "user": {"login": "jianlingzhong", "id": 12853307, "node_id": "MDQ6VXNlcjEyODUzMzA3", "avatar_url": "https://avatars3.githubusercontent.com/u/12853307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlingzhong", "html_url": "https://github.com/jianlingzhong", "followers_url": "https://api.github.com/users/jianlingzhong/followers", "following_url": "https://api.github.com/users/jianlingzhong/following{/other_user}", "gists_url": "https://api.github.com/users/jianlingzhong/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlingzhong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlingzhong/subscriptions", "organizations_url": "https://api.github.com/users/jianlingzhong/orgs", "repos_url": "https://api.github.com/users/jianlingzhong/repos", "events_url": "https://api.github.com/users/jianlingzhong/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlingzhong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-06T00:45:58Z", "updated_at": "2019-07-24T07:55:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OSX 10.14\r\n- TensorFlow installed from (source or binary): pip install\r\n- TensorFlow version (use command below): 1.13\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\nsparse tensor operation inside a custom keras layer should not affect outside behavior if returning the expected type\r\n\r\n**Describe the expected behavior**\r\n`AttributeError: 'SparseTensor' object has no attribute 'tocoo'`\r\n\r\n**Code to reproduce the issue**\r\n```python\r\n\r\nimport tensorflow as tf\r\nimport scipy.sparse\r\nimport numpy as np\r\n\r\ndef input_fn():\r\n\r\n    x = scipy.sparse.random(1, 400)\r\n    y = scipy.random.randint(2, size=(1,1))\r\n\r\n    indices = np.mat([x.row, x.col]).transpose()\r\n    sp = tf.sparse.SparseTensor(indices, x.data, x.shape)\r\n    d = tf.data.Dataset.from_tensors((sp,y))\r\n    return d\r\n\r\ninput_layer = tf.keras.layers.Input(shape=(400, ), sparse=True)\r\nweights = tf.get_variable(name='weights', shape=(400, 1))\r\n\r\nweights_mult = lambda x: tf.sparse_tensor_dense_matmul(x, weights)\r\noutput_layer=  tf.keras.layers.Lambda(weights_mult)(input_layer)\r\nmodel = tf.keras.Model([input_layer], output_layer)\r\nmodel.compile(loss='binary_crossentropy', optimizer='sgd', metrics=['accuracy'])\r\nd = input_fn()\r\nmodel.fit(d.make_one_shot_iterator(), epochs=3, steps_per_epoch=1)\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nEpoch 1/3\r\nTraceback (most recent call last):\r\n  File \"sparse.py\", line 24, in <module>\r\n    model.fit(d.make_one_shot_iterator(), epochs=3, steps_per_epoch=1)\r\n  File \"/Users/jz/coding/t1/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 880, in fit\r\n    validation_steps=validation_steps)\r\n  File \"/Users/jz/coding/t1/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_arrays.py\", line 266, in model_iteration\r\n    batch_outs = f(actual_inputs)\r\n  File \"/Users/jz/coding/t1/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 3046, in __call__\r\n    sparse_coo = value.tocoo()\r\nAttributeError: 'SparseTensor' object has no attribute 'tocoo'\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27552", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27552/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27552/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27552/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27552", "id": 429924846, "node_id": "MDU6SXNzdWU0Mjk5MjQ4NDY=", "number": 27552, "title": "GcsFilesystem not able to set dns cache when using long constructor", "user": {"login": "ziliangpeng", "id": 551900, "node_id": "MDQ6VXNlcjU1MTkwMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/551900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziliangpeng", "html_url": "https://github.com/ziliangpeng", "followers_url": "https://api.github.com/users/ziliangpeng/followers", "following_url": "https://api.github.com/users/ziliangpeng/following{/other_user}", "gists_url": "https://api.github.com/users/ziliangpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziliangpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziliangpeng/subscriptions", "organizations_url": "https://api.github.com/users/ziliangpeng/orgs", "repos_url": "https://api.github.com/users/ziliangpeng/repos", "events_url": "https://api.github.com/users/ziliangpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/ziliangpeng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-05T20:35:51Z", "updated_at": "2019-09-24T23:57:55Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0.0-alpla0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThe GcsFileSystem has a default constructor and a long constructor. While the default constructor initialize variables either to default option or from environment variables, the long constructor initialize a few variables that's passed in from constructor parameters, but left out the others (e.g. dns cache).\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo. We can still initialize the other things from environment variables.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nanyone who uses GcsFileSystem can have more options configuring the filesystem while using the long constructor.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27545", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27545/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27545/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27545/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27545", "id": 429846296, "node_id": "MDU6SXNzdWU0Mjk4NDYyOTY=", "number": 27545, "title": "[TF 2.0]  tf.estimator.ProfilerHook... is not compatible with eager execution", "user": {"login": "lendle", "id": 815403, "node_id": "MDQ6VXNlcjgxNTQwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/815403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lendle", "html_url": "https://github.com/lendle", "followers_url": "https://api.github.com/users/lendle/followers", "following_url": "https://api.github.com/users/lendle/following{/other_user}", "gists_url": "https://api.github.com/users/lendle/gists{/gist_id}", "starred_url": "https://api.github.com/users/lendle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lendle/subscriptions", "organizations_url": "https://api.github.com/users/lendle/orgs", "repos_url": "https://api.github.com/users/lendle/repos", "events_url": "https://api.github.com/users/lendle/events{/privacy}", "received_events_url": "https://api.github.com/users/lendle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-04-05T16:49:39Z", "updated_at": "2020-03-11T18:04:45Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 8.8\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): via pip\r\n- TensorFlow version (use command below): `tf.__git_version__ : 'v1.12.0-9492-g2c319fb415', version tensorflow==2.0.0-alpha0`\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\n**Describe the current behavior**\r\nWhen constructing a `tf.estimator.ProfilerHook` a error is thrown: `RuntimeError: tf.summary.FileWriter is not compatible with eager execution. Use tf.contrib.summary instead.`\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\ntf.estimator.ProfilerHook(10)\r\n```\r\n\r\n\r\n**Other info / logs**\r\n\r\nI'm not very familiar with tf 2.0, so maybe this is just user error? Is it possible to use tf2 not in eager mode?\r\n\r\nFull traceback: \r\n\r\n```\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-7-4eefc50dcc45> in <module>\r\n----> 1 tf.estimator.ProfilerHook(10)\r\n\r\n~/tf2-venv/lib/python3.6/site-packages/tensorflow/python/training/basic_session_run_hooks.py in __init__(self, save_steps,save_secs, output_dir, show_dataflow, show_memory)\r\n   1013     \"\"\"\r\n   1014     self._output_file = os.path.join(output_dir, \"timeline-{}.json\")\r\n-> 1015     self._file_writer = SummaryWriterCache.get(output_dir)\r\n   1016     self._show_dataflow = show_dataflow\r\n   1017     self._show_memory = show_memory\r\n\r\n~/tf2-venv/lib/python3.6/site-packages/tensorflow/python/summary/writer/writer_cache.py in get(logdir)\r\n     61       if logdir not in FileWriterCache._cache:\r\n     62         FileWriterCache._cache[logdir] = FileWriter(\r\n---> 63             logdir, graph=ops.get_default_graph())\r\n     64       return FileWriterCache._cache[logdir]\r\n\r\n~/tf2-venv/lib/python3.6/site-packages/tensorflow/python/summary/writer/writer.py in __init__(self, logdir, graph, max_queue, flush_secs, graph_def, filename_suffix, session)\r\n    358     if context.executing_eagerly():\r\n    359       raise RuntimeError(\r\n--> 360           \"tf.summary.FileWriter is not compatible with eager execution. \"\r\n    361           \"Use tf.contrib.summary instead.\")\r\n    362     if session is not None:\r\n\r\nRuntimeError: tf.summary.FileWriter is not compatible with eager execution. Use tf.contrib.summary instead.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27544", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27544/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27544/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27544/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27544", "id": 429839559, "node_id": "MDU6SXNzdWU0Mjk4Mzk1NTk=", "number": 27544, "title": "tf.add_n is inaccurate for float16", "user": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-05T16:30:46Z", "updated_at": "2019-04-16T21:58:42Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): master\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n`tf.add_n` is insufficiently accurate with `float16` precision for large scale training, for two reasons:\r\n\r\n1. It sums the numbers serially, rather than in tree order.  As a result, we get stuff like this:\r\n\r\n```\r\n>>> f = lambda x: tf.constant(x, dtype=tf.float16)\r\n>>> tf.add_n([f(1)]+[f(2**-11)]*7).numpy()\r\n1.0\r\n>>> tf.add_n([f(2**-11)]*7+[f(1)]).numpy()\r\n1.004\r\n```\r\n\r\n2. It uses intermediate `float16` values, even though it would be cheap to use intermediate `float32` values.\r\n\r\nI'd like to fix this by (1) using tree order in the Eigen kernels and (2) making the op cast up to `float32`, do the sum in `float32`, then downcast back to `float16`.\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nPeople using `float16` training (primarily GPU users).\r\n\r\n**Any Other info.**\r\n\r\n`tf.add_n` is memory bandwidth limited, so there should be negligible slowdown."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27537", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27537/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27537/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27537/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27537", "id": 429687863, "node_id": "MDU6SXNzdWU0Mjk2ODc4NjM=", "number": 27537, "title": "Unexpected UnicodeDecodeError: invalid continuation byte when reading lines from a file", "user": {"login": "alter-bug-tracer", "id": 49273240, "node_id": "MDQ6VXNlcjQ5MjczMjQw", "avatar_url": "https://avatars2.githubusercontent.com/u/49273240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alter-bug-tracer", "html_url": "https://github.com/alter-bug-tracer", "followers_url": "https://api.github.com/users/alter-bug-tracer/followers", "following_url": "https://api.github.com/users/alter-bug-tracer/following{/other_user}", "gists_url": "https://api.github.com/users/alter-bug-tracer/gists{/gist_id}", "starred_url": "https://api.github.com/users/alter-bug-tracer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alter-bug-tracer/subscriptions", "organizations_url": "https://api.github.com/users/alter-bug-tracer/orgs", "repos_url": "https://api.github.com/users/alter-bug-tracer/repos", "events_url": "https://api.github.com/users/alter-bug-tracer/events{/privacy}", "received_events_url": "https://api.github.com/users/alter-bug-tracer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-05T10:29:22Z", "updated_at": "2019-05-24T17:57:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04.5 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n**Describe the current behavior**\r\nUnexpected and undocumented runtime exception/error when handling malformed data.\r\n\r\n**Describe the expected behavior**\r\nExpected a \"TypeError\" or an empty list as a result.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport csv\r\nimport sys\r\nimport tensorflow as tf\r\n\r\ninput_file_name = sys.argv[1]\r\n\r\nwith tf.gfile.Open(input_file_name, \"r\") as f:\r\n  reader = csv.reader(f, delimiter=\"\\t\", quotechar=None)\r\n  for line in reader:\r\n    print(line)\r\n```\r\nRun with the path to the attached file as a command line argument.\r\n\r\n**Other info / logs**\r\n\r\nTraceback (most recent call last):\r\n  File \"tensorflow_bug.py\", line 9, in <module>\r\n    for line in reader:\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/lib/io/file_io.py\", line 220, in \\_\\_next\\_\\_\r\n    return self.next()\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/lib/io/file_io.py\", line 214, in next\r\n    retval = self.readline()\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/lib/io/file_io.py\", line 184, in readline\r\n    return self._prepare_value(self._read_buf.ReadLineAsString())\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/lib/io/file_io.py\", line 100, in _prepare_value\r\n    return compat.as_str_any(val)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/compat.py\", line 107, in as_str_any\r\n    return as_str(value)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/compat.py\", line 80, in as_text\r\n    return bytes_or_text.decode(encoding)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xed in position 0: invalid continuation byte\r\n\r\n[corrupted_file1.zip](https://github.com/tensorflow/tensorflow/files/3047460/corrupted_file1.zip)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27534", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27534/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27534/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27534/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27534", "id": 429626067, "node_id": "MDU6SXNzdWU0Mjk2MjYwNjc=", "number": 27534, "title": "What's the license of pre-trained TensorFlow.js models?", "user": {"login": "philipphenkel", "id": 828416, "node_id": "MDQ6VXNlcjgyODQxNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/828416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philipphenkel", "html_url": "https://github.com/philipphenkel", "followers_url": "https://api.github.com/users/philipphenkel/followers", "following_url": "https://api.github.com/users/philipphenkel/following{/other_user}", "gists_url": "https://api.github.com/users/philipphenkel/gists{/gist_id}", "starred_url": "https://api.github.com/users/philipphenkel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philipphenkel/subscriptions", "organizations_url": "https://api.github.com/users/philipphenkel/orgs", "repos_url": "https://api.github.com/users/philipphenkel/repos", "events_url": "https://api.github.com/users/philipphenkel/events{/privacy}", "received_events_url": "https://api.github.com/users/philipphenkel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-05T07:48:55Z", "updated_at": "2019-04-09T18:53:00Z", "closed_at": null, "author_association": "NONE", "body": "I want to use tfjs-models in a commercial application. While source code in the [tfjs-models repository](https://github.com/tensorflow/tfjs-models) is licensed under Apache 2.0, I did not find any info about the license of the models hosted on storage.googleapis.com.\r\n\r\nFor example [body-pix](https://github.com/tensorflow/tfjs-models/tree/master/body-pix) is loading its model from [storage.googleapis.com/tfjs-models](https://storage.googleapis.com/tfjs-models)\r\ne.g.\r\n[posenet_mobilenet_025_partmap/model.json](https://storage.googleapis.com/tfjs-models/savedmodel/posenet_mobilenet_025_partmap/model.json)\r\n[posenet_mobilenet_025_partmap/tensorflowjs_model.p](https://storage.googleapis.com/tfjs-models/savedmodel/posenet_mobilenet_025_partmap/tensorflowjs_model.pb)\r\n[posenet_mobilenet_025_partmap/weights_manifest.json](https://storage.googleapis.com/tfjs-models/savedmodel/posenet_mobilenet_025_partmap/weights_manifest.json)\r\n\r\nAre the files on [storage.googleapis.com/tfjs-models](https://storage.googleapis.com/tfjs-models) licensed under Apache 2.0 as well?\r\n\r\nIf yes, it would be great to document it, and I'm willing to submit a PR.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27532", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27532/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27532/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27532/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27532", "id": 429592673, "node_id": "MDU6SXNzdWU0Mjk1OTI2NzM=", "number": 27532, "title": "Custom Object Detection crashes when convert_to_grayscale is enabled.", "user": {"login": "kmadhugit", "id": 8188686, "node_id": "MDQ6VXNlcjgxODg2ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8188686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmadhugit", "html_url": "https://github.com/kmadhugit", "followers_url": "https://api.github.com/users/kmadhugit/followers", "following_url": "https://api.github.com/users/kmadhugit/following{/other_user}", "gists_url": "https://api.github.com/users/kmadhugit/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmadhugit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmadhugit/subscriptions", "organizations_url": "https://api.github.com/users/kmadhugit/orgs", "repos_url": "https://api.github.com/users/kmadhugit/repos", "events_url": "https://api.github.com/users/kmadhugit/events{/privacy}", "received_events_url": "https://api.github.com/users/kmadhugit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-05T05:49:26Z", "updated_at": "2019-08-29T15:46:08Z", "closed_at": null, "author_association": "NONE", "body": "**System Information:**\r\n* OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave 10.14.2\r\n* Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy): NA\r\n* TensorFlow installed from (source or binary): binary\r\n* TensorFlow version: 1.12.0\r\n* Python version: 3.6\r\n* Installed using virtualenv? pip? conda?: Conda\r\n* Bazel version (if compiling from source): NA\r\n* GCC/Compiler version (if compiling from source): NA\r\n* CUDA/cuDNN version: NA\r\n* GPU model and memory: NA\r\n\r\n\r\n**Problem Description:**\r\n\r\nEnabling convert_to_grayscale option in image_resizer pipeline.config for FASTER_RCNN Object detection causes failure during export. The training runs without any issue. \r\n\r\n**Error Log:**\r\n\r\n2019-04-05 09:39:01.001689: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\n2019-04-05 09:39:01.002097: I tensorflow/core/common_runtime/process_util.cc:69] Creating new thread pool with default inter op setting: 8. Tune using inter_op_parallelism_threads for best performance.\r\nTraceback (most recent call last):\r\n  File \"/Users/madhukandasamy/miniconda3/envs/cs-object-detection/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1334, in _do_call\r\n    return fn(*args)\r\n  File \"/Users/madhukandasamy/miniconda3/envs/cs-object-detection/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1319, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/Users/madhukandasamy/miniconda3/envs/cs-object-detection/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1407, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: **Assign requires shapes of both tensors to match. lhs shape= [7,7,1,8] rhs shape= [7,7,3,8]**\r\n\t [[{{node save/Assign_10}} = Assign[T=DT_FLOAT, _class=[\"loc:@FirstStageFeatureExtractor/InceptionV2/Conv2d_1a_7x7/depthwise_weights\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](FirstStageFeatureExtractor/InceptionV2/Conv2d_1a_7x7/depthwise_weights, save/RestoreV2:10)]]\r\n\r\n**Steps to reproduce:**\r\n\r\nFollow the documented steps to do custom object detection with pretained model faster_rcnn_inception_v2_coco[http://download.tensorflow.org/models/object_detection/faster_rcnn_inception_v2_coco_2018_01_28.tar.gz]  as a starting point. \r\nUse default values wherever applicable in the pipeline config.\r\nEnable convert_to_grayscale option for image_resizer in the pipeline config.\r\n```python   image_resizer {\r\n      keep_aspect_ratio_resizer {\r\n        min_dimension: 600\r\n        max_dimension: 1024\r\n        convert_to_grayscale: true\r\n      }\r\n```\r\n\r\nRun the training(just one or two steps is sufficient) and export the model as per documentation.Notice the failure during export.\r\n\r\n**Initial Analysis:**\r\n\r\nThe convert_to_grayscale() image resizer modifies the input image from (H, W, 3, 8) => (H, W, 1, 8) during pre-process. This works fine during training and models is being checkpointed without any issue. When we try to freeze the model by reading from the checkpoint, its done as two parts. The graph definition is built using _build_detection_graph() and values are read later from the check-point data. The graph definition is built without considering the changes to the number of channels(it should be taking care of width and height) by the image resizer. This keeps the number of channels un-changed(i.e kept as 3) in defintion, where as the actual check-point data is accounted only for one channel."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27531", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27531/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27531/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27531/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27531", "id": 429591767, "node_id": "MDU6SXNzdWU0Mjk1OTE3Njc=", "number": 27531, "title": "TF2.0 / `SequenceFeatures` doesn't have a `_is_feature_layer` property.", "user": {"login": "seungbaeji", "id": 24621491, "node_id": "MDQ6VXNlcjI0NjIxNDkx", "avatar_url": "https://avatars1.githubusercontent.com/u/24621491?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seungbaeji", "html_url": "https://github.com/seungbaeji", "followers_url": "https://api.github.com/users/seungbaeji/followers", "following_url": "https://api.github.com/users/seungbaeji/following{/other_user}", "gists_url": "https://api.github.com/users/seungbaeji/gists{/gist_id}", "starred_url": "https://api.github.com/users/seungbaeji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seungbaeji/subscriptions", "organizations_url": "https://api.github.com/users/seungbaeji/orgs", "repos_url": "https://api.github.com/users/seungbaeji/repos", "events_url": "https://api.github.com/users/seungbaeji/events{/privacy}", "received_events_url": "https://api.github.com/users/seungbaeji/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-05T05:44:58Z", "updated_at": "2019-09-25T00:00:44Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0-alpha\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI follow the example [Classify structred data](https://www.tensorflow.org/alpha/tutorials/keras/feature_columns) as below:\r\n```\r\nfeature_layer = SequenceFeatures(columns, name=INPUT_NAME)\r\n\r\nmodel = keras.Sequential([\r\n    feature_layer,\r\n    keras.layers.LSTM(1, return_sequence=True),\r\n    keras.layers.LSTM(1),\r\n    keras.layers.Dense(1, activation='relu', name=OUTPUT_NAME)\r\n])\r\n\r\nmodel.compile(optimizer='adam', loss='mse')\r\nmodel.fit(DATASET, epochs=5)\r\n```\r\nand it shows an error:\r\n`ValueError: Passing a dictionary input to a Sequential Model which doesn't have FeatureLayer as the first layer is an error.`\r\n\r\nHowever, I found the reason that `SequenceFeatures` doesn't have a property `is_feature_layer` as below:\r\n```\r\n## tensorflow/python/keras/engine/training_utils.py\r\n# TODO(rohanj): This is a hack to get around not depending on feature_column and\r\n# create a cyclical dependency. Figure out a cleaner solution\r\ndef is_feature_layer(layer):\r\n  \"\"\"Returns whether `layer` is a FeatureLayer or not.\"\"\"\r\n  return getattr(layer, '_is_feature_layer', False)\r\n\r\n## tensorflow/python/feature_column/feature_column_v2.py\r\n@keras_export('keras.layers.DenseFeatures')\r\nclass DenseFeatures(_BaseFeaturesLayer):\r\n  def __init__(self, feature_columns, trainable=True, name=None, **kwargs):\r\n\r\n    super(DenseFeatures, self).__init__(\r\n        feature_columns=feature_columns,\r\n        trainable=trainable,\r\n        name=name,\r\n        expected_column_type=DenseColumn,\r\n        **kwargs)\r\n\r\n  @property\r\n  def _is_feature_layer(self):\r\n    return True\r\n   \r\n  def _target_shape(self, input_shape, total_elements):\r\n    return (input_shape[0], total_elements)\r\n    ...\r\n\r\n## tensorflow/python/feature_column/sequence_feature_column.py\r\n@keras_export('keras.experimental.SequenceFeatures')\r\nclass SequenceFeatures(fc._BaseFeaturesLayer):\r\n    def __init__(self, feature_columns, trainable=True, name=None, **kwargs):\r\n\r\n    super(SequenceFeatures, self).__init__(\r\n        feature_columns=feature_columns,\r\n        trainable=trainable,\r\n        name=name,\r\n        expected_column_type=fc.SequenceDenseColumn,\r\n        **kwargs)\r\n\r\n  def _target_shape(self, input_shape, total_elements):\r\n    return (input_shape[0], input_shape[1], total_elements)\r\n   ...\r\n```\r\nI think it would be better to move the `_is_feature_layer` property to the`_BaseFeaturesLayer` for a while.\r\n \r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27527", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27527/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27527/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27527/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27527", "id": 429553164, "node_id": "MDU6SXNzdWU0Mjk1NTMxNjQ=", "number": 27527, "title": "Tensorflow C++ API on Windows/VS2015: unresolved external symbol", "user": {"login": "caocuong0306", "id": 25846896, "node_id": "MDQ6VXNlcjI1ODQ2ODk2", "avatar_url": "https://avatars1.githubusercontent.com/u/25846896?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caocuong0306", "html_url": "https://github.com/caocuong0306", "followers_url": "https://api.github.com/users/caocuong0306/followers", "following_url": "https://api.github.com/users/caocuong0306/following{/other_user}", "gists_url": "https://api.github.com/users/caocuong0306/gists{/gist_id}", "starred_url": "https://api.github.com/users/caocuong0306/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caocuong0306/subscriptions", "organizations_url": "https://api.github.com/users/caocuong0306/orgs", "repos_url": "https://api.github.com/users/caocuong0306/repos", "events_url": "https://api.github.com/users/caocuong0306/events{/privacy}", "received_events_url": "https://api.github.com/users/caocuong0306/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-05T02:02:35Z", "updated_at": "2019-10-19T19:57:26Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.13.1\r\n- Python version: 3.5\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.19\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 9.2\r\n- GPU model and memory: Nvidia GTX 1070\r\n\r\n**Describe the problem**\r\n\r\nI successfully built Tensorflow using Bazel from source.\r\n\r\nI obtained the following files.\r\n\r\n- bazel-bin\\tensorflow\\libtensorflow_cc.dll (renamed from libtensorflow_cc.so)\r\n- bazel-bin\\tensorflow\\libtensorflow_cc.lib (renamed from liblibtensorflow_cc.so.ifso)\r\n- bazel-bin\\tensorflow\\libtensorflow_framework.dll (renamed from libtensorflow_framework.so)\r\n- bazel-bin\\tensorflow\\libtensorflow_framework.lib (renamed from liblibtensorflow_framework.so.ifso)\r\n\r\nIn Visual Studio 2015\r\n\r\n- I included headers from bazel-genfiles (include/, third_pary/, com_google_absl, com_googlesource_code_re2, protobuf_archive\\src, etc)\r\n- I also configured Linked to link with .lib files.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nIn the code, I simply declare the following param:\r\nauto root = tensorflow::Scope::NewRootScope();\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSource\tSuppression State\r\nError\tLNK1120\t3 unresolved externals\tProgram\tD:\\Project_Tensorflow\\x64\\Release\\Program.exe\t1\tBuild\t\r\nError\tLNK2011\tprecompiled object not linked in; image may not run\tProgram\tD:\\Project_Tensorflow\\Program\\TestTensorflow.obj\t1\tBuild\t\r\nError\tLNK2001\tunresolved external symbol \"public: static class tensorflow::Scope __cdecl tensorflow::Scope::NewRootScope(void)\" (?NewRootScope@Scope@tensorflow@@SA?AV12@XZ)\tProgram\tD:\\Project_Tensorflow\\Program\\utils.obj\t1\tBuild\t\r\nError\tLNK2001\tunresolved external symbol \"public: __cdecl tensorflow::Scope::~Scope(void)\" (??1Scope@tensorflow@@QEAA@XZ)\tProgram\tD:\\Project_Tensorflow\\Program\\utils.obj\t1\tBuild\t\r\n\r\nPlease help if you have an idea. Thank you very much.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27521", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27521/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27521/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27521/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27521", "id": 429451577, "node_id": "MDU6SXNzdWU0Mjk0NTE1Nzc=", "number": 27521, "title": "Bug in tf.parallel_stack", "user": {"login": "mahmoud-abuzaina", "id": 24963061, "node_id": "MDQ6VXNlcjI0OTYzMDYx", "avatar_url": "https://avatars3.githubusercontent.com/u/24963061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mahmoud-abuzaina", "html_url": "https://github.com/mahmoud-abuzaina", "followers_url": "https://api.github.com/users/mahmoud-abuzaina/followers", "following_url": "https://api.github.com/users/mahmoud-abuzaina/following{/other_user}", "gists_url": "https://api.github.com/users/mahmoud-abuzaina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mahmoud-abuzaina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mahmoud-abuzaina/subscriptions", "organizations_url": "https://api.github.com/users/mahmoud-abuzaina/orgs", "repos_url": "https://api.github.com/users/mahmoud-abuzaina/repos", "events_url": "https://api.github.com/users/mahmoud-abuzaina/events{/privacy}", "received_events_url": "https://api.github.com/users/mahmoud-abuzaina/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-04T19:44:57Z", "updated_at": "2019-04-05T21:01:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): master branch from 9e0b9b9ff2b01e07c2a71ce0fbbae93a4bba86f9 and onward\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.23.0\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\ntf.parallel_stack is producing incorrect output.\r\n**Describe the expected behavior**\r\ntf.parallel_stack has to have same output as tf.stack or tf.concat\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nThe below reproducer code/test passes with any commit that precedes 9e0b9b9ff2b01e07c2a71ce0fbbae93a4bba86f9\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ngraph = tf.Graph()\r\nwith graph.as_default():\r\n  images = np.random.random_sample((100, 24, 24, 3))\r\n  parallel_stacked_images = tf.parallel_stack(images)\r\n  stacked_images = tf.stack(images)\r\n  concatenated_images = tf.concat(images, 0)\r\n\r\nwith tf.Session(graph=graph) as sess:\r\n  np_parallel_stacked_images, np_stacked_images, np_concatenated_images = sess.run(\r\n    [parallel_stacked_images, stacked_images, concatenated_images])\r\n\r\nif np.array_equal(np_parallel_stacked_images, np_stacked_images):\r\n  print (\"Pass: outputs of tf.parallel_stack and tf.stack are equal\")\r\nelse:\r\n  print (\"Fail: outputs of tf.parallel_stack and tf.stack are not equal\")\r\n\r\nif np.array_equal(np_parallel_stacked_images, np_concatenated_images):\r\n  print (\"Pass: outputs of tf.parallel_stack and tf.concat are equal\")\r\nelse:\r\n  print (\"Fail: outputs of tf.parallel_stack and tf.concat are not equal\")\r\n```\r\n\r\n**Other info / logs**\r\nWe have debugged this issue and found that this commit 9e0b9b9ff2b01e07c2a71ce0fbbae93a4bba86f9 actually causes the bug. That commit changes the set of `Edge`s in the graph from std::set (ordered) to gtl::FlatSet (unordered). TF has a graph optimizer pass for parallel_stack (or parallel_concat) that replaces ParallelConcat node with several _ParallelConcatUpdate nodes. But it seems that it assumes all in_edges are ordered which is not the case with gtl::FlatSet. Therefore, there is a problem in updating the output buffer that is using the incremental index (the `loc` attribute) which does not correspond to the right input_edge. In particular, I am talking about this code: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/parallel_concat_optimizer.cc#L83\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27520", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27520/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27520/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27520/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27520", "id": 429434748, "node_id": "MDU6SXNzdWU0Mjk0MzQ3NDg=", "number": 27520, "title": "segmentation fault using tensorflow debugger", "user": {"login": "hugo-boser", "id": 41961612, "node_id": "MDQ6VXNlcjQxOTYxNjEy", "avatar_url": "https://avatars2.githubusercontent.com/u/41961612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugo-boser", "html_url": "https://github.com/hugo-boser", "followers_url": "https://api.github.com/users/hugo-boser/followers", "following_url": "https://api.github.com/users/hugo-boser/following{/other_user}", "gists_url": "https://api.github.com/users/hugo-boser/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugo-boser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugo-boser/subscriptions", "organizations_url": "https://api.github.com/users/hugo-boser/orgs", "repos_url": "https://api.github.com/users/hugo-boser/repos", "events_url": "https://api.github.com/users/hugo-boser/events{/privacy}", "received_events_url": "https://api.github.com/users/hugo-boser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-04T19:01:32Z", "updated_at": "2019-04-17T21:12:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\nWhen i type run in tfdbg i get a segmentation fault.\r\n\r\n**System information**\r\n- Have I written custom code?\r\nyes i have.\r\n- OS Platform and Distribution:\r\nkali linux rolling 2019 (see tf_env)\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\nnot compiled from source\r\n- CUDA/cuDNN version:\r\ni don't know what CUDA is but i don't have Nvidia GPU i think but radeon amd?\r\ni think tensorflow runs on my cpu?\r\n- GPU model and memory:\r\n lspci -vnn | grep VGA -A 12\r\n01:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Thames [Radeon HD 7500M/7600M Series] [1002:6840] (prog-if 00 [VGA controller])\r\n\tSubsystem: Toshiba America Info Systems Radeon HD 7670M [1179:fb22]\r\n\tFlags: bus master, fast devsel, latency 0, IRQ 29\r\n\tMemory at b0000000 (64-bit, prefetchable) [size=256M]\r\n\tMemory at c0000000 (64-bit, non-prefetchable) [size=128K]\r\n\tI/O ports at 3000 [size=256]\r\n\tExpansion ROM at 000c0000 [disabled] [size=128K]\r\n\tCapabilities: [50] Power Management version 3\r\n\tCapabilities: [58] Express Legacy Endpoint, MSI 00\r\n\tCapabilities: [a0] MSI: Enable+ Count=1/1 Maskable- 64bit+\r\n\tCapabilities: [100] Vendor Specific Information: ID=0001 Rev=1 Len=010 <?>\r\n\tCapabilities: [150] Advanced Error Reporting\r\n\tKernel driver in use: radeon\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\noutput of tf_env_collect.sh:\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/3045026/tf_env.txt)\r\n\r\n\r\nYou can also obtain the TensorFlow version \r\nwith\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\ni installed tensorflow in pycharm using pip (my projects uses the system interpreter)\r\ntf.VERSION:\r\n1.13.1\r\ntf.GIT_VERSION:\r\nb'v1.13.0-rc2-5-g6612da8'\r\n\r\n**Describe the current behavior**\r\nI first go to a terminal and type the following:\r\ntensorboard --logdir=/root/files/Tensorboard/logs/ --debugger_port=6064\r\nthen in another terminal i type:\r\npython3 NeuralNetwork.py --debug\r\ni then see the run-start CLI like this.\r\n![Schermafdruk van 2019-04-04 20-48-05](https://user-images.githubusercontent.com/41961612/55580465-e5f02e80-571a-11e9-9d56-e0ebe3fea6b5.png)\r\n\r\nthen i type run and i get an segmentation fault.\r\n![Schermafdruk van 2019-04-04 20-50-34](https://user-images.githubusercontent.com/41961612/55580547-13d57300-571b-11e9-9b43-4dc0c2733fc5.png)\r\n\r\n\r\n\r\n**Describe the expected behavior**\r\nthe expected behavior i think is that the run command would not crash the debugger.\r\n\r\n**Code to reproduce the issue**\r\n[Example.txt](https://github.com/tensorflow/tensorflow/files/3044988/Example.txt)\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27502", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27502/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27502/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27502/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27502", "id": 429192698, "node_id": "MDU6SXNzdWU0MjkxOTI2OTg=", "number": 27502, "title": "A result calculated inside of the tf.while_loop is wrong and not raising any error/alert when it occurred by GPU OOM.", "user": {"login": "Han-sok", "id": 39740632, "node_id": "MDQ6VXNlcjM5NzQwNjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/39740632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Han-sok", "html_url": "https://github.com/Han-sok", "followers_url": "https://api.github.com/users/Han-sok/followers", "following_url": "https://api.github.com/users/Han-sok/following{/other_user}", "gists_url": "https://api.github.com/users/Han-sok/gists{/gist_id}", "starred_url": "https://api.github.com/users/Han-sok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Han-sok/subscriptions", "organizations_url": "https://api.github.com/users/Han-sok/orgs", "repos_url": "https://api.github.com/users/Han-sok/repos", "events_url": "https://api.github.com/users/Han-sok/events{/privacy}", "received_events_url": "https://api.github.com/users/Han-sok/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-04T10:08:31Z", "updated_at": "2019-04-09T20:39:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): NO\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 x64 with tensorflow on Spyder IDE\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): Not applicable\r\n- GCC/Compiler version (if compiling from source): Not applicable\r\n- CUDA/cuDNN version: CUDA 10.0 / cuDNN 7.5.0\r\n- GPU model and memory: Titan RTX w/ 24.0GB of mem.\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nWhen we are dealing with huge data that are going to be processed by any tf operations, tf.while_loop does not raise any error/flag/alert when it reaches to the GPU memory limit and thus getting the wrong result. I think you should add some assertion so that people can learn what's the problem.\r\n\r\nHere's the output\r\nWARNING:tensorflow:From C:\\Users\\SHS\\Anaconda3\\envs\\tf_gpu\\lib\\site-packages\\tensorflow\\python\\ops\\tensor_array_ops.py:162: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\nshapes?  (?, **512**, 16, 16) (?, **512**, 16, 16)\r\nvalues?  [[0. 0.]\r\n [0. 0.]] [[0. 0.]\r\n [0. 0.]] **>> Shouldn't be zeros. Have to be some numbers because I assigned random number and multiplied them.**\r\niterations?  50\r\nResult? [[ -8.234    0.3125]\r\n [ -7.92   -10.53  ]]\r\n\r\nrunfile('C:/Users/SHS/FPGA Project files/Practices/test_for_fl16.py', wdir='C:/Users/SHS/FPGA Project files/Practices')\r\nshapes?  (?, **64**, 16, 16) (?, **64**, 16, 16)\r\nvalues?  [[-16.64  42.38]\r\n [ 37.9   34.2 ]] [[  3.514 -10.414]\r\n [ 20.88   24.62 ]] >> **when I reduce the data size it gives me the right values.**\r\niterations?  50\r\nResult? [[-3.031   -0.01172]\r\n [-5.043    2.027  ]]\r\n\r\n**Describe the expected behavior**\r\nOutput printed should not be zeros, because I assigned some random number.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nimport tensorflow as tf\r\nimport numpy as np\r\n    \r\nsess = tf.InteractiveSession()\r\n\r\na = tf.random.uniform([512, 512, 16, 16], minval=-3, maxval=3, dtype=tf.float16)\r\nb = tf.random.uniform([512, 512, 16, 16], minval=-3, maxval=3, dtype=tf.float16)\r\nc = tf.random.uniform([50, 512, 16, 16], minval=-3, maxval=3, dtype=tf.float16)\r\nd = tf.random.uniform([50, 512, 16, 16], minval=-3, maxval=3, dtype=tf.float16)\r\n\r\ni = 0\r\nreal = tf.TensorArray(dtype=tf.float16, size=50, name='REAL')\r\nimag = tf.TensorArray(dtype=tf.float16, size=50, name='IMAG')\r\nloop_cond = lambda i, *_: i < 50\r\ndef loop_body(i, r_array, i_array):\r\n  r_array = r_array.write(i, tf.subtract(tf.multiply(a,c[i]), tf.multiply(b,d[i])))\r\n  i_array = i_array.write(i, tf.add(tf.multiply(a,d[i]), tf.multiply(b,c[i])))\r\n  i += 1\r\n  return i, r_array, i_array\r\ni, real, imag = tf.while_loop(loop_cond, loop_body, loop_vars=[i, real, imag])\r\n\r\nreal = real.stack()\r\nimag = imag.stack()\r\nreal = tf.reduce_sum(real, axis=2)\r\nimag = tf.reduce_sum(imag, axis=2)\r\nprint('shapes? ', real.shape, imag.shape)\r\nprint('values? ', sess.run(real[0,0, :2, :2]), imag.eval()[0,0, :2, :2])\r\nprint('iterations? ', i.eval())\r\n\r\ni = 0\r\ntt = tf.add(tf.multiply(a,c[i]), tf.multiply(b,d[i]))\r\nprint('Result?', tt.eval()[0,0,:2,:2])\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27500", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27500/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27500/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27500/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27500", "id": 429170141, "node_id": "MDU6SXNzdWU0MjkxNzAxNDE=", "number": 27500, "title": "[Grappler] RemoveIdentityTranspose also removes conjugate", "user": {"login": "jheymann85", "id": 9553105, "node_id": "MDQ6VXNlcjk1NTMxMDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/9553105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jheymann85", "html_url": "https://github.com/jheymann85", "followers_url": "https://api.github.com/users/jheymann85/followers", "following_url": "https://api.github.com/users/jheymann85/following{/other_user}", "gists_url": "https://api.github.com/users/jheymann85/gists{/gist_id}", "starred_url": "https://api.github.com/users/jheymann85/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jheymann85/subscriptions", "organizations_url": "https://api.github.com/users/jheymann85/orgs", "repos_url": "https://api.github.com/users/jheymann85/repos", "events_url": "https://api.github.com/users/jheymann85/events{/privacy}", "received_events_url": "https://api.github.com/users/jheymann85/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-04T09:20:29Z", "updated_at": "2019-04-08T23:20:25Z", "closed_at": null, "author_association": "NONE", "body": "\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.13\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: 10.0\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: see below\r\n\r\n\r\nDuring graph optimization, `RemoveIdentityTranspose` also removes a transpose if it conjugates the input (see [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/optimizers/arithmetic_optimizer.cc#L1092))\r\n\r\nSimple example:\r\n```\r\nimport tensorflow as tf\r\nwith tf.Graph().as_default():\r\n    sess = tf.Session()\r\n    a = tf.placeholder(tf.complex64)\r\n    data = [[1j], [1j]]\r\n    print(sess.run(tf.transpose(a, (0, 1), conjugate=True), {a: data}))  # not optimized\r\n    print(sess.run(tf.transpose(a, (0, 1), conjugate=True) + 1, {a: data}))  # optimized, no conjugate will be applied\r\n    print(sess.run(tf.conj(a) + 1, {a: data}))\r\n```\r\n\r\nOutput:\r\n```\r\n[[0.-1.j]\r\n [0.-1.j]]\r\n[[1.+1.j]\r\n [1.+1.j]]\r\n[[1.-1.j]\r\n [1.-1.j]]\r\n```\r\n\r\nThis can happen when using einsum/tensordot and a probably related issue is [#19771](https://github.com/tensorflow/tensorflow/issues/19771)\r\n\r\nA possible fix would be to also check for `IsConjugateTranspose` [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/optimizers/arithmetic_optimizer.cc#L1137) "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27492", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27492/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27492/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27492/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27492", "id": 429099163, "node_id": "MDU6SXNzdWU0MjkwOTkxNjM=", "number": 27492, "title": "Use of tf.custom_gradient prevents garbage collection of Graph", "user": {"login": "matthen", "id": 1408110, "node_id": "MDQ6VXNlcjE0MDgxMTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1408110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthen", "html_url": "https://github.com/matthen", "followers_url": "https://api.github.com/users/matthen/followers", "following_url": "https://api.github.com/users/matthen/following{/other_user}", "gists_url": "https://api.github.com/users/matthen/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthen/subscriptions", "organizations_url": "https://api.github.com/users/matthen/orgs", "repos_url": "https://api.github.com/users/matthen/repos", "events_url": "https://api.github.com/users/matthen/events{/privacy}", "received_events_url": "https://api.github.com/users/matthen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-04T06:10:12Z", "updated_at": "2019-05-17T16:23:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOs 10.14\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): pip install tensorflow==1.13.1\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.6.4\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n**Describe the current behavior**\r\n\r\nUsing an op decorated with `tf.custom_gradient` prevents the `tf.Graph` it was created in from being garbage collected later. So if a script creates multiple such graphs in a row, it will use more and more memory unnecessarily.\r\nI believe it's due to the `Graph` being held as an indirect reference to the custom gradient registry.\r\n\r\n**Describe the expected behavior**\r\n\r\nIdeally such a `Graph` would not be referenced forever, allowing it to be garbage-collected.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport gc\r\nimport objgraph\r\nimport tensorflow as tf\r\n\r\n\r\n@tf.custom_gradient\r\ndef op(x):\r\n    def grad(dy):\r\n        return dy * 10.0\r\n    return x, grad\r\n\r\n\r\ndef run(use_custom_gradient):\r\n    with tf.Session(graph=tf.Graph()) as sess:\r\n        x = tf.constant([1, 2, 3])\r\n        if use_custom_gradient:\r\n            print(\"(Using custom_gradient)\")\r\n            x = op(x)\r\n        sess.run(x)\r\n\r\n\r\ndef log():\r\n    gc.collect()\r\n    print(\r\n        \"number of uncollected graphs:\",\r\n        len(objgraph.by_type('Graph')))\r\n\r\n\r\nfor use_custom_gradient in [False, True, True, False, False, True]:\r\n    run(use_custom_gradient)\r\n    log()\r\n```\r\n\r\noutputs:\r\n\r\n```\r\nnumber of uncollected graphs: 0\r\n(Using custom_gradient)\r\nnumber of uncollected graphs: 1\r\n(Using custom_gradient)\r\nnumber of uncollected graphs: 2\r\nnumber of uncollected graphs: 2\r\nnumber of uncollected graphs: 2\r\n(Using custom_gradient)\r\nnumber of uncollected graphs: 3\r\n```\r\n\r\n(ideally it should always say `number of uncollected graphs: 0`)\r\n\r\n**Other info / logs**\r\nn/a\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27487", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27487/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27487/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27487/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27487", "id": 429055753, "node_id": "MDU6SXNzdWU0MjkwNTU3NTM=", "number": 27487, "title": "Non-OK-status for CudaLaunchKernel when torch is also imported", "user": {"login": "apollokit", "id": 9410259, "node_id": "MDQ6VXNlcjk0MTAyNTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/9410259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apollokit", "html_url": "https://github.com/apollokit", "followers_url": "https://api.github.com/users/apollokit/followers", "following_url": "https://api.github.com/users/apollokit/following{/other_user}", "gists_url": "https://api.github.com/users/apollokit/gists{/gist_id}", "starred_url": "https://api.github.com/users/apollokit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apollokit/subscriptions", "organizations_url": "https://api.github.com/users/apollokit/orgs", "repos_url": "https://api.github.com/users/apollokit/repos", "events_url": "https://api.github.com/users/apollokit/events{/privacy}", "received_events_url": "https://api.github.com/users/apollokit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-04-04T02:35:25Z", "updated_at": "2020-01-08T22:35:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04.2 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary (pip installed)\r\n- TensorFlow version (use command below): tensorflow-gpu==2.0.0a0\r\n- Python version: Python 3.6.7\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: CUDA Version: 10.1? (10.0.130), CUDNN 7.4.2\r\n- GPU model and memory:  GeForce RTX 2080, 7949MiB\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nIf torch is imported before tensorflow, tensorflow is unable to use the GPU. It throws the following error:\r\n```\r\n2019-04-03 19:31:08.167586: F tensorflow/core/kernels/random_op_gpu.cu.cc:64] Non-OK-status: CudaLaunchKernel(FillPhiloxRandomKernelLaunch<Distribution>, num_blocks, block_size, 0, d.stream(), gen, data, size, dist) status: Internal: invalid configuration argument\r\nAborted (core dumped)\r\n```\r\nWhich is not very helpful for figuring out what the problem is\r\n\r\n**Describe the expected behavior**\r\n\r\nBoth torch and tensorflow can be imported in any order without GPU issues\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nif the import torch line below is commented out, this code works. If tensorflow is imported before torch, it will work as well.\r\n```\r\nfrom time import time\r\n\r\nimport torch\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import layers\r\nfrom predictor_brain import TFBrain\r\n\r\nimport numpy as np\r\ndata = np.random.random((10000, 32))\r\nlabels = np.random.random((10000, 10))\r\n\r\nmodel = tf.keras.Sequential([\r\n# Adds a densely-connected layer with 64 units to the model:\r\nlayers.Dense(64, activation='relu', input_shape=(32,)),\r\n# Add another:\r\nlayers.Dense(64, activation='relu'),\r\n# Add a softmax layer with 10 output units:\r\nlayers.Dense(10, activation='softmax')])\r\n\r\nmodel.compile(optimizer=tf.optimizers.Adam(0.001),\r\n              loss='categorical_crossentropy',\r\n              metrics=['accuracy'])\r\n\r\na = time()\r\nhist = model.fit(data, \r\n    labels,\r\n    epochs=10, \r\n    batch_size=32\r\n    )\r\nb = time()\r\nprint(f'time {b-a} seconds') \r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nThe pytorch version is:  torch==1.0.1.post2\r\n\r\nFrom executing the code above\r\n\r\n```\r\n$ python test.py\r\n2019-04-03 19:31:04.290594: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n FMA                                                                          \r\n2019-04-03 19:31:04.298331: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1\r\n2019-04-03 19:31:05.024887: I tensorflow/compiler/xla/service/service.cc:162] XLA service 0x4e83c10 executing computations on platform CUDA. Devices:\r\n2019-04-03 19:31:05.024921: I tensorflow/compiler/xla/service/service.cc:169]   StreamExecutor device (0): GeForce RTX 2080, Compute Capability 7.5\r\n2019-04-03 19:31:05.046149: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3493095000 Hz\r\n2019-04-03 19:31:05.047498: I tensorflow/compiler/xla/service/service.cc:162] XLA service 0x551b970 executing computations on platform Host. Devices:\r\n2019-04-03 19:31:05.047521: I tensorflow/compiler/xla/service/service.cc:169]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-04-03 19:31:05.048183: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1467] Found device 0 with properties:\r\nname: GeForce RTX 2080 major: 7 minor: 5 memoryClockRate(GHz): 1.71\r\npciBusID: 0000:42:00.0\r\ntotalMemory: 7.76GiB freeMemory: 7.65GiB\r\n2019-04-03 19:31:05.048206: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1546] Adding visible gpu devices: 0\r\n2019-04-03 19:31:07.731519: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1015] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-04-03 19:31:07.731583: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1021]      0\r\n2019-04-03 19:31:07.731590: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1034] 0:   N\r\n2019-04-03 19:31:07.732016: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1149] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6809 MB\r\n memory) -> physical GPU (device: 0, name: GeForce RTX 2080, pci bus id: 0000:42:00.0, compute capability: 7.5)\r\n2019-04-03 19:31:08.167586: F tensorflow/core/kernels/random_op_gpu.cu.cc:64] Non-OK-status: CudaLaunchKernel(FillPhiloxRandomKernelLaunch<Distribution>, num_blocks, blo\r\nck_size, 0, d.stream(), gen, data, size, dist) status: Internal: invalid configuration argument\r\nAborted (core dumped)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27477", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27477/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27477/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27477/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27477", "id": 428917215, "node_id": "MDU6SXNzdWU0Mjg5MTcyMTU=", "number": 27477, "title": "building pip package causes IndexError: list index out of range", "user": {"login": "preethivenkatesh", "id": 32650358, "node_id": "MDQ6VXNlcjMyNjUwMzU4", "avatar_url": "https://avatars2.githubusercontent.com/u/32650358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/preethivenkatesh", "html_url": "https://github.com/preethivenkatesh", "followers_url": "https://api.github.com/users/preethivenkatesh/followers", "following_url": "https://api.github.com/users/preethivenkatesh/following{/other_user}", "gists_url": "https://api.github.com/users/preethivenkatesh/gists{/gist_id}", "starred_url": "https://api.github.com/users/preethivenkatesh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/preethivenkatesh/subscriptions", "organizations_url": "https://api.github.com/users/preethivenkatesh/orgs", "repos_url": "https://api.github.com/users/preethivenkatesh/repos", "events_url": "https://api.github.com/users/preethivenkatesh/events{/privacy}", "received_events_url": "https://api.github.com/users/preethivenkatesh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-03T18:40:57Z", "updated_at": "2019-04-10T23:07:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: master branch\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: NA\r\n- Bazel version (if compiling from source): 0.22\r\n- GCC/Compiler version (if compiling from source): VC14\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\nTensorFlow successfully compiles a windows version, but building a pip package fails\r\n\r\n```\r\n(tf_113) C:\\Users\\pvenkat2\\Desktop\\tensorflow>bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\nINFO: Elapsed time: 41316.964s, Critical Path: 35436.10s\r\nINFO: 4534 processes: 4534 local.\r\nINFO: Build completed successfully, 6007 total actions\r\n\r\n(tf_113) C:\\Users\\pvenkat2\\Desktop\\tensorflow>bazel-bin\\tensorflow\\tools\\pip_package\\build_pip_package C:/Users/pvenkat2/Desktop/tensorflow_pkg\r\nWed Apr 3 09:43:33 PDT 2019 : === Preparing sources in dir: /tmp/tmp.sDKWoKSGMv\r\nUnzipping simple_console_for_windows.zip to create runfiles tree...\r\nUnzip finished.\r\n/c/Users/pvenkat2/Desktop/tensorflow /c/Users/pvenkat2/Desktop/tensorflow\r\n/c/Users/pvenkat2/Desktop/tensorflow\r\nWed Apr 3 10:43:07 PDT 2019 : === Building wheel\r\nwarning: no files found matching '*.pd' under directory '*'\r\nwarning: no files found matching '*.dll' under directory '*'\r\nwarning: no files found matching '*.h' under directory 'tensorflow\\include\\tensorflow'\r\nwarning: no files found matching '*' under directory 'tensorflow\\include\\Eigen'\r\nwarning: no files found matching '*.h' under directory 'tensorflow\\include\\google'\r\nwarning: no files found matching '*' under directory 'tensorflow\\include\\third_party'\r\nwarning: no files found matching '*' under directory 'tensorflow\\include\\unsupported'\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 304, in <module>\r\n    keywords='tensorflow tensor machine learning',\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\core.py\", line 148, in setup\r\n    dist.run_commands()\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\dist.py\", line 955, in run_commands\r\n    self.run_command(cmd)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\dist.py\", line 974, in run_command\r\n    cmd_obj.run()\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\site-packages\\wheel\\bdist_wheel.py\", line 179, in run\r\n    self.run_command('build')\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\cmd.py\", line 313, in run_command\r\n    self.distribution.run_command(command)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\dist.py\", line 974, in run_command\r\n    cmd_obj.run()\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\command\\build.py\", line 135, in run\r\n    self.run_command(cmd_name)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\cmd.py\", line 313, in run_command\r\n    self.distribution.run_command(command)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\dist.py\", line 974, in run_command\r\n    cmd_obj.run()\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\site-packages\\setuptools\\command\\build_ext.py\", line 75, in run\r\n    _build_ext.run(self)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\command\\build_ext.py\", line 339, in run\r\n    self.build_extensions()\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\command\\build_ext.py\", line 448, in build_extensions\r\n    self._build_extensions_serial()\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\command\\build_ext.py\", line 473, in _build_extensions_serial\r\n    self.build_extension(ext)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\site-packages\\setuptools\\command\\build_ext.py\", line 196, in build_extension\r\n    _build_ext.build_extension(self, ext)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\command\\build_ext.py\", line 558, in build_extension\r\n    target_lang=language)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\ccompiler.py\", line 717, in link_shared_object\r\n    extra_preargs, extra_postargs, build_temp, target_lang)\r\n  File \"C:\\Users\\pvenkat2\\AppData\\Local\\conda\\conda\\envs\\tf_113\\lib\\distutils\\_msvccompiler.py\", line 461, in link\r\n    build_temp = os.path.dirname(objects[0])\r\nIndexError: list index out of range\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27457", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27457/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27457/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27457/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27457", "id": 428665349, "node_id": "MDU6SXNzdWU0Mjg2NjUzNDk=", "number": 27457, "title": "Workaround for self-attention using tf.matmul", "user": {"login": "stefan-falk", "id": 43335432, "node_id": "MDQ6VXNlcjQzMzM1NDMy", "avatar_url": "https://avatars1.githubusercontent.com/u/43335432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefan-falk", "html_url": "https://github.com/stefan-falk", "followers_url": "https://api.github.com/users/stefan-falk/followers", "following_url": "https://api.github.com/users/stefan-falk/following{/other_user}", "gists_url": "https://api.github.com/users/stefan-falk/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefan-falk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefan-falk/subscriptions", "organizations_url": "https://api.github.com/users/stefan-falk/orgs", "repos_url": "https://api.github.com/users/stefan-falk/repos", "events_url": "https://api.github.com/users/stefan-falk/events{/privacy}", "received_events_url": "https://api.github.com/users/stefan-falk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-03T09:36:44Z", "updated_at": "2020-02-27T08:58:42Z", "closed_at": null, "author_association": "NONE", "body": "We are currently trying to convert a tensorflow model to a tf-lite graph. In particular we are working on a transformer which uses self-attention. The problem with that operation seems to be that `tf.matmul` receives two non-constant inputs which is, according to [the docs](https://www.tensorflow.org/lite/guide/ops_compatibility), not allowed:\r\n\r\n> `tf.matmul` - *as long as the second argument is constant and transposition is not used*\r\n\r\nThis seems like a major limitation for the self-attention mechanism. Is there any workaround available for this?\r\n\r\n(see also [stackoverflow question](https://stackoverflow.com/questions/55491752/workaround-for-using-tf-matmul-with-two-non-constant-inputs))"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27449", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27449/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27449/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27449/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27449", "id": 428587637, "node_id": "MDU6SXNzdWU0Mjg1ODc2Mzc=", "number": 27449, "title": "[Enhancement] Automatically chose either memory or storage to cache in tf.data API", "user": {"login": "BrEr", "id": 4420162, "node_id": "MDQ6VXNlcjQ0MjAxNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/4420162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BrEr", "html_url": "https://github.com/BrEr", "followers_url": "https://api.github.com/users/BrEr/followers", "following_url": "https://api.github.com/users/BrEr/following{/other_user}", "gists_url": "https://api.github.com/users/BrEr/gists{/gist_id}", "starred_url": "https://api.github.com/users/BrEr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BrEr/subscriptions", "organizations_url": "https://api.github.com/users/BrEr/orgs", "repos_url": "https://api.github.com/users/BrEr/repos", "events_url": "https://api.github.com/users/BrEr/events{/privacy}", "received_events_url": "https://api.github.com/users/BrEr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-03T06:27:56Z", "updated_at": "2019-04-10T20:18:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAt the moment, one has to keep in mind what the systems resources will be when using the tf.data pipeline API. Specifically, when using the https://www.tensorflow.org/api_docs/python/tf/data/Dataset#cache operation, I have to ask myself whether it's worth caching the data and whether to do so in memory or storage.\r\n\r\nAs I both switch systems and datasets a lot I often chose wrong and end up with filled swap memory or extremely slow epochs because I have caching disabled.\r\n\r\nWhat I would like to see, although I understand the complexities involved, is some sort of dynamic cache where the systems itself decides what to use (memory, storage or no caching), depending on available resources and the computations to cache.\r\n\r\nA intermediate solution might be one where the user can select how much memory (percentage) to use to cache and for the remaining required cache to use storage so we get some hybrid memory/storage solution.\r\n\r\n**Will this change the current api? How?**\r\nIt will either add to it or change the current cache() parameters. How and what's best here is not up to me.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone using the tf.data API looking to improve performance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27441", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27441/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27441/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27441/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27441", "id": 428529432, "node_id": "MDU6SXNzdWU0Mjg1Mjk0MzI=", "number": 27441, "title": "Failing on a in tensorflow_cc.so on Windows 7 on Quadro R5000 16Gb with v1.12 and CUDA 10.0.130 and CUDNN 7.4.2.24 OK under Windows 10 Quadro P5000 and GTX 1060 6Gb", "user": {"login": "samhodge", "id": 86946, "node_id": "MDQ6VXNlcjg2OTQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/86946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samhodge", "html_url": "https://github.com/samhodge", "followers_url": "https://api.github.com/users/samhodge/followers", "following_url": "https://api.github.com/users/samhodge/following{/other_user}", "gists_url": "https://api.github.com/users/samhodge/gists{/gist_id}", "starred_url": "https://api.github.com/users/samhodge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samhodge/subscriptions", "organizations_url": "https://api.github.com/users/samhodge/orgs", "repos_url": "https://api.github.com/users/samhodge/repos", "events_url": "https://api.github.com/users/samhodge/events{/privacy}", "received_events_url": "https://api.github.com/users/samhodge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2019-04-03T02:12:18Z", "updated_at": "2019-08-23T02:28:25Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nI have linked against the //tensorflow:libtensorflow_cc.so and //tensorflow:libtensorflow_framework.so targets using other libs, abseil-cpp, libprotobuf etc\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10 (build) and Window 7 (deployment)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): v1.12.0\r\n(tensorflow-cuda10) C:\\Users\\user\\dev\\tensorflow-cuda10\\tensorflow\\tensorflow\\core\\common_runtime\\gpu>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nb'v1.12.0-0-ga6d8ffae09' 1.12.0\r\n- Python version: 3.6 (N/A)\r\n- Bazel version (if compiling from source): 0.19.2\r\n- GCC/Compiler version (if compiling from source):MSVC 14.0\r\n- CUDA/cuDNN version: 10.0.130, 7.4.2.24\r\n- GPU model and memory: GTX 1060 6Gb and Quadro R5000 16Gb\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n(tensorflow-cuda10) C:\\Users\\user\\dev\\tensorflow-cuda10\\tensorflow\\tensorflow\\core\\common_runtime\\gpu>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nb'v1.12.0-0-ga6d8ffae09' 1.12.0\r\n\r\n**Describe the current behavior**\r\nThe application is currently crashed when initialising the session on the Quadro card on the client's computer running Windows 7 with the error messsage:\r\n\r\n2019-04-02 11:30:18.871580: F tensorflow/core/common_runtime/gpu/gpu_event_mgr.cc:274] Unexpected Event status: 1\r\n\r\nhere is the code for that file, where LOG FATAL is line 274\r\n\r\n```\r\n// This function must be called periodically to check whether pending\r\n// events have recorded, and then retire them.  Initial observations\r\n// suggest that typical behavior in a TensorFlow program is to have\r\n// 0-3 events pending most of the time, but there are occasionally\r\n// spikes of up to several hundred outstanding.\r\n//\r\n// NOTE: If all events are on the same stream, no later event will\r\n// complete before an earlier event, except possibly if the earlier\r\n// event transitions to an error state, so there's no advantage in\r\n// looking past the first kPending event.  However, if we're using\r\n// multiple streams there may be some gain in looking deeper.\r\n// As a compromise, PollEvent() calls that are triggered by the queueing\r\n// of a single event never look past the first kPending event.  Calls\r\n// coming from the dedicated polling thread always sweep the full queue.\r\n//\r\n// Note that allowing the queue to grow very long could cause overall\r\n// GPU memory use to spike needlessly.  An alternative strategy would\r\n// be to throttle new Op execution until the pending event queue\r\n// clears.\r\nvoid EventMgr::PollEvents(bool is_dedicated_poller,\r\n                          gtl::InlinedVector<InUse, 4>* to_free) {\r\n  VLOG(2) << \"PollEvents  free_events_ \" << free_events_.size()\r\n          << \" used_events_ \" << used_events_.size();\r\n  // Sweep the remaining events in order.  If this is the dedicated\r\n  // polling thread, check the entire set.  Otherwise, just sweep up to\r\n  // the first non-complete record that is still pending.\r\n  for (auto& iu : used_events_) {\r\n    if (iu.event == nullptr) continue;\r\n    se::Event::Status s = iu.event->PollForStatus();\r\n    switch (s) {\r\n      case se::Event::Status::kUnknown:\r\n      case se::Event::Status::kError:\r\n        // We don't expect to see these.  Someday maybe propagate\r\n        // a Status error, but for now fail hard.\r\n        LOG(FATAL) << \"Unexpected Event status: \" << static_cast<int>(s);\r\n        break;\r\n      case se::Event::Status::kPending:\r\n        if (!is_dedicated_poller) return;  // quit processing queue\r\n        break;\r\n      case se::Event::Status::kComplete:\r\n        // Make a copy of the InUse record so we can free it after releasing\r\n        // the lock\r\n        to_free->push_back(iu);\r\n        free_events_.push_back(iu.event);\r\n        // Mark this InUse record as completed.\r\n        iu.event = nullptr;\r\n    }\r\n  }\r\n  // Then clear any completed InUse records from the front of the queue.\r\n  while (!used_events_.empty()) {\r\n    InUse& iu = used_events_.front();\r\n    if (iu.event == nullptr) {\r\n      used_events_.pop_front();\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n}  // namespace tensorflow\r\n```\r\n\r\n**Describe the expected behavior**\r\nI would expect the software to load the graph into a fresh session and compute\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\t        tensorflow::SessionOptions options;\r\n\t        tensorflow::ConfigProto* config = &options.config;\r\n                options.config.mutable_gpu_options()->set_per_process_gpu_memory_fraction(0.9);\r\n\t\tdevice_count->insert({ \"GPU\",1});\r\n\t}\r\n\t        device_count->insert({ \"CPU\", 1 });\r\n                //bytes is read from graph_file_name\r\n                graph_def->ParseFromArray(bytes.data(), (int)bytes.size()))\r\n\t\tsession>reset(tensorflow::NewSession(options);\r\n\t\tstd::cout << \"Rotobot: Swapping to model: \" << graph_file_name << \" using a single model per render is more efficent\" << std::endl;\r\n                //crashes after here\r\n\t\tauto status = (*session)->Create(graph_def);\r\n                auto status2 = (*session)->Run(Input_Tensors);\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nYou can download the built software from:\r\nhttps://kognat.com/product/rotobot-openfx-plugin-windows-64-gpu-v1-2-0-rc2-cuda-10/\r\n\r\n\r\nYou will just need an OpenFX host like Natron\r\nhttps://natrongithub.github.io/\r\n\r\nThis tutorial will give you reproduction steps\r\nhttps://kognat.com/2019/03/28/rotobot-srgb/"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27437", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27437/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27437/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27437/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27437", "id": 428487906, "node_id": "MDU6SXNzdWU0Mjg0ODc5MDY=", "number": 27437, "title": "LSTM quantization aware training and fully quanitzation in TfLite", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "talumbau", "id": 1891418, "node_id": "MDQ6VXNlcjE4OTE0MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1891418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/talumbau", "html_url": "https://github.com/talumbau", "followers_url": "https://api.github.com/users/talumbau/followers", "following_url": "https://api.github.com/users/talumbau/following{/other_user}", "gists_url": "https://api.github.com/users/talumbau/gists{/gist_id}", "starred_url": "https://api.github.com/users/talumbau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/talumbau/subscriptions", "organizations_url": "https://api.github.com/users/talumbau/orgs", "repos_url": "https://api.github.com/users/talumbau/repos", "events_url": "https://api.github.com/users/talumbau/events{/privacy}", "received_events_url": "https://api.github.com/users/talumbau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "talumbau", "id": 1891418, "node_id": "MDQ6VXNlcjE4OTE0MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1891418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/talumbau", "html_url": "https://github.com/talumbau", "followers_url": "https://api.github.com/users/talumbau/followers", "following_url": "https://api.github.com/users/talumbau/following{/other_user}", "gists_url": "https://api.github.com/users/talumbau/gists{/gist_id}", "starred_url": "https://api.github.com/users/talumbau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/talumbau/subscriptions", "organizations_url": "https://api.github.com/users/talumbau/orgs", "repos_url": "https://api.github.com/users/talumbau/repos", "events_url": "https://api.github.com/users/talumbau/events{/privacy}", "received_events_url": "https://api.github.com/users/talumbau/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-02T23:18:11Z", "updated_at": "2019-04-08T23:55:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0, 1.13.1, and tf-nightly\r\n\r\n- Are you willing to contribute it (Yes/No):\r\nI'm not able to figure it out at this moment...\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently, I can convert a LSTM model to .tflite file. But, I have no idea how to do fully quantization on it (meaning quantization-aware training + TfLite fully quantization). For me, post training quantization is not very useful, since I'd like to do 8-bit calculations during inference.\r\n\r\n**Will this change the current api? How?**\r\nNot sure. Maybe api like tf.contrib.quanitze.create_training_graph() or tf.contrib.quanitze.create_eval_graph() needs to be changed?\r\n\r\n**Who will benefit with this feature?**\r\nDevices that need 8-bit calculation can directly benefit from this feature. \r\n\r\n**Any Other info.**\r\nI know there are a few issues related to this problem. But there is a lack of official reply on it. I'm writing to ask if it's still in the recent plan? Thanks in advance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27416", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27416/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27416/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27416/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27416", "id": 428099016, "node_id": "MDU6SXNzdWU0MjgwOTkwMTY=", "number": 27416, "title": "Unable to use FeatureColumn with Keras Functional API", "user": {"login": "bingyuanlee", "id": 48341272, "node_id": "MDQ6VXNlcjQ4MzQxMjcy", "avatar_url": "https://avatars2.githubusercontent.com/u/48341272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bingyuanlee", "html_url": "https://github.com/bingyuanlee", "followers_url": "https://api.github.com/users/bingyuanlee/followers", "following_url": "https://api.github.com/users/bingyuanlee/following{/other_user}", "gists_url": "https://api.github.com/users/bingyuanlee/gists{/gist_id}", "starred_url": "https://api.github.com/users/bingyuanlee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bingyuanlee/subscriptions", "organizations_url": "https://api.github.com/users/bingyuanlee/orgs", "repos_url": "https://api.github.com/users/bingyuanlee/repos", "events_url": "https://api.github.com/users/bingyuanlee/events{/privacy}", "received_events_url": "https://api.github.com/users/bingyuanlee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1268652487, "node_id": "MDU6TGFiZWwxMjY4NjUyNDg3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0.0-alpha0", "name": "TF 2.0.0-alpha0", "color": "5319e7", "default": false, "description": "for issues seen on 2.0.0-alpha0 version"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, {"login": "bananabowl", "id": 42554856, "node_id": "MDQ6VXNlcjQyNTU0ODU2", "avatar_url": "https://avatars3.githubusercontent.com/u/42554856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bananabowl", "html_url": "https://github.com/bananabowl", "followers_url": "https://api.github.com/users/bananabowl/followers", "following_url": "https://api.github.com/users/bananabowl/following{/other_user}", "gists_url": "https://api.github.com/users/bananabowl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bananabowl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bananabowl/subscriptions", "organizations_url": "https://api.github.com/users/bananabowl/orgs", "repos_url": "https://api.github.com/users/bananabowl/repos", "events_url": "https://api.github.com/users/bananabowl/events{/privacy}", "received_events_url": "https://api.github.com/users/bananabowl/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 44, "created_at": "2019-04-02T08:49:30Z", "updated_at": "2020-02-18T02:48:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Y\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below):  2.0.0-alpha0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nI followed the guide: [Classify structured data](https://www.tensorflow.org/alpha/tutorials/keras/feature_columns). The author used TF Feature Column and TF Data alongside a Sequential model, which worked out just fine. \r\n\r\nThen, I've tried implementing the same using Keras Functional API, but was greeted by the error message below:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-19-9647c70de900> in <module>\r\n----> 1 inputs = layers.Input(tensor=feature_layer, name='features')\r\n      2 x = layers.Dense(128, activation='relu')(inputs)\r\n      3 x = layers.Dense(64, activation='relu')(x)\r\n      4 \r\n      5 baggage_pred = layers.Dense(1, activation='sigmoid', name='baggage')(x)\r\n\r\n~/.local/lib/python3.7/site-packages/tensorflow/python/keras/engine/input_layer.py in Input(shape, batch_size, name, dtype, sparse, tensor, **kwargs)\r\n    231       dtype=dtype,\r\n    232       sparse=sparse,\r\n--> 233       input_tensor=tensor)\r\n    234   # Return tensor including `_keras_history`.\r\n    235   # Note that in this case train_output and test_output are the same pointer.\r\n\r\n~/.local/lib/python3.7/site-packages/tensorflow/python/keras/engine/input_layer.py in __init__(self, input_shape, batch_size, dtype, input_tensor, sparse, name, **kwargs)\r\n     77         dtype = backend.floatx()\r\n     78       else:\r\n---> 79         dtype = backend.dtype(input_tensor)\r\n     80     elif input_tensor is not None and input_tensor.dtype != dtype:\r\n     81       raise ValueError('`input_tensor.dtype` differs from `dtype`: %s vs. %s' %\r\n\r\n~/.local/lib/python3.7/site-packages/tensorflow/python/keras/backend.py in dtype(x)\r\n   1025   ```\r\n   1026   \"\"\"\r\n-> 1027   return x.dtype.base_dtype.name\r\n   1028 \r\n   1029 \r\n\r\nAttributeError: 'str' object has no attribute 'base_dtype'\r\n```\r\n\r\n**Describe the expected behavior**\r\nIf I understood correctly, TF Keras is supposed to be interoperable with Feature Column. And the way to achieve that is to wrap a list of feature columns with `tf.keras.layers.DenseFeatures()` and parse it to the input layer as a tensor like so:\r\n\r\n`feature_layer = tf.keras.layers.DenseFeatures(feature_columns)`\r\n`inputs = layers.Input(tensor=feature_layer, name='features')`\r\n\r\n**Code to reproduce the issue**\r\nHere's the code to reproduce the error:\r\n```\r\nfrom __future__ import absolute_import, division, print_function\r\n\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\n#!pip install tensorflow==2.0.0-alpha0\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow import feature_column\r\nfrom tensorflow import keras\r\nfrom tensorflow.keras import layers\r\nfrom sklearn.model_selection import train_test_split\r\n\r\nURL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\ndataframe = pd.read_csv(URL)\r\ndataframe.head()\r\n\r\ntrain, test = train_test_split(dataframe, test_size=0.2)\r\ntrain, val = train_test_split(train, test_size=0.2)\r\nprint(len(train), 'train examples')\r\nprint(len(val), 'validation examples')\r\nprint(len(test), 'test examples')\r\n\r\n# A utility method to create a tf.data dataset from a Pandas Dataframe\r\ndef df_to_dataset(dataframe, shuffle=True, batch_size=32):\r\n  dataframe = dataframe.copy()\r\n  labels = dataframe.pop('target')\r\n  ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n  if shuffle:\r\n    ds = ds.shuffle(buffer_size=len(dataframe))\r\n  ds = ds.batch(batch_size)\r\n  return ds\r\n\r\nbatch_size = 5 # A small batch sized is used for demonstration purposes\r\ntrain_ds = df_to_dataset(train, batch_size=batch_size)\r\nval_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\ntest_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\nage = feature_column.numeric_column(\"age\")\r\nage_buckets = feature_column.bucketized_column(age, boundaries=[18, 25, 30, 35, 40, 45, 50, 55, 60, 65])\r\nthal = feature_column.categorical_column_with_vocabulary_list(\r\n      'thal', ['fixed', 'normal', 'reversible'])\r\nthal_one_hot = feature_column.indicator_column(thal)\r\nthal_embedding = feature_column.embedding_column(thal, dimension=8)\r\nthal_hashed = feature_column.categorical_column_with_hash_bucket(\r\n      'thal', hash_bucket_size=1000)\r\ncrossed_feature = feature_column.crossed_column([age_buckets, thal], hash_bucket_size=1000)\r\n\r\nfeature_columns = []\r\n\r\n# numeric cols\r\nfor header in ['age', 'trestbps', 'chol', 'thalach', 'oldpeak', 'slope', 'ca']:\r\n  feature_columns.append(feature_column.numeric_column(header))\r\n\r\n# bucketized cols\r\nage_buckets = feature_column.bucketized_column(age, boundaries=[18, 25, 30, 35, 40, 45, 50, 55, 60, 65])\r\nfeature_columns.append(age_buckets)\r\n\r\n# indicator cols\r\nthal = feature_column.categorical_column_with_vocabulary_list(\r\n      'thal', ['fixed', 'normal', 'reversible'])\r\nthal_one_hot = feature_column.indicator_column(thal)\r\nfeature_columns.append(thal_one_hot)\r\n\r\n# embedding cols\r\nthal_embedding = feature_column.embedding_column(thal, dimension=8)\r\nfeature_columns.append(thal_embedding)\r\n\r\n# crossed cols\r\ncrossed_feature = feature_column.crossed_column([age_buckets, thal], hash_bucket_size=1000)\r\ncrossed_feature = feature_column.indicator_column(crossed_feature)\r\nfeature_columns.append(crossed_feature)\r\n\r\nbatch_size = 32\r\ntrain_ds = df_to_dataset(train, batch_size=batch_size)\r\nval_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\ntest_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\nfeature_layer = tf.keras.layers.DenseFeatures(feature_columns)\r\n\r\ninputs = layers.Input(tensor=feature_layer, name='features')\r\nx = layers.Dense(128, activation='relu')(inputs)\r\nx = layers.Dense(64, activation='relu')(x)\r\n\r\nbaggage_pred = layers.Dense(1, activation='sigmoid')(x)\r\n\r\nmodel = keras.Model(inputs=inputs,outputs=baggage_pred)\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='binary_crossentropy',\r\n              metrics=['accuracy'])\r\n```\r\n\r\n**Other info / logs**\r\nN/A\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27411", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27411/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27411/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27411/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/27411", "id": 428039432, "node_id": "MDExOlB1bGxSZXF1ZXN0MjY2NDk5MzY1", "number": 27411, "title": "Lite: Add_n Op refactored", "user": {"login": "ANSHUMAN87", "id": 32511895, "node_id": "MDQ6VXNlcjMyNTExODk1", "avatar_url": "https://avatars3.githubusercontent.com/u/32511895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ANSHUMAN87", "html_url": "https://github.com/ANSHUMAN87", "followers_url": "https://api.github.com/users/ANSHUMAN87/followers", "following_url": "https://api.github.com/users/ANSHUMAN87/following{/other_user}", "gists_url": "https://api.github.com/users/ANSHUMAN87/gists{/gist_id}", "starred_url": "https://api.github.com/users/ANSHUMAN87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ANSHUMAN87/subscriptions", "organizations_url": "https://api.github.com/users/ANSHUMAN87/orgs", "repos_url": "https://api.github.com/users/ANSHUMAN87/repos", "events_url": "https://api.github.com/users/ANSHUMAN87/events{/privacy}", "received_events_url": "https://api.github.com/users/ANSHUMAN87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-04-02T06:05:02Z", "updated_at": "2020-02-13T05:44:15Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/27411", "html_url": "https://github.com/tensorflow/tensorflow/pull/27411", "diff_url": "https://github.com/tensorflow/tensorflow/pull/27411.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/27411.patch"}, "body": "1:> Dynamic memory allocation moved from Eval to Prepare.\r\n2:> VectorOfTensors refactored to eliminate the limitation of \r\n\r\n> \"can be used only in Eval\"\r\n\r\n."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27392", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27392/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27392/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27392/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27392", "id": 427941971, "node_id": "MDU6SXNzdWU0Mjc5NDE5NzE=", "number": 27392, "title": "Runtime error when using ExponentialMovingAverage with MirroredStrategy (TF 1.13.1)", "user": {"login": "apls777", "id": 8392688, "node_id": "MDQ6VXNlcjgzOTI2ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8392688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apls777", "html_url": "https://github.com/apls777", "followers_url": "https://api.github.com/users/apls777/followers", "following_url": "https://api.github.com/users/apls777/following{/other_user}", "gists_url": "https://api.github.com/users/apls777/gists{/gist_id}", "starred_url": "https://api.github.com/users/apls777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apls777/subscriptions", "organizations_url": "https://api.github.com/users/apls777/orgs", "repos_url": "https://api.github.com/users/apls777/repos", "events_url": "https://api.github.com/users/apls777/events{/privacy}", "received_events_url": "https://api.github.com/users/apls777/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-04-01T22:37:10Z", "updated_at": "2020-03-11T15:10:40Z", "closed_at": null, "author_association": "NONE", "body": "I'm trying to use ExponentialMovingAverage with MirroredStrategy training the model on several GPUs, but getting an error:\r\n```\r\nRuntimeError: Tried to create variable dense/kernel/replica_1/ExponentialMovingAverage/ with mismatching name on device 1\r\n```\r\n\r\nThis error can also be reproduced on a CPU machine by specifying the number of GPUs in the \"tf.contrib.distribute.MirroredStrategy\" more or equal to 2.\r\n\r\nThe model works fine if I'm training it on a single GPU (by specifying the number of GPUs to 1).\r\n\r\nI'm using TF v1.13.1. Here is a simplified code:\r\n```python\r\nimport tensorflow as tf\r\n\r\n\r\ndef input_fn():\r\n    features = tf.data.Dataset.from_tensors([1., 2., 3.])\r\n    labels = tf.data.Dataset.from_tensors(1.)\r\n    dataset = tf.data.Dataset.zip((features, labels)).repeat(10).batch(1)\r\n    return dataset\r\n\r\n\r\ndef model_fn(features, labels, mode, params):\r\n    logits = tf.layers.dense(features, 1, activation=tf.nn.relu)\r\n    logits = tf.reshape(logits, (-1,))\r\n    loss = tf.losses.mean_squared_error(logits, labels)\r\n\r\n    ema = tf.train.ExponentialMovingAverage(0.999)\r\n\r\n    if mode == tf.estimator.ModeKeys.TRAIN:\r\n        optimizer = tf.train.GradientDescentOptimizer(learning_rate=0.0001)\r\n        train_op = optimizer.minimize(loss=loss, global_step=tf.train.get_global_step())\r\n\r\n        # apply moving averages\r\n        with tf.variable_scope(tf.get_variable_scope(), reuse=tf.AUTO_REUSE):\r\n            ema_update_op = ema.apply(tf.trainable_variables())\r\n\r\n        with tf.control_dependencies([train_op]):\r\n            train_op = tf.group(ema_update_op)\r\n\r\n        return tf.estimator.EstimatorSpec(mode=mode, loss=loss, train_op=train_op)\r\n\r\n    raise NotImplementedError\r\n\r\n\r\ndef train(model_dir):\r\n    distribution = tf.contrib.distribute.MirroredStrategy(num_gpus=2)\r\n\r\n    estimator = tf.estimator.Estimator(\r\n        model_fn=model_fn,\r\n        config=tf.estimator.RunConfig(\r\n            train_distribute=distribution,\r\n            model_dir=model_dir,\r\n            log_step_count_steps=1,\r\n        ),\r\n    )\r\n\r\n    estimator.train(input_fn=input_fn)\r\n\r\n\r\nif __name__ == '__main__':\r\n    tf.logging.set_verbosity(tf.logging.INFO)\r\n    train('training/test1')\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27390", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27390/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27390/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27390/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27390", "id": 427925992, "node_id": "MDU6SXNzdWU0Mjc5MjU5OTI=", "number": 27390, "title": "Reading a tensor from file in python which was saved using C++", "user": {"login": "dibya-pati", "id": 32309221, "node_id": "MDQ6VXNlcjMyMzA5MjIx", "avatar_url": "https://avatars3.githubusercontent.com/u/32309221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dibya-pati", "html_url": "https://github.com/dibya-pati", "followers_url": "https://api.github.com/users/dibya-pati/followers", "following_url": "https://api.github.com/users/dibya-pati/following{/other_user}", "gists_url": "https://api.github.com/users/dibya-pati/gists{/gist_id}", "starred_url": "https://api.github.com/users/dibya-pati/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dibya-pati/subscriptions", "organizations_url": "https://api.github.com/users/dibya-pati/orgs", "repos_url": "https://api.github.com/users/dibya-pati/repos", "events_url": "https://api.github.com/users/dibya-pati/events{/privacy}", "received_events_url": "https://api.github.com/users/dibya-pati/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-04-01T21:44:47Z", "updated_at": "2020-02-25T06:09:20Z", "closed_at": null, "author_association": "NONE", "body": "I'm having trouble reading/interpreting a tensor from a file using read_file() operation in Python. The tensor was saved using Save() ops in tensorflow CC API. I can read the underlying byte encoded tensor, but find no methods to convert that back to float(original content of the tensor). I have tried decode_raw() in python but it complaints about of not being of proper multiple of 4. \r\nThe above tensor comprises of a 3 channel nd array with float contents. Would appreciate any help in deciphering the content\r\nMore precisely would really appreciate on some details on how Save() ops in tensorflow CC API works?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27383", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27383/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27383/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27383/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27383", "id": 427739115, "node_id": "MDU6SXNzdWU0Mjc3MzkxMTU=", "number": 27383, "title": "transpose() can be very slow on CPU", "user": {"login": "amilsted", "id": 1241345, "node_id": "MDQ6VXNlcjEyNDEzNDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1241345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amilsted", "html_url": "https://github.com/amilsted", "followers_url": "https://api.github.com/users/amilsted/followers", "following_url": "https://api.github.com/users/amilsted/following{/other_user}", "gists_url": "https://api.github.com/users/amilsted/gists{/gist_id}", "starred_url": "https://api.github.com/users/amilsted/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amilsted/subscriptions", "organizations_url": "https://api.github.com/users/amilsted/orgs", "repos_url": "https://api.github.com/users/amilsted/repos", "events_url": "https://api.github.com/users/amilsted/events{/privacy}", "received_events_url": "https://api.github.com/users/amilsted/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-01T14:30:57Z", "updated_at": "2019-04-05T13:05:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04 / WSL\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary (MKL) (pip install intel-tensorflow)\r\n- TensorFlow version (use command below): b'v1.13.1-0-g6612da8' 1.13.1\r\n- Python version: 3.6.8 (Anaconda)\r\n\r\n**Describe the current behavior**\r\nOn CPU, `tf.transpose()` can be 10 times slower than `np.tranpose(...).copy()`, depending on the dimensions of the tensor. In my example case, the speed can be fixed by sandwiching the `tf.transpose` in reshapes that reduce the dimensionality for the transpose.\r\n\r\n**Describe the expected behavior**\r\n`tf.tranpose()` should be fast without the need to resort to reshaping tricks (which will not always apply anyway). Note also that some transposes are implicit (performed, say, by `tf.tensordot()`).\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport time\r\nimport numpy as np\r\n\r\nimport tensorflow as tf\r\ntf.enable_v2_behavior()\r\n\r\nd = 2\r\nN = 22\r\n# NOTE: TF starts getting a lot slower than numpy at N=9, it seems. \r\n# Try d=5, N=9  vs  d=7, N=8.\r\n\r\n# Create a N-dimensional ndarray\r\npsi = np.random.randn(*[d for n in range(N)]).astype(np.float64)\r\n\r\npsi_np = psi.copy()\r\nfor _ in range(5):\r\n    # numpy's transpose is a metadata operation.\r\n    # copy() actually carries out the reordering of the data in memory.\r\n    t0 = time.time()\r\n    psi_np = np.transpose(psi_np, (*list(range(2,N)), 0, 1)).copy()\r\n    print(time.time() - t0)  # around 0.07s on my system\r\n\r\npsi_tf = tf.convert_to_tensor(psi)\r\n\r\n@tf.contrib.eager.defun  # make this a graph, just in case\r\ndef f(p):\r\n    return tf.transpose(p, (*list(range(2,N)), 0, 1))\r\n\r\nfor _ in range(5):\r\n    t0 = time.time()\r\n    psi_tf = f(psi_tf)\r\n    print(time.time() - t0)  # around 0.5s on my system (almost 10 times slower!)\r\n\r\n# check results are the same\r\nprint(np.linalg.norm(psi_tf.numpy().ravel() - psi_np.ravel()))  # should print 0.0\r\n\r\n# Note that the speed depends on the shape!\r\n# We now do an equivalent tranpose, but sandwiched \r\n# by reshapes to reduce the number of dims.\r\n\r\npsi_tf = tf.convert_to_tensor(psi)\r\n\r\n@tf.contrib.eager.defun\r\ndef f2(p):\r\n    # Rephrase the high-dimensional transpose as a matrix transpose.\r\n    pr = tf.reshape(p, (d**2, d**(N-2)))\r\n    prt = tf.transpose(pr, (1,0))\r\n    return tf.reshape(prt, p.shape)\r\n\r\nfor _ in range(5):\r\n    t0 = time.time()\r\n    psi_tf = f2(psi_tf)\r\n    print(time.time() - t0)  # around 0.008s on my system\r\n\r\n# check results are the same\r\nprint(np.linalg.norm(psi_tf.numpy().ravel() - psi_np.ravel()))  # should print 0.0\r\n```\r\n\r\n**Other info / logs**\r\nCompared to #15697, I am actually timing the equivalent op in numpy (transpose then copy).\r\nAlso, this happens on MKL builds as well as non-MKL builds of  TF 1.13.1."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27381", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27381/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27381/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27381/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27381", "id": 427710290, "node_id": "MDU6SXNzdWU0Mjc3MTAyOTA=", "number": 27381, "title": "Generating fully-quantized models in Pre-trained checkpoints (.chkpt) or GraphDef (.pb)  format", "user": {"login": "nullbyte91", "id": 24765915, "node_id": "MDQ6VXNlcjI0NzY1OTE1", "avatar_url": "https://avatars0.githubusercontent.com/u/24765915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nullbyte91", "html_url": "https://github.com/nullbyte91", "followers_url": "https://api.github.com/users/nullbyte91/followers", "following_url": "https://api.github.com/users/nullbyte91/following{/other_user}", "gists_url": "https://api.github.com/users/nullbyte91/gists{/gist_id}", "starred_url": "https://api.github.com/users/nullbyte91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nullbyte91/subscriptions", "organizations_url": "https://api.github.com/users/nullbyte91/orgs", "repos_url": "https://api.github.com/users/nullbyte91/repos", "events_url": "https://api.github.com/users/nullbyte91/events{/privacy}", "received_events_url": "https://api.github.com/users/nullbyte91/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-04-01T13:37:39Z", "updated_at": "2020-02-24T07:12:54Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using):1.12.0-rc2\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nBy Using the TensorFlow Lite Converter tflite_convert to optimize the TensorFlow graphs and convert them to the TensorFlow Lite format for 8-bit inference. \r\n\r\nCan we have a feature to optimize the TensorFlow graphs and convert them to .chkpt or .pb format?  So, We can Initialize the WB in tensorflow and do inference with 8-bit.\r\n\r\n**Will this change the current API? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nThe developers who want only Int-8 quantization model(WB) and not depend on TFLite.\r\n\r\n**Any Other info.**\r\nNo"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27380", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27380/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27380/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27380/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27380", "id": 427707643, "node_id": "MDU6SXNzdWU0Mjc3MDc2NDM=", "number": 27380, "title": "[Feature Request] Support Sparse Tensors in tf.linalg operations", "user": {"login": "suyash", "id": 16324837, "node_id": "MDQ6VXNlcjE2MzI0ODM3", "avatar_url": "https://avatars2.githubusercontent.com/u/16324837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suyash", "html_url": "https://github.com/suyash", "followers_url": "https://api.github.com/users/suyash/followers", "following_url": "https://api.github.com/users/suyash/following{/other_user}", "gists_url": "https://api.github.com/users/suyash/gists{/gist_id}", "starred_url": "https://api.github.com/users/suyash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suyash/subscriptions", "organizations_url": "https://api.github.com/users/suyash/orgs", "repos_url": "https://api.github.com/users/suyash/repos", "events_url": "https://api.github.com/users/suyash/events{/privacy}", "received_events_url": "https://api.github.com/users/suyash/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-01T13:32:32Z", "updated_at": "2019-10-09T12:03:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0.0a0\r\n- Are you willing to contribute it (Yes/No): Maybe, if there are any pointers on how to go about implementing something like this.\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently the `tf.linalg` operations seem to only support dense tensors. I have verified `tf.linalg.solve`. Consider the following variables\r\n\r\n```\r\nA = tf.sparse.SparseTensor(\r\n    indices=[[0, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2], [2, 0], [2, 1], [2, 2]],\r\n    values=[3., 2., -1., 2., -2., 4., -1., 0.5, -1.],\r\n    dense_shape=(3, 3)\r\n)\r\n\r\nb = tf.sparse.SparseTensor(\r\n    indices=[[0, 0], [1, 0], [2, 0]],\r\n    values=[-1., 2., 0.],\r\n    dense_shape=(3, 1)\r\n)\r\n```\r\n\r\nnow if I do\r\n\r\n```\r\ntf.linalg.solve(A, b)\r\n```\r\n\r\nthis errors out with\r\n\r\n```\r\nValueError: Attempt to convert a value (<tensorflow.python.framework.sparse_tensor.SparseTensor object at 0x7f28a1e3fc50>) with an unsupported type (<class 'tensorflow.python.framework.sparse_tensor.SparseTensor'>) to a Tensor.\r\n```\r\n\r\nHowever, if I do\r\n\r\n```\r\ntf.linalg.solve(tf.sparse.to_dense(A), tf.sparse.to_dense(b))\r\n```\r\n\r\nit works, giving\r\n\r\n```\r\n<tf.Tensor: id=11, shape=(3, 1), dtype=float32, numpy=\r\narray([[-1.0000006],\r\n       [ 2.0000014],\r\n       [ 2.0000012]], dtype=float32)>\r\n```\r\n\r\nwhich is roughly the correct answer. Example taken from the [scipy sparse matrix factorized](https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.factorized.html) documentation.\r\n\r\n**Will this change the current api? How?**\r\n\r\nInstead of erroring out, the `linalg` operations will work for sparse inputs just as well as for dense inputs.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nI came across this while implementing [NVIDIA's FastPhotoStyle](https://github.com/NVIDIA/FastPhotoStyle) in TensorFlow 2.0 + Keras.\r\n\r\nThe algorithm essentially has 2 steps,\r\n\r\n- A `PhotoWCT` transformation that is `WCT` but uses maxpooling argvalues as unpooling masks\r\n- A Photorealistic smoothing step that restores geometric artifacts for objects distorted using regular style transform\r\n- An additional post processing step that applies a GPU based smoothing filter for further reducing structural defects\r\n\r\nThe NVIDIA implementation provides a [`photo_wct` net implementation in PyTorch](https://github.com/NVIDIA/FastPhotoStyle/blob/master/photo_wct.py). However for the second step, [a CPU implementation in scipy is used](https://github.com/NVIDIA/FastPhotoStyle/blob/master/photo_smooth.py). The second step essentially solves a closed form system of equations. \r\n\r\nConsider [line 48](https://github.com/NVIDIA/FastPhotoStyle/blob/master/photo_smooth.py#L48), what it is essentially doing is creating a diagonal matrix of size (width x height) of the image. So for a 512x512 image, in dense form it will have to create a matrix of 2^36 floats.\r\n\r\nThe matrix is later used to solve a system of equations (https://github.com/NVIDIA/FastPhotoStyle/blob/master/photo_smooth.py#L52).\r\n\r\n2^36 tf.float32 values will occupy 2^8 = 256GB of memory, which will definitely overflow. Ideally, I should be able to work with tensorflow's `linalg` module just the same as the scipy implementation. An additional flexibility with TensorFlow is that it will place operations on GPUs automatically. Additionally, I can put it in a keras `Lambda` layer to add it to a model.\r\n\r\n\r\n**Any Other info.**\r\n\r\nNo"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27355", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27355/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27355/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27355/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27355", "id": 427487594, "node_id": "MDU6SXNzdWU0Mjc0ODc1OTQ=", "number": 27355, "title": "Dataset c++ extend documentation is outdated for tf 2.0 & DatasetV2", "user": {"login": "vrince", "id": 1742210, "node_id": "MDQ6VXNlcjE3NDIyMTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1742210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrince", "html_url": "https://github.com/vrince", "followers_url": "https://api.github.com/users/vrince/followers", "following_url": "https://api.github.com/users/vrince/following{/other_user}", "gists_url": "https://api.github.com/users/vrince/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrince/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrince/subscriptions", "organizations_url": "https://api.github.com/users/vrince/orgs", "repos_url": "https://api.github.com/users/vrince/repos", "events_url": "https://api.github.com/users/vrince/events{/privacy}", "received_events_url": "https://api.github.com/users/vrince/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-01T02:48:10Z", "updated_at": "2019-04-16T16:07:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version: 2.0\r\n- Doc Link: https://www.tensorflow.org/guide/extend/formats\r\n\r\n**Describe the documentation issue**\r\n\r\nThe C++ code to extend Dataset (especially since DatasetV2) is outdated.\r\n\r\nHere is a working version of files needed in the documentation : https://github.com/vrince/tensorflow_addons/tree/master/tensorflow_addons/dataset\r\n\r\nNOTE: the only part I am not really sure about is this one : https://github.com/vrince/tensorflow_addons/blob/master/tensorflow_addons/dataset/cc/my_dataset.cpp#L76 ... basically let it as it was but I don't see the point.\r\n\r\nThere is also and external test running from python and bazel files.\r\n\r\nNot sure where or if I even can do a pull request to change the doc."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27314", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27314/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27314/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27314/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27314", "id": 427264928, "node_id": "MDU6SXNzdWU0MjcyNjQ5Mjg=", "number": 27314, "title": "[tflite]:operator of type Floor for which the quantized form is not yet implemented", "user": {"login": "weiweizhou", "id": 30871082, "node_id": "MDQ6VXNlcjMwODcxMDgy", "avatar_url": "https://avatars2.githubusercontent.com/u/30871082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiweizhou", "html_url": "https://github.com/weiweizhou", "followers_url": "https://api.github.com/users/weiweizhou/followers", "following_url": "https://api.github.com/users/weiweizhou/following{/other_user}", "gists_url": "https://api.github.com/users/weiweizhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiweizhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiweizhou/subscriptions", "organizations_url": "https://api.github.com/users/weiweizhou/orgs", "repos_url": "https://api.github.com/users/weiweizhou/repos", "events_url": "https://api.github.com/users/weiweizhou/events{/privacy}", "received_events_url": "https://api.github.com/users/weiweizhou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-30T09:41:43Z", "updated_at": "2019-12-03T06:04:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (or github SHA if from source):1.13\r\n- code on jupyter: \r\n```\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\nmodel_path='./VESPCN.pb'\r\ninput_arrays=['images_next_curr',\"images_prev_curr\"]\r\noutput_arrays=['Tanh_2']\r\nconverter = tf.lite.TFLiteConverter.from_frozen_graph(model_path, input_arrays, output_arrays,\r\n                                                      input_shapes={'images_next_curr':[1, 360, 640, 6],'images_prev_curr':[1, 360, 640, 6]})\r\nconverter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS]\r\nconverter.allow_custom_ops=True\r\nconverter.inference_type=tf.lite.constants.QUANTIZED_UINT8\r\nconverter.default_ranges_stats=(0,6)\r\nconverter.quantized_input_stats={'images_next_curr':(0,1),'images_prev_curr':(0,1)}\r\ntflite_model = converter.convert()\r\n```\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nConverterError: TOCO failed. See console for info.\r\n2019-03-30 17:14:23.618847: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 739 operators, 1251 arrays (0 quantized)\r\n2019-03-30 17:14:23.638961: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 739 operators, 1251 arrays (0 quantized)\r\n2019-03-30 17:14:23.683782: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 376 operators, 643 arrays (2 quantized)\r\n2019-03-30 17:14:23.718247: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 376 operators, 643 arrays (2 quantized)\r\n2019-03-30 17:14:23.762560: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 300 operators, 459 arrays (2 quantized)\r\n2019-03-30 17:14:23.774999: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 300 operators, 459 arrays (2 quantized)\r\n2019-03-30 17:14:23.789415: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 271 operators, 430 arrays (2 quantized)\r\n2019-03-30 17:14:23.806875: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 271 operators, 430 arrays (2 quantized)\r\n2019-03-30 17:14:23.821737: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before default min-max range propagation graph transformations: 271 operators, 430 arrays (2 quantized)\r\n2019-03-30 17:14:23.836560: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After default min-max range propagation graph transformations pass 1: 271 operators, 430 arrays (2 quantized)\r\n2019-03-30 17:14:23.841059: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 271 operators, 430 arrays (2 quantized)\r\n2019-03-30 17:14:23.842802: F ./tensorflow/lite/toco/toco_tooling.h:38] Check failed: s.ok() Unimplemented: this graph contains an operator of type Floor for which the quantized form is not yet implemented. Sorry, and patches welcome (that's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).\r\nFatal Python error: Aborted\r\n\r\nCurrent thread 0x00007fb07e2fd700 (most recent call first):\r\n  File \"/home/disk1/zww/anaconda2/envs/test/lib/python3.6/site-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 33 in execute\r\n  File \"/home/disk1/zww/anaconda2/envs/test/lib/python3.6/site-packages/absl/app.py\", line 251 in _run_main\r\n  File \"/home/disk1/zww/anaconda2/envs/test/lib/python3.6/site-packages/absl/app.py\", line 300 in run\r\n  File \"/home/disk1/zww/anaconda2/envs/test/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 40 in run\r\n  File \"/home/disk1/zww/anaconda2/envs/test/lib/python3.6/site-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 59 in main\r\n  File \"/home/disk1/zww/anaconda2/envs/test/bin/toco_from_protos\", line 10 in <module>\r\nAborted (core dumped)\r\n```\r\n\r\n**Describe the problem**\r\nI try to deploy a VESPCN(video SR) model on android, but after I have taken some time to do custom ops , I failed to quantize the model with this problem, as far as I'm concerned, since the\r\ndata is uint8 type, there is no need of quantization for floor op. can you tell me how to solve this problem,  thanks\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27312", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27312/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27312/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27312/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27312", "id": 427264083, "node_id": "MDU6SXNzdWU0MjcyNjQwODM=", "number": 27312, "title": "import results in Recursion-Error", "user": {"login": "jaba166", "id": 42451756, "node_id": "MDQ6VXNlcjQyNDUxNzU2", "avatar_url": "https://avatars0.githubusercontent.com/u/42451756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaba166", "html_url": "https://github.com/jaba166", "followers_url": "https://api.github.com/users/jaba166/followers", "following_url": "https://api.github.com/users/jaba166/following{/other_user}", "gists_url": "https://api.github.com/users/jaba166/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaba166/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaba166/subscriptions", "organizations_url": "https://api.github.com/users/jaba166/orgs", "repos_url": "https://api.github.com/users/jaba166/repos", "events_url": "https://api.github.com/users/jaba166/events{/privacy}", "received_events_url": "https://api.github.com/users/jaba166/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-30T09:29:56Z", "updated_at": "2019-07-01T11:16:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n    `import tensorflow`\r\n    `import kivy`\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Win10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Windows 10\r\n- TensorFlow installed from (source or binary): pip install (I guess it's binary)\r\n- TensorFlow version (use command below): v1.12.0-9492-g2c319fb415, 2.0.0-alpha0\r\n- Python version: 3.7 (Anaconda Win64)\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n\r\n**Describe the current behavior**\r\nHundreds of messages ` WARNING: Logging before flag parsing goes to stderr.`, finally `RecursionError: maximum recursion depth exceeded while calling a Python object`. Output attached here: [tst.txt](https://github.com/tensorflow/tensorflow/files/3025303/tst.txt)\r\n\r\n\r\n**Describe the expected behavior**\r\n- no error by importing both packages\r\n- independent behaviour from the order of imports\r\n\r\n**Code to reproduce the issue**\r\n\r\n    import tensorflow\r\n    import kivy\r\norder is important. kivy version is 1.10.1 - not sure if installed by pip or conda...\r\n\r\n**Other info / logs**\r\n\r\nSeems to be an issue with incompatible setup of `logging` - but as the error is raised in Tensorflow code, that's where it needs to be fixed.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27303", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27303/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27303/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27303/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27303", "id": 427177030, "node_id": "MDU6SXNzdWU0MjcxNzcwMzA=", "number": 27303, "title": "Need tf.signal.rfft op in TFLite", "user": {"login": "jpangburn", "id": 4357286, "node_id": "MDQ6VXNlcjQzNTcyODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4357286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpangburn", "html_url": "https://github.com/jpangburn", "followers_url": "https://api.github.com/users/jpangburn/followers", "following_url": "https://api.github.com/users/jpangburn/following{/other_user}", "gists_url": "https://api.github.com/users/jpangburn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpangburn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpangburn/subscriptions", "organizations_url": "https://api.github.com/users/jpangburn/orgs", "repos_url": "https://api.github.com/users/jpangburn/repos", "events_url": "https://api.github.com/users/jpangburn/events{/privacy}", "received_events_url": "https://api.github.com/users/jpangburn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1566679705, "node_id": "MDU6TGFiZWwxNTY2Njc5NzA1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:signal", "name": "comp:signal", "color": "0052cc", "default": false, "description": "tf.signal related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 39, "created_at": "2019-03-29T21:02:47Z", "updated_at": "2020-03-11T00:09:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.14.4\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): 1.13.1\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\nIf I pass the SELECT_TF_OPS option then I get:\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, DIV, EXPAND_DIMS, FLOOR_DIV, FULLY_CONNECTED, GATHER, LOG, MAXIMUM, MINIMUM, MUL, PACK, PAD, RANGE, RESHAPE, SHAPE, SPLIT, SPLIT_V, STRIDED_SLICE, SUB, TRANSPOSE. Here is a list of operators for which you will need custom implementations: RFFT.\r\n```\r\nIf I don't pass the SELECT_TF_OPS option then I get:\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, DIV, EXPAND_DIMS, FLOOR_DIV, FULLY_CONNECTED, GATHER, LOG, MAXIMUM, MINIMUM, MUL, PACK, PAD, RANGE, RESHAPE, SHAPE, SPLIT, SPLIT_V, STRIDED_SLICE, SUB, TRANSPOSE. Here is a list of operators for which you will need custom implementations: ComplexAbs, Cos, LinSpace, RFFT.\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\nThe code to create the model is pretty short since I hardcoded a bunch of parameters for now:\r\n\r\n    with tf.Graph().as_default(), tf.Session() as sess:\r\n        # input sound data as a waveform\r\n        waveform = tf.placeholder(tf.float32, [None])\r\n        # A Tensor of [batch_size, num_samples] mono PCM samples in the range [-1, 1].\r\n        pcm = tf.math.scalar_mul(1/32768.0, waveform)\r\n\r\n        # compute Short Time Fourier Transform\r\n        stft = tf.signal.stft(pcm, frame_length=400, frame_step=160, fft_length=512)\r\n        spectrogram = tf.abs(stft)\r\n\r\n        # Warp the linear scale spectrograms into the mel-scale.\r\n        num_spectrogram_bins = stfts.shape[-1].value\r\n        lower_edge_hertz, upper_edge_hertz, num_mel_bins = 125.0, 7500.0, 64\r\n        linear_to_mel_weight_matrix = tf.signal.linear_to_mel_weight_matrix(\r\n          num_mel_bins, num_spectrogram_bins, sample_rate, lower_edge_hertz,\r\n          upper_edge_hertz)\r\n        mel_spectrogram = tf.tensordot(\r\n          spectrogram, linear_to_mel_weight_matrix, 1)\r\n        mel_spectrogram.set_shape(spectrogram.shape[:-1].concatenate(\r\n          linear_to_mel_weight_matrix.shape[-1:]))\r\n\r\n        # Compute a stabilized log to get log-magnitude mel-scale spectrograms.\r\n        log_mel_spectrogram = tf.log(mel_spectrogram + 1e-6)\r\n        # with the model loaded and input/output tensors defined, convert to tf.lite\r\n        converter = tf.lite.TFLiteConverter.from_session(sess, [waveform], [log_mel_spectrogram])\r\n        converter.target_ops = [tf.lite.OpsSet.SELECT_TF_OPS, tf.lite.OpsSet.TFLITE_BUILTINS]\r\n        tflite_model = converter.convert()\r\n\r\n**Any other info / logs**\r\nAssuming the SELECT_TF_OPS option produces a model that will work on TFLite on iOS, then I guess all I need is RFFT.  Thank you!\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27298", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27298/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27298/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27298/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27298", "id": 427103866, "node_id": "MDU6SXNzdWU0MjcxMDM4NjY=", "number": 27298, "title": "Tensorflow 2.0 tf.name_scope has no effect on weights created by keras functional api", "user": {"login": "zzh8829", "id": 2136136, "node_id": "MDQ6VXNlcjIxMzYxMzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2136136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzh8829", "html_url": "https://github.com/zzh8829", "followers_url": "https://api.github.com/users/zzh8829/followers", "following_url": "https://api.github.com/users/zzh8829/following{/other_user}", "gists_url": "https://api.github.com/users/zzh8829/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzh8829/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzh8829/subscriptions", "organizations_url": "https://api.github.com/users/zzh8829/orgs", "repos_url": "https://api.github.com/users/zzh8829/repos", "events_url": "https://api.github.com/users/zzh8829/events{/privacy}", "received_events_url": "https://api.github.com/users/zzh8829/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-03-29T17:44:21Z", "updated_at": "2020-03-06T18:25:18Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.14\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0-alpha0\r\n- Python version: 3.7.1\r\n\r\n\r\n**Describe the current behavior**\r\n\r\ntf.name_scope does not effect the name of weights created by keras.layers\r\n\r\noutput in tf 2.0.0-alpha0 \r\n```\r\ndense/kernel:0\r\ndense/bias:0\r\n```\r\n\r\n**Describe the expected behavior**\r\ntf.name_scope is applied to wights created by keras.layers\r\noutput in tf 1.13.1 is the expected behavior\r\n```\r\nblock/dense/kernel:0\r\nblock/dense/bias:0\r\n```\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nprint(tf.__version__)\r\n\r\ninputs = tf.keras.Input(shape=[2])\r\nwith tf.name_scope('block'):\r\n    outputs = tf.keras.layers.Dense(10)(inputs)\r\nmodel = tf.keras.Model(inputs, outputs)\r\nfor w in model.weights:\r\n    print(w.name)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nI was able to reproduce the output of tf 1.13 in tf 2.0.0 by using the following code\r\n```\r\nfrom tensorflow.python.keras.backend import get_graph\r\nwith get_graph().as_default(), tf.name_scope('block'):\r\n    outputs = tf.keras.layers.Dense(10)(inputs)\r\n```\r\nkeras.layers is using the `keras graph` which overrides the name_scope generated by   tf.name_scope in the `default graph`\r\n\r\nI think the problem is actually caused by tf.name_scope incorrectly set `_has_symbolic_input_in_eager` to False when we are building graph using the keras functional api. since the input here is keras.Input, the name_scope should be applied to keras graph instead of default graph\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27290", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27290/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27290/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27290/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27290", "id": 426999691, "node_id": "MDU6SXNzdWU0MjY5OTk2OTE=", "number": 27290, "title": "AttributeError: 'KerasTPUModel' object has no attribute '_distribution_strategy'", "user": {"login": "ValentinMezev", "id": 10400983, "node_id": "MDQ6VXNlcjEwNDAwOTgz", "avatar_url": "https://avatars3.githubusercontent.com/u/10400983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ValentinMezev", "html_url": "https://github.com/ValentinMezev", "followers_url": "https://api.github.com/users/ValentinMezev/followers", "following_url": "https://api.github.com/users/ValentinMezev/following{/other_user}", "gists_url": "https://api.github.com/users/ValentinMezev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ValentinMezev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ValentinMezev/subscriptions", "organizations_url": "https://api.github.com/users/ValentinMezev/orgs", "repos_url": "https://api.github.com/users/ValentinMezev/repos", "events_url": "https://api.github.com/users/ValentinMezev/events{/privacy}", "received_events_url": "https://api.github.com/users/ValentinMezev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-29T13:58:19Z", "updated_at": "2019-07-24T00:02:24Z", "closed_at": null, "author_association": "NONE", "body": "I load inceptionV3 with:\r\n\r\n```\r\nfrom keras.applications import InceptionV3\r\n\r\nmodel= InceptionV3(weights='imagenet',\r\n                             include_top=False,\r\n                             pooling='max',\r\n                             input_shape=(229, 229, 3))\r\n```\r\n\r\nThen I convert it to TPU model with:\r\n\r\n```\r\nTPU_WORKER = 'grpc://10.x.x.x:8470'\r\nmodel = tf.contrib.tpu.keras_to_tpu_model(\r\n            model,\r\n            strategy=tf.contrib.tpu.TPUDistributionStrategy(\r\n                tf.contrib.cluster_resolver.TPUClusterResolver(TPU_WORKER)))\r\n```\r\n\r\nAnd I try to extract feature vector of an image with:\r\n\r\n`model.predict`\r\n\r\nThe error I receive is\r\n\r\n>  AttributeError: 'KerasTPUModel' object has no attribute '_distribution_strategy'\r\n\r\nMy code works fine without the TPU part, however its very slow and I want to do the predict part on TPU for better performance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27289", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27289/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27289/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27289/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27289", "id": 426998814, "node_id": "MDU6SXNzdWU0MjY5OTg4MTQ=", "number": 27289, "title": "Test case reports an exception to stdout, with stack trace, when testing under self.assertRaises()", "user": {"login": "dprylipko", "id": 15672564, "node_id": "MDQ6VXNlcjE1NjcyNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/15672564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dprylipko", "html_url": "https://github.com/dprylipko", "followers_url": "https://api.github.com/users/dprylipko/followers", "following_url": "https://api.github.com/users/dprylipko/following{/other_user}", "gists_url": "https://api.github.com/users/dprylipko/gists{/gist_id}", "starred_url": "https://api.github.com/users/dprylipko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dprylipko/subscriptions", "organizations_url": "https://api.github.com/users/dprylipko/orgs", "repos_url": "https://api.github.com/users/dprylipko/repos", "events_url": "https://api.github.com/users/dprylipko/events{/privacy}", "received_events_url": "https://api.github.com/users/dprylipko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-03-29T13:56:30Z", "updated_at": "2019-11-20T20:59:00Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Only for testing\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): From PyPI via pip3 install --upgrade tensorflow==1.11.0\r\n- TensorFlow version: v1.11.0-0-gc19e29306c 1.11.0\r\n- Python version: 3.5.2\r\n- CUDA/cuDNN version: CUDA 9.0, cuDNN 7.0\r\n- GPU model and memory: NVIDIA GeForce GTX 1080, 8GB\r\n\r\n\r\n**Describe the current behavior**\r\nException is reported to stdout, with stack trace, when testing under `self.assertRaises()`:\r\n\r\n```\r\n2019-03-29 13:48:50.433118: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\nERROR:tensorflow:assertion failed: [1]\r\n         [[{{node Assert/AssertGuard/Assert}} = Assert[T=[DT_FLOAT], summarize=3, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](Assert/AssertGuard/Assert/Switch, Assert/AssertGuard/Assert/Switch_1)]]\r\n\r\nCaused by op 'Assert/AssertGuard/Assert', defined at:\r\n  File \"/usr/lib/python3.5/runpy.py\", line 184, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.5/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n...\r\n  File \"/usr/lib/python3.5/unittest/case.py\", line 600, in run\r\n    testMethod()\r\n  File \"/home/pryldm1/work/tmp/mock_test.py\", line 19, in testRaises\r\n    sess.run(foo())\r\n  File \"/home/pryldm1/work/tmp/mock_test.py\", line 7, in foo\r\n    max_assert = tf.Assert(tf.greater(max_val, 1.01), [max_val])\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/util/tf_should_use.py\", line 189, in wrapped\r\n    return _add_should_use_warning(fn(*args, **kwargs))\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 158, in Assert\r\n    guarded_assert = cond(condition, no_op, true_assert, name=\"AssertGuard\")\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2087, in cond\r\n    orig_res_f, res_f = context_f.BuildCondBranch(false_fn)\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 1920, in BuildCondBranch\r\n    original_result = fn()\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 156, in true_assert\r\n    condition, data, summarize, name=\"Assert\")\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/ops/gen_logging_ops.py\", line 52, in _assert\r\n    name=name)\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3272, in create_op\r\n    op_def=op_def)\r\n  File \"/home/dl_docker/.local/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1768, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): assertion failed: [1]\r\n         [[{{node Assert/AssertGuard/Assert}} = Assert[T=[DT_FLOAT], summarize=3, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](Assert/AssertGuard/Assert/Switch, Assert/AssertGuard/Assert/Switch_1)]]\r\n\r\n..\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.045s\r\n\r\nOK\r\n\r\n```\r\n\r\n**Describe the expected behavior**\r\nThe exception must be saliently catched:\r\n\r\n```\r\n2019-03-29 13:52:58.147694: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n..\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.026s\r\n\r\nOK\r\n```\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\n\r\ndef foo():                                                                                                                                                                                                                                                            \r\n    result = tf.constant(0)                                                                                                                                                                                                                                           \r\n    max_val = tf.constant(1.0)                                                                                                                                                                                                                                        \r\n    max_assert = tf.Assert(tf.greater(max_val, 1.01), [max_val])                                                                                                                                                                                                      \r\n    with tf.control_dependencies([max_assert]):                                                                                                                                                                                                                       \r\n        result = tf.identity(result)                                                                                                                                                                                                                                  \r\n    return result                                                                                                                                                                                                                                                     \r\n\r\n\r\nclass DummyTestCase(tf.test.TestCase):                                                                                                                                                                                                                                \r\n                                                                                                                                                                                                                                                                      \r\n    def testRaises(self):                                                                                                                                                                                                                                             \r\n        with self.test_session() as sess:                                                                                                                                                                                                                             \r\n            with self.assertRaises(tf.errors.InvalidArgumentError):                                                                                                                                                                                                   \r\n                sess.run(foo())                                                                                                                                                                                                                                       \r\n\r\n\r\nif __name__ == '__main__':                                                                                                                                                                                                                                            \r\n    tf.test.main()\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27285", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27285/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27285/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27285/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27285", "id": 426963485, "node_id": "MDU6SXNzdWU0MjY5NjM0ODU=", "number": 27285, "title": "Depthwise separable conv with floating point 16 and batch norm is too slow.", "user": {"login": "mohsenghafoorian", "id": 11076215, "node_id": "MDQ6VXNlcjExMDc2MjE1", "avatar_url": "https://avatars1.githubusercontent.com/u/11076215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohsenghafoorian", "html_url": "https://github.com/mohsenghafoorian", "followers_url": "https://api.github.com/users/mohsenghafoorian/followers", "following_url": "https://api.github.com/users/mohsenghafoorian/following{/other_user}", "gists_url": "https://api.github.com/users/mohsenghafoorian/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohsenghafoorian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohsenghafoorian/subscriptions", "organizations_url": "https://api.github.com/users/mohsenghafoorian/orgs", "repos_url": "https://api.github.com/users/mohsenghafoorian/repos", "events_url": "https://api.github.com/users/mohsenghafoorian/events{/privacy}", "received_events_url": "https://api.github.com/users/mohsenghafoorian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-29T12:29:27Z", "updated_at": "2020-02-08T01:10:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **Yes**\r\n- OS Platform and Distribution: **16.04.5 LTS (Xenial Xerus)**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **n.a.**\r\n- TensorFlow installed from (source or binary): **source**\r\n- TensorFlow version (use command below): **1.12.0**\r\n- Python version: **3.6.7**\r\n- Bazel version (if compiling from source): **0.21.0**\r\n- GCC/Compiler version (if compiling from source): **5.4.0**\r\n- CUDA/cuDNN version: **10.0 / 7.3.0**\r\n- GPU model and memory: **v100 16gb**\r\n\r\n**Describe the current behavior**\r\nThe depthwise separable convolution, unlike the normal convolution when used with floating point 16 is slower than floating point 32, but more importantly when it is used with batch norm and an optmizer (sgd, adam, etc.), it becomes very much (~40 times) slower than floating point 32. Another unexpected behavior is getting \"core dumped\" with most of the filter sizes, that only happens in case of separable conv with fp16, but not with the other combinations. \r\nFollowing is what I am getting from the given code:\r\n```\r\nExperiment {'fp16': False, 'sep_conv': False, 'bn': True, 'kernel_size': 4} started\r\nand took 1945 ms\r\nExperiment {'fp16': True, 'sep_conv': False, 'bn': True, 'kernel_size': 4} started\r\nand took 1425 ms\r\nExperiment {'fp16': False, 'sep_conv': True, 'bn': True, 'kernel_size': 4} started\r\nand took 4430 ms\r\nExperiment {'fp16': True, 'sep_conv': True, 'bn': True, 'kernel_size': 4} started\r\nand took 161081 ms\r\nExperiment {'fp16': True, 'sep_conv': True, 'bn': False, 'kernel_size': 4} started\r\nand took 7191 ms\r\nExperiment {'fp16': True, 'sep_conv': True, 'bn': False, 'kernel_size': 3} started\r\n2019-03-29 13:20:30.522213: F tensorflow/stream_executor/stream_executor_pimpl.cc:712] Check failed: 0 == size % 4 (0 vs. 2)need 32-bit multiple size to fill with 32-bit pattern\r\nAborted (core dumped)\r\n```\r\n\r\n**Describe the expected behavior**\r\nI expect the batch norm not to make it so much slower and not to get core dumped with different kernel sizes.\r\nAlso, I expected fp 16, to be faster than fp 32, (as is in normal conv).\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport time\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib import layers\r\n\r\ndepth = 50\r\nwidth = 100\r\nnum_filters = 100\r\nbatch_size = 16\r\nrepeat = 3\r\n\r\n\r\ndef create_optimize_op(use_fp_16: bool, use_separable_conv: bool, use_batch_norm: bool, kernel_size: int,\r\n                       exp_index: int) -> tf.Tensor:\r\n\r\n    label = tf.random_normal(shape=[batch_size, width, width, num_filters],\r\n                             dtype=tf.float16 if use_fp_16 else tf.float32)\r\n    input_image = tf.random_normal(shape=[batch_size, width, width, 3], dtype=tf.float16 if use_fp_16 else tf.float32)\r\n    head = input_image\r\n    for layer_ind in range(depth):\r\n        conv_f = layers.separable_conv2d if use_separable_conv else layers.conv2d\r\n        head = conv_f(head, num_filters, (kernel_size, kernel_size), stride=(1, 1), padding=\"SAME\", normalizer_fn=None,\r\n                      reuse=tf.AUTO_REUSE, scope=f\"{exp_index}layer{layer_ind}\", data_format=\"NHWC\")\r\n        if use_batch_norm:\r\n            head = tf.contrib.layers.batch_norm(head, scale=True, is_training=True)\r\n    reshaped_label = tf.reshape(label, shape=[batch_size, -1])\r\n    reshaped_pred = tf.reshape(head, shape=[batch_size, -1])\r\n    loss = tf.losses.softmax_cross_entropy(reshaped_label, reshaped_pred)\r\n    return tf.train.GradientDescentOptimizer(learning_rate=0.01).minimize(loss)\r\n\r\n\r\nexperiments = [{\"fp16\": False, \"sep_conv\": False, \"bn\": True, \"kernel_size\": 4},\r\n               {\"fp16\": True, \"sep_conv\": False, \"bn\": True, \"kernel_size\": 4},\r\n               {\"fp16\": False, \"sep_conv\": True, \"bn\": True, \"kernel_size\": 4},\r\n               {\"fp16\": True, \"sep_conv\": True, \"bn\": True, \"kernel_size\": 4},\r\n               {\"fp16\": True, \"sep_conv\": True, \"bn\": False, \"kernel_size\": 4},\r\n               {\"fp16\": True, \"sep_conv\": True, \"bn\": False, \"kernel_size\": 3}]\r\n\r\nwith tf.Session() as session:\r\n    for index, experiment in enumerate(experiments):\r\n        step = create_optimize_op(experiment[\"fp16\"], experiment[\"sep_conv\"], experiment[\"bn\"],\r\n                                  experiment[\"kernel_size\"], index)\r\n        init_op = tf.global_variables_initializer()\r\n        update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\r\n        print(f\"Experiment {experiment} started\")\r\n        # a first warmup run.\r\n        _ = session.run([init_op])\r\n        _ = session.run([update_ops, step])\r\n\r\n        start = time.clock()\r\n        for i in range(repeat):\r\n            _ = session.run([init_op])\r\n            _ = session.run([update_ops, step])\r\n        end = time.clock()\r\n        time_taken = int((end - start) * 1000)\r\n        print(f\"and took {time_taken} ms\")\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27281", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27281/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27281/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27281/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27281", "id": 426921596, "node_id": "MDU6SXNzdWU0MjY5MjE1OTY=", "number": 27281, "title": " Error polling for event status: failed to query event: CUDA_ERROR_UNKNOWN during training process", "user": {"login": "cristiangogosila", "id": 23113926, "node_id": "MDQ6VXNlcjIzMTEzOTI2", "avatar_url": "https://avatars0.githubusercontent.com/u/23113926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cristiangogosila", "html_url": "https://github.com/cristiangogosila", "followers_url": "https://api.github.com/users/cristiangogosila/followers", "following_url": "https://api.github.com/users/cristiangogosila/following{/other_user}", "gists_url": "https://api.github.com/users/cristiangogosila/gists{/gist_id}", "starred_url": "https://api.github.com/users/cristiangogosila/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cristiangogosila/subscriptions", "organizations_url": "https://api.github.com/users/cristiangogosila/orgs", "repos_url": "https://api.github.com/users/cristiangogosila/repos", "events_url": "https://api.github.com/users/cristiangogosila/events{/privacy}", "received_events_url": "https://api.github.com/users/cristiangogosila/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-03-29T10:35:40Z", "updated_at": "2020-01-22T03:49:23Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 1.10\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 9.0/7.2.1\r\n- GPU model and memory: 3x NVIDIA RTX 2080 Ti\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nSometimes, during training process , i get this error:  E tensorflow/stream_executor/cuda/cuda_event.cc:48] Error polling for event status: failed to query event: CUDA_ERROR_UNKNOWN: unknown error\r\n2019-03-28 20:00:09.965396: F tensorflow/core/common_runtime/gpu/gpu_event_mgr.cc:274] Unexpected Event status: 1\r\n\r\nThis happens sometimes when i am not connected to that machine. For some reason, when i am working on that machine, i'm not getting that error.\r\n\r\n**Describe the expected behavior**\r\n\r\n**Small snippet of code\r\nmodel.compile(loss='binary_crossentropy',\r\n              optimizer='adam', metrics=['accuracy','binary_crossentropy'])\r\nfilepath=\"weights-{epoch:02d}-{acc:.4f}.h5\"\r\nmc = ModelCheckpoint(filepath, monitor='val_loss', verbose=0, save_best_only=False, save_weights_only=False, mode='auto', period=50)\r\nbaseline = model.fit(X,Y,epochs=200, batch_size=32,validation_data=(Xtest, Ytest), callbacks=[mc])\r\n\r\n\r\n**Code to reproduce the issue**\r\nIt reproduces at an epoch numeber bigger than 150( sometimes is around 200, sometimes 500)\r\n\r\n**Other info / logs**.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27266", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27266/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27266/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27266/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27266", "id": 426762128, "node_id": "MDU6SXNzdWU0MjY3NjIxMjg=", "number": 27266, "title": "Incorrect flops calculation for operations with complex numbers", "user": {"login": "saugatkandel", "id": 32494640, "node_id": "MDQ6VXNlcjMyNDk0NjQw", "avatar_url": "https://avatars2.githubusercontent.com/u/32494640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saugatkandel", "html_url": "https://github.com/saugatkandel", "followers_url": "https://api.github.com/users/saugatkandel/followers", "following_url": "https://api.github.com/users/saugatkandel/following{/other_user}", "gists_url": "https://api.github.com/users/saugatkandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/saugatkandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saugatkandel/subscriptions", "organizations_url": "https://api.github.com/users/saugatkandel/orgs", "repos_url": "https://api.github.com/users/saugatkandel/repos", "events_url": "https://api.github.com/users/saugatkandel/events{/privacy}", "received_events_url": "https://api.github.com/users/saugatkandel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-29T00:26:04Z", "updated_at": "2019-04-10T18:04:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Red Hat 4.8.5-16\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): via Anaconda\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): 4.8.5\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Code to reproduce the issue**\r\n```\r\ntf.reset_default_graph()\r\nx = tf.constant(2 + 3j, dtype='complex64')\r\ny = tf.constant(3 + 2j, dtype='complex64')\r\nz = x * y\r\n\r\nsession = tf.Session()\r\nsession.run(tf.global_variables_initializer())\r\n\r\nrun_meta = tf.RunMetadata()\r\nopts = tf.profiler.ProfileOptionBuilder.float_operation()    \r\nflops = tf.profiler.profile(run_meta=run_meta, cmd='op', options=opts) \r\nprint(flops.total_float_ops) \r\n```\r\nThe output is:\r\n```\r\n1\r\n```\r\n\r\n**Describe the current behavior**\r\nMultiplication of complex numbers typically requires 6 floating point operations (4 real multiplications and 2 real additions) and not just 1 floating point operation. The [functions that calculate the flops statistics](https://github.com/tensorflow/tensorflow/blob/f43d458a318d4d97298710654f1692f6e8364f82/tensorflow/python/profiler/internal/flops_registry.py) do not seem to distinguish between floats and complex numbers.\r\n\r\n**Expected behavior**\r\nFor complex numbers, addition and multiplication should require 2 and 6 flops (with real numbers) respectively.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27259", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27259/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27259/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27259/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27259", "id": 426652147, "node_id": "MDU6SXNzdWU0MjY2NTIxNDc=", "number": 27259, "title": "r1.13 multi-gpu towering fails due to DeviceSpec parsing during model creation", "user": {"login": "mmajurski", "id": 9354454, "node_id": "MDQ6VXNlcjkzNTQ0NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/9354454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmajurski", "html_url": "https://github.com/mmajurski", "followers_url": "https://api.github.com/users/mmajurski/followers", "following_url": "https://api.github.com/users/mmajurski/following{/other_user}", "gists_url": "https://api.github.com/users/mmajurski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmajurski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmajurski/subscriptions", "organizations_url": "https://api.github.com/users/mmajurski/orgs", "repos_url": "https://api.github.com/users/mmajurski/repos", "events_url": "https://api.github.com/users/mmajurski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmajurski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-03-28T18:44:04Z", "updated_at": "2020-02-08T01:10:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): This is a custom written yolov3 model written primarily with the tf.layers api which is soon to deprecated. \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04 & Power9\r\n- TensorFlow installed from (source or binary): compiled from r1.13 source branch and Conda tensorflow-gpu package from https://public.dhe.ibm.com/ibmdl/export/pub/software/server/ibm-ai/conda/\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): 0.18.1\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: Cuda 10.0 CuDNN 7.5 NCCL 2.4\r\n- GPU model and memory: GT 1080 Ti 12GB and V100 16GB\r\n\r\n**Describe the current behavior**\r\nUnder Tensorflow r1.13 my single node multi-gpu training code produces a \r\n```\r\nsplits = [x.split(\":\") for x in spec.split(\"/\")]\r\nAttributeError: 'DeviceSpec' object has no attribute 'split'\r\n```\r\n\r\nError when constructing the model, before a single forward pass has happened.\r\n\r\nThe towering code I am using is based on the cifar10_multi_gpu_train.py example:\r\nhttps://github.com/petewarden/tensorflow_makefile/blob/master/tensorflow/models/image/cifar10/cifar10_multi_gpu_train.py\r\n\r\n**Describe the expected behavior**\r\nMy codebase works correctly on Tensroflow r1.12\r\n\r\nGiven the error and my reading of the tensorflow source code throwing the error, my best guess is some op is missing/has a malformed device_spec, or a deivce_spec object is being passed into the `DeviceSpec().parse_from_string(spec)` function. \r\n\r\nThe layer that seems to be generating this (see trace below) is \r\n```\r\ntf.layers.conv2d_transpose\r\n``` \r\n\r\nI am using several: `tf.device('/cpu:0')` and `tf.device('/gpu:#')` statements to control the placement of ops within different towers onto specific devices. and the problematic `tf.layers.conv2d_transpose` is happening once per tower under a \r\n```with tf.device('/gpu:#'):``` However, if this error were tied to my mishandling of those control statements the many layers of the model that get added before `tf.layers.conv2d_transpose` would have caused an error. \r\n\r\nThese issues in the past seem somewhat relevant, but they all refer to much older source code for tensorflow, and this is a change since r1.12. So I am not putting much stock in any of the discussion from these issues:\r\n- https://github.com/keras-team/keras/issues/10008\r\n- https://github.com/keras-team/keras/issues/10490\r\n\r\nDoes anyone have any pointers where I could look for solutions? My entire codebase will be shifting to tf2.0 api once thats out of alpha. However, it is my understanding that model data parallel training is not fully operational at this time for custom models (non tf.keras.models.Sequential models).\r\n\r\n**Other info / logs**\r\n```\r\nCreating model\r\nBuilding model towers\r\n  tower 0\r\n    building feature map\r\nshutdown complete\r\n  File \"train_yolo.py\", line 348, in <module>\r\n    train_model()\r\n  File \"train_yolo.py\", line 169, in train_model\r\n    train_op, all_loss_total_op, all_loss_xy_op, all_loss_wh_op, all_loss_objectness_op, all_loss_class_op, ops_per_gpu, train_init_op, test_init_op, is_training_placeholder = yolov3.build_towered_model(train_reader, test_reader, GPU_IDS, LEARNING_RATE)\r\n  File \"/fs/wrk/mmajursk/yolov3/src/yolov3.py\", line 562, in build_towered_model\r\n    outputs, total_loss_op, loss_xy_op, loss_wh_op, loss_objectness_op, loss_class_op = tower_loss(image_batch, label_batch, is_training_placeholder)\r\n  File \"/fs/wrk/mmajursk/yolov3/src/yolov3.py\", line 464, in tower_loss\r\n    pred_feature_map, outputs = add_inference_ops(images, is_training=is_training)\r\n  File \"/fs/wrk/mmajursk/yolov3/src/yolov3.py\", line 446, in add_inference_ops\r\n    pred_feature_map = build_feature_maps(images, is_training=is_training)\r\n  File \"/fs/wrk/mmajursk/yolov3/src/yolov3.py\", line 211, in build_feature_maps\r\n    inputs = upsample_2x(inputs)\r\n  File \"/fs/wrk/mmajursk/yolov3/src/yolov3.py\", line 168, in upsample_2x\r\n    trainable=False)  \r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 324, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/layers/convolutional.py\", line 1279, in conv2d_transpose\r\n    return layer.apply(inputs)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 1227, in apply\r\n    return self.__call__(inputs, *args, **kwargs)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/layers/base.py\", line 530, in __call__\r\n    outputs = super(Layer, self).__call__(inputs, *args, **kwargs)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 554, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/layers/convolutional.py\", line 832, in call\r\n    dilation_rate=self.dilation_rate)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 4267, in conv2d_transpose\r\n    x, tf_data_format = _preprocess_conv2d_input(x, data_format, force_transpose)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 4082, in _preprocess_conv2d_input\r\n    if not _has_nchw_support() or force_transpose:\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 592, in _has_nchw_support\r\n    explicitly_on_cpu = _is_current_explicit_device('CPU')\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 561, in _is_current_explicit_device\r\n    device = _get_current_tf_device()\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 541, in _get_current_tf_device\r\n    graph._apply_device_functions(op)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 4246, in _apply_device_functions\r\n    op._set_device(device_spec.function(op))\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/framework/device.py\", line 314, in _device_function\r\n    current_device = DeviceSpec.from_string(node_def.device or \"\")\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/framework/device.py\", line 232, in from_string\r\n    return DeviceSpec().parse_from_string(spec)\r\n  File \"/home/mmajursk/.conda/envs/tf/lib/python3.6/site-packages/tensorflow/python/framework/device.py\", line 150, in parse_from_string\r\n    splits = [x.split(\":\") for x in spec.split(\"/\")]\r\nAttributeError: 'DeviceSpec' object has no attribute 'split'\r\n```\r\n\r\nThanks for any help/insights you can provide.\r\n~Michael\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27246", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27246/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27246/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27246/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27246", "id": 426529719, "node_id": "MDU6SXNzdWU0MjY1Mjk3MTk=", "number": 27246, "title": "Build Issue on windows - cd command does not change drive without /d flag", "user": {"login": "phil20686", "id": 6398777, "node_id": "MDQ6VXNlcjYzOTg3Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6398777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phil20686", "html_url": "https://github.com/phil20686", "followers_url": "https://api.github.com/users/phil20686/followers", "following_url": "https://api.github.com/users/phil20686/following{/other_user}", "gists_url": "https://api.github.com/users/phil20686/gists{/gist_id}", "starred_url": "https://api.github.com/users/phil20686/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phil20686/subscriptions", "organizations_url": "https://api.github.com/users/phil20686/orgs", "repos_url": "https://api.github.com/users/phil20686/repos", "events_url": "https://api.github.com/users/phil20686/events{/privacy}", "received_events_url": "https://api.github.com/users/phil20686/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-28T14:38:44Z", "updated_at": "2019-04-03T01:44:43Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- Windows 10:\r\n- TensorFlow installed from (source or binary): building\r\n- TensorFlow version: Master\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):23.0\r\n- GCC/Compiler version (if compiling from source):VS2015\r\n- CUDA/cuDNN version:7.1\r\n- GPU model and memory:GTX970\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nWhen building with bazel the it fails with the following \r\n\r\n`ERROR: D:/phil/python/tensorflow/tensorflow/core/BUILD:2676:1: Executing genrule //tensorflow/core:version_info_gen failed (Exit 1): bash.exe failed: error executing command\r\n  cd C:/users/username/_bazel_username/frxyltss/execroot/org_tensorflow\r\n\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n\r\n   <more set parameters>\r\n\r\n  C:/msys64/usr/bin/bash.exe -c source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/x64_windows-opt/bin/tensorflow/tools/git/gen_git_source.exe --generate external/local_config_git/gen/spec.json external/local_config_git/gen/head external/local_config_git/gen/branch_ref \"bazel-out/x64_windows-opt/genfiles/tensorflow/core/util/version_info.cc\" --git_tag_override=${GIT_TAG_OVERRIDE:-}\r\n\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n\r\nD:\\Phil\\Virtual Environments\\tensorflow_compilation\\Scripts\\python.exe: can't find '__main__' module in 'C:\\\\users\\\\yvann'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build`\r\n\r\nThe cause of this is that the tensorflow source directory is on the D drive, but the temporary files are created in the windows user directory that is on the C drive. On windows the cd command does not change drive by default. Thus the line \r\n`cd C:/users/username/_bazel_username/frxyltss/execroot/org_tensorflow`\r\nwill not change the directory if the current working directory is on the D drive. This can be fixed by making the above line cd /d <path> which will then change drive. Alternatively you can insert cd D:\r\nThis command appears to be autogenerated but i cannot easily see how to change it.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27245", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27245/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27245/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27245/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27245", "id": 426486570, "node_id": "MDU6SXNzdWU0MjY0ODY1NzA=", "number": 27245, "title": "tf.data input pipeline got strange bug with tensorflow-gpu", "user": {"login": "ZeliangSu", "id": 32488725, "node_id": "MDQ6VXNlcjMyNDg4NzI1", "avatar_url": "https://avatars3.githubusercontent.com/u/32488725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZeliangSu", "html_url": "https://github.com/ZeliangSu", "followers_url": "https://api.github.com/users/ZeliangSu/followers", "following_url": "https://api.github.com/users/ZeliangSu/following{/other_user}", "gists_url": "https://api.github.com/users/ZeliangSu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZeliangSu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZeliangSu/subscriptions", "organizations_url": "https://api.github.com/users/ZeliangSu/orgs", "repos_url": "https://api.github.com/users/ZeliangSu/repos", "events_url": "https://api.github.com/users/ZeliangSu/events{/privacy}", "received_events_url": "https://api.github.com/users/ZeliangSu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-03-28T13:17:14Z", "updated_at": "2019-11-29T12:31:41Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- Mobile device if the issue happens on mobile device: Dell Precision Tower 7910\r\n- TensorFlow installed from (source or binary): tensorflow-gpu 1.12.0\r\n- TensorFlow version (use command below): tensorflow-gpu 1.12.0\r\n- Installed from: conda\r\n- Python version: python 3.6\r\n- GCC/Compiler version (if compiling from source): 6.5.0\r\n- CUDA/cuDNN version: 9.2 but nvcc 7.5\r\n- GPU model and memory:Quadro M4000\r\n\r\n\r\n**Describe the current behavior**\r\nThe following code worked fine with tensorflow-cpu 1.12.0 but not with the gpu version.\r\nI got error:\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: transpose expects a vector of size 5. But input(1) is a vector of size 4\r\n\t [[{{node gradients/Conv1/Conv2D_grad/Conv2DBackpropFilter-0-TransposeNHWCToNCHW-LayoutOptimizer}} = Transpose[T=DT_FLOAT, Tperm=DT_INT32, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](IteratorGetNext/_19, PermConstNHWCToNCHW-LayoutOptimizer)]]\r\n\t [[{{node mean_squared_error/num_present/broadcast_weights/assert_broadcastable/AssertGuard/Assert/Switch_2/_37}} = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_63_me...t/Switch_2\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\r\n```\r\nHere's the traceback:\r\n\r\n> Traceback (most recent call last):\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1334, in _do_call\r\n>     return fn(*args)\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1319, in _run_fn\r\n>     options, feed_dict, fetch_list, target_list, run_metadata)\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1407, in _call_tf_sessionrun\r\n>     run_metadata)\r\n\r\nAnother thread on parallel threw:\r\n\r\n> Traceback (most recent call last):\r\n>   File \"20190328_.py\", line 52, in <module>    sess.run([train_op])\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n>     run_metadata_ptr)\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1152, in _run\r\n>     feed_dict_tensor, options, run_metadata)\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1328, in _do_run\r\n>   File \"/anaconda3/envs/tf/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1348, in _do_call\r\n>     raise type(e)(node_def, op, message)\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nimport h5py\r\nimport threading\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n# make some random img data\r\nfor i in range(100):\r\n    with h5py.File('./test_{}.h5'.format(i), 'w') as f:\r\n        f.create_dataset('X', shape=(1000, 100, 100), dtype='float32', data=np.random.rand(10**7).reshape(1000, 100, 100))\r\n        f.create_dataset('y', shape=(1000, 100, 100), dtype='float32', data=np.random.rand(10**7).reshape(1000, 100, 100))\r\n        print(threading.get_ident())\r\n\r\n# params\r\nnum_cores = 3\r\nshuffle_size = 1\r\nbatch_size = 1\r\n\r\n# read .h5 file\r\ndef parse_file(f):\r\n    print(f.decode('utf-8'))\r\n    with h5py.File(f.decode(\"utf-8\"), 'r') as fi:\r\n        X = fi['X'][:].reshape(1000, 100, 100, 1)\r\n        y = fi['y'][:].reshape(1000, 100, 100, 1)\r\n        print(threading.get_ident())  # to see the thread id\r\n        return X, y\r\n\r\n# py_func wrapper\r\ndef parse_file_tf(filename):\r\n    return tf.py_func(parse_file, [filename], [tf.float32, tf.float32])\r\n\r\n# input pipeline\r\nfiles = tf.data.Dataset.list_files('./test_*.h5')\r\ndataset = files.map(parse_file_tf, num_parallel_calls=num_cores)\r\ndataset = dataset.batch(batch_size).shuffle(shuffle_size).prefetch(10)\r\nit = dataset.make_initializable_iterator()\r\niter_init_op = it.initializer\r\nX_it, y_it = it.get_next()\r\n\r\n# simplest model\r\nwith tf.name_scope(\"Conv1\"):\r\n    W = tf.get_variable(\"W\", shape=[3, 3, 1, 1],\r\n                         initializer=tf.contrib.layers.xavier_initializer())\r\n    b = tf.get_variable(\"b\", shape=[1], initializer=tf.contrib.layers.xavier_initializer())\r\n    layer1 = tf.nn.conv2d(X_it, W, strides=[1, 1, 1, 1], padding='SAME') + b\r\n    out = tf.nn.relu(layer1)\r\n\r\nloss = tf.reduce_mean(tf.losses.mean_squared_error(labels=y_it, predictions=out))\r\ntrain_op = tf.train.AdamOptimizer(learning_rate=0.0001).minimize(loss)\r\n\r\n# session\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\nsess.run(iter_init_op)\r\nsess.run([train_op])\r\nsess.close()\r\n```\r\nThanks for your help\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27240", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27240/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27240/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27240/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27240", "id": 426424876, "node_id": "MDU6SXNzdWU0MjY0MjQ4NzY=", "number": 27240, "title": "TFLite GPU delegate returns only zeros for part of the outputs", "user": {"login": "gerhardgossen", "id": 78063, "node_id": "MDQ6VXNlcjc4MDYz", "avatar_url": "https://avatars3.githubusercontent.com/u/78063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gerhardgossen", "html_url": "https://github.com/gerhardgossen", "followers_url": "https://api.github.com/users/gerhardgossen/followers", "following_url": "https://api.github.com/users/gerhardgossen/following{/other_user}", "gists_url": "https://api.github.com/users/gerhardgossen/gists{/gist_id}", "starred_url": "https://api.github.com/users/gerhardgossen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gerhardgossen/subscriptions", "organizations_url": "https://api.github.com/users/gerhardgossen/orgs", "repos_url": "https://api.github.com/users/gerhardgossen/repos", "events_url": "https://api.github.com/users/gerhardgossen/events{/privacy}", "received_events_url": "https://api.github.com/users/gerhardgossen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-28T10:50:54Z", "updated_at": "2019-04-03T01:44:39Z", "closed_at": null, "author_association": "NONE", "body": "I'm testing the GPU delegate with a pose detection model (https://github.com/ildoonet/tf-pose-estimation modified to run heatmap maxpooling as part of the graph). This model works with no problems when using the CPU. When I enable the GPU delegate, the inference time improves by about 4x, but one of the outputs contains only zeros, whereas the other outputs seem to contain reasonable values (`heatmap` is zeros, `part affinity map` and `maxpooled heatmap` are OK). I also get zeros when I initialize the output array using other values, indicating that the output is actually written too, just with the wrong values.\r\n\r\nThe zeroed output (`heatmap`) is a direct predecessor of another (correctly produced) output (`maxpooled heatmap`).\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n_Yes, app using TFLite_\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n_Tensorflow Lite on Android_\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n_several, e.g. Sony Xperia XZ1 compact_ \r\n\r\n- TensorFlow installed from (source or binary):\r\n_Binary_ \r\n\r\n- TensorFlow version (use command below):\r\n````\r\norg.tensorflow:tensorflow-android:1.12.0\r\norg.tensorflow:tensorflow-lite:0.0.1-gpu-experimental\r\n````\r\n\r\n**Describe the current behavior**\r\nOutput has correct values without GPU delegate, but contains only zeros (0.0f) when using GPU delegate\r\n\r\n**Describe the expected behavior**\r\nSimilar outputs in both cases\r\n\r\n**Code to reproduce the issue**\r\nSee repository https://github.com/gerhardgossen/GpuDelegateTest (the TFLite part is in Application/src/main/java/com/example/android/camera2basic/TfliteInferer.java). When running the app, it prints the ratio of zero values in each output to the Android log. This value is != 1.0 for all outputs without GPU delegate, but == 1.0 with GPU delegate.\r\n\r\n\r\n**Other info / logs**\r\n\r\nModel description as produced by tensorflow/lite/tools/visualize.py: [pose.zip](https://github.com/tensorflow/tensorflow/files/3017522/pose.zip)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27229", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27229/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27229/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27229/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27229", "id": 426306789, "node_id": "MDU6SXNzdWU0MjYzMDY3ODk=", "number": 27229, "title": "Convert Unsupported Operations", "user": {"login": "joseph-d-p", "id": 16228946, "node_id": "MDQ6VXNlcjE2MjI4OTQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/16228946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joseph-d-p", "html_url": "https://github.com/joseph-d-p", "followers_url": "https://api.github.com/users/joseph-d-p/followers", "following_url": "https://api.github.com/users/joseph-d-p/following{/other_user}", "gists_url": "https://api.github.com/users/joseph-d-p/gists{/gist_id}", "starred_url": "https://api.github.com/users/joseph-d-p/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joseph-d-p/subscriptions", "organizations_url": "https://api.github.com/users/joseph-d-p/orgs", "repos_url": "https://api.github.com/users/joseph-d-p/repos", "events_url": "https://api.github.com/users/joseph-d-p/events{/privacy}", "received_events_url": "https://api.github.com/users/joseph-d-p/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-28T05:34:24Z", "updated_at": "2019-04-04T17:20:36Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS High Sierra 10.13.6\r\n- TensorFlow installed from (source or binary): via pip\r\n- TensorFlow version (or github SHA if from source): tensorflow==1.13.1\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2019-03-27 17:40:24.648521: I tensorflow/lite/toco/import_tensorflow.cc:1324] Converting unsupported operation: IteratorV2\r\n2019-03-27 17:40:24.656267: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-03-27 17:40:24.656283: I tensorflow/lite/toco/import_tensorflow.cc:1324] Converting unsupported operation: IteratorGetNext\r\n2019-03-27 17:40:24.656301: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2019-03-27 17:40:24.656376: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 2\r\n2019-03-27 17:40:24.656460: I tensorflow/lite/toco/import_tensorflow.cc:1324] Converting unsupported operation: SoftmaxCrossEntropyWithLogits\r\n2019-03-27 17:40:24.656709: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 21 operators, 35 arrays (0 quantized)\r\n2019-03-27 17:40:24.656884: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 21 operators, 35 arrays (0 quantized)\r\n2019-03-27 17:40:24.657083: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 13 operators, 24 arrays (0 quantized)\r\n2019-03-27 17:40:24.657094: F tensorflow/lite/toco/tooling_util.cc:897] Check failed: GetOpWithInput(model, input_array.name()) Specified input array \"weights\" is not consumed by any op in this graph. Is it a typo? To silence this message, pass this flag:  allow_nonexistent_arrays\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n[model.zip](https://github.com/tensorflow/tensorflow/files/3016307/model.zip)\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\ntrain_data = tf.data.Dataset.from_tensor_slices(train)\r\ntrain_data = train_data.shuffle(10000)\r\ntrain_data = train_data.batch(batch_size)\r\n\r\niterator = tf.data.Iterator.from_structure(train_data.output_types,\r\n                                           train_data.output_shapes)\r\nimg, label = iterator.get_next()\r\ntrain_init = iterator.make_initializer(train_data) # initializer for train_data\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27223", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27223/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27223/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27223/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27223", "id": 426276740, "node_id": "MDU6SXNzdWU0MjYyNzY3NDA=", "number": 27223, "title": "No way to use string type with Lite C APIs.", "user": {"login": "mattn", "id": 10111, "node_id": "MDQ6VXNlcjEwMTEx", "avatar_url": "https://avatars0.githubusercontent.com/u/10111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattn", "html_url": "https://github.com/mattn", "followers_url": "https://api.github.com/users/mattn/followers", "following_url": "https://api.github.com/users/mattn/following{/other_user}", "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattn/subscriptions", "organizations_url": "https://api.github.com/users/mattn/orgs", "repos_url": "https://api.github.com/users/mattn/repos", "events_url": "https://api.github.com/users/mattn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-28T03:15:02Z", "updated_at": "2019-03-30T14:45:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows10, Linux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: a26413ef0a179dd93b5228b031de83dce97a8684\r\n- Python version: 3.7 but I'm writing TfLite with C\r\n- Installed using virtualenv? pip? conda?: see above\r\n- Bazel version (if compiling from source): see above\r\n- GCC/Compiler version (if compiling from source): 8.3.0\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\n**Describe the problem**\r\n\r\nI'm trying to implement smartreply using go-tflite. Most of features can be implemented with C APIs. But no way to manipulate dynamic-buffer. Do you have plan to add APIs for dynamic-buffers?\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nNo way to explain to reproduce.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27193", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27193/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27193/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27193/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27193", "id": 425866086, "node_id": "MDU6SXNzdWU0MjU4NjYwODY=", "number": 27193, "title": "Non-uniform FFT layer", "user": {"login": "zaccharieramzi", "id": 6387497, "node_id": "MDQ6VXNlcjYzODc0OTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/6387497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaccharieramzi", "html_url": "https://github.com/zaccharieramzi", "followers_url": "https://api.github.com/users/zaccharieramzi/followers", "following_url": "https://api.github.com/users/zaccharieramzi/following{/other_user}", "gists_url": "https://api.github.com/users/zaccharieramzi/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaccharieramzi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaccharieramzi/subscriptions", "organizations_url": "https://api.github.com/users/zaccharieramzi/orgs", "repos_url": "https://api.github.com/users/zaccharieramzi/repos", "events_url": "https://api.github.com/users/zaccharieramzi/events{/privacy}", "received_events_url": "https://api.github.com/users/zaccharieramzi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1566679705, "node_id": "MDU6TGFiZWwxNTY2Njc5NzA1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:signal", "name": "comp:signal", "color": "0052cc", "default": false, "description": "tf.signal related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-27T10:04:45Z", "updated_at": "2020-03-02T01:59:05Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): Yes (but I only know how to code in Python)\r\n\r\n**Describe the feature and the current behavior/state.**\r\nHave a layer similar to the fft layer that will implement the non-uniform FFT.\r\n\r\n**Will this change the current api? How?** This will allow to have one more option when using the signal module, `nfft`.\r\n\r\n**Who will benefit with this feature?** People working with neural networks involving Non-uniform FFT. The main application I know of is MRI, but according to the [Wikipedia page](https://en.wikipedia.org/wiki/Non-uniform_discrete_Fourier_transform) there may be more applications. In particular, I think computed tomography can make use of it to accelerate acquisition times.\r\n\r\n**Any Other info.** Since the NuFFT is not based on the FFT it would require a custom kernel and is therefore not trivial to implement. I haven't looked much into it but it could potentially make use of the [Flatiron Institute library](https://finufft.readthedocs.io/en/latest/).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27170", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27170/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27170/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27170/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27170", "id": 425682070, "node_id": "MDU6SXNzdWU0MjU2ODIwNzA=", "number": 27170, "title": "Keras support for RaggedTensors", "user": {"login": "jackd", "id": 659115, "node_id": "MDQ6VXNlcjY1OTExNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/659115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackd", "html_url": "https://github.com/jackd", "followers_url": "https://api.github.com/users/jackd/followers", "following_url": "https://api.github.com/users/jackd/following{/other_user}", "gists_url": "https://api.github.com/users/jackd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackd/subscriptions", "organizations_url": "https://api.github.com/users/jackd/orgs", "repos_url": "https://api.github.com/users/jackd/repos", "events_url": "https://api.github.com/users/jackd/events{/privacy}", "received_events_url": "https://api.github.com/users/jackd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, {"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 30, "created_at": "2019-03-26T22:46:17Z", "updated_at": "2020-02-21T09:16:42Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "# System Information\r\n- TensorFlow version: 1.13.1 (issue present in 2.0 alpha\r\n- Are you willing to contribute it: Yes\r\n\r\n# Current State/Behaviour\r\n`tf.RaggedTensor`s do a fantastic job of masking their internal representation from the user, allowing them to be used as regular tensors in most contexts. This does not extend to keras models however. As an example:\r\n\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.layers import Input\r\nfrom tensorflow.keras.layers import Lambda\r\nfrom tensorflow.keras.models import Model\r\nif not hasattr(tf, 'nest'):\r\n    tf.nest = tf.contrib.framework.nest\r\n\r\n\r\nvalues = Input(shape=(10,), dtype=tf.float32)\r\n\r\n## non-ragged version\r\nindices = Input(shape=(5,), dtype=tf.int64)\r\ngathered = Lambda(lambda args: tf.gather(*args))([values, indices])\r\nModel(inputs=(values, indices), outputs=gathered)\r\n# works fine\r\n\r\n## ragged version\r\nindex_values = Input(shape=(), dtype=tf.int64)\r\nindex_row_splits = Input(shape=(), dtype=tf.int64)\r\n\r\nindices = tf.RaggedTensor.from_row_splits(index_values, index_row_splits)\r\ngathered = Lambda(lambda args: tf.gather(*args))([values, indices])\r\nModel(inputs=(values, indices), outputs=gathered)\r\n# raises\r\n# 1.13.1: ValueError: Input tensors to a Model must come from `tf.keras.Input`.\r\n# Received: tf.RaggedTensor(values=Tensor(\"input_3:0\", shape=(?,), dtype=int64),\r\n# row_splits=Tensor(\"input_4:0\", shape=(?,), dtype=int64))\r\n# (missing previous layer metadata).\r\n# 2.0: AttributeError: 'RaggedTensor' object has no attribute 'op'\r\n```\r\n\r\n# Workaround\r\nThe operations acting on the component tensors are fine. As a work around, one can do the following:\r\n\r\n```python\r\ndef ragged_tensor_from_row_lengths(values, row_lengths):\r\n    def components(args):\r\n        values, row_lengths = args\r\n        ragged = tf.RaggedTensor.from_row_lengths(values, row_lengths)\r\n        return ragged.values, ragged.row_splits\r\n\r\n    components = tf.keras.layers.Lambda(components)([values, row_lengths])\r\n    return tf.RaggedTensor.from_row_splits(*components)\r\n\r\n\r\ndef as_ragged_components(tensor):\r\n    if isinstance(tensor, tf.RaggedTensor):\r\n        return dict(values=tensor.values, row_splits=tensor.row_splits)\r\n    elif isinstance(tensor, (list, tuple)):\r\n        return tuple(as_ragged_components(t) for t in tensor)\r\n    elif isinstance(tensor, dict):\r\n        return {k: as_ragged_components(v) for k, v in tensor.items()}\r\n    else:\r\n        # leave unchanged\r\n        assert(isinstance(tensor, tf.Tensor))\r\n        return tensor\r\n\r\n\r\ndef as_ragged(components):\r\n    if isinstance(components, (list, tuple)):\r\n        return tuple(as_ragged(c) for c in components)\r\n    elif isinstance(components, dict):\r\n        if all(k in components for k in ('values', 'row_splits')):\r\n            return tf.RaggedTensor.from_row_splits(**components)\r\n        else:\r\n            return {k: as_ragged(v) for k, v in components.items()}\r\n    else:\r\n        assert(isinstance(components, tf.Tensor))\r\n        return components\r\n\r\n\r\ndef ragged_lambda(fn, args):\r\n    assert(isinstance(args, (list, tuple)))\r\n    if not any(isinstance(a, tf.RaggedTensor) for a in args):\r\n        out_components = tf.keras.layers.Lambda(fn)(args)\r\n    else:\r\n        components = as_ragged_components(args)\r\n        flat_args = tf.nest.flatten(components)\r\n\r\n        def actual_fn(flat_args):\r\n            args = tf.nest.pack_sequence_as(components, flat_args)\r\n            args = as_ragged(components)\r\n            out = fn(args)\r\n            return as_ragged_components(out)\r\n\r\n        out_components = tf.keras.layers.Lambda(actual_fn)(flat_args)\r\n    return as_ragged(out_components)\r\n\r\n\r\ngathered = ragged_lambda(\r\n    lambda args: tf.gather(*args), [values, indices])\r\n\r\ngathered_components = tf.nest.flatten(as_ragged_components(gathered))\r\nModel(\r\n    inputs=(values, index_values, index_row_splits),\r\n    outputs=gathered_components)\r\n```\r\n\r\nThis is, however, very convoluted, and largely defeats the purpose of having compound tensors like `RaggedTensor`s that should be able to be used transparently in place of regular tensors.\r\n\r\n# Change to API\r\nNothing, though will allow `RaggedTensor`s to be used in keras `Model`s.\r\n\r\n# Who will benefit\r\nPeople who appreciate clean code."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27163", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27163/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27163/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27163/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27163", "id": 425633756, "node_id": "MDU6SXNzdWU0MjU2MzM3NTY=", "number": 27163, "title": "std::terminate may be called when environment is misconfigured while using C API", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "trevor-m", "id": 12981474, "node_id": "MDQ6VXNlcjEyOTgxNDc0", "avatar_url": "https://avatars1.githubusercontent.com/u/12981474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trevor-m", "html_url": "https://github.com/trevor-m", "followers_url": "https://api.github.com/users/trevor-m/followers", "following_url": "https://api.github.com/users/trevor-m/following{/other_user}", "gists_url": "https://api.github.com/users/trevor-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/trevor-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trevor-m/subscriptions", "organizations_url": "https://api.github.com/users/trevor-m/orgs", "repos_url": "https://api.github.com/users/trevor-m/repos", "events_url": "https://api.github.com/users/trevor-m/events{/privacy}", "received_events_url": "https://api.github.com/users/trevor-m/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "trevor-m", "id": 12981474, "node_id": "MDQ6VXNlcjEyOTgxNDc0", "avatar_url": "https://avatars1.githubusercontent.com/u/12981474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trevor-m", "html_url": "https://github.com/trevor-m", "followers_url": "https://api.github.com/users/trevor-m/followers", "following_url": "https://api.github.com/users/trevor-m/following{/other_user}", "gists_url": "https://api.github.com/users/trevor-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/trevor-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trevor-m/subscriptions", "organizations_url": "https://api.github.com/users/trevor-m/orgs", "repos_url": "https://api.github.com/users/trevor-m/repos", "events_url": "https://api.github.com/users/trevor-m/events{/privacy}", "received_events_url": "https://api.github.com/users/trevor-m/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-26T20:29:25Z", "updated_at": "2019-12-26T18:36:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: N/A, C API is used\r\n- Bazel version (if compiling from source): 0.16.1\r\n- GCC/Compiler version (if compiling from source): 6.4.0/5.3.0\r\n- CUDA/cuDNN version: libcuda comes from 418.43 drivers, cudnn 7.3.1\r\n- GPU model and memory: nvidia, model/memory irrelevant\r\n\r\n**Describe the current behavior**\r\n\r\nWhen attempting to run a session via C API on a TensorRT-using graph, it is possible for exceptions to not get caught and abort the whole process via `std::terminate`. Stack-trace of one such exception, which happens when cudnn initialization fails, is provided below. Then the execution fails with:\r\n\r\n```\r\nterminate called after throwing an instance of 'nvinfer1::CudaError'\r\n  what():  std::exception\r\nfish: \u201c./target/debug/foobar\" terminated by signal SIGABRT (Abort)\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect C API for `TF_SessionRun` and similar to return an error and caller to have an option to handle the error in some way that does not involve crashing.\r\n\r\n**Code to reproduce the issue**\r\n\r\nN/A, this is a failure of libtensorflow to return an error for system configuration issue.\r\n\r\n**Other info / logs**\r\n\r\n```\r\n#0  0x00007fffca5d7b60 in __cxa_throw () from libstdc++.so.6\r\n#1  0x00007fffc494fc23 in nvinfer1::throwCudaError(char const*, char const*, int, int, char const*) () from libnvinfer.so.5\r\n#2  0x00007fffc495578e in nvinfer1::rt::initializeCommonContext(nvinfer1::rt::CommonContext&, nvinfer1::IGpuAllocator&, void*, void*, int) () from libnvinfer.so.5\r\n#3  0x00007fffc495a4d4 in nvinfer1::rt::Engine::initialize() () from libnvinfer.so.5\r\n#4  0x00007fffc495dc04 in nvinfer1::rt::Engine::deserialize(void const*, unsigned long, nvinfer1::IGpuAllocator&, nvinfer1::IPluginFactory*) () from libnvinfer.so.5\r\n#5  0x00007fffc4946b33 in nvinfer1::Runtime::deserializeCudaEngine(void const*, unsigned long, nvinfer1::IPluginFactory*) () from libnvinfer.so.5\r\n#6  0x00007fffd4d001e1 in tensorflow::tensorrt::TRTEngineOp::GetEngine(int, tensorflow::OpKernelContext*) () from libtftrt.so\r\n#7  0x00007fffd4d03b8b in tensorflow::tensorrt::TRTEngineOp::ComputeAsync(tensorflow::OpKernelContext*, std::function<void ()>) () from libtftrt.so\r\n#8  0x00007fffd3bd9f11 in tensorflow::BaseGPUDevice::ComputeAsync(tensorflow::AsyncOpKernel*, tensorflow::OpKernelContext*, std::function<void ()>) () from libtensorflow_framework.so\r\n#9  0x00007fffd3c20fbb in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) () from libtensorflow_framework.so\r\n#10 0x00007fffd3c212ef in std::_Function_handler<void (), tensorflow::(anonymous namespace)::ExecutorState::ScheduleReady(absl::InlinedVector<tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, 8ul, std::allocator<tensorflow::(anonymous namespace)::ExecutorState::TaggedNode> > const&, tensorflow::(anonymous namespace)::ExecutorState::TaggedNodeReadyQueue*)::{lambda()#1}>::_M_invoke(std::_Any_data const&) () from libtensorflow_framework.so\r\n#11 0x00007fffd3c8a4c1 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) () from libtensorflow_framework.so\r\n#12 0x00007fffd3c880e7 in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) () from libtensorflow_framework.so\r\n#13 0x00007fffca6026df in ?? () from libstdc++.so.6\r\n#14 0x00007fffd5b11244 in start_thread () from libpthread.so.0\r\n#15 0x00007fffd563bccf in clone () from libc.so.6\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27161", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27161/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27161/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27161/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27161", "id": 425602510, "node_id": "MDU6SXNzdWU0MjU2MDI1MTA=", "number": 27161, "title": "Documentation Request: WALSModel with shard", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "walidk", "id": 734669, "node_id": "MDQ6VXNlcjczNDY2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/734669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walidk", "html_url": "https://github.com/walidk", "followers_url": "https://api.github.com/users/walidk/followers", "following_url": "https://api.github.com/users/walidk/following{/other_user}", "gists_url": "https://api.github.com/users/walidk/gists{/gist_id}", "starred_url": "https://api.github.com/users/walidk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walidk/subscriptions", "organizations_url": "https://api.github.com/users/walidk/orgs", "repos_url": "https://api.github.com/users/walidk/repos", "events_url": "https://api.github.com/users/walidk/events{/privacy}", "received_events_url": "https://api.github.com/users/walidk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "walidk", "id": 734669, "node_id": "MDQ6VXNlcjczNDY2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/734669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walidk", "html_url": "https://github.com/walidk", "followers_url": "https://api.github.com/users/walidk/followers", "following_url": "https://api.github.com/users/walidk/following{/other_user}", "gists_url": "https://api.github.com/users/walidk/gists{/gist_id}", "starred_url": "https://api.github.com/users/walidk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walidk/subscriptions", "organizations_url": "https://api.github.com/users/walidk/orgs", "repos_url": "https://api.github.com/users/walidk/repos", "events_url": "https://api.github.com/users/walidk/events{/privacy}", "received_events_url": "https://api.github.com/users/walidk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-26T19:14:00Z", "updated_at": "2019-08-14T08:29:47Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: script built around docs\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: n/a\r\n- **TensorFlow installed from (source or binary)**: conda gpu version\r\n- **TensorFlow version (use command below)**: 1.10\r\n- **Python version**: 3.5\r\n- **Bazel version (if compiling from source)**: n/a\r\n- **GCC/Compiler version (if compiling from source)**: n/a\r\n- **CUDA/cuDNN version**: 10\r\n- **GPU model and memory**: Quadro 16GiB\r\n- **Exact command to reproduce**: `ex.run()` (see comments below)\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with:\r\n\r\n```bash\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n```\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nThis request comes with an associated [colab](https://colab.research.google.com/drive/1oJDfvIWnf7sY5uFcJ7XhTSEdA1n_3Jxv#scrollTo=8pqa0A7BUrG-)\r\n\r\nFurther, this documentation request stems from @walidk 's response on issue #26928 where \r\nit is suggested to shard the input matrix based on [wals_test.py](https://github.com/tensorflow/tensorflow/blob/f07558116ac7c90858cf0572a1bca1e50e208a37/tensorflow/contrib/factorization/python/ops/wals_test.py#L141)\r\n\r\nWhile the code is relevant, it is not necessarily clear how to apply it to the [colab](https://colab.research.google.com/drive/1oJDfvIWnf7sY5uFcJ7XhTSEdA1n_3Jxv#scrollTo=8pqa0A7BUrG-)\r\n\r\nWhy?\r\n\r\n\r\n1. there is `WALSModel` (used in the [colab](https://colab.research.google.com/drive/1oJDfvIWnf7sY5uFcJ7XhTSEdA1n_3Jxv#scrollTo=8pqa0A7BUrG-) ) and `WALSMatrixFactorization` (used in the linked test code). They seem the same, but what is the difference? Is that code compatible with `WALSModel`?\r\n\r\n2. both `WALSModel` and `WALSMatrixFactorization` have `num_row_shards=1` / `num_col_shards=1` as arguments. It is unclear if these would automatically shard the input matrix.\r\n\r\n3. as test code, it is not necessarily commented for pedagogical purposes\r\n\r\n4. as test code, it is not exactly a MWE demonstrating just what is needed to handle shard an input matrix and train accordingly. Should both rows and cols be sharded at the same time? \r\n\r\n5. part of the test code may work against the goal of sharding (or it is also likely I do not full understand it):\r\n\r\ne.g.\r\n\r\n```python\r\n....\r\n def _fn():\r\n      ...\r\n      sp_mat = self.np_array_to_sparse(np_matrix)\r\n      sp_mat_t = sparse_ops.sparse_transpose(sp_mat) #<--- if goal is to shard input matrix because it is too large, why make 2?\r\n      ...\r\n...\r\n```\r\n\r\nI understand that this request it is a bit of an \"advanced\"  documentation and that those contributing to TF are very busy - especially with v2. However I feel like this is a valid request as:\r\n\r\n1. the current documentation for `WALSModel` and `WALSMatrixFactorization` is already more than MWE including session supervisors (although leaning more towards pseudo code in some places which may make it more confusing than need be)\r\n\r\n2. the current documentation for the built in arguments `num_row_shards` / `col` state \"number of shards to use\", which gives no indication that the linked test code is even needed or where it should be introduced\r\n\r\n3. the current documentation hints at sharding (e.g. `transposed_matrix_slices_from_queue_for_worker_shard`) but assumes the user knows how to set that up.\r\n\r\n\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27156", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27156/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27156/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27156/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27156", "id": 425506170, "node_id": "MDU6SXNzdWU0MjU1MDYxNzA=", "number": 27156, "title": "TFLite MicroInterpreter Crashes/Seg Faults", "user": {"login": "kmader", "id": 116120, "node_id": "MDQ6VXNlcjExNjEyMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/116120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmader", "html_url": "https://github.com/kmader", "followers_url": "https://api.github.com/users/kmader/followers", "following_url": "https://api.github.com/users/kmader/following{/other_user}", "gists_url": "https://api.github.com/users/kmader/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmader/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmader/subscriptions", "organizations_url": "https://api.github.com/users/kmader/orgs", "repos_url": "https://api.github.com/users/kmader/repos", "events_url": "https://api.github.com/users/kmader/events{/privacy}", "received_events_url": "https://api.github.com/users/kmader/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wangtz", "id": 34290063, "node_id": "MDQ6VXNlcjM0MjkwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/34290063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangtz", "html_url": "https://github.com/wangtz", "followers_url": "https://api.github.com/users/wangtz/followers", "following_url": "https://api.github.com/users/wangtz/following{/other_user}", "gists_url": "https://api.github.com/users/wangtz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangtz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangtz/subscriptions", "organizations_url": "https://api.github.com/users/wangtz/orgs", "repos_url": "https://api.github.com/users/wangtz/repos", "events_url": "https://api.github.com/users/wangtz/events{/privacy}", "received_events_url": "https://api.github.com/users/wangtz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wangtz", "id": 34290063, "node_id": "MDQ6VXNlcjM0MjkwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/34290063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangtz", "html_url": "https://github.com/wangtz", "followers_url": "https://api.github.com/users/wangtz/followers", "following_url": "https://api.github.com/users/wangtz/following{/other_user}", "gists_url": "https://api.github.com/users/wangtz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangtz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangtz/subscriptions", "organizations_url": "https://api.github.com/users/wangtz/orgs", "repos_url": "https://api.github.com/users/wangtz/repos", "events_url": "https://api.github.com/users/wangtz/events{/privacy}", "received_events_url": "https://api.github.com/users/wangtz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-03-26T15:58:44Z", "updated_at": "2019-11-19T19:39:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code: Yes (custom model and custom code)\r\n- OS Platform and Distribution: Mac OS X 10.13.6\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): v1.12.0-11117-gca1f0ce1b9 1.14.1-dev20190326\r\n- Python version: 3.7.2\r\n- GCC/Compiler version (if compiling from source): Apple LLVM version 10.0.0 (clang-1000.10.44.4)\r\n\r\n**Describe the current behavior**\r\n`./demo`\r\n\r\n```\r\nModel loaded!, Size:6052, Version:3\r\nModel description: TOCO Converted.\r\nTensor arena allocated on stack\r\nAllocator working (ish): Size=0\r\nSegmentation fault: 11\r\n```\r\n\r\nThe code fails when running this line: https://github.com/kmader/tflite_micro/blob/278c2899f05cc721133829d75f9e88ed87a3d33f/simple_app/demo.cc#L59-L60\r\n\r\n**Describe the expected behavior**\r\n`./demo`\r\n\r\n```\r\nModel loaded!, Size:6052, Version:3\r\nModel description: TOCO Converted.\r\nTensor arena allocated on stack\r\nAllocator working (ish): Size=0\r\nInterpreter loaded!\r\nInput #0: 1, 49, 40, 1, Type:UInt8, 3\r\nOutput #0: 1, 4, Type:UInt8, 3\r\nBad input tensor parameters in model\r\nModel Results: [0]=0.411765, [1]=0.223529, [2]=0.160784, [3]=0.207843, \r\n```\r\n\r\n**Code to reproduce the issue**\r\nThe repository has been simplified and binderized at https://github.com/kmader/tflite_micro/tree/master/simple_app. I have it setup so you can easily change the model from the example speech model `g_tiny_conv_micro_features_model_data` to a the model I am interested in `local_min_cnn_tflite`. The `demo.cc` is a modified and simplified version of https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/experimental/micro/examples/micro_speech/main.cc\r\n\r\n\r\n**Other info / logs**\r\nA brief look at the lldb output suggests the problem might be related to parsing the https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/experimental/micro/examples/micro_speech/main.cc g related to:\r\n```\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x200015b10)\r\n    frame #0: 0x000000010000463b demo`tflite::SimpleTensorAllocator::AllocateTensor(tflite::Tensor const&, int, int, flatbuffers::Vector<flatbuffers::Offset<tflite::Buffer> > const*, tflite::ErrorReporter*, TfLiteTensor*) [inlined] flatbuffers::IndirectHelper<long long>::Read(i=0) at flatbuffers.h:68 [opt]\r\n   65  \t  typedef T mutable_return_type;\r\n   66  \t  static const size_t element_stride = sizeof(T);\r\n   67  \t  static return_type Read(const uint8_t *p, uoffset_t i) {\r\n-> 68  \t    return EndianScalar((reinterpret_cast<const T *>(p))[i]);\r\n   69  \t  }\r\n   70  \t};\r\n   71  \ttemplate<typename T> struct IndirectHelper<Offset<T>> {\r\nTarget 0: (demo) stopped.\r\n```\r\n- And the backtrace being\r\n```\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x200015b10)\r\n  * frame #0: 0x000000010000463b demo`tflite::SimpleTensorAllocator::AllocateTensor(tflite::Tensor const&, int, int, flatbuffers::Vector<flatbuffers::Offset<tflite::Buffer> > const*, tflite::ErrorReporter*, TfLiteTensor*) [inlined] flatbuffers::IndirectHelper<long long>::Read(i=0) at flatbuffers.h:68 [opt]\r\n    frame #1: 0x000000010000463b demo`tflite::SimpleTensorAllocator::AllocateTensor(tflite::Tensor const&, int, int, flatbuffers::Vector<flatbuffers::Offset<tflite::Buffer> > const*, tflite::ErrorReporter*, TfLiteTensor*) [inlined] flatbuffers::Vector<long long>::Get(i=0) const at flatbuffers.h:199 [opt]\r\n    frame #2: 0x000000010000463b demo`tflite::SimpleTensorAllocator::AllocateTensor(this=<unavailable>, flatbuffer_tensor=0x0000000100016280, create_before=<unavailable>, destroy_after=<unavailable>, buffers=0x000000010001585c, error_reporter=0x00007ffeefbf57a8, result=0x00007ffeefbf5840) at simple_tensor_allocator.cc:135 [opt]\r\n    frame #3: 0x00000001000032e5 demo`tflite::MicroInterpreter::MicroInterpreter(this=0x00007ffeefbf36a8, model=<unavailable>, op_resolver=<unavailable>, tensor_allocator=<unavailable>, error_reporter=0x00007ffeefbf57a8) at micro_interpreter.cc:89 [opt]\r\n    frame #4: 0x0000000100000eb8 demo`main(argc=1, argv=0x00007ffeefbff870) at demo.cc:57\r\n    frame #5: 0x00007fff78ccf015 libdyld.dylib`start + 1\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27155", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27155/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27155/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27155/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27155", "id": 425494274, "node_id": "MDU6SXNzdWU0MjU0OTQyNzQ=", "number": 27155, "title": "Built TF 1.13.1 - libcublas.so.10.1: cannot open shared object file with classify_image.py", "user": {"login": "edrozenberg", "id": 2648417, "node_id": "MDQ6VXNlcjI2NDg0MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2648417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edrozenberg", "html_url": "https://github.com/edrozenberg", "followers_url": "https://api.github.com/users/edrozenberg/followers", "following_url": "https://api.github.com/users/edrozenberg/following{/other_user}", "gists_url": "https://api.github.com/users/edrozenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/edrozenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edrozenberg/subscriptions", "organizations_url": "https://api.github.com/users/edrozenberg/orgs", "repos_url": "https://api.github.com/users/edrozenberg/repos", "events_url": "https://api.github.com/users/edrozenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/edrozenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-03-26T15:38:33Z", "updated_at": "2020-01-14T06:36:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Slackware Linux 64 -current (14.2+)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.7.2\r\n- Bazel version (if compiling from source): 0.21.0- (@non-git)\r\n- GCC/Compiler version (if compiling from source): gcc-8.3.0-x86_64\r\n- CUDA/cuDNN version: CUDA Version 10.1.105\r\n- GPU model and memory: TITAN X (Pascal) 12 GB\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nRunning a tutorial sample `tensorflow/models-git/tutorials/image/imagenet]$ python3 classify_image.py` causes error:\r\n\r\n```\r\n2019-03-26 08:22:44.464647: I tensorflow/stream_executor/dso_loader.cc:142] Couldn't open CUDA library libcublas.so.10.1. LD_LIBRARY_PATH: \r\n2019-03-26 08:22:44.465972: F tensorflow/stream_executor/lib/statusor.cc:34] Attempting to fetch value instead of handling error Failed precondition: could not dlopen DSO: libcublas.so.10.1; dlerror: libcublas.so.10.1: cannot open shared object file: No such file or directory\r\nAborted\r\n```\r\n\r\n**Describe the expected behavior**\r\nSample tutorial runs\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n`tensorflow/models-git/tutorials/image/imagenet]$ python3 classify_image.py`\r\n\r\n**Other info / logs**\r\nThis issue seems different from the other hundreds (thousands?) of similar reports. Most other similar issues are due to a mismatch between a binary (pre-compiled) tensorflow and the CUDA version installed by the user.\r\n\r\nIn my case, I successfully compiled TF 1.13.1 from source with GPU support. The tensorflow module loads in python3.\r\n\r\nI can resolve the issue with running this sample by setting `LD_LIBRARY_PATH=/opt/nvidia/cuda/lib64` but this should NOT be necessary because I already configured this path in `/etc/ld.so.conf.d/cuda.conf` and ran `$ ldconfig`.\r\n\r\n```\r\n$ python3\r\nPython 3.7.2 (default, Feb 19 2019, 23:15:48) \r\n[GCC 8.2.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow\r\n>>> \r\n```\r\n\r\n```\r\n$ cat /etc/ld.so.conf.d/cuda.conf \r\n/opt/nvidia/cuda/lib64\r\n/opt/nvidia/cuda/extras/CUPTI/lib64\r\n/opt/nvidia/nccl/lib\r\n```\r\n\r\n```\r\n$ ls -al /opt/nvidia/cuda/lib64/libcublas.so.10.1\r\nlrwxrwxrwx 1 root root 23 Mar 26 08:01 /opt/nvidia/cuda/lib64/libcublas.so.10.1 -> libcublas.so.10.1.0.105\r\n```\r\n\r\n```\r\n$ ldconfig -p | grep libcublas\r\n\tlibcublasLt.so.10 (libc6,x86-64) => /opt/nvidia/cuda/lib64/libcublasLt.so.10\r\n\tlibcublasLt.so (libc6,x86-64) => /opt/nvidia/cuda/lib64/libcublasLt.so\r\n\tlibcublas.so.10 (libc6,x86-64) => /opt/nvidia/cuda/lib64/libcublas.so.10\r\n\tlibcublas.so (libc6,x86-64) => /opt/nvidia/cuda/lib64/libcublas.so\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27146", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27146/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27146/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27146/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27146", "id": 425373424, "node_id": "MDU6SXNzdWU0MjUzNzM0MjQ=", "number": 27146, "title": "Should `fold_constants` be before or after `flatten_atrous_conv`", "user": {"login": "lee-bin", "id": 29224933, "node_id": "MDQ6VXNlcjI5MjI0OTMz", "avatar_url": "https://avatars2.githubusercontent.com/u/29224933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lee-bin", "html_url": "https://github.com/lee-bin", "followers_url": "https://api.github.com/users/lee-bin/followers", "following_url": "https://api.github.com/users/lee-bin/following{/other_user}", "gists_url": "https://api.github.com/users/lee-bin/gists{/gist_id}", "starred_url": "https://api.github.com/users/lee-bin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lee-bin/subscriptions", "organizations_url": "https://api.github.com/users/lee-bin/orgs", "repos_url": "https://api.github.com/users/lee-bin/repos", "events_url": "https://api.github.com/users/lee-bin/events{/privacy}", "received_events_url": "https://api.github.com/users/lee-bin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-03-26T11:53:20Z", "updated_at": "2020-02-21T18:42:58Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: v1.13.1\r\n- Doc Link: https://github.com/tensorflow/tensorflow/blob/v1.13.1/tensorflow/tools/graph_transforms/README.md#flatten_atrous_conv\r\n\r\n\r\n**Describe the documentation issue**\r\nThe `flatten_atrous_conv` section lists `Prerequisites: fold_constants`, whereas in the main paragraph, it says `You will need to make sure you run fold_constants after this transform.`\r\nSo should `fold_constants` be before or after `flatten_atrous_conv`?\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nI assume it's before `flatten_atrous_conv`, so I submitted a PR.\r\nhttps://github.com/tensorflow/tensorflow/pull/27145"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27120", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27120/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27120/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27120/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27120", "id": 425119159, "node_id": "MDU6SXNzdWU0MjUxMTkxNTk=", "number": 27120, "title": "tf.function-decorated function tried to create variables on non-first call", "user": {"login": "ericpts", "id": 5286719, "node_id": "MDQ6VXNlcjUyODY3MTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5286719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericpts", "html_url": "https://github.com/ericpts", "followers_url": "https://api.github.com/users/ericpts/followers", "following_url": "https://api.github.com/users/ericpts/following{/other_user}", "gists_url": "https://api.github.com/users/ericpts/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericpts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericpts/subscriptions", "organizations_url": "https://api.github.com/users/ericpts/orgs", "repos_url": "https://api.github.com/users/ericpts/repos", "events_url": "https://api.github.com/users/ericpts/events{/privacy}", "received_events_url": "https://api.github.com/users/ericpts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 31, "created_at": "2019-03-25T21:15:23Z", "updated_at": "2020-02-29T22:35:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian Testing\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 2.0.0.dev20190227\r\n- Python version: 3.7\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nA function which correctly works when in eager mode does not work anymore when annotated with `tf.function`.\r\n\r\nIn particular, it complains about `ValueError: tf.function-decorated function tried to create variables on non-first call.`, even though the function is always called with different parameters.\r\n\r\nThis is a continuation of https://github.com/tensorflow/tensorflow/issues/26812#issuecomment-475600836.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe `apply_gradients_once()` function should work even when annotated with `tf.function`.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python3\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\n\r\nfast_optimizer = tf.keras.optimizers.Adam(\r\n        learning_rate=1e-3)\r\n\r\nslow_optimizer = tf.keras.optimizers.Adam(\r\n        learning_rate=1e-3 * 1e-9)\r\n\r\n\r\n@tf.function\r\ndef apply_gradients_once(optimizer, grads, vars):\r\n    grads = [grads]\r\n    optimizer.apply_gradients(zip(grads, vars))\r\n\r\n\r\ndef apply_grads(use_fast, grads_per_model, vars):\r\n    for i in range(2):\r\n        if use_fast[i]:\r\n            apply_gradients_once(fast_optimizer, grads_per_model[i], vars[i])\r\n        else:\r\n            apply_gradients_once(slow_optimizer, grads_per_model[i], vars[i])\r\n\r\n\r\ndef compute_loss(w, x, y):\r\n    r = (w * x - y)**2\r\n    r = tf.math.reduce_mean(r)\r\n    return r\r\n\r\ndef compute_gradients(model):\r\n    with tf.GradientTape() as tape:\r\n        tape.watch(model)\r\n        loss = compute_loss(model, x, y)\r\n    grads = tape.gradient(loss, model)\r\n    return grads\r\n\r\n\r\nw = [\r\n    tf.Variable(0.0),\r\n    tf.Variable(1.0)]\r\n\r\nx = np.array([1, 2, 3])\r\ny = np.array([1, 2, 3])\r\n\r\nvars = []\r\ngrads = []\r\nfor i in range(2):\r\n    vars.append([w[i]])\r\n    grads.append(compute_gradients(w[i]))\r\n\r\napply_grads([True, False], grads, vars)\r\n```\r\n\r\n\r\n**Other info / logs**\r\n\r\nError log:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 52, in <module>\r\n    apply_grads([True, False], grads, vars)\r\n  File \"main.py\", line 23, in apply_grads\r\n    apply_gradients_once(slow_optimizer, grads_per_model[i], vars[i])\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/eager/def_function.py\", line 414, in __call__\r\n    return self._stateless_fn(*args, **kwds)  # pylint: disable=not-callable\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/eager/function.py\", line 1254, in __call__\r\n    graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/eager/function.py\", line 1577, in _maybe_define_function\r\n    args, kwargs, override_flat_arg_shapes=relaxed_arg_shapes)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/eager/function.py\", line 1479, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/framework/func_graph.py\", line 685, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/eager/def_function.py\", line 317, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/framework/func_graph.py\", line 677, in wrapper\r\n    ), args, kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/autograph/impl/api.py\", line 392, in converted_call\r\n    result = converted_f(*effective_args, **kwargs)\r\n  File \"/tmp/tmpr2ti5o1e.py\", line 4, in tf__apply_gradients_once\r\n    ag__.converted_call('apply_gradients', optimizer, ag__.ConversionOptions(recursive=True, verbose=0, strip_decorators=(tf.function, defun, ag__.convert, ag__.do_not_convert, ag__.converted_call), force_conversion=False, optional_features=(), internal_convert_user_code=True), (zip(grads, vars),), {})\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/autograph/impl/api.py\", line 267, in converted_call\r\n    return _call_unconverted(f, args, kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/autograph/impl/api.py\", line 188, in _call_unconverted\r\n    return f(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py\", line 399, in apply_gradients\r\n    self._create_hypers()\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py\", line 558, in _create_hypers\r\n    aggregation=tf_variables.VariableAggregation.ONLY_FIRST_REPLICA)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py\", line 727, in add_weight\r\n    aggregation=aggregation)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/training/tracking/base.py\", line 622, in _add_variable_with_custom_getter\r\n    **kwargs_for_getter)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/base_layer_utils.py\", line 152, in make_variable\r\n    aggregation=aggregation)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/variables.py\", line 212, in __call__\r\n    return cls._variable_v1_call(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/variables.py\", line 175, in _variable_v1_call\r\n    aggregation=aggregation)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/variables.py\", line 58, in getter\r\n    return captured_getter(captured_previous, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/eager/def_function.py\", line 375, in invalid_creator_scope\r\n    \"tf.function-decorated function tried to create \"\r\nValueError: tf.function-decorated function tried to create variables on non-first call.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27113", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27113/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27113/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27113/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/27113", "id": 424958149, "node_id": "MDExOlB1bGxSZXF1ZXN0MjY0MTY0MDQ4", "number": 27113, "title": "Lite: Slice Op 4-D bottleneck removed", "user": {"login": "ANSHUMAN87", "id": 32511895, "node_id": "MDQ6VXNlcjMyNTExODk1", "avatar_url": "https://avatars3.githubusercontent.com/u/32511895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ANSHUMAN87", "html_url": "https://github.com/ANSHUMAN87", "followers_url": "https://api.github.com/users/ANSHUMAN87/followers", "following_url": "https://api.github.com/users/ANSHUMAN87/following{/other_user}", "gists_url": "https://api.github.com/users/ANSHUMAN87/gists{/gist_id}", "starred_url": "https://api.github.com/users/ANSHUMAN87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ANSHUMAN87/subscriptions", "organizations_url": "https://api.github.com/users/ANSHUMAN87/orgs", "repos_url": "https://api.github.com/users/ANSHUMAN87/repos", "events_url": "https://api.github.com/users/ANSHUMAN87/events{/privacy}", "received_events_url": "https://api.github.com/users/ANSHUMAN87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 23, "created_at": "2019-03-25T15:14:12Z", "updated_at": "2020-03-19T01:16:02Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/27113", "html_url": "https://github.com/tensorflow/tensorflow/pull/27113", "diff_url": "https://github.com/tensorflow/tensorflow/pull/27113.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/27113.patch"}, "body": "1:> Removed hard coding or bottleneck to 4-Dim\r\n2:> Add assumption, that begin size and input dim are equal"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27107", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27107/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27107/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27107/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27107", "id": 424864373, "node_id": "MDU6SXNzdWU0MjQ4NjQzNzM=", "number": 27107, "title": "Implement WALS matrix factorization in Tensorflow 2.0", "user": {"login": "wileeam", "id": 275724, "node_id": "MDQ6VXNlcjI3NTcyNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/275724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wileeam", "html_url": "https://github.com/wileeam", "followers_url": "https://api.github.com/users/wileeam/followers", "following_url": "https://api.github.com/users/wileeam/following{/other_user}", "gists_url": "https://api.github.com/users/wileeam/gists{/gist_id}", "starred_url": "https://api.github.com/users/wileeam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wileeam/subscriptions", "organizations_url": "https://api.github.com/users/wileeam/orgs", "repos_url": "https://api.github.com/users/wileeam/repos", "events_url": "https://api.github.com/users/wileeam/events{/privacy}", "received_events_url": "https://api.github.com/users/wileeam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, {"login": "walidk", "id": 734669, "node_id": "MDQ6VXNlcjczNDY2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/734669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walidk", "html_url": "https://github.com/walidk", "followers_url": "https://api.github.com/users/walidk/followers", "following_url": "https://api.github.com/users/walidk/following{/other_user}", "gists_url": "https://api.github.com/users/walidk/gists{/gist_id}", "starred_url": "https://api.github.com/users/walidk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walidk/subscriptions", "organizations_url": "https://api.github.com/users/walidk/orgs", "repos_url": "https://api.github.com/users/walidk/repos", "events_url": "https://api.github.com/users/walidk/events{/privacy}", "received_events_url": "https://api.github.com/users/walidk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-25T12:00:04Z", "updated_at": "2019-11-07T21:22:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0-master\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nImplement tf.contrib.factorization.WALSMatrixFactorization and tf.contrib.factorization.WALSModel in Tensorflow 2.0 (ideally in a distributed manner)\r\n\r\n**Will this change the current api? How?**\r\nMost likely.\r\nThe current WALSMatrixFactorization and WALSModel lie under tf.contrib.factorization, which contains some other methods, in particular clustering ones, such as KMeans or GMM.\r\nThe factorization itself makes sense under tf.linalg instead (the other methods need further assesment) while the estimator may be somewhere.\r\nIn other words, the factorization would probably benefit from being decoupled from the model implementation.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone using the current factorization who wants (or needs) to upgrade to Tensorflow 2.0.\r\n\r\n\r\n**Any Other info.**\r\nThere is an open issue related to WALS that could be of interest to take into account if this feature is considered: https://github.com/tensorflow/tensorflow/issues/21991"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27100", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27100/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27100/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27100/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27100", "id": 424775684, "node_id": "MDU6SXNzdWU0MjQ3NzU2ODQ=", "number": 27100, "title": "Segmentation Fault with TensorRT create interference graph ", "user": {"login": "isra60", "id": 17722229, "node_id": "MDQ6VXNlcjE3NzIyMjI5", "avatar_url": "https://avatars1.githubusercontent.com/u/17722229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isra60", "html_url": "https://github.com/isra60", "followers_url": "https://api.github.com/users/isra60/followers", "following_url": "https://api.github.com/users/isra60/following{/other_user}", "gists_url": "https://api.github.com/users/isra60/gists{/gist_id}", "starred_url": "https://api.github.com/users/isra60/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isra60/subscriptions", "organizations_url": "https://api.github.com/users/isra60/orgs", "repos_url": "https://api.github.com/users/isra60/repos", "events_url": "https://api.github.com/users/isra60/events{/privacy}", "received_events_url": "https://api.github.com/users/isra60/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-25T08:24:36Z", "updated_at": "2019-08-14T19:44:51Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution: Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): bynary (tensorflow-gpu)\r\n- TensorFlow version (use command below): b'v1.13.1-0-g6612da8951' 1.13.1\r\n\r\n- Python version: Python 3.6.7\r\n- CUDA/cuDNN version: CUDA 10\r\n- GPU model and memory: NVIDIA 1060 GTX\r\n\r\n\r\n**Describe the current behavior**\r\ni'm trying to optimize a tensorflow model to tensort optimization. i'm using the example of object detection given by https://github.com/tensorflow/tensorrt/tree/master/tftrt/examples/object_detection. So the tensorflow model loads perfect but when I try to optimize it a segmentation fault raise.\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\n`with tf.Graph().as_default() as tf_graph:\r\n            with tf.Session(config=tf_config) as tf_sess:\r\n                frozen_graph = trt.create_inference_graph(\r\n                    input_graph_def=frozen_graph,\r\n                    outputs=output_names,\r\n                    max_batch_size=max_batch_size,\r\n                    max_workspace_size_bytes=max_workspace_size_bytes,\r\n                    precision_mode=precision_mode,\r\n                    minimum_segment_size=minimum_segment_size,\r\n                    is_dynamic_op=True,\r\n                    maximum_cached_engines=maximum_cached_engines)`\r\n\r\nSo the segmentation fault occurs in trt create_create_interference_graph.\r\n**Other info / logs**\r\n\r\nThis is the log from python output\r\n\r\n> 2019-03-25 09:08:39.360172: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n> 2019-03-25 09:08:39.360201: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n> 2019-03-25 09:08:39.360207: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 \r\n> 2019-03-25 09:08:39.360210: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N \r\n> 2019-03-25 09:08:39.360303: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5171 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n> INFO:tensorflow:Running against TensorRT version 5.0.2\r\n> INFO:tensorflow:Running against TensorRT version 5.0.2\r\n> 2019-03-25 09:08:40.787773: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1\r\n> 2019-03-25 09:08:40.788522: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n> 2019-03-25 09:08:40.790765: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n> 2019-03-25 09:08:40.790785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n> 2019-03-25 09:08:40.790790: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 \r\n> 2019-03-25 09:08:40.790793: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N \r\n> 2019-03-25 09:08:40.790903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5171 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n> 2019-03-25 09:08:42.079562: I tensorflow/contrib/tensorrt/segment/segment.cc:443] There are 2316 ops of 32 different types in the graph that are not converted to TensorRT: Fill, Switch, Range, TopKV2, ConcatV2, Identity, Squeeze, Transpose, Const, Unpack, ResizeBilinear, Reshape, Mul, Slice, Merge, Split, Where, ExpandDims, NonMaxSuppressionV3, GatherV2, Cast, Greater, Minimum, Sub, ZerosLike, Pack, Exp, Placeholder, Add, Shape, NoOp, StridedSlice, (For more information see https://docs.nvidia.com/deeplearning/dgx/integrate-tf-trt/index.html#support-ops).\r\n> 2019-03-25 09:08:42.206925: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:913] Number of TensorRT candidate segments: 185\r\n> 2019-03-25 09:08:47.654116: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:1015] TensorRT node TRTEngineOp_0 added for segment 0 consisting of 486 nodes succeeded.\r\n> Segmentation fault (core dumped)\r\n\r\nAnd this is the callstack from gdb .\r\n\r\n> > 2019-03-25 09:12:23.651268: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:1015] TensorRT node TRTEngineOp_0 added for segment 0 consisting of 486 nodes succeeded.\r\n> \r\n> Thread 1 \"python3\" received signal SIGSEGV, Segmentation fault.\r\n> 0x00007fff68d60261 in tensorflow::tensorrt::convert::GetDeviceAndAllocator(tensorflow::tensorrt::convert::ConversionParams const&, tensorflow::tensorrt::convert::EngineInfo const&) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tensorrt/_wrap_conversion.so\r\n> (gdb) bt\r\n> #0  0x00007fff68d60261 in tensorflow::tensorrt::convert::GetDeviceAndAllocator(tensorflow::tensorrt::convert::ConversionParams const&, tensorflow::tensorrt::convert::EngineInfo const&) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tensorrt/_wrap_conversion.so\r\n> #1  0x00007fff68d651aa in tensorflow::tensorrt::convert::ConvertAfterShapes(tensorflow::tensorrt::convert::ConversionParams&) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tensorrt/_wrap_conversion.so\r\n> #2  0x00007fff68d90f56 in tensorflow::tensorrt::convert::TRTOptimizationPass::Optimize(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tensorrt/_wrap_conversion.so\r\n> #3  0x00007fffb549a8ee in tensorflow::grappler::MetaOptimizer::RunOptimizer(tensorflow::grappler::GraphOptimizer*, tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem*, tensorflow::GraphDef*, tensorflow::grappler::MetaOptimizer::GraphOptimizationResult*) () from /usr/local/lib/python3.6/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n> #4  0x00007fffb549b552 in tensorflow::grappler::MetaOptimizer::OptimizeGraph(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n> #5  0x00007fffb549c8a7 in tensorflow::grappler::MetaOptimizer::Optimize(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n> #6  0x00007fffb028ab9c in TF_OptimizeGraph(GCluster, tensorflow::ConfigProto const&, tensorflow::MetaGraphDef const&, bool, std::string const&, TF_Status*) ()\r\n>    from /usr/local/lib/python3.6/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n> #7  0x00007fffb0293157 in _wrap_TF_OptimizeGraph () from /usr/local/lib/python3.6/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n> #8  0x0000000000502d6f in ?? ()\r\n> #9  0x0000000000506859 in _PyEval_EvalFrameDefault ()\r\n> #10 0x0000000000504c28 in ?? ()\r\n> #11 0x0000000000502540 in ?? ()\r\n> #12 0x0000000000502f3d in ?? ()\r\n> #13 0x0000000000507641 in _PyEval_EvalFrameDefault ()\r\n> #14 0x0000000000504c28 in ?? ()\r\n> #15 0x0000000000502540 in ?? ()\r\n> #16 0x0000000000502f3d in ?? ()\r\n> #17 0x0000000000507641 in _PyEval_EvalFrameDefault ()\r\n> #18 0x0000000000504c28 in ?? ()\r\n> #19 0x0000000000502540 in ?? ()\r\n> #20 0x0000000000502f3d in ?? ()\r\n> #21 0x0000000000507641 in _PyEval_EvalFrameDefault ()\r\n> #22 0x0000000000504c28 in ?? ()\r\n> #23 0x0000000000506393 in PyEval_EvalCode ()\r\n> #24 0x0000000000634d52 in ?? ()\r\n> #25 0x00000000004a38c5 in ?? ()\r\n> #26 0x00000000004a5cd5 in PyRun_InteractiveLoopFlags ()\r\n> #27 0x00000000006387b3 in PyRun_AnyFileExFlags ()\r\n> #28 0x000000000063915a in Py_Main ()\r\n> #29 0x00000000004a6f10 in main ()\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27097", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27097/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27097/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27097/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/27097", "id": 424751695, "node_id": "MDExOlB1bGxSZXF1ZXN0MjY0MDAzNzcy", "number": 27097, "title": "Additional testcases for embedding_lookup ops", "user": {"login": "joyalbin", "id": 1856674, "node_id": "MDQ6VXNlcjE4NTY2NzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1856674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joyalbin", "html_url": "https://github.com/joyalbin", "followers_url": "https://api.github.com/users/joyalbin/followers", "following_url": "https://api.github.com/users/joyalbin/following{/other_user}", "gists_url": "https://api.github.com/users/joyalbin/gists{/gist_id}", "starred_url": "https://api.github.com/users/joyalbin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joyalbin/subscriptions", "organizations_url": "https://api.github.com/users/joyalbin/orgs", "repos_url": "https://api.github.com/users/joyalbin/repos", "events_url": "https://api.github.com/users/joyalbin/events{/privacy}", "received_events_url": "https://api.github.com/users/joyalbin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 474725938, "node_id": "MDU6TGFiZWw0NzQ3MjU5Mzg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stalled", "name": "stalled", "color": "d4c5f9", "default": false, "description": null}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-25T07:03:13Z", "updated_at": "2020-03-11T00:56:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/27097", "html_url": "https://github.com/tensorflow/tensorflow/pull/27097", "diff_url": "https://github.com/tensorflow/tensorflow/pull/27097.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/27097.patch"}, "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27093", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27093/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27093/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27093/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27093", "id": 424726351, "node_id": "MDU6SXNzdWU0MjQ3MjYzNTE=", "number": 27093, "title": "Export user_data from TfLiteContext", "user": {"login": "mattn", "id": 10111, "node_id": "MDQ6VXNlcjEwMTEx", "avatar_url": "https://avatars0.githubusercontent.com/u/10111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattn", "html_url": "https://github.com/mattn", "followers_url": "https://api.github.com/users/mattn/followers", "following_url": "https://api.github.com/users/mattn/following{/other_user}", "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattn/subscriptions", "organizations_url": "https://api.github.com/users/mattn/orgs", "repos_url": "https://api.github.com/users/mattn/repos", "events_url": "https://api.github.com/users/mattn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-03-25T05:12:49Z", "updated_at": "2019-03-26T18:26:53Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 13fe6ef76e9f882584fe63a2b7f292266dedf847\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThinking binding of Python or Java, no way to map TfLiteContext to Python/Java objcet. Current implementation of TfLiteRegistration does not have user_data to store object that can be used for mapping Python or Java. So we can't implement custom op with Python or Java.\r\n\r\n```cpp\r\n  static TfLiteRegistration registration = {\r\n      .init = nullptr,\r\n      .free = nullptr,\r\n      .prepare =\r\n          [](TfLiteContext* context, TfLiteNode* node) {\r\n              // call Python/Java\r\n             //PyObject* obj = context->user_data;\r\n          }\r\n   };\r\n```\r\nIf TfLiteContext have user_data (typed void*), we can call Python or Java in the function (init/free/prepare/...).\r\n\r\n**Will this change the current api? How?**\r\n\r\nSo I suggest to add field user_data into TfLiteContext and TfLiteRegistration.\r\n\r\n```cpp\r\nregistration.user_data = GetMyUserData();\r\n```\r\n```cpp\r\nMyUserData* my_user_data = (MyUserData*)context->user_data;\r\n```\r\n\r\n**Who will benefit with this feature?**\r\n\r\nThe authors of binding for Python/Java or [Me](https://github.com/mattn/go-tflite)\r\n\r\n**Any Other info.**\r\n\r\nHowever, we need more APIs to implement custom op which is implemened with C.\r\n\r\nex: https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/models/smartreply/ops"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27078", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27078/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27078/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27078/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27078", "id": 424609668, "node_id": "MDU6SXNzdWU0MjQ2MDk2Njg=", "number": 27078, "title": "tensorflow 1.13.1 on linux on python 3.7 (not osx) uses -D_GLIBCXX_USE_CXX11_ABI=1 -- this behavior is undocumented and/or unspecified", "user": {"login": "cosmicexplorer", "id": 1305167, "node_id": "MDQ6VXNlcjEzMDUxNjc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1305167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cosmicexplorer", "html_url": "https://github.com/cosmicexplorer", "followers_url": "https://api.github.com/users/cosmicexplorer/followers", "following_url": "https://api.github.com/users/cosmicexplorer/following{/other_user}", "gists_url": "https://api.github.com/users/cosmicexplorer/gists{/gist_id}", "starred_url": "https://api.github.com/users/cosmicexplorer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cosmicexplorer/subscriptions", "organizations_url": "https://api.github.com/users/cosmicexplorer/orgs", "repos_url": "https://api.github.com/users/cosmicexplorer/repos", "events_url": "https://api.github.com/users/cosmicexplorer/events{/privacy}", "received_events_url": "https://api.github.com/users/cosmicexplorer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-24T12:53:19Z", "updated_at": "2019-11-12T06:27:53Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): `Linux Ubuntu 18.04.2`\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: *N/A*\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version: `1.13.1`\r\n- Python version: `3.7`\r\n- Installed using virtualenv? pip? conda?: **pip** -- see excerpt in pantsbuild/pants#7424\r\n- Bazel version (if compiling from source): *N/A*\r\n- GCC/Compiler version (if compiling from source): `7.3.0`\r\n- CUDA/cuDNN version: *N/A*\r\n- GPU model and memory: *N/A*\r\n\r\n### Problem\r\n- `tensorflow==1.13.1`, specifically only on `Linux` for python `3.7`, uses `-D_GLIBCXX_USE_CXX11_ABI=1`, which contradicts the documentation at https://www.tensorflow.org/guide/extend/op#build_the_op_library, which specifically says that `-D_GLIBCXX_USE_CXX11_ABI=0` is used.\r\n  - This caused an opaque compile error when building a custom operator in C++ in pants (see pantsbuild/pants#7417).\r\n  - **Is this ABI change intentional?**\r\n- **This does not affect any user who is building from source nor any user/tool which relies on `tensorflow.sysconfig.get_compile_flags()` to get compile flags.**\r\n- *(tangential)* `self.test_session()` is deprecated, but is also used in the documentation at https://www.tensorflow.org/guide/extend/op.\r\n\r\n### Exact commands / steps\r\npantsbuild/pants#7424 has command line logs from linux and osx to show that `tensorflow==1.13.1` on python 3.7 uses `-D_GLIBCXX_USE_CXX11_ABI=1` on linux, but not osx.\r\n\r\n### Background\r\nIn pants, we are imitating the instructions in the tutorial, but we are not using the `tf.sysconfig` API right now (see pantsbuild/pants#7046). We had set `-D_GLIBCXX_USE_CXX11_ABI=0` for all tensorflow compiles, and found a failure when trying to run testing for our tensorflow example custom op project when trying to set up a python 3.7 Linux CI shard. This is not blocking us -- we have a well-functioning workaround in pantsbuild/pants#7424, but we would like to know if this change is intentional and whether we should expect new tensorflow releases to also use the newer C++ ABI."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27047", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27047/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27047/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27047/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27047", "id": 424409481, "node_id": "MDU6SXNzdWU0MjQ0MDk0ODE=", "number": 27047, "title": "tf.train.BytesList should accept bytearray as an input type", "user": {"login": "iggy12345", "id": 32805004, "node_id": "MDQ6VXNlcjMyODA1MDA0", "avatar_url": "https://avatars1.githubusercontent.com/u/32805004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iggy12345", "html_url": "https://github.com/iggy12345", "followers_url": "https://api.github.com/users/iggy12345/followers", "following_url": "https://api.github.com/users/iggy12345/following{/other_user}", "gists_url": "https://api.github.com/users/iggy12345/gists{/gist_id}", "starred_url": "https://api.github.com/users/iggy12345/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iggy12345/subscriptions", "organizations_url": "https://api.github.com/users/iggy12345/orgs", "repos_url": "https://api.github.com/users/iggy12345/repos", "events_url": "https://api.github.com/users/iggy12345/events{/privacy}", "received_events_url": "https://api.github.com/users/iggy12345/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-22T21:38:44Z", "updated_at": "2019-04-26T05:56:02Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): I don't know how to write a *.proto file, so no\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nIf something is called a `BytesList`, then I should be allowed to pass in a `bytearray` to it\r\nCurrently I cannot.\r\nFor example:\r\n```\r\nimport tensorflow as tf\r\nimg = bytearray([1, 2, 3, 4])\r\nprint(img)\r\nfeat = tf.train.Feature(bytes_list=tf.train.BytesList(value=[img]))\r\n```\r\n\r\n\r\n**Will this change the current api? How?**\r\n\r\nIt will make the tf.train.BytesList class more intuitive to use\r\n\r\n**Who will benefit with this feature?**\r\n\r\nEveryone trying to do image recognition\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27042", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27042/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27042/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27042/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27042", "id": 424274498, "node_id": "MDU6SXNzdWU0MjQyNzQ0OTg=", "number": 27042, "title": "tf.sparse: limited functionality", "user": {"login": "erikchwang", "id": 16256959, "node_id": "MDQ6VXNlcjE2MjU2OTU5", "avatar_url": "https://avatars0.githubusercontent.com/u/16256959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikchwang", "html_url": "https://github.com/erikchwang", "followers_url": "https://api.github.com/users/erikchwang/followers", "following_url": "https://api.github.com/users/erikchwang/following{/other_user}", "gists_url": "https://api.github.com/users/erikchwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikchwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikchwang/subscriptions", "organizations_url": "https://api.github.com/users/erikchwang/orgs", "repos_url": "https://api.github.com/users/erikchwang/repos", "events_url": "https://api.github.com/users/erikchwang/events{/privacy}", "received_events_url": "https://api.github.com/users/erikchwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-22T15:44:26Z", "updated_at": "2019-10-24T01:23:25Z", "closed_at": null, "author_association": "NONE", "body": "1. `tf.sparse.sparse_dense_matmul` only support matrix of rank 2, why cannot it support higher ranks?\r\n2. `tf.sparse.to_dense` cannot support back-propagation at least in and before TF 1.13\r\n3. there is no element-wise multiplication for sparse tensors similar to tf.multiply\r\n4. there is no matmul between two sparse tensors"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27033", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27033/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27033/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27033/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27033", "id": 424139643, "node_id": "MDU6SXNzdWU0MjQxMzk2NDM=", "number": 27033, "title": "gpu doesn't report error when id is actually out of range in tf.nn.embedding_lookup(embed, ids) ", "user": {"login": "StarYoung", "id": 18651908, "node_id": "MDQ6VXNlcjE4NjUxOTA4", "avatar_url": "https://avatars2.githubusercontent.com/u/18651908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StarYoung", "html_url": "https://github.com/StarYoung", "followers_url": "https://api.github.com/users/StarYoung/followers", "following_url": "https://api.github.com/users/StarYoung/following{/other_user}", "gists_url": "https://api.github.com/users/StarYoung/gists{/gist_id}", "starred_url": "https://api.github.com/users/StarYoung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StarYoung/subscriptions", "organizations_url": "https://api.github.com/users/StarYoung/orgs", "repos_url": "https://api.github.com/users/StarYoung/repos", "events_url": "https://api.github.com/users/StarYoung/events{/privacy}", "received_events_url": "https://api.github.com/users/StarYoung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-03-22T10:26:25Z", "updated_at": "2019-04-04T17:39:46Z", "closed_at": null, "author_association": "NONE", "body": "- TensorFlow version (use command below):1.13\r\n- Python version:3.6\r\n\r\n\r\n```\r\nimport tensorflow as tf\r\nx = tf.constant(999)\r\n#with tf.device('/cpu:0'):\r\n#    voc_emb = tf.get_variable(name=\"voc_emb\", dtype=tf.float32, shape=[3, 12])\r\n#    embedded_x = tf.nn.embedding_lookup(voc_emb, x)\r\nvoc_emb = tf.get_variable(name=\"voc_emb\", dtype=tf.float32, shape=[3, 12])\r\nembedded_x = tf.nn.embedding_lookup(voc_emb, x)\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\nprint(sess.run(embedded_x))\r\n```\r\n\r\nthe following above I run on cpu and gpu separately, \r\nwhile cpu reports:\r\nInvalidArgumentError (see above for traceback): indices = 999 is not in [0, 3)\r\n\t [[node embedding_lookup (defined at test.py:24) ]]\r\n\r\nbut gpu just give an output like this:\r\n[0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27031", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27031/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27031/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27031/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27031", "id": 424129710, "node_id": "MDU6SXNzdWU0MjQxMjk3MTA=", "number": 27031, "title": "Tensorflow-lite segmentation model does not work with NNAPI on Android 9.0", "user": {"login": "anilsathyan7", "id": 1130185, "node_id": "MDQ6VXNlcjExMzAxODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1130185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anilsathyan7", "html_url": "https://github.com/anilsathyan7", "followers_url": "https://api.github.com/users/anilsathyan7/followers", "following_url": "https://api.github.com/users/anilsathyan7/following{/other_user}", "gists_url": "https://api.github.com/users/anilsathyan7/gists{/gist_id}", "starred_url": "https://api.github.com/users/anilsathyan7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anilsathyan7/subscriptions", "organizations_url": "https://api.github.com/users/anilsathyan7/orgs", "repos_url": "https://api.github.com/users/anilsathyan7/repos", "events_url": "https://api.github.com/users/anilsathyan7/events{/privacy}", "received_events_url": "https://api.github.com/users/anilsathyan7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-03-22T10:01:45Z", "updated_at": "2019-04-16T13:06:39Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n**System information**\r\n- OS Platform and Distribution : Android, Tensorflow-Lite-Experimental\r\n- Mobile device : Samsung SM-A730F, Android 9 , API 28\r\n- Tensorflow: 1.13\r\n\r\n**Describe the current behavior**\r\n\r\nThe official tensorflow lite segmentation model '[deeplabv3_257_mv_gpu.tflite](https://storage.googleapis.com/download.tensorflow.org/models/tflite/gpu/deeplabv3_257_mv_gpu.tflite)' cannot be run on  Andorid 9.0, using NNAPI. It seems some operators are not supported currently by NNAPI.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe model should run on phone using NNAPI, without any problems.\r\n\r\n**Other info / logs**\r\nThe model gives error when we run it using tensorflow lite interpreter on android.Also it gives similar error on android benchmark tool, when we run it with 'use_nnapi=1' option.\r\n\r\nTF-Lite Benchmark:-\r\n\r\nadb shell /data/local/tmp/benchmark_model --graph=/data/local/tmp/deeplabv3_257_mv_gpu.tflite --num_threads=1 --use_nnapi=1\r\nadb: /opt/intel/intelpython27/lib/libcrypto.so.1.0.0: no version information available (required by adb)\r\nSTARTING!\r\nMin num runs: [50]\r\nMin runs duration (seconds): [1]\r\nInter-run delay (seconds): [-1]\r\nNum threads: [1]\r\nBenchmark name: []\r\nOutput prefix: []\r\nMin warmup runs: [1]\r\nMin warmup runs duration (seconds): [0.5]\r\nGraph: [/data/local/tmp/deeplabv3_257_mv_gpu.tflite]\r\nInput layers: []\r\nInput shapes: []\r\nUse nnapi : [1]\r\nAllow fp16 : [0]\r\nLoaded model /data/local/tmp/deeplabv3_257_mv_gpu.tflite\r\nresolved reporter\r\nInitialized session in 325.573ms\r\nRunning benchmark for at least 1 iterations and at least 0.5 seconds\r\nOp code 23 is currently not delegated to NNAPI\r\nReturning error since TFLite returned failure nnapi_delegate.cc:736.\r\nFailed to build graph for NNAPI\r\nFailed to invoke!\r\nAborted \r\n\r\nAndroid Log:\r\n\r\nandroid.example.com.tflitecamerademo E/tflite: Op code 23 is currently not delegated to NNAPI\r\n    Returning error since TFLite returned failure nnapi_delegate.cc:751.\r\n    Failed to build graph for NNAPI\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27029", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27029/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27029/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27029/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27029", "id": 424109062, "node_id": "MDU6SXNzdWU0MjQxMDkwNjI=", "number": 27029, "title": "Make documentation link to C++ code", "user": {"login": "ageron", "id": 76661, "node_id": "MDQ6VXNlcjc2NjYx", "avatar_url": "https://avatars3.githubusercontent.com/u/76661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageron", "html_url": "https://github.com/ageron", "followers_url": "https://api.github.com/users/ageron/followers", "following_url": "https://api.github.com/users/ageron/following{/other_user}", "gists_url": "https://api.github.com/users/ageron/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageron/subscriptions", "organizations_url": "https://api.github.com/users/ageron/orgs", "repos_url": "https://api.github.com/users/ageron/repos", "events_url": "https://api.github.com/users/ageron/events{/privacy}", "received_events_url": "https://api.github.com/users/ageron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-03-22T09:08:08Z", "updated_at": "2019-03-22T17:58:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version: All\r\n- Doc Link: All the Python API documentation, for example: https://www.tensorflow.org/api_docs/python/tf/nn/conv2d_transpose\r\n\r\n**Describe the documentation issue**\r\nThe Python API documentation often points to the Python code (on github) where the operation is defined. For the example, for `tf.nn.conv2d_transpose()`, it links to [this code](https://www.tensorflow.org/code/stable/tensorflow/python/ops/nn_ops.py).\r\n\r\nUnfortunately, most operations are fairly thin wrappers around C++ operations, and since the link from Python to C++ is automatically generated (in this example, it's `gen_nn_ops.conv2d_backprop_input()`), it is not trivial to find the corresponding C++ code (the mapping is in Bazel code, really hard to find). Many people have been bothered by this problem, as you can see by searching for gen_nn_ops on StackOverflow, for example this question: https://stackoverflow.com/questions/41147734/looking-for-source-code-of-from-gen-nn-ops-in-tensorflow\r\n\r\nIt would be great if the documentation could point to both the Python function and the C++ operation. In this case, it would be https://www.tensorflow.org/versions/r2.0/api_docs/cc/class/tensorflow/ops/conv2-d-backprop-input and the source code is in [tensorflow/core/kernels/conv_grad_input_ops.cc](https://github.com/tensorflow/tensorflow/blob/94be8f012aa59730570bf71e6ba7cd2aa432a589/tensorflow/core/kernels/conv_grad_input_ops.cc#L265).\r\n\r\nTo find it, I had to search locally on my computer to find the `gen_nn_ops.py` file, and I found that `gen_nn_ops.conv2d_backprop_input()` just called the `Conv2DBackpropInput` operation. But then I had to go back to github to search for its C++ source code (since the TensorFlow binary does not include it), and it was tricky to find, since the C++ operation is also dynamically registered, so the actual name of the function is `Conv2DCustomBackpropInputOp`. Searching for `\"REGISTER_KERNEL_BUILDER  Conv2DBackpropInput\"` helps.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nI'm not sure where I could contribute this fix."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27022", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27022/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27022/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27022/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27022", "id": 424052679, "node_id": "MDU6SXNzdWU0MjQwNTI2Nzk=", "number": 27022, "title": "tf.data.experimental.ignore_errors", "user": {"login": "Arjuna197", "id": 34486624, "node_id": "MDQ6VXNlcjM0NDg2NjI0", "avatar_url": "https://avatars2.githubusercontent.com/u/34486624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arjuna197", "html_url": "https://github.com/Arjuna197", "followers_url": "https://api.github.com/users/Arjuna197/followers", "following_url": "https://api.github.com/users/Arjuna197/following{/other_user}", "gists_url": "https://api.github.com/users/Arjuna197/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arjuna197/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arjuna197/subscriptions", "organizations_url": "https://api.github.com/users/Arjuna197/orgs", "repos_url": "https://api.github.com/users/Arjuna197/repos", "events_url": "https://api.github.com/users/Arjuna197/events{/privacy}", "received_events_url": "https://api.github.com/users/Arjuna197/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-03-22T05:26:54Z", "updated_at": "2019-03-22T18:45:31Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**May have been addressed by:** [https://github.com/tensorflow/tensorflow/issues/25700](url)\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes. Stock code with additional operations\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tensorflow-gpu 1.12.0\r\n- Python version: 3.6.5\r\n- CUDA/cuDNN version: 10.0/7.4.1\r\n- GPU model and memory: TitanXP 12196MiB\r\n\r\n\r\n**Describe the current behavior**\r\ntf.data.experimental.ignore_errors() causes tensorflow to hang when applied after a \"dataset.batch(N)\" operation.\r\n**Describe the expected behavior**\r\nThrow an error, suggest that the user ignore errors prior to batching to prevent uneven batches.\r\n**Code to reproduce the issue**\r\n`import tensorflow as tf\r\n\r\ndataset = tf.data.Dataset.from_tensor_slices([1., 2., 0., 4.])\r\n\r\ndataset = dataset.map(lambda x: tf.check_numerics(1. / x, \"error\"))\r\n\r\ndataset = dataset.repeat().batch(6)\r\n\r\ndataset = dataset.apply(tf.data.experimental.ignore_errors()) \r\n\r\nit = dataset.make_one_shot_iterator()\r\nnex = it.get_next()\r\nsess = tf.Session()\r\nprint(sess.run(nex))`\r\n\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nSee above.\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27010", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27010/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27010/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27010/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27010", "id": 424016595, "node_id": "MDU6SXNzdWU0MjQwMTY1OTU=", "number": 27010, "title": "tf.keras.layers.Softmax does not support masking?", "user": {"login": "erikchwang", "id": 16256959, "node_id": "MDQ6VXNlcjE2MjU2OTU5", "avatar_url": "https://avatars0.githubusercontent.com/u/16256959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikchwang", "html_url": "https://github.com/erikchwang", "followers_url": "https://api.github.com/users/erikchwang/followers", "following_url": "https://api.github.com/users/erikchwang/following{/other_user}", "gists_url": "https://api.github.com/users/erikchwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikchwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikchwang/subscriptions", "organizations_url": "https://api.github.com/users/erikchwang/orgs", "repos_url": "https://api.github.com/users/erikchwang/repos", "events_url": "https://api.github.com/users/erikchwang/events{/privacy}", "received_events_url": "https://api.github.com/users/erikchwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-03-22T02:10:56Z", "updated_at": "2019-12-09T03:51:44Z", "closed_at": null, "author_association": "NONE", "body": "```\r\nimport tensorflow as tf\r\noutputs = tf.keras.layers.Softmax().apply(\r\n  tf.keras.layers.Masking().apply(\r\n    tf.zeros([3,5,7])\r\n  )\r\n)\r\n```\r\nSince the default mask value of Masking is zero, Softmax should skip all values in the above case, and its behavior should be like sparse softmax. Therefore, I suppose the output should be all zeros, but that is not the case."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27009", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27009/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27009/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27009/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27009", "id": 424012153, "node_id": "MDU6SXNzdWU0MjQwMTIxNTM=", "number": 27009, "title": "How horovod integrate itself into tf distribute strategy?", "user": {"login": "zhouhaiy", "id": 41598213, "node_id": "MDQ6VXNlcjQxNTk4MjEz", "avatar_url": "https://avatars1.githubusercontent.com/u/41598213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhouhaiy", "html_url": "https://github.com/zhouhaiy", "followers_url": "https://api.github.com/users/zhouhaiy/followers", "following_url": "https://api.github.com/users/zhouhaiy/following{/other_user}", "gists_url": "https://api.github.com/users/zhouhaiy/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhouhaiy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhouhaiy/subscriptions", "organizations_url": "https://api.github.com/users/zhouhaiy/orgs", "repos_url": "https://api.github.com/users/zhouhaiy/repos", "events_url": "https://api.github.com/users/zhouhaiy/events{/privacy}", "received_events_url": "https://api.github.com/users/zhouhaiy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-03-22T01:46:20Z", "updated_at": "2019-03-22T23:43:14Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI read from tensorflow TFC that horovod team is collobrating with tf team upon the HorovodDistributionStrategy.\r\nRFC: https://github.com/tensorflow/community/blob/master/rfcs/20181016-replicator.md#use-case-4-users-who-will-create-new-distributionstrategy-implementations\r\n\r\nCan anyone share with us more details about how to integrate horovod into d.s.? Because there's a lot of difference between them: e.g. launcher mode\r\n\r\nThanks!\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26998", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26998/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26998/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26998/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26998", "id": 423816320, "node_id": "MDU6SXNzdWU0MjM4MTYzMjA=", "number": 26998, "title": "2.0 Reference Models: MobileNetV2 (1 GPU, 8 GPU with dist strat and Keras)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-21T16:13:13Z", "updated_at": "2019-09-25T00:02:27Z", "closed_at": null, "author_association": "MEMBER", "body": "**MobileNetV2** is a significant improvement over [MobileNetV1](https://research.googleblog.com/2017/06/mobilenets-open-source-models-for.html) and pushes the state of the art for mobile visual recognition including classification, object detection and semantic segmentation. It builds upon the ideas from MobileNetV1, using depthwise separable convolution as efficient building blocks. However, V2 introduces two new features to the architecture: \r\n\r\n1. Linear bottlenecks between the layers, and \r\n2. Shortcut connections between the bottlenecks1.\r\n\r\nThe research team's academic paper describes MobileNetV2 in detail: https://arxiv.org/abs/1801.04381.\r\n\r\nAn example of MobileNetV2 implemented with Slim can be found [here](https://colab.research.google.com/github/tensorflow/models/blob/master/research/slim/nets/mobilenet/mobilenet_example.ipynb).\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26997", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26997/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26997/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26997/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26997", "id": 423815873, "node_id": "MDU6SXNzdWU0MjM4MTU4NzM=", "number": 26997, "title": "2.0 Reference Models: MobileNetv2 (TPU with dist strat and Keras)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-21T16:12:16Z", "updated_at": "2019-09-24T23:42:13Z", "closed_at": null, "author_association": "MEMBER", "body": "**MobileNetV2** is a significant improvement over [MobileNetV1](https://research.googleblog.com/2017/06/mobilenets-open-source-models-for.html) and pushes the state of the art for mobile visual recognition including classification, object detection and semantic segmentation. It builds upon the ideas from MobileNetV1, using depthwise separable convolution as efficient building blocks. However, V2 introduces two new features to the architecture: \r\n\r\n1. Linear bottlenecks between the layers, and \r\n2. Shortcut connections between the bottlenecks1.\r\n\r\nThe research team's academic paper describes MobileNetV2 in detail: https://arxiv.org/abs/1801.04381.\r\n\r\nAn example of MobileNetV2 implemented with Slim can be found [here](https://colab.research.google.com/github/tensorflow/models/blob/master/research/slim/nets/mobilenet/mobilenet_example.ipynb).\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26984", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26984/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26984/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26984/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26984", "id": 423693118, "node_id": "MDU6SXNzdWU0MjM2OTMxMTg=", "number": 26984, "title": "[TF 2.0 API Docs] tf.math modules, new endpoints, gen_math_ops.py", "user": {"login": "8bitmp3", "id": 19637339, "node_id": "MDQ6VXNlcjE5NjM3MzM5", "avatar_url": "https://avatars3.githubusercontent.com/u/19637339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/8bitmp3", "html_url": "https://github.com/8bitmp3", "followers_url": "https://api.github.com/users/8bitmp3/followers", "following_url": "https://api.github.com/users/8bitmp3/following{/other_user}", "gists_url": "https://api.github.com/users/8bitmp3/gists{/gist_id}", "starred_url": "https://api.github.com/users/8bitmp3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/8bitmp3/subscriptions", "organizations_url": "https://api.github.com/users/8bitmp3/orgs", "repos_url": "https://api.github.com/users/8bitmp3/repos", "events_url": "https://api.github.com/users/8bitmp3/events{/privacy}", "received_events_url": "https://api.github.com/users/8bitmp3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-21T11:55:53Z", "updated_at": "2020-03-17T17:15:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version: 2.0 alpha\r\n- Doc links: \r\n`tf.math` module-related, including:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/math/log\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/math/less\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/math/less_equal\r\n... and **many more** - a lot of endpoints mentioned below affected\r\n\r\n**Describe the documentation issue**\r\n\r\nSimilar to [26530](https://github.com/tensorflow/tensorflow/issues/26530), [25802](https://github.com/tensorflow/tensorflow/issues/25802), [25846](https://github.com/tensorflow/tensorflow/issues/25846)\r\n\r\n(May be similar to [26532](https://github.com/tensorflow/tensorflow/issues/26532) but has to do with `gen_math_ops.py` not `[math_ops.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/math_ops.py)`.)\r\n\r\n- **Incorrect links:**\r\nMissing links to ?non-existent `...python/ops/gen_math_ops.py`\r\n\r\nSince [1.10](https://github.com/tensorflow/tensorflow/blob/67a4cbbc7cacdbc33b2adb44f1b08b5a0dbc3186/RELEASE.md):\r\n```\r\nNew symbols have been added to the following modules: tf.debugging, tf.dtypes, tf.image, tf.io, tf.linalg, tf.manip, **tf.math**, tf.quantization, tf.strings\r\n```\r\n\r\n`...python/ops/gen_math_ops.py` has been referenced a bunch of times e.g. [here](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/math/log\r\n) but does not appear to exist or cannot be easily found. There are similar issues with examples, raises, etc for some if not all of the [following](https://github.com/tensorflow/tensorflow/blob/67a4cbbc7cacdbc33b2adb44f1b08b5a0dbc3186/RELEASE.md): \r\n```\r\nNew endpoints in tf.math module namespace: tf.math.acos, tf.math.acosh, tf.math.add, tf.math.asin, tf.math.asinh, tf.math.atan, tf.math.atan2, tf.math.atanh, tf.math.betainc, tf.math.ceil, tf.math.cos, tf.math.cosh, tf.math.digamma, tf.math.equal, tf.math.erfc, tf.math.exp, tf.math.expm1, tf.math.floor, tf.math.greater, tf.math.greater_equal, tf.math.igamma, tf.math.igammac, tf.math.invert_permutation, tf.math.less, tf.math.less_equal, tf.math.lgamma, tf.math.log, tf.math.log1p, tf.math.logical_and, tf.math.logical_not, tf.math.logical_or, tf.math.maximum, tf.math.minimum, tf.math.not_equal, tf.math.polygamma, tf.math.reciprocal, tf.math.rint, tf.math.rsqrt, tf.math.segment_max, tf.math.segment_mean, tf.math.segment_min, tf.math.segment_prod, tf.math.segment_sum, tf.math.sin, tf.math.sinh, tf.math.softplus, tf.math.softsign, tf.math.squared_difference, tf.math.tan, tf.math.unsorted_segment_max, tf.math.unsorted_segment_min, tf.math.unsorted_segment_prod, tf.math.unsorted_segment_sum, tf.math.zeta\r\n```\r\n\r\n- **Usage examples**\r\nNeeds examples for each of tf.math calculations e.g.\r\n`tf.math.log(42.)` returns\r\n```\r\n<tf.Tensor: id=5, shape=(), dtype=float32, numpy=3.7376697>\r\n```\r\n\r\n- **Raises**\r\nNot listed/defined. Obfuscated error from unexpected args (e.g. strings)\r\n\r\nE.g. `tf.math.log('hello log')` gives this long error message for a simple natural log calculation. As @dynamicwebpaige said [here](https://github.com/tensorflow/tensorflow/issues/25802) all tf.math.* operations and the operations they influence ... would experience these same obfuscated XLA errors.\r\n```\r\n---------------------------------------------------------------------------\r\nInternalError                             Traceback (most recent call last)\r\n<ipython-input-7-208ff95958ff> in <module>()\r\n----> 1 tf.math.log('hello log')\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_math_ops.py in log(x, name)\r\n   5327       try:\r\n   5328         return log_eager_fallback(\r\n-> 5329             x, name=name, ctx=_ctx)\r\n   5330       except _core._SymbolicException:\r\n   5331         pass  # Add nodes to the TensorFlow graph.\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_math_ops.py in log_eager_fallback(x, name, ctx)\r\n   5376   _attrs = (\"T\", _attr_T)\r\n   5377   _result = _execute.execute(b\"Log\", 1, inputs=_inputs_flat, attrs=_attrs,\r\n-> 5378                              ctx=_ctx, name=name)\r\n   5379   _execute.record_gradient(\r\n   5380       \"Log\", _inputs_flat, _attrs, _result, name)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     64     else:\r\n     65       message = e.message\r\n---> 66     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     67   except TypeError as e:\r\n     68     if any(ops._is_keras_symbolic_tensor(x) for x in inputs):\r\n\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nInternalError: Could not find valid device for node.\r\nNode: {{node Log}}\r\nAll kernels registered for op Log :\r\n  device='XLA_CPU'; T in [DT_FLOAT, DT_DOUBLE, DT_COMPLEX64, DT_BFLOAT16, DT_COMPLEX128, DT_HALF]\r\n  device='XLA_CPU_JIT'; T in [DT_FLOAT, DT_DOUBLE, DT_COMPLEX64, DT_BFLOAT16, DT_COMPLEX128, DT_HALF]\r\n  device='CPU'; T in [DT_COMPLEX128]\r\n  device='CPU'; T in [DT_COMPLEX64]\r\n  device='CPU'; T in [DT_BFLOAT16]\r\n  device='CPU'; T in [DT_DOUBLE]\r\n  device='CPU'; T in [DT_HALF]\r\n  device='CPU'; T in [DT_FLOAT]\r\n [Op:Log]\r\n```\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nOk\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26961", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26961/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26961/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26961/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26961", "id": 423501643, "node_id": "MDU6SXNzdWU0MjM1MDE2NDM=", "number": 26961, "title": "Dynamic ksize and strides with AvgPool", "user": {"login": "davideh29-portfolio", "id": 35947736, "node_id": "MDQ6VXNlcjM1OTQ3NzM2", "avatar_url": "https://avatars1.githubusercontent.com/u/35947736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davideh29-portfolio", "html_url": "https://github.com/davideh29-portfolio", "followers_url": "https://api.github.com/users/davideh29-portfolio/followers", "following_url": "https://api.github.com/users/davideh29-portfolio/following{/other_user}", "gists_url": "https://api.github.com/users/davideh29-portfolio/gists{/gist_id}", "starred_url": "https://api.github.com/users/davideh29-portfolio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davideh29-portfolio/subscriptions", "organizations_url": "https://api.github.com/users/davideh29-portfolio/orgs", "repos_url": "https://api.github.com/users/davideh29-portfolio/repos", "events_url": "https://api.github.com/users/davideh29-portfolio/events{/privacy}", "received_events_url": "https://api.github.com/users/davideh29-portfolio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-20T22:31:45Z", "updated_at": "2019-04-27T06:46:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n1.11.0\r\n\r\n- Are you willing to contribute it (Yes/No):\r\nYes - but unfamiliar with contribution process and I think it would be very similar to MaxPoolV2\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAdding an AvgPoolV2 with dynamic ksize, much like MaxPoolV2. This is very related to issue #11875\r\n\r\n**Will this change the current api? How?**\r\nIt would add a new function gen_nn_ops.avg_pool_v2\r\n\r\n**Who will benefit with this feature?**\r\nAnybody looking to use an average pooling layer with dynamic ksize. For example, when running a graph with an input of an unspecified size when the ksize is dependent on the size of the input\r\n\r\n**Any Other info.**\r\n"}]