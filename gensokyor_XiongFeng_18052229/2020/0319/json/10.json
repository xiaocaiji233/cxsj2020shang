[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35070", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35070/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35070/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35070/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35070", "id": 537275928, "node_id": "MDU6SXNzdWU1MzcyNzU5Mjg=", "number": 35070, "title": "Calculate arena size for TensorFlow Lite Micro models", "user": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-12T23:55:34Z", "updated_at": "2020-01-23T21:05:27Z", "closed_at": null, "author_association": "MEMBER", "body": "\r\n\r\nTensorFlow Lite for Microcontrollers doesn't depend on dynamic memory allocation, so it requires users to supply a memory arena when an interpreter is created, as described in this documentation:\r\nhttps://www.tensorflow.org/lite/microcontrollers/get_started\r\nWe need a better way to decide 'tensor_arena_size'. Currently, the above page says 'The size required will depend on the model you are using, and may need to be determined by experimentation.'\r\n\r\nThe simplest solution might be an offline script that returns the size needed to hold a model's activation buffers, but this won't include miscellaneous or platform-dependent allocations in its total. Another approach might be to return the size needed as an integer along with the error report string from the interpreter creation."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35065", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35065/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35065/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35065/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35065", "id": 537222275, "node_id": "MDU6SXNzdWU1MzcyMjIyNzU=", "number": 35065, "title": "Bug in documentation of tf.while_loop.  parallel_iterations doesn't seem to affect performance.", "user": {"login": "charles19920528", "id": 25596313, "node_id": "MDQ6VXNlcjI1NTk2MzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/25596313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charles19920528", "html_url": "https://github.com/charles19920528", "followers_url": "https://api.github.com/users/charles19920528/followers", "following_url": "https://api.github.com/users/charles19920528/following{/other_user}", "gists_url": "https://api.github.com/users/charles19920528/gists{/gist_id}", "starred_url": "https://api.github.com/users/charles19920528/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charles19920528/subscriptions", "organizations_url": "https://api.github.com/users/charles19920528/orgs", "repos_url": "https://api.github.com/users/charles19920528/repos", "events_url": "https://api.github.com/users/charles19920528/events{/privacy}", "received_events_url": "https://api.github.com/users/charles19920528/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-12T21:26:39Z", "updated_at": "2019-12-18T18:27:54Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes and no.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- TensorFlow installed from (source or binary): I used `pip install tensorflow-gpu==2.0.0`\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7.5\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: 1080 TI and 11170 MiB\r\n\r\n**Describe the current behavior**\r\nFirst as discussed in this [issue](https://github.com/tensorflow/tensorflow/issues/18257). There is a bug in the first example of the documentation of `tf.while_loop`. \r\n\r\nThen, the parallel_iterations argument doesn't seem to parallelize the loop. There is no difference between the run time with `parallel_iterations = 1` or `parallel_iterations = 10`. \r\nI have a question opened on [Stackoverflow](https://stackoverflow.com/questions/59299060/tf-2-0-while-loop-and-parallel-iterations) .\r\n\r\n**Describe the expected behavior**\r\nIf the function in iteration n doesn't depend on previous iterations, then I expect that by setting `parallel_iterations = 10,` the loop should finish about 10 times faster than setting `parallel_iterations = 1`\r\n**Code to reproduce the issue**\r\nThe code is posted on the [Stackoverflow](https://stackoverflow.com/questions/59299060/tf-2-0-while-loop-and-parallel-iterations). \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35063", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35063/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35063/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35063/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35063", "id": 537159567, "node_id": "MDU6SXNzdWU1MzcxNTk1Njc=", "number": 35063, "title": "No example provided for using tf.nn.ctc_loss", "user": {"login": "gabolsgabs", "id": 11062535, "node_id": "MDQ6VXNlcjExMDYyNTM1", "avatar_url": "https://avatars1.githubusercontent.com/u/11062535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabolsgabs", "html_url": "https://github.com/gabolsgabs", "followers_url": "https://api.github.com/users/gabolsgabs/followers", "following_url": "https://api.github.com/users/gabolsgabs/following{/other_user}", "gists_url": "https://api.github.com/users/gabolsgabs/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabolsgabs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabolsgabs/subscriptions", "organizations_url": "https://api.github.com/users/gabolsgabs/orgs", "repos_url": "https://api.github.com/users/gabolsgabs/repos", "events_url": "https://api.github.com/users/gabolsgabs/events{/privacy}", "received_events_url": "https://api.github.com/users/gabolsgabs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-12-12T19:06:27Z", "updated_at": "2020-03-13T06:36:05Z", "closed_at": null, "author_association": "NONE", "body": "## URL with the issue: https://www.tensorflow.org/api_docs/python/tf/nn/ctc_loss\r\n\r\n## Description of issue:\r\nThere's no example provided for using this loss and I cannot make it work.\r\nFollowing the parameters definitions I created this toy example in tf2.0.0:\r\n\r\n```\r\nimport functools\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.layers import (Input, Conv2D, Lambda)\r\nfrom tensorflow.keras.optimizers import Adam\r\n\r\n# INPUTS\r\ninputs = Input(shape=[128, 64, 1], batch_size=32)    # [frames, num_labels, channels]\r\nlabels = Input(shape=[128], batch_size=32,  dtype=tf.int32)\r\nlabel_length = tf.constant(np.ones((32)), dtype=tf.int32)\r\nlogit_length = tf.constant(np.ones((32)),  dtype=tf.int32)\r\n# MODEL\r\nx = Conv2D(1, kernel_size=(5, 5),  padding='same')(inputs)\r\nlogits = Lambda(lambda z: tf.squeeze(z, [-1]))(x)\r\nmodel = Model(inputs, logits)\r\nmodel.compile(optimizer=Adam(lr=0.001), loss=tf.nn.ctc_loss(\r\n    labels=labels, logits=logits, label_length=label_length,\r\n    logit_length=logit_length, logits_time_major=False,\r\n    blank_index=-1\r\n))\r\n```\r\n\r\nwhich rises: \r\n\r\n```\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/framework/op_def_library.py in _apply_op_helper(self, op_type_name, name, **keywords)\r\n    469                 dtype=dtype if dtype else None,\r\n    470                 preferred_dtype=default_dtype,\r\n--> 471                 as_ref=input_arg.is_ref)\r\n    472             if input_arg.number_attr and len(\r\n    473                 set(v.dtype.base_dtype for v in values)) > 1:\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py in internal_convert_n_to_tensor(values, dtype, name, as_ref, preferred_dtype, ctx)\r\n   1363             as_ref=as_ref,\r\n   1364             preferred_dtype=preferred_dtype,\r\n-> 1365             ctx=ctx))\r\n   1366   return ret\r\n   1367\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, ctx, accept_composite_tensors)\r\n   1262     graph = get_default_graph()\r\n   1263     if not graph.building_function:\r\n-> 1264       raise RuntimeError(\"Attempting to capture an EagerTensor without \"\r\n   1265                          \"building a function.\")\r\n   1266     return graph.capture(value, name=name)\r\n\r\nRuntimeError: Attempting to capture an EagerTensor without building a function.\r\n```\r\n\r\nThen, I tried to use it as a handle:\r\n\r\n```\r\nctc_loss = functools.partial(\r\n    tf.nn.ctc_loss,\r\n    labels,         # labels\r\n    logits,         # logits\r\n    label_length,   # label_length\r\n    logit_length,   # logit_length\r\n    False,          # logits_time_major\r\n    -1,             # blank_index\r\n)\r\nmodel.compile(optimizer=Adam(lr=0.001), loss=ctc_loss)\r\n```\r\n\r\nwhich rises:\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-147-2018e8450f34> in <module>\r\n----> 1 model.compile(optimizer=Adam(lr=0.001), loss=ctc_loss)\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py in _method_wrapper(self, *args, **kwargs)\r\n    455     self._self_setattr_tracking = False  # pylint: disable=protected-access\r\n    456     try:\r\n--> 457       result = method(self, *args, **kwargs)\r\n    458     finally:\r\n    459       self._self_setattr_tracking = previous_value  # pylint: disable=protected-access\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in compile(self, optimizer, loss, metrics, loss_weights, sample_weight_mode, weighted_metrics, target_tensors, distribute, **kwargs)\r\n    371\r\n    372       # Creates the model loss and weighted metrics sub-graphs.\r\n--> 373       self._compile_weights_loss_and_weighted_metrics()\r\n    374\r\n    375       # Functions for train, test and predict will\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py in _method_wrapper(self, *args, **kwargs)\r\n    455     self._self_setattr_tracking = False  # pylint: disable=protected-access\r\n    456     try:\r\n--> 457       result = method(self, *args, **kwargs)\r\n    458     finally:\r\n    459       self._self_setattr_tracking = previous_value  # pylint: disable=protected-access\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in _compile_weights_loss_and_weighted_metrics(self, sample_weights)\r\n   1651       #                   loss_weight_2 * output_2_loss_fn(...) +\r\n   1652       #                   layer losses.\r\n-> 1653       self.total_loss = self._prepare_total_loss(masks)\r\n   1654\r\n   1655   def _prepare_skip_target_masks(self):\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in _prepare_total_loss(self, masks)\r\n   1732             # differentiate between use case where a custom optimizer\r\n   1733             # expects a vector loss value vs unreduced per-sample loss value.\r\n-> 1734             output_loss = loss_fn(y_true, y_pred, sample_weight=sample_weight)\r\n   1735             loss_reduction = losses_utils.ReductionV2.SUM_OVER_BATCH_SIZE\r\n   1736\r\n\r\nTypeError: ctc_loss_v2() got an unexpected keyword argument 'sample_weight'\r\n```\r\n\r\nThen, I tried to embed it:\r\n\r\n```\r\ndef my_ctc_loss(\r\n    labels, logits, label_length, logit_length, logits_time_major,\r\n    blank_index, sample_weight\r\n):\r\n    return tf.nn.ctc_loss(\r\n        labels=labels, logits=logits, label_length=label_length,\r\n        logit_length=logit_length, logits_time_major=logits_time_major,\r\n        blank_index=blank_index\r\n    )\r\n\r\n\r\nctc_loss_emb = functools.partial(\r\n    my_ctc_loss,\r\n    labels,         # labels\r\n    logits,         # logits\r\n    label_length,   # label_length\r\n    logit_length,   # logit_length\r\n    False,          # logits_time_major\r\n    -1,             # blank_index\r\n    None,           # sample_weight\r\n)\r\nmodel.compile(optimizer=Adam(lr=0.001), loss=ctc_loss_emb)\r\n```\r\nwhich rises: \r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-150-f20d10a91540> in <module>\r\n      9     None,           # sample_weight\r\n     10 )\r\n---> 11 model.compile(optimizer=Adam(lr=0.001), loss=ctc_loss_emb)\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py in _method_wrapper(self, *args, **kwargs)\r\n    455     self._self_setattr_tracking = False  # pylint: disable=protected-access\r\n    456     try:\r\n--> 457       result = method(self, *args, **kwargs)\r\n    458     finally:\r\n    459       self._self_setattr_tracking = previous_value  # pylint: disable=protected-access\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in compile(self, optimizer, loss, metrics, loss_weights, sample_weight_mode, weighted_metrics, target_tensors, distribute, **kwargs)\r\n    371\r\n    372       # Creates the model loss and weighted metrics sub-graphs.\r\n--> 373       self._compile_weights_loss_and_weighted_metrics()\r\n    374\r\n    375       # Functions for train, test and predict will\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py in _method_wrapper(self, *args, **kwargs)\r\n    455     self._self_setattr_tracking = False  # pylint: disable=protected-access\r\n    456     try:\r\n--> 457       result = method(self, *args, **kwargs)\r\n    458     finally:\r\n    459       self._self_setattr_tracking = previous_value  # pylint: disable=protected-access\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in _compile_weights_loss_and_weighted_metrics(self, sample_weights)\r\n   1651       #                   loss_weight_2 * output_2_loss_fn(...) +\r\n   1652       #                   layer losses.\r\n-> 1653       self.total_loss = self._prepare_total_loss(masks)\r\n   1654\r\n   1655   def _prepare_skip_target_masks(self):\r\n\r\n~/.virtualenvs/phd/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in _prepare_total_loss(self, masks)\r\n   1732             # differentiate between use case where a custom optimizer\r\n   1733             # expects a vector loss value vs unreduced per-sample loss value.\r\n-> 1734             output_loss = loss_fn(y_true, y_pred, sample_weight=sample_weight)\r\n   1735             loss_reduction = losses_utils.ReductionV2.SUM_OVER_BATCH_SIZE\r\n   1736\r\n\r\nTypeError: my_ctc_loss() got multiple values for argument 'sample_weight'\r\n```\r\n\r\n### Usage example: Not provided\r\n\r\nSince it seems that ctc_loss has to be used differently from other losses, it will helpful to have an example that shows how to use it.\r\n\r\n### Raises listed and defined: Not defined\r\n\r\n\r\nThanks!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35062", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35062/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35062/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35062/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35062", "id": 537159561, "node_id": "MDU6SXNzdWU1MzcxNTk1NjE=", "number": 35062, "title": " [1.15] Build from source fails on Raspberry Pi", "user": {"login": "tallero", "id": 7817636, "node_id": "MDQ6VXNlcjc4MTc2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/7817636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tallero", "html_url": "https://github.com/tallero", "followers_url": "https://api.github.com/users/tallero/followers", "following_url": "https://api.github.com/users/tallero/following{/other_user}", "gists_url": "https://api.github.com/users/tallero/gists{/gist_id}", "starred_url": "https://api.github.com/users/tallero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tallero/subscriptions", "organizations_url": "https://api.github.com/users/tallero/orgs", "repos_url": "https://api.github.com/users/tallero/repos", "events_url": "https://api.github.com/users/tallero/events{/privacy}", "received_events_url": "https://api.github.com/users/tallero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-12T19:06:27Z", "updated_at": "2020-01-06T02:02:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Archlinux\r\n- Mobile device: Raspberry Pi\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.15\r\n- Python version: 3.8\r\n- Installed using virtualenv? pip? conda?: the docker image you provide.\r\n- Bazel version (if compiling from source): the one you put in that image.\r\n- GCC/Compiler version (if compiling from source): the one you put in the image\r\n- CUDA/cuDNN version: No cuda\r\n- GPU model and memory: The computer on which Docker runs has 16gb of ram.\r\n\r\nBuilds fails while compiling. Build log has been attached. Instructions actually mention that one should checkout a known working version but it does not specify where I could discover which version actually builds on raspberry.\r\n\r\nThe one listed at this [documentation page](https://www.tensorflow.org/install/source_rpi):\r\n\r\n    CI_DOCKER_EXTRA_PARAMS=\"-e CI_BUILD_PYTHON=python3 -e CROSSTOOL_PYTHON_INCLUDE_PATH=/usr/include/python3.4\" \\\r\n    tensorflow/tools/ci_build/ci_build.sh PI-PYTHON3 \\\r\n    tensorflow/tools/ci_build/pi/build_raspberry_pi.sh\r\n\r\n\r\n**Any other info / logs**\r\n[tensorflow-1.15-docker-raspberry-armhf-build.log](https://github.com/tensorflow/tensorflow/files/3957401/tensorflow-1.15-docker-raspberry-armhf-build.log).\r\n\r\nActually it just failed on another point, too.\r\nLast part of the latter log:\r\n\r\n    peStorage; UniquerT = mlir::detail::TypeUniquer]'\r\n    external/local_config_mlir/lib/IR/Types.cpp:66:66:   required from here\r\n    external/local_config_mlir/include/mlir/Support/StorageUniquer.h:232:34: error: 'getKey' is not a member of 'mlir::detail::OpaqueTypeStorage'\r\n         return ImplTy::getKey(args...);\r\n                                      ^\r\n    external/local_config_mlir/include/mlir/Support/StorageUniquer.h: In instantiation of 'static typename std::enable_if<typename mlir::detail::detector<void, mlir::detail::has_impltype_hash_t, ImplTy, DerivedKey>::value_t:: value, llvm::hash_code>::type mlir::StorageUniquer::getHash(unsigned int, const DerivedKey&) [with ImplTy = mlir::detail::OpaqueTypeStorage; DerivedKey = std::pair<mlir::Identifier, llvm::StringRef>; typename std::enable_if<typename mlir::detail::detector<void, mlir::detail::has_impltype_hash_t, ImplTy, DerivedKey>::value_t:: value, llvm::hash_code>::type = llvm::hash_code]':\r\n    external/local_config_mlir/include/mlir/Support/StorageUniquer.h:141:59:   required from 'Storage* mlir::StorageUniquer::get(std::function<void(Storage*)>, unsigned int, Arg&&, Args&& ...) [with Storage = mlir::detail::OpaqueTypeStorage; Arg = mlir::Identifier&; Args = {llvm::StringRef&}]'\r\n    external/local_config_mlir/include/mlir/IR/TypeSupport.h:104:42:   required from 'static T mlir::detail::TypeUniquer::get(mlir::MLIRContext*, unsigned int, Args&& ...) [with T = mlir::OpaqueType; Args = {mlir::Identifier&, llvm::StringRef&}]'\r\n    external/local_config_mlir/include/mlir/IR/StorageUniquerSupport.h:67:64:   required from 'static ConcreteT mlir::detail::StorageUserBase<ConcreteT, BaseT, StorageT, UniquerT>::get(mlir::MLIRContext*, unsigned int, Args ...) [with Args = {mlir::Identifier, llvm::StringRef}; ConcreteT = mlir::OpaqueType; BaseT = mlir::Type; StorageT = mlir::detail::OpaqueTypeStorage; UniquerT = mlir::detail::TypeUniquer]'\r\n    external/local_config_mlir/lib/IR/Types.cpp:66:66:   required from here\r\n    external/local_config_mlir/include/mlir/Support/StorageUniquer.h:255:63: error: 'hashKey' is not a member of 'mlir::detail::OpaqueTypeStorage'\r\n         return llvm::hash_combine(kind, ImplTy::hashKey(derivedKey));\r\n\r\n**EDIT 19/12/17:** As a temporary workaround I installed [PINTO0309](https://github.com/PINTO0309/Tensorflow-bin)'s binaries."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35053", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35053/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35053/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35053/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35053", "id": 536850563, "node_id": "MDU6SXNzdWU1MzY4NTA1NjM=", "number": 35053, "title": " AndroidRuntime: Node number 1 (SPLIT) failed to prepare.", "user": {"login": "glevenc", "id": 15210643, "node_id": "MDQ6VXNlcjE1MjEwNjQz", "avatar_url": "https://avatars3.githubusercontent.com/u/15210643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glevenc", "html_url": "https://github.com/glevenc", "followers_url": "https://api.github.com/users/glevenc/followers", "following_url": "https://api.github.com/users/glevenc/following{/other_user}", "gists_url": "https://api.github.com/users/glevenc/gists{/gist_id}", "starred_url": "https://api.github.com/users/glevenc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glevenc/subscriptions", "organizations_url": "https://api.github.com/users/glevenc/orgs", "repos_url": "https://api.github.com/users/glevenc/repos", "events_url": "https://api.github.com/users/glevenc/events{/privacy}", "received_events_url": "https://api.github.com/users/glevenc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-12T09:18:18Z", "updated_at": "2019-12-24T00:22:31Z", "closed_at": null, "author_association": "NONE", "body": "Hi, when i use my own trained rnn model to inference on my andorid app\r\nthe tflite convert is successully with python api \r\n\r\nimport tensorflow as tf\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,\r\n                                       tf.lite.OpsSet.SELECT_TF_OPS]\r\ntflite_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n\r\nbut when i run this model in andorid app ,\r\ntflite.run(input, output);\r\n it run into the issuses as the log shows:\r\ncould anyone take a look at this?\r\n\r\n\r\n**Any other info / logs**\r\n[16-14-29.810] 01-01 08:49:45.232 12405 12427 E AndroidRuntime: FATAL EXCEPTION: inference\r\n\ufeff\ufeff[16-14-29.810] 01-01 08:49:45.232 12405 12427 E AndroidRuntime: Process: com.hse.wifimotiondetection, PID: 12405\r\n\ufeff\ufeff[16-14-29.810] 01-01 08:49:45.232 12405 12427 E AndroidRuntime: java.lang.IllegalStateException: Internal error: Unexpected failure when preparing tensor allocations: tensorflow/lite/kernels/split.cc Not an even split\r\n\ufeff\ufeff[16-14-29.810] 01-01 08:49:45.232 12405 12427 E AndroidRuntime: Node number 1 (SPLIT) failed to prepare.\r\n\ufeff\ufeff[16-14-29.854] 01-01 08:49:45.232 12405 12427 E AndroidRuntime: \r\n\ufeff\ufeff[16-14-29.854] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at org.tensorflow.lite.NativeInterpreterWrapper.allocateTensors(Native Method)\r\n\ufeff\ufeff[16-14-29.854] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:143)\r\n\ufeff\ufeff[16-14-29.854] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:296)\r\n\ufeff\ufeff[16-14-29.898] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at org.tensorflow.lite.Interpreter.run(Interpreter.java:259)\r\n\ufeff\ufeff[16-14-29.898] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at com.hse.wifimotiondetection.tflite.Classifier.recognizeWiFiData(Classifier.java:282)\r\n\ufeff\ufeff[16-14-29.898] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at com.hse.wifimotiondetection.MainActivity$1.run(MainActivity.java:101)\r\n\ufeff\ufeff[16-14-29.899] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at android.os.Handler.handleCallback(Handler.java:789)\r\n\ufeff\ufeff[16-14-29.942] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:98)\r\n\ufeff\ufeff[16-14-29.942] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:164)\r\n\ufeff\ufeff[16-14-29.943] 01-01 08:49:45.232 12405 12427 E AndroidRuntime:        at android.os.HandlerThread.run(HandlerThread.java:65)\r\n\ufeff\ufeff[16-14-29.943] 01-01 08:54:34.738 13372 13372 I AndroidRuntime: VM exiting with result code 0.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35051", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35051/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35051/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35051/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35051", "id": 536781021, "node_id": "MDU6SXNzdWU1MzY3ODEwMjE=", "number": 35051, "title": "Use bazel to build tensorflow has some error", "user": {"login": "kscorpio", "id": 9456227, "node_id": "MDQ6VXNlcjk0NTYyMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9456227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kscorpio", "html_url": "https://github.com/kscorpio", "followers_url": "https://api.github.com/users/kscorpio/followers", "following_url": "https://api.github.com/users/kscorpio/following{/other_user}", "gists_url": "https://api.github.com/users/kscorpio/gists{/gist_id}", "starred_url": "https://api.github.com/users/kscorpio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kscorpio/subscriptions", "organizations_url": "https://api.github.com/users/kscorpio/orgs", "repos_url": "https://api.github.com/users/kscorpio/repos", "events_url": "https://api.github.com/users/kscorpio/events{/privacy}", "received_events_url": "https://api.github.com/users/kscorpio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-12T06:21:50Z", "updated_at": "2019-12-13T09:30:46Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution :Linux Ubuntu 18.04 \r\n- TensorFlow installed from (source or binary):source\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source):bazel-1.0.0 and soft lint to bazel\r\n- GCC/Compiler version (if compiling from source): 7.4.0 \r\n- CUDA/cuDNN version: no \r\n\r\n\r\n\r\n**Describe the problem**\r\nuse bazel to build tensorflow (newest clone from github)\r\n\r\n```\r\nbazel build --local_ram_resources=2048 --config=opt //tensorflow/tools/pip_package:build_pip_package \r\n``` \r\nError message : \r\n```\r\ngcc: internal compiler error: Killed (program cc1plus)\r\nPlease submit a full bug report,\r\nwith preprocessed source if appropriate.\r\nSee <file:///usr/share/doc/gcc-7/README.Bugs> for instructions.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: /home/test/tensorflow/tensorflow/python/tools/BUILD:280:1 C++ compilation of rule '//tensorflow/core/kernels:conv_ops' failed (Exit 4)\r\nINFO: Elapsed time: 13914.473s, Critical Path: 2099.24s\r\nINFO: 3244 processes: 3244 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35050", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35050/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35050/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35050/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35050", "id": 536776958, "node_id": "MDU6SXNzdWU1MzY3NzY5NTg=", "number": 35050, "title": "tf throw error and not may get correct gradient when eager_mode is disable in tf=2.0.0", "user": {"login": "CNOCycle", "id": 24318472, "node_id": "MDQ6VXNlcjI0MzE4NDcy", "avatar_url": "https://avatars3.githubusercontent.com/u/24318472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CNOCycle", "html_url": "https://github.com/CNOCycle", "followers_url": "https://api.github.com/users/CNOCycle/followers", "following_url": "https://api.github.com/users/CNOCycle/following{/other_user}", "gists_url": "https://api.github.com/users/CNOCycle/gists{/gist_id}", "starred_url": "https://api.github.com/users/CNOCycle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CNOCycle/subscriptions", "organizations_url": "https://api.github.com/users/CNOCycle/orgs", "repos_url": "https://api.github.com/users/CNOCycle/repos", "events_url": "https://api.github.com/users/CNOCycle/events{/privacy}", "received_events_url": "https://api.github.com/users/CNOCycle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-12T06:09:16Z", "updated_at": "2020-03-15T13:04:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04 in Docker\r\n- TensorFlow installed from (source or binary): pip install\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38\r\n- Python version: 3.5\r\n- CUDA/cuDNN version: 10.0 / 7\r\n- GPU model and memory: GTX 1080Ti / 11175MiB\r\n\r\n**Describe the current behavior**\r\n\r\nHi authors and developers,\r\n\r\nI am developing our project in tf=2.0.0 and eager_mode is disable.\r\n\r\nThe main reason is tf=1.x will not be maintained but third party libraries have not been ready for tf=2.0 yet.\r\n\r\nHowever, I met some strange bugs when I was training custom model.\r\n\r\nThis bug can be reproduced by the following minimal testcase:\r\n\r\n```python\r\n#%%\r\nimport tensorflow as tf\r\ntf.compat.v1.disable_eager_execution()\r\n#tf.compat.v1.disable_v2_behavior()\r\n\r\nimport numpy as np\r\n\r\nbatch_size = 100\r\n\r\ndef download_data():\r\n\r\n    # get raw data\r\n    (trainX, trainY), (testX, testY) = tf.keras.datasets.cifar10.load_data()\r\n    trainX = trainX.astype(np.float32)\r\n    testX  = testX.astype(np.float32)\r\n\r\n    # ont-hot\r\n    trainY = tf.keras.utils.to_categorical(trainY, 10)\r\n    testY  = tf.keras.utils.to_categorical(testY , 10)\r\n\r\n    # get validation sets\r\n    training_size = 45000\r\n    validX = trainX[training_size:,:]\r\n    validY = trainY[training_size:,:]\r\n\r\n    trainX = trainX[:training_size,:]\r\n    trainY = trainY[:training_size,:]\r\n\r\n    return trainX, trainY, validX, validY, testX, testY\r\n\r\ndef data_pipeline(dataX, dataY):\r\n\r\n        dataset = tf.data.Dataset.from_tensor_slices( (dataX, dataY) )\r\n        dataset = dataset.shuffle(batch_size * 8)\r\n        dataset = dataset.repeat()\r\n        dataset = dataset.batch(batch_size)\r\n        dataset = dataset.prefetch(tf.data.experimental.AUTOTUNE)\r\n        return dataset\r\n\r\nclass custom_model():\r\n    def __init__(self):\r\n\r\n        def Acc():\r\n            acc = tf.keras.metrics.categorical_accuracy(label_ref, clf_out)\r\n            return tf.math.reduce_mean(acc)\r\n\r\n        def c_loss():\r\n            loss = tf.keras.losses.categorical_crossentropy(label_ref, clf_out)\r\n            loss = tf.math.reduce_mean(loss)\r\n            return loss\r\n\r\n        # create model\r\n        clf_input = tf.keras.layers.Input(shape=(32,32,3), name=\"model/input\")\r\n        model = tf.keras.applications.resnet_v2.ResNet50V2(include_top=True, weights=None, input_tensor=clf_input, pooling='max', classes=10)\r\n        #model = tf.keras.applications.vgg16.VGG16(include_top=True, weights=None, input_tensor=clf_input, pooling='max', classes=10)\r\n        model.compile(loss='categorical_crossentropy', optimizer='SGD', metrics=['accuracy'])\r\n\r\n        label_ref = tf.keras.layers.Input(shape=(10,) , name='label_ref')\r\n        clf_out = model(clf_input)\r\n\r\n        # using tf.keras.optimizers.Nadam would get error\r\n        optimizer = tf.keras.optimizers.Nadam(lr=0.0005)\r\n        #optimizer = tf.compat.v1.train.AdamOptimizer(learning_rate=0.01)\r\n        self.train_op = optimizer.minimize(c_loss, var_list=[model.trainable_variables])\r\n\r\n        self.clf_model = model\r\n        self.clf_input = clf_input\r\n        self.label_ref = label_ref\r\n        self.op_acc = Acc()\r\n        self.c_loss = c_loss()\r\n\r\nif __name__ == '__main__':\r\n\r\n    # set GPU\r\n    import os\r\n    if os.environ.get(\"CUDA_VISIBLE_DEVICES\") is None:\r\n        os.environ[\"CUDA_VISIBLE_DEVICES\"] = \"0\"\r\n\r\n    # reset tf session\r\n    tf.compat.v1.keras.backend.clear_session()\r\n    gpu_options = tf.compat.v1.GPUOptions(allow_growth=True)\r\n    sess = tf.compat.v1.Session(config=tf.compat.v1.ConfigProto(gpu_options=gpu_options))\r\n    tf.compat.v1.keras.backend.set_session(sess) \r\n\r\n    # prepare data\r\n    trainX, trainY, validX, validY, testX, testY = download_data()\r\n    train_gen = data_pipeline(trainX, trainY)\r\n    valid_gen = data_pipeline(validX, validY)\r\n    test_gen = data_pipeline(testX, testY)\r\n\r\n    # build targeted model\r\n    model = tf.keras.applications.resnet_v2.ResNet50V2(include_top=True, weights=None, input_shape=(32,32,3), pooling='max', classes=10)\r\n    #model = tf.keras.applications.vgg16.VGG16(include_top=True, weights=None, input_shape=(32,32,3), pooling=None, classes=10)\r\n    model.compile(loss='categorical_crossentropy', optimizer='SGD', metrics=['accuracy'])\r\n\r\n    # fit and evalutate\r\n    model.fit(train_gen,\r\n            steps_per_epoch = trainY.shape[0] // batch_size,\r\n            validation_data = valid_gen,\r\n            validation_steps= validY.shape[0] // batch_size,\r\n            epochs=5,\r\n            verbose=2)\r\n    model.evaluate(testX, testY, verbose=2, batch_size=batch_size)\r\n\r\n    # create a new model\r\n    print('Make sure that we create a new model.')\r\n    model = custom_model()\r\n    sess.run(tf.compat.v1.global_variables_initializer())\r\n    model.clf_model.evaluate(testX, testY, verbose=2, batch_size=batch_size)\r\n\r\n    # train model\r\n    num_epoch = 5\r\n    tf_iter = tf.compat.v1.data.make_initializable_iterator(train_gen)\r\n    tf_next = tf_iter.get_next()\r\n    sess.run(tf_iter.initializer)\r\n    for epoch in range(num_epoch):\r\n        c_loss, acc = 0.0, 0.0\r\n        for ii in range(trainY.shape[0] // batch_size):\r\n            X, Y = sess.run(tf_next)\r\n            [b_c_loss, b_acc, _] = sess.run([model.c_loss, model.op_acc, model.train_op],\r\n                                                feed_dict={ model.clf_input: X,\r\n                                                            model.label_ref: Y,\r\n                                                            tf.keras.backend.learning_phase(): 1})\r\n            c_loss = c_loss + b_c_loss\r\n            acc = acc + b_acc\r\n        \r\n        c_loss = c_loss / (trainY.shape[0] // batch_size)\r\n        acc = acc / (trainY.shape[0] // batch_size)\r\n        print('[Training]Epoch: {:d}/{:d} - loss: {:.3f} - acc: {:.3f}'.format(epoch+1, num_epoch, c_loss, acc) )\r\n\r\n    # evaluate\r\n    num_epoch = 1\r\n    tf_iter = tf.compat.v1.data.make_initializable_iterator(valid_gen)\r\n    tf_next = tf_iter.get_next()\r\n    sess.run(tf_iter.initializer)\r\n    for epoch in range(num_epoch):\r\n        c_loss, acc = 0.0, 0.0\r\n        for ii in range(validY.shape[0] // batch_size):\r\n            X, Y = sess.run(tf_next)\r\n            [b_c_loss, b_acc, _] = sess.run([model.c_loss, model.op_acc, model.train_op],\r\n                                                feed_dict={ model.clf_input: X,\r\n                                                            model.label_ref: Y,\r\n                                                            tf.keras.backend.learning_phase(): 0})\r\n            c_loss = c_loss + b_c_loss\r\n            acc = acc + b_acc\r\n        \r\n        c_loss = c_loss / (validY.shape[0] // batch_size)\r\n        acc = acc / (validY.shape[0] // batch_size)\r\n        print('[Validation]Epoch: {:d}/{:d} - loss: {:.3f} - acc: {:.3f}'.format(epoch+1, num_epoch, c_loss, acc) )\r\n\r\n    # evaluate\r\n    num_epoch = 1\r\n    tf_iter = tf.compat.v1.data.make_initializable_iterator(test_gen)\r\n    tf_next = tf_iter.get_next()\r\n    sess.run(tf_iter.initializer)\r\n    for epoch in range(num_epoch):\r\n        c_loss, acc = 0.0, 0.0\r\n        for ii in range(testY.shape[0] // batch_size):\r\n            X, Y = sess.run(tf_next)\r\n            [b_c_loss, b_acc, _] = sess.run([model.c_loss, model.op_acc, model.train_op],\r\n                                                feed_dict={ model.clf_input: X,\r\n                                                            model.label_ref: Y,\r\n                                                            tf.keras.backend.learning_phase(): 0})\r\n            c_loss = c_loss + b_c_loss\r\n            acc = acc + b_acc\r\n        \r\n        c_loss = c_loss / (testY.shape[0] // batch_size)\r\n        acc = acc / (testY.shape[0] // batch_size)\r\n        print('[Testing]Epoch: {:d}/{:d} - loss: {:.3f} - acc: {:.3f}'.format(epoch+1, num_epoch, c_loss, acc) )\r\n```\r\n\r\nThe first part of testing case is training model with high leval API and the result is as expected.\r\n```\r\n450/450 - 36s - loss: 1.9549 - accuracy: 0.2993 - val_loss: 1.7695 - val_accuracy: 0.3776\r\nEpoch 2/5\r\n450/450 - 29s - loss: 1.5775 - accuracy: 0.4314 - val_loss: 1.5351 - val_accuracy: 0.4478\r\nEpoch 3/5\r\n450/450 - 29s - loss: 1.3974 - accuracy: 0.4954 - val_loss: 1.4687 - val_accuracy: 0.4846\r\nEpoch 4/5\r\n450/450 - 30s - loss: 1.2743 - accuracy: 0.5430 - val_loss: 1.3919 - val_accuracy: 0.5096\r\nEpoch 5/5\r\n450/450 - 29s - loss: 1.1646 - accuracy: 0.5820 - val_loss: 1.3872 - val_accuracy: 0.5110\r\n10000/10000 - 3s - loss: 1.4111 - accuracy: 0.5104\r\n```\r\n\r\nI met a bug in our custom model which complainted that `No gradients provided for any variable` and reported the following message:\r\n```\r\nMake sure that we create a new model.\r\nTraceback (most recent call last):\r\n  File \"bug.py\", line 107, in <module>\r\n    model = custom_model()\r\n  File \"bug.py\", line 64, in __init__\r\n    self.train_op = optimizer.minimize(c_loss, var_list=[model.trainable_variables])\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py\", line 319, in minimize\r\n    return self.apply_gradients(grads_and_vars, name=name)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py\", line 427, in apply_gradients\r\n    grads_and_vars = _filter_grads(grads_and_vars)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py\", line 1025, in _filter_grads\r\n    ([v.name for _, v in grads_and_vars],))\r\nValueError: No gradients provided for any variable: ['conv1_conv_1/kernel:0', 'conv1_conv_1/bias:0', ... skip ...,  'post_bn_1/gamma:0', 'post_bn_1/beta:0', 'probs_1/kernel:0', 'probs_1/bias:0'].\r\n```\r\n\r\nFrom this error message, I guess that tensorflow may not get the graph for computing gradient correctly.\r\n\r\nSo I've trid to modify the file `/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py` near line 316:\r\n\r\n```diff\r\n-    grads_and_vars = self._compute_gradients(\r\n-        loss, var_list=var_list, grad_loss=grad_loss)\r\n+    var_list = nest.flatten(var_list)\r\n+    grads = self.get_gradients(loss, var_list)\r\n+    grads_and_vars = list(zip(grads, var_list))\r\n    return self.apply_gradients(grads_and_vars, name=name)\r\n```\r\n\r\nAnd I've also modified my testing case:\r\n\r\n```diff\r\n-        self.train_op = optimizer.minimize(c_loss, var_list=[model.trainable_variables])\r\n+        self.train_op = optimizer.minimize(c_loss(), var_list=[model.trainable_variables])\r\n\r\n```\r\n\r\nFinally, tensorflow can compute gradient. But I got a strange result. \r\n\r\nTraining loss and accuracy look as the same as the normal case.\r\n\r\nBut with comparing the the baseline model, validation and testing loss are not  reasonbale.\r\n\r\n```\r\nMake sure that we create a new model.\r\n10000/10000 - 4s - loss: 10.8579 - accuracy: 0.0995\r\n[Training]Epoch: 1/5 - loss: 1.697 - acc: 0.396\r\n[Training]Epoch: 2/5 - loss: 1.310 - acc: 0.528\r\n[Training]Epoch: 3/5 - loss: 1.105 - acc: 0.609\r\n[Training]Epoch: 4/5 - loss: 0.955 - acc: 0.664\r\n[Training]Epoch: 5/5 - loss: 0.827 - acc: 0.709\r\n[Validation]Epoch: 1/1 - loss: 6545.217 - acc: 0.152\r\n[Testing]Epoch: 1/1 - loss: 2.103 - acc: 0.219\r\n\r\n```\r\n\r\nSo I doubt this modification may not a proper patch.\r\n\r\nNext, I reverted the modification and tried to replace keras.optimizer with `tf.compat.v1.train.AdamOptimizer`:\r\n\r\n```diff\r\n        # using tf.keras.optimizers.Nadam would get error\r\n-        optimizer = tf.keras.optimizers.Nadam(lr=0.0005)\r\n-        #optimizer = tf.compat.v1.train.AdamOptimizer(learning_rate=0.01)\r\n-        self.train_op = optimizer.minimize(c_loss, var_list=[model.trainable_variables])\r\n+        #optimizer = tf.keras.optimizers.Nadam(lr=0.0005)\r\n+        optimizer = tf.compat.v1.train.AdamOptimizer(learning_rate=0.01)\r\n+        self.train_op = optimizer.minimize(c_loss(), var_list=[model.trainable_variables])\r\n```\r\n\r\nI still got a strange result. Training loss and accuracy look as the same as the normal case.\r\n\r\nBut validation and testing loss are `nan` and accuracy are `0.1` which means model is not trained.\r\n\r\n It can be shown as the following.\r\n\r\n```\r\nMake sure that we create a new model.\r\n10000/10000 - 3s - loss: 8.4923 - accuracy: 0.1174\r\n[Training]Epoch: 1/5 - loss: 2.546 - acc: 0.198\r\n[Training]Epoch: 2/5 - loss: 1.737 - acc: 0.365\r\n[Training]Epoch: 3/5 - loss: 1.592 - acc: 0.417\r\n[Training]Epoch: 4/5 - loss: 1.385 - acc: 0.496\r\n[Training]Epoch: 5/5 - loss: 1.247 - acc: 0.552\r\n[Validation]Epoch: 1/1 - loss: nan - acc: 0.099\r\n[Testing]Epoch: 1/1 - loss: nan - acc: 0.100\r\n```\r\n\r\nIn conclusion, I think that when eager_mode is disable in tf=2.0.0,\r\n\r\n1. tensorflow throws errors if we use standard optimizer\r\n\r\n2. tensorflow may not get the right gradient if we use `tf.compat.v1.train.AdamOptimizer`\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nIt should work properly.\r\n\r\n**Code to reproduce the issue**\r\n\r\nPlease see the section of **Describe the current behavior**\r\n\r\n**Other info / logs**\r\n\r\nThe following message is the result generated by `tf_env_collect.sh`\r\n```\r\n== check python ===================================================\r\npython version: 3.5.2\r\npython branch:\r\npython build version: ('default', 'Oct  8 2019 13:06:37')\r\npython compiler version: GCC 5.4.0 20160609\r\npython implementation: CPython\r\n\r\n\r\n== check os platform ===============================================\r\nos: Linux\r\nos kernel version: #40~18.04.1-Ubuntu SMP Thu Nov 14 12:06:39 UTC 2019\r\nos release version: 5.0.0-37-generic\r\nos platform: Linux-5.0.0-37-generic-x86_64-with-Ubuntu-16.04-xenial\r\nlinux distribution: ('Ubuntu', '16.04', 'xenial')\r\nlinux os distribution: ('Ubuntu', '16.04', 'xenial')\r\nmac version: ('', ('', '', ''), '')\r\nuname: uname_result(system='Linux', node='f7f509f1dacf', release='5.0.0-37-generic', version='#40~18.04.1-Ubuntu SMP Thu Nov 14 12:06:39 UTC 2019', machine='x86_64', processor='x86_64')\r\narchitecture: ('64bit', 'ELF')\r\nmachine: x86_64\r\n\r\n\r\n== are we in docker =============================================\r\nYes\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== check pips ===================================================\r\nnumpy                  1.17.4\r\nprotobuf               3.11.1\r\ntensorflow-estimator   2.0.1\r\ntensorflow-gpu         2.0.0\r\ntensorflow-probability 0.8.0\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.version.VERSION = 2.0.0\r\ntf.version.GIT_VERSION = v2.0.0-rc2-26-g64c3d38\r\ntf.version.COMPILER_VERSION = 7.3.1 20180303\r\nSanity check: array([1], dtype=int32)\r\n       443:     find library=libpthread.so.0 [0]; searching\r\n       443:      search path=/usr/local/nvidia/lib/tls/x86_64:/usr/local/nvidia/lib/tls:/usr/local/nvidia/lib/x86_64:/usr/local/nvidia/lib:/usr/local/nvidia/lib64/tls/x86_64:/usr/local/nvidia/lib64/tls:/usr/local/nvidia/lib64/x86_64:/usr/local/nvidia/lib64          (LD_LIBRARY_PATH)\r\n       443:       trying file=/usr/local/nvidia/lib/tls/x86_64/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib/tls/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib/x86_64/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib64/tls/x86_64/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib64/tls/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib64/x86_64/libpthread.so.0\r\n       443:       trying file=/usr/local/nvidia/lib64/libpthread.so.0\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libpthread.so.0\r\n       443:\r\n       443:     find library=libc.so.6 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libc.so.6\r\n       443:\r\n       443:     find library=libdl.so.2 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libdl.so.2\r\n       443:\r\n       443:     find library=libutil.so.1 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libutil.so.1\r\n       443:\r\n       443:     find library=libexpat.so.1 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libexpat.so.1\r\n       443:\r\n       443:     find library=libz.so.1 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libz.so.1\r\n       443:\r\n       443:     find library=libm.so.6 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libm.so.6\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libpthread.so.0\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libc.so.6\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libm.so.6\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libz.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libexpat.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libutil.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libdl.so.2\r\n       443:\r\n       443:\r\n       443:     initialize program: /usr/local/bin/python\r\n       443:\r\n       443:\r\n       443:     transferring control: /usr/local/bin/python\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_opcode.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_ctypes.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libopenblasp-r0-34a18dc3.3.7.so [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/tls/x86_64:/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/tls:/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/x86_64:/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs            (RPATH from file /usr/local/lib/python3.5/dist-packages/numpy/core/_multiarray_umath.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/tls/x86_64/libopenblasp-r0-34a18dc3.3.7.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/tls/libopenblasp-r0-34a18dc3.3.7.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/x86_64/libopenblasp-r0-34a18dc3.3.7.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/libopenblasp-r0-34a18dc3.3.7.so\r\n       443:\r\n       443:     find library=libgfortran-ed201abd.so.3.0.0 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs         (RPATH from file /usr/local/lib/python3.5/dist-packages/numpy/core/_multiarray_umath.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/libgfortran-ed201abd.so.3.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/libgfortran-ed201abd.so.3.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/libopenblasp-r0-34a18dc3.3.7.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/core/_multiarray_umath.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/core/_multiarray_tests.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/linalg/lapack_lite.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/linalg/_umath_linalg.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libbz2.so.1.0 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libbz2.so.1.0\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libbz2.so.1.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_bz2.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=liblzma.so.5 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/liblzma.so.5\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/liblzma.so.5\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_lzma.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libmpdec.so.2 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/usr/lib/x86_64-linux-gnu/libmpdec.so.2\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/x86_64-linux-gnu/libmpdec.so.2\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_decimal.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/fft/_pocketfft_internal.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/mtrand.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/common.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/bounded_integers.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/mt19937.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/bit_generator.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libcrypto.so.1.0.0 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libcrypto.so.1.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libcrypto.so.1.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_hashlib.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/philox.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/pcg64.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/sfc64.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/numpy/random/generator.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libtensorflow_framework.so.2 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/tls/x86_64:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/tls:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/x86_64:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/tls/x86_64:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/tls:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/x86_64:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../tls/x86_64:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../tls:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../x86_64:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/..            (RPATH from file /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/tls/x86_64/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/tls/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/x86_64/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../../_solib_local/_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal.so___Utensorflow/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/tls/x86_64/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/tls/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/x86_64/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../tls/x86_64/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../tls/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../x86_64/libtensorflow_framework.so.2\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libtensorflow_framework.so.2\r\n       443:\r\n       443:     find library=librt.so.1 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/..             (RPATH from file /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/librt.so.1\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../librt.so.1\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/librt.so.1\r\n       443:\r\n       443:     find library=libstdc++.so.6 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/..             (RPATH from file /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/libstdc++.so.6\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libstdc++.so.6\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n       443:\r\n       443:     find library=libgcc_s.so.1 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/..             (RPATH from file /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/libgcc_s.so.1\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libgcc_s.so.1\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libgcc_s.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libgcc_s.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/librt.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libtensorflow_framework.so.2\r\n       443:\r\n       443:     find library=libhdfs.so [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/..           (RPATH from file /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libhdfs.so\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python:/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/..             (RPATH from file /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/libhdfs.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libhdfs.so\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:      search path=/lib/x86_64-linux-gnu/tls/x86_64:/lib/x86_64-linux-gnu/tls:/lib/x86_64-linux-gnu/x86_64:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu/tls/x86_64:/usr/lib/x86_64-linux-gnu/tls:/usr/lib/x86_64-linux-gnu/x86_64:/usr/lib/x86_64-linux-gnu:/lib/tls/x86_64:/lib/tls:/lib/x86_64:/lib:/usr/lib/tls/x86_64:/usr/lib/tls:/usr/lib/x86_64:/usr/lib              (system search path)\r\n       443:       trying file=/lib/x86_64-linux-gnu/tls/x86_64/libhdfs.so\r\n       443:       trying file=/lib/x86_64-linux-gnu/tls/libhdfs.so\r\n       443:       trying file=/lib/x86_64-linux-gnu/x86_64/libhdfs.so\r\n       443:       trying file=/lib/x86_64-linux-gnu/libhdfs.so\r\n       443:       trying file=/usr/lib/x86_64-linux-gnu/tls/x86_64/libhdfs.so\r\n       443:       trying file=/usr/lib/x86_64-linux-gnu/tls/libhdfs.so\r\n       443:       trying file=/usr/lib/x86_64-linux-gnu/x86_64/libhdfs.so\r\n       443:       trying file=/usr/lib/x86_64-linux-gnu/libhdfs.so\r\n       443:       trying file=/lib/tls/x86_64/libhdfs.so\r\n       443:       trying file=/lib/tls/libhdfs.so\r\n       443:       trying file=/lib/x86_64/libhdfs.so\r\n       443:       trying file=/lib/libhdfs.so\r\n       443:       trying file=/usr/lib/tls/x86_64/libhdfs.so\r\n       443:       trying file=/usr/lib/tls/libhdfs.so\r\n       443:       trying file=/usr/lib/x86_64/libhdfs.so\r\n       443:       trying file=/usr/lib/libhdfs.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/google/protobuf/internal/_api_implementation.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/google/protobuf/pyext/_message.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_csv.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/termios.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/framework/fast_tensor_util.so\r\n       443:\r\n       443:     find library=libuuid.so.1 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libuuid.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libuuid.so.1\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/wrapt/_wrappers.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_json.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libssl.so.1.0.0 [0]; searching\r\n       443:      search path=           (LD_LIBRARY_PATH)\r\n       443:      search cache=/etc/ld.so.cache\r\n       443:       trying file=/lib/x86_64-linux-gnu/libssl.so.1.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /lib/x86_64-linux-gnu/libssl.so.1.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/lib/python3.5/lib-dynload/_ssl.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libhdf5-49599f4e.so.103.0.0 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/h5py/.libs/tls/x86_64:/usr/local/lib/python3.5/dist-packages/h5py/.libs/tls:/usr/local/lib/python3.5/dist-packages/h5py/.libs/x86_64:/usr/local/lib/python3.5/dist-packages/h5py/.libs                (RPATH from file /usr/local/lib/python3.5/dist-packages/h5py/_errors.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/tls/x86_64/libhdf5-49599f4e.so.103.0.0\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/tls/libhdf5-49599f4e.so.103.0.0\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/x86_64/libhdf5-49599f4e.so.103.0.0\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5-49599f4e.so.103.0.0\r\n       443:\r\n       443:     find library=libhdf5_hl-db841637.so.100.1.1 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/h5py/.libs          (RPATH from file /usr/local/lib/python3.5/dist-packages/h5py/_errors.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5_hl-db841637.so.100.1.1\r\n       443:\r\n       443:     find library=libsz-1c7dd0cf.so.2.0.1 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./tls/x86_64:/usr/local/lib/python3.5/dist-packages/h5py/.libs/./tls:/usr/local/lib/python3.5/dist-packages/h5py/.libs/./x86_64:/usr/local/lib/python3.5/dist-packages/h5py/.libs/.                (RPATH from file /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5-49599f4e.so.103.0.0)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./tls/x86_64/libsz-1c7dd0cf.so.2.0.1\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./tls/libsz-1c7dd0cf.so.2.0.1\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./x86_64/libsz-1c7dd0cf.so.2.0.1\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./libsz-1c7dd0cf.so.2.0.1\r\n       443:\r\n       443:     find library=libaec-2147abcd.so.0.0.4 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/h5py/.libs/.                (RPATH from file /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5-49599f4e.so.103.0.0)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./libaec-2147abcd.so.0.0.4\r\n       443:\r\n       443:     find library=libz-a147dcb0.so.1.2.3 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/h5py/.libs/.                (RPATH from file /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5-49599f4e.so.103.0.0)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/h5py/.libs/./libz-a147dcb0.so.1.2.3\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/.libs/./libz-a147dcb0.so.1.2.3\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/.libs/./libaec-2147abcd.so.0.0.4\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/.libs/./libsz-1c7dd0cf.so.2.0.1\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5-49599f4e.so.103.0.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5_hl-db841637.so.100.1.1\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/_errors.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/defs.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/_objects.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/_conv.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5r.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5t.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/utils.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       452:     find library=libc.so.6 [0]; searching\r\n       452:      search path=/usr/local/nvidia/lib/tls/x86_64:/usr/local/nvidia/lib/tls:/usr/local/nvidia/lib/x86_64:/usr/local/nvidia/lib:/usr/local/nvidia/lib64/tls/x86_64:/usr/local/nvidia/lib64/tls:/usr/local/nvidia/lib64/x86_64:/usr/local/nvidia/lib64          (LD_LIBRARY_PATH)\r\n       452:       trying file=/usr/local/nvidia/lib/tls/x86_64/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib/tls/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib/x86_64/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib64/tls/x86_64/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib64/tls/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib64/x86_64/libc.so.6\r\n       452:       trying file=/usr/local/nvidia/lib64/libc.so.6\r\n       452:      search cache=/etc/ld.so.cache\r\n       452:       trying file=/lib/x86_64-linux-gnu/libc.so.6\r\n       452:\r\n       452:\r\n       452:     calling init: /lib/x86_64-linux-gnu/libc.so.6\r\n       452:\r\n       452:\r\n       452:     initialize program: /bin/sh\r\n       452:\r\n       452:\r\n       452:     transferring control: /bin/sh\r\n       452:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5z.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5a.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5s.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5p.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5ac.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/_proxy.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5d.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5ds.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5f.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5g.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5i.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5fd.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5pl.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5o.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/h5py/h5l.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/_lib/_ccallback_c.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/_sparsetools.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/_csparsetools.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_shortest_path.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_tools.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_traversal.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_min_spanning_tree.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_reordering.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libjpeg-3b10b538.so.9.3.0 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/PIL/.libs/tls/x86_64:/usr/local/lib/python3.5/dist-packages/PIL/.libs/tls:/usr/local/lib/python3.5/dist-packages/PIL/.libs/x86_64:/usr/local/lib/python3.5/dist-packages/PIL/.libs            (RPATH from file /usr/local/lib/python3.5/dist-packages/PIL/_imaging.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/tls/x86_64/libjpeg-3b10b538.so.9.3.0\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/tls/libjpeg-3b10b538.so.9.3.0\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/x86_64/libjpeg-3b10b538.so.9.3.0\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/libjpeg-3b10b538.so.9.3.0\r\n       443:\r\n       443:     find library=libopenjp2-b3d7668a.so.2.3.1 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/PIL/.libs           (RPATH from file /usr/local/lib/python3.5/dist-packages/PIL/_imaging.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/libopenjp2-b3d7668a.so.2.3.1\r\n       443:\r\n       443:     find library=libtiff-8267adfe.so.5.4.0 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/PIL/.libs           (RPATH from file /usr/local/lib/python3.5/dist-packages/PIL/_imaging.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/libtiff-8267adfe.so.5.4.0\r\n       443:\r\n       443:     find library=liblzma-6cd627ed.so.5.2.4 [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/PIL/.libs/./tls/x86_64:/usr/local/lib/python3.5/dist-packages/PIL/.libs/./tls:/usr/local/lib/python3.5/dist-packages/PIL/.libs/./x86_64:/usr/local/lib/python3.5/dist-packages/PIL/.libs/.            (RPATH from file /usr/local/lib/python3.5/dist-packages/PIL/.libs/libtiff-8267adfe.so.5.4.0)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/./tls/x86_64/liblzma-6cd627ed.so.5.2.4\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/./tls/liblzma-6cd627ed.so.5.2.4\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/./x86_64/liblzma-6cd627ed.so.5.2.4\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/PIL/.libs/./liblzma-6cd627ed.so.5.2.4\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/PIL/.libs/./liblzma-6cd627ed.so.5.2.4\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/PIL/.libs/libjpeg-3b10b538.so.9.3.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/PIL/.libs/libtiff-8267adfe.so.5.4.0\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/PIL/.libs/libopenjp2-b3d7668a.so.2.3.1\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/PIL/_imaging.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/ndimage/_nd_image.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/ndimage/_ni_label.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:     find library=libopenblasp-r0-2ecf47d5.3.7.dev.so [0]; searching\r\n       443:      search path=/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/tls/x86_64:/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/tls:/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/x86_64:/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs            (RPATH from file /usr/local/lib/python3.5/dist-packages/scipy/linalg/_fblas.cpython-35m-x86_64-linux-gnu.so)\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/tls/x86_64/libopenblasp-r0-2ecf47d5.3.7.dev.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/tls/libopenblasp-r0-2ecf47d5.3.7.dev.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/x86_64/libopenblasp-r0-2ecf47d5.3.7.dev.so\r\n       443:       trying file=/usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/libopenblasp-r0-2ecf47d5.3.7.dev.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/libopenblasp-r0-2ecf47d5.3.7.dev.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_fblas.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_flapack.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_flinalg.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_solve_toeplitz.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_decomp_update.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/cython_blas.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/scipy/linalg/cython_lapack.cpython-35m-x86_64-linux-gnu.so\r\n       443:\r\n       443:\r\n       443:     calling init: /usr/local/lib/python3.5/dist-packages/tensorflow_core/lite/experimental/microfrontend/python/ops/_audio_microfrontend_op.so\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/bin/python [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libutil.so.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libexpat.so.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libz.so.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_opcode.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_ctypes.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/core/_multiarray_umath.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/core/_multiarray_tests.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/linalg/lapack_lite.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/linalg/_umath_linalg.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/libopenblasp-r0-34a18dc3.3.7.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_bz2.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libbz2.so.1.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_lzma.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/liblzma.so.5 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_decimal.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/x86_64-linux-gnu/libmpdec.so.2 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/fft/_pocketfft_internal.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/mtrand.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/common.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/bounded_integers.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/mt19937.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/bit_generator.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_hashlib.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/philox.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/pcg64.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/sfc64.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/random/generator.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/google/protobuf/internal/_api_implementation.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/google/protobuf/pyext/_message.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_csv.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/termios.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/framework/fast_tensor_util.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libuuid.so.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/wrapt/_wrappers.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_json.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/python3.5/lib-dynload/_ssl.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libssl.so.1.0.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libcrypto.so.1.0.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/_errors.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/defs.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/_objects.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/_conv.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5r.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5t.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/utils.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5z.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5a.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5s.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5p.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5ac.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/_proxy.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5d.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5ds.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5f.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5g.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5i.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5fd.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5pl.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5o.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/h5l.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5_hl-db841637.so.100.1.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/.libs/libhdf5-49599f4e.so.103.0.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/.libs/./libsz-1c7dd0cf.so.2.0.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/.libs/./libaec-2147abcd.so.0.0.4 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/_lib/_ccallback_c.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/_sparsetools.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/_csparsetools.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_shortest_path.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_tools.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_traversal.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_min_spanning_tree.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/sparse/csgraph/_reordering.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/PIL/_imaging.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/PIL/.libs/libopenjp2-b3d7668a.so.2.3.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/PIL/.libs/libtiff-8267adfe.so.5.4.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/PIL/.libs/libjpeg-3b10b538.so.9.3.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/h5py/.libs/./libz-a147dcb0.so.1.2.3 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/PIL/.libs/./liblzma-6cd627ed.so.5.2.4 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/ndimage/_nd_image.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/ndimage/_ni_label.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_fblas.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_flapack.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_flinalg.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_solve_toeplitz.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/_decomp_update.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/cython_blas.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/cython_lapack.cpython-35m-x86_64-linux-gnu.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/scipy/linalg/../.libs/libopenblasp-r0-2ecf47d5.3.7.dev.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/numpy/core/../.libs/libgfortran-ed201abd.so.3.0.0 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/tensorflow_core/lite/experimental/microfrontend/python/ops/_audio_microfrontend_op.so [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/../libtensorflow_framework.so.2 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /usr/lib/x86_64-linux-gnu/libstdc++.so.6 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libgcc_s.so.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/librt.so.1 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libm.so.6 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libdl.so.2 [0]\r\n       443:\r\n       443:\r\n       443:     calling fini: /lib/x86_64-linux-gnu/libpthread.so.0 [0]\r\n       443:\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35044", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35044/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35044/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35044/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35044", "id": 536741315, "node_id": "MDU6SXNzdWU1MzY3NDEzMTU=", "number": 35044, "title": "Memory leaks when using tf.keras.metrics update_states in multi-threads.", "user": {"login": "workingloong", "id": 18071380, "node_id": "MDQ6VXNlcjE4MDcxMzgw", "avatar_url": "https://avatars1.githubusercontent.com/u/18071380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingloong", "html_url": "https://github.com/workingloong", "followers_url": "https://api.github.com/users/workingloong/followers", "following_url": "https://api.github.com/users/workingloong/following{/other_user}", "gists_url": "https://api.github.com/users/workingloong/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingloong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingloong/subscriptions", "organizations_url": "https://api.github.com/users/workingloong/orgs", "repos_url": "https://api.github.com/users/workingloong/repos", "events_url": "https://api.github.com/users/workingloong/events{/privacy}", "received_events_url": "https://api.github.com/users/workingloong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-12T03:50:01Z", "updated_at": "2020-01-03T23:14:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nThe memory increases and does not release when I use ` tf.keras.metrics.update_states` in multi-threads on Linux. I view the used memory by \"memory_profiler\" and find that the memory increase after each thread starts.\r\n\r\n![image](https://user-images.githubusercontent.com/18071380/70680739-150c6600-1cd4-11ea-9f04-6a1724b72d23.png)\r\n\r\n\r\n**Describe the expected behavior**\r\nThe memory increases greatly after only the first thread starts.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport threading\r\nimport time\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom memory_profiler import profile\r\n\r\nauc = tf.keras.metrics.AUC()\r\nlock = threading.Lock()\r\n\r\n\r\ndef update_metric(metric):\r\n    labels = np.random.randint(0, 2, 20000)\r\n    preds = np.random.random(20000)\r\n    metric.update_state(labels, preds)\r\n\r\n\r\ndef update_metric_mini(metric):\r\n    for i in range(10):\r\n        labels = np.random.randint(0, 2, 2000)\r\n        preds = np.random.random(2000)\r\n        metric.update_state(labels, preds)\r\n\r\n\r\ndef test_mem(metric):\r\n    update_metric(metric)\r\n    # update_metric_mini(metric)\r\n\r\n\r\ndef test_tf_metric():\r\n    with lock:\r\n        test_mem(auc)\r\n\r\n\r\n@profile\r\ndef test_threads():\r\n    t1 = threading.Thread(target=test_tf_metric)\r\n    t2 = threading.Thread(target=test_tf_metric)\r\n    t3 = threading.Thread(target=test_tf_metric)\r\n    t1.start()\r\n    time.sleep(0.1)\r\n    t2.start()\r\n    time.sleep(0.1)\r\n    t3.start()\r\n    time.sleep(0.1)\r\n    t1.join()\r\n    t2.join()\r\n    t3.join()\r\n    time.sleep(1)\r\n    print(\"end \")\r\n\r\n\r\ntest_threads()\r\n```\r\nIn this test code snippet, if we use the `update_metric_mini` which split the updated outputs and labels to small chunks and update metric with those chunks, the memory increases small too. I wonder whether the `update_states` in each thread creates global variables (e.g. placeholder) for input arguments `outputs` and `labels` and the variable size is proportional to the size of input arguments.\r\n\r\n***other info*\r\nWe encounter this issue when developing evaluation in [ElasticDL](https://github.com/sql-machine-learning/elasticdl) and resolving the ElasticDL [issue 1568](https://github.com/sql-machine-learning/elasticdl/issues/1568)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35043", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35043/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35043/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35043/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35043", "id": 536722432, "node_id": "MDU6SXNzdWU1MzY3MjI0MzI=", "number": 35043, "title": "TF2.0: No way to create local variables in tensorflow 2.0", "user": {"login": "x10000year", "id": 22427780, "node_id": "MDQ6VXNlcjIyNDI3Nzgw", "avatar_url": "https://avatars0.githubusercontent.com/u/22427780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/x10000year", "html_url": "https://github.com/x10000year", "followers_url": "https://api.github.com/users/x10000year/followers", "following_url": "https://api.github.com/users/x10000year/following{/other_user}", "gists_url": "https://api.github.com/users/x10000year/gists{/gist_id}", "starred_url": "https://api.github.com/users/x10000year/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/x10000year/subscriptions", "organizations_url": "https://api.github.com/users/x10000year/orgs", "repos_url": "https://api.github.com/users/x10000year/repos", "events_url": "https://api.github.com/users/x10000year/events{/privacy}", "received_events_url": "https://api.github.com/users/x10000year/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-12T02:37:18Z", "updated_at": "2019-12-18T17:04:19Z", "closed_at": null, "author_association": "NONE", "body": "In tensorflow 1.x, user can create local variables, whose lifetime spans over multiple session runs, but will not be saved to checkpoints. Those local variables can be used as internal states of session (e.g., the hidden states of an online rnn). In tensorflow 2.x, session is gone in python side, but when deploy the model in a c++ program we still need to use session, and the local variables can be used to store session states of the model. However, in tensorflow 2.x, there is no standard way to create local variables in python, because all variables created in a Module/Layer are automatically tracked and stored into checkpoints."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35031", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35031/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35031/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35031/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35031", "id": 536464858, "node_id": "MDU6SXNzdWU1MzY0NjQ4NTg=", "number": 35031, "title": "ValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development.", "user": {"login": "anandsaini024", "id": 35100589, "node_id": "MDQ6VXNlcjM1MTAwNTg5", "avatar_url": "https://avatars3.githubusercontent.com/u/35100589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anandsaini024", "html_url": "https://github.com/anandsaini024", "followers_url": "https://api.github.com/users/anandsaini024/followers", "following_url": "https://api.github.com/users/anandsaini024/following{/other_user}", "gists_url": "https://api.github.com/users/anandsaini024/gists{/gist_id}", "starred_url": "https://api.github.com/users/anandsaini024/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anandsaini024/subscriptions", "organizations_url": "https://api.github.com/users/anandsaini024/orgs", "repos_url": "https://api.github.com/users/anandsaini024/repos", "events_url": "https://api.github.com/users/anandsaini024/events{/privacy}", "received_events_url": "https://api.github.com/users/anandsaini024/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-11T16:01:09Z", "updated_at": "2020-03-12T21:12:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Windows 10 866 bit OS,x64 based processor \r\n- python 3.5.4 (working on virtual env)\r\n- pip installed version of Tensorflow\r\n- TensorFlow version: tensorflow==2.0.0\r\n- other packages:\r\nscikit-learn==0.22\r\nscipy==1.4.0rc2\r\nsix==1.12.0\r\ntb-nightly==2.1.0a20191115\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nUsed the following code to quantize the frozen graph [http://download.tensorflow.org/models/speech_commands_v0.02.zip]()\r\n```\r\n# the above frozen graph was saved in a directory as \"saved_model\"\r\n```\r\ncode:\r\nimport tensorflow as tf\r\ndef representative_dataset_gen():\r\n  for _ in range(num_calibration_steps):\r\n    # Get sample input data as a numpy array in a method of your choosing.\r\n    yield [input]\r\n\r\nconverter = tf.lite.TFLiteConverter.from_saved_model('C:/test/saved_model')\r\nconverter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]\r\nconverter.representative_dataset = representative_dataset_gen\r\ntflite_quant_model = converter.convert()\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nFile \"trained_model_quantize.py\", line 11, in <module>\r\n    tflite_quant_model = converter.convert()\r\n  File \"C:\\Users\\Desktop\\Projects\\Environments\\google_speech\\lib\\site-packages\\tensorflow_core\\lite\\python\\lite.py\", line 421, in convert\r\n    raise ValueError(\"This converter can only convert a single \"\r\nValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development.\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\nTutorial: [https://github.com/tensorflow/docs/blob/master/site/en/r1/tutorials/sequences/audio_recognition.md]()\r\n \r\nGraph: [http://download.tensorflow.org/models/speech_commands_v0.02.zip]()\r\n**Objective**\r\nI'm trying to convert this model (frozen graph) which is in normal Float 32 to fixed point 8 bit. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35030", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35030/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35030/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35030/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35030", "id": 536462300, "node_id": "MDU6SXNzdWU1MzY0NjIzMDA=", "number": 35030, "title": "High memory consumption with model.fit in TF 2.0.0 and 2.1.0-rc0", "user": {"login": "gdudziuk", "id": 32177983, "node_id": "MDQ6VXNlcjMyMTc3OTgz", "avatar_url": "https://avatars1.githubusercontent.com/u/32177983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gdudziuk", "html_url": "https://github.com/gdudziuk", "followers_url": "https://api.github.com/users/gdudziuk/followers", "following_url": "https://api.github.com/users/gdudziuk/following{/other_user}", "gists_url": "https://api.github.com/users/gdudziuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/gdudziuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gdudziuk/subscriptions", "organizations_url": "https://api.github.com/users/gdudziuk/orgs", "repos_url": "https://api.github.com/users/gdudziuk/repos", "events_url": "https://api.github.com/users/gdudziuk/events{/privacy}", "received_events_url": "https://api.github.com/users/gdudziuk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 33, "created_at": "2019-12-11T15:57:07Z", "updated_at": "2020-03-09T11:31:24Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Kubuntu 18.04, kernel 5.0\r\n- Mobile device: Not verified on mobile devices\r\n- TensorFlow installed from: binary via `pip install tensorflow-gpu`\r\n- TensorFlow version: `2.1.0-rc0`, however affected are also `2.0.0` and `2.0.0-rc0`, `2.0.0-rc1`, `2.0.0-rc2`\r\n- Python version: 3.6.9\r\n- CUDA version: 10.1 for TF 2.1.0-rc0; 10.0 for the earlier versions of TF\r\n- cuDNN version: 7\r\n- GPU model and memory: Nvidia GeForce GTX 1050 Ti (4GB)\r\n- CPU model: AMD Ryzen 7 1700\r\n\r\n**Describe the current behavior**\r\n\r\nModel training with the Keras API consumes high amount of system memory with TF `2.0.0` and `2.1.0-rc0`, as well as in `2.0.0-rc0`, `2.0.0-rc1` and `2.0.0-rc2`. It looks like the memory used by `model.fit` is proportional to the size of the training data provided as numpy arrays, with the proportionality constant being approximately 1. In other words, if the numpy arrays `x` and `y` are, say, 8 GB in total, then `model.fit(x,y,...)` will use another 8 GB (plus some overhead). This may suggest that `model.fit` creates unnecessary copies of the data arrays. This is in contrary to TF `1.14.0`, `2.0.0-a0`, `2.0.0-b0` and `2.0.0-b1`, where `model.fit` seems to use some amount of RAM independent of the data size (and much less than 8 GB, at least in the test code attached below).\r\n\r\nThe same concerns the validation data. If validation data are passed as numpy arrays to `model.fit` via the argument `validation_data`, then the memory use of `model.fit` seems to duplicate the size of the validation data arrays with TF from `2.0.0-rc0` to `2.1.0-rc0`.\r\n\r\nIn the code attached below, one may change the variable `K` to vary the size of the data and test the above described behaviour. It is straightforward to estimate the data size: e.g. with `K=5000` the data arrays in the below code should be ca. 7.32 GB in total. The whole Python process associated with this code uses approximately this much RAM plus some overhead when running with TF `1.14.0`, `2.0.0-a0`, `2.0.0-b0` or `2.0.0-b1`. But with TF from `2.0.0-rc0` to `2.1.0-rc0` the Python process consumes twice that much RAM. One may comment out the line containing `model.fit` to check that it is the point at which the high memory consumption starts.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe size of the memory used by `model.fit` should not duplicate the size of the training and validation data passed as numpy arrays. It should be more or less independent of the size of the data arrays, similarly as in TF `1.14.0` and in the pre-releases `2.0.0-a0`, `2.0.0-b0` and `2.0.0-b1`. \r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.layers import Input, Lambda, Conv2D\r\n\r\nprint(\"Tensorflow version: {}\".format(tf.__version__),flush=True)\r\n\r\nK = 5000 # Number of images\r\nN = 512  # Image size\r\n\r\nMAX_SIGNAL = 5000 # The values of the training data range from 0 to this\r\n\r\ndef build_model():\r\n  '''Create a simple test model.'''\r\n  \r\n  inputs = Input((N,N,1))\r\n  s = Lambda(lambda x: x / MAX_SIGNAL) (inputs)\r\n  s = Conv2D(1, (3, 3), activation='sigmoid', padding='same')(s)\r\n  outputs = s\r\n\r\n  return Model(inputs=[inputs], outputs=[outputs])\r\n\r\n# Generate some random data\r\nx_train = np.random.randint(MAX_SIGNAL+1,size=(K,N,N,1),dtype=np.uint16) # Should be 2 560 000 kB\r\ny_train = np.random.randint(1+1         ,size=(K,N,N,1),dtype=np.bool)   # Should be 1 280 000 kB\r\nx_val   = np.random.randint(MAX_SIGNAL+1,size=(K,N,N,1),dtype=np.uint16) # Should be 2 560 000 kB\r\ny_val   = np.random.randint(1+1         ,size=(K,N,N,1),dtype=np.bool)   # Should be 1 280 000 kB\r\n# In total, the above arrays should be 7 680 000 kB\r\n\r\nmodel = build_model()\r\n\r\noptimizer = tf.keras.optimizers.Adam()\r\nloss = tf.keras.losses.BinaryCrossentropy()\r\n\r\nmodel.compile(optimizer=optimizer, loss=loss)\r\nmodel.fit(x=x_train, y=y_train, validation_data=(x_val,y_val), batch_size=8, epochs=10)\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35027", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35027/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35027/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35027/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35027", "id": 536399499, "node_id": "MDU6SXNzdWU1MzYzOTk0OTk=", "number": 35027, "title": "logging broken with Python-3.8: findCaller() takes from 1 to 2 positional arguments but 3 were given", "user": {"login": "olk", "id": 914496, "node_id": "MDQ6VXNlcjkxNDQ5Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/914496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olk", "html_url": "https://github.com/olk", "followers_url": "https://api.github.com/users/olk/followers", "following_url": "https://api.github.com/users/olk/following{/other_user}", "gists_url": "https://api.github.com/users/olk/gists{/gist_id}", "starred_url": "https://api.github.com/users/olk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olk/subscriptions", "organizations_url": "https://api.github.com/users/olk/orgs", "repos_url": "https://api.github.com/users/olk/repos", "events_url": "https://api.github.com/users/olk/events{/privacy}", "received_events_url": "https://api.github.com/users/olk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-11T14:17:56Z", "updated_at": "2020-01-06T02:52:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**System information\r\n- OS Platform and Distribution: Arch Linux, 5.4.2-arch1-1-ARCH\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 2.1.0rc0-1\r\n- Keras version: 2.2.4-tf\r\n- Python version: 3.8\r\n- GPU model and memory: 2x GTX 1080 Ti 11GB\"`\r\n\r\n**Describe the current behavior**\r\nexecution of MNIST example fails with error:\r\n\r\n> TypeError: findCaller() takes from 1 to 2 positional arguments but 3 were given\r\n\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow_datasets as tfds\r\n\r\nfrom tensorflow.keras.optimizers import Adam\r\n\r\ndef scale(image, label):\r\n  image = tf.cast(image, tf.float32)\r\n  image /= 255\r\n  return image, label\r\n\r\ndef build_model():\r\n    filters = 56\r\n    units = 24\r\n    kernel_size = 5\r\n    learning_rate = 1e-2\r\n    model = tf.keras.Sequential([\r\n      tf.keras.layers.Conv2D(filters=filters, kernel_size=(kernel_size, kernel_size), activation='relu', input_shape=(28, 28, 1)),\r\n      tf.keras.layers.MaxPooling2D(),\r\n      tf.keras.layers.Flatten(),\r\n      tf.keras.layers.Dense(units, activation='relu'),\r\n      tf.keras.layers.Dense(10, activation='softmax')\r\n    ])\r\n    model.compile(loss='sparse_categorical_crossentropy', optimizer=Adam(learning_rate), metrics=['accuracy'])\r\n    return model\r\n\r\ndatasets, info = tfds.load(name='mnist', with_info=True, as_supervised=True)\r\nmnist_train, mnist_test = datasets['train'], datasets['test']\r\n\r\nnum_train_examples = info.splits['train'].num_examples\r\nnum_test_examples = info.splits['test'].num_examples\r\n\r\nBUFFER_SIZE = 10000\r\nBATCH_SIZE = 128\r\n\r\ntrain_dataset = mnist_train.map(scale).shuffle(BUFFER_SIZE).repeat().batch(BATCH_SIZE).prefetch(buffer_size=tf.data.experimental.AUTOTUNE)\r\neval_dataset = mnist_test.map(scale).shuffle(BUFFER_SIZE).repeat().batch(BATCH_SIZE).prefetch(buffer_size=tf.data.experimental.AUTOTUNE)\r\n\r\nmodel = build_model()\r\n\r\nepochs=5\r\nmodel.fit(\r\n        train_dataset,\r\n        validation_data=eval_dataset,\r\n        steps_per_epoch=num_train_examples/epochs,\r\n        validation_steps=num_test_examples/epochs,\r\n        epochs=epochs)\r\n```\r\n\r\n**Other info / logs**\r\n\r\n```\r\ntraceback:\r\nDownloading and preparing dataset mnist (11.06 MiB) to /home/graemer/tensorflow_datasets/mnist/1.0.0...\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 23, in <module>\r\n    datasets, info = tfds.load(name='mnist', with_info=True, as_supervised=True)\r\n  File \"/usr/lib/python3.8/site-packages/tensorflow_datasets/core/api_utils.py\", line 52, in disallow_positional_args_dec\r\n    return fn(*args, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/tensorflow_datasets/core/registered.py\", line 302, in load\r\n    dbuilder.download_and_prepare(**download_and_prepare_kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/tensorflow_datasets/core/api_utils.py\", line 52, in disallow_positional_args_dec\r\n    return fn(*args, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/tensorflow_datasets/core/dataset_builder.py\", line 316, in download_and_prepare\r\n    logging.warning(GCS_HOSTED_MSG, self.name)\r\n  File \"/usr/lib/python3.8/site-packages/absl/logging/__init__.py\", line 322, in warning\r\n    log(WARNING, msg, *args, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/absl/logging/__init__.py\", line 485, in log\r\n    _absl_logger.log(standard_level, msg, *args, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/absl/logging/__init__.py\", line 1047, in log\r\n    super(ABSLLogger, self).log(level, msg, *args, **kwargs)\r\n  File \"/usr/lib/python3.8/logging/__init__.py\", line 1500, in log\r\n    self._log(level, msg, args, **kwargs)\r\n  File \"/usr/lib/python3.8/logging/__init__.py\", line 1565, in _log\r\n    fn, lno, func, sinfo = self.findCaller(stack_info, stacklevel)\r\nTypeError: findCaller() takes from 1 to 2 positional arguments but 3 were given\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35017", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35017/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35017/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35017/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35017", "id": 536185398, "node_id": "MDU6SXNzdWU1MzYxODUzOTg=", "number": 35017, "title": "tensorflow 2.0 use ParameterServerStrategy error", "user": {"login": "Crisescode", "id": 28392311, "node_id": "MDQ6VXNlcjI4MzkyMzEx", "avatar_url": "https://avatars3.githubusercontent.com/u/28392311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Crisescode", "html_url": "https://github.com/Crisescode", "followers_url": "https://api.github.com/users/Crisescode/followers", "following_url": "https://api.github.com/users/Crisescode/following{/other_user}", "gists_url": "https://api.github.com/users/Crisescode/gists{/gist_id}", "starred_url": "https://api.github.com/users/Crisescode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Crisescode/subscriptions", "organizations_url": "https://api.github.com/users/Crisescode/orgs", "repos_url": "https://api.github.com/users/Crisescode/repos", "events_url": "https://api.github.com/users/Crisescode/events{/privacy}", "received_events_url": "https://api.github.com/users/Crisescode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-11T07:12:33Z", "updated_at": "2020-03-18T21:30:10Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n\r\n* **use tensorflow docker hub images:  tensorflow / tensorflow : 2.0.0-gpu**\r\n\r\n**Describe the current behavior**\r\n* when i use tf2.0 distributed training with ParameterServerStrategy,  the error occurred follow:\r\n```\r\n2019-12-11 14:53:27.569524: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n2019-12-11 14:53:27.619245: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: Tesla P100-PCIE-16GB major: 6 minor: 0 memoryClockRate(GHz): 1.3285\r\npciBusID: 0000:2f:00.0\r\n2019-12-11 14:53:27.621064: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 1 with properties:\r\nname: Tesla P100-PCIE-16GB major: 6 minor: 0 memoryClockRate(GHz): 1.3285\r\npciBusID: 0000:86:00.0\r\n2019-12-11 14:53:27.622349: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-12-11 14:53:27.627608: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-12-11 14:53:27.632513: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-12-11 14:53:27.634123: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-12-11 14:53:27.640466: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-12-11 14:53:27.643992: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-12-11 14:53:27.656264: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-12-11 14:53:27.660960: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0, 1\r\n2019-12-11 14:53:27.661734: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2019-12-11 14:53:27.676662: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2600000000 Hz\r\n2019-12-11 14:53:27.684246: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x565309993340 executing computations on platform Host. Devices:\r\n2019-12-11 14:53:27.684288: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2019-12-11 14:53:27.955807: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5653099f5a60 executing computations on platform CUDA. Devices:\r\n2019-12-11 14:53:27.955947: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Tesla P100-PCIE-16GB, Compute Capability 6.0\r\n2019-12-11 14:53:27.955978: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (1): Tesla P100-PCIE-16GB, Compute Capability 6.0\r\n2019-12-11 14:53:27.958412: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: Tesla P100-PCIE-16GB major: 6 minor: 0 memoryClockRate(GHz): 1.3285\r\npciBusID: 0000:2f:00.0\r\n2019-12-11 14:53:27.959282: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 1 with properties:\r\nname: Tesla P100-PCIE-16GB major: 6 minor: 0 memoryClockRate(GHz): 1.3285\r\npciBusID: 0000:86:00.0\r\n2019-12-11 14:53:27.959338: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-12-11 14:53:27.959361: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-12-11 14:53:27.959381: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-12-11 14:53:27.959391: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-12-11 14:53:27.959413: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-12-11 14:53:27.959423: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-12-11 14:53:27.959434: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-12-11 14:53:27.962606: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0, 1\r\n2019-12-11 14:53:27.962639: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-12-11 14:53:27.964634: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-12-11 14:53:27.964653: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0 1\r\n2019-12-11 14:53:27.964663: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N Y\r\n2019-12-11 14:53:27.964679: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 1:   Y N\r\n2019-12-11 14:53:27.967224: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15216 MB memory) -> physical GPU (device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:2f:00.0, compute capability: 6.0)\r\n2019-12-11 14:53:27.968872: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 15216 MB memory) -> physical GPU (device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:86:00.0, compute capability: 6.0)\r\nWARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tensorflow_core/python/ops/resource_variable_ops.py:1630: calling __init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\nTraceback (most recent call last):\r\n  File \"tf_mnist_ps_worker.py\", line 136, in <module>\r\n    main()\r\n  File \"tf_mnist_ps_worker.py\", line 132, in main\r\n    app.train(args)\r\n  File \"tf_mnist_ps_worker.py\", line 85, in train\r\n    model = Net().model\r\n  File \"tf_mnist_ps_worker.py\", line 32, in __init__\r\n    tf.keras.layers.Dense(10, activation='softmax')\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/keras/engine/sequential.py\", line 114, in __init__\r\n    self.add(layer)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/keras/engine/sequential.py\", line 196, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 817, in __call__\r\n    self._maybe_build(inputs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 2141, in _maybe_build\r\n    self.build(input_shapes)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/keras/layers/core.py\", line 1027, in build\r\n    trainable=True)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 2311, in __setattr__\r\n    if val.trainable:\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow_core/python/ops/variables.py\", line 477, in trainable\r\n    raise NotImplementedError\r\nNotImplementedError\r\n```\r\n\r\n**Code to reproduce the issue**\r\n* my demo code:\r\n```\r\nimport os\r\nimport json\r\nimport argparse\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import datasets\r\nfrom tensorflow.keras import layers, models\r\nfrom tensorflow.keras import optimizers\r\n\r\nclass Net(object):\r\n    def __init__(self):\r\n        model = models.Sequential()\r\n        model.add(layers.Conv2D(\r\n            32, (3, 3), activation='relu', input_shape=(28, 28, 1)))\r\n        model.add(layers.MaxPooling2D((2, 2)))\r\n        model.add(layers.Conv2D(64, (3, 3), activation='relu'))\r\n        model.add(layers.MaxPooling2D((2, 2)))\r\n        model.add(layers.Conv2D(64, (3, 3), activation='relu'))\r\n\r\n        model.add(layers.Flatten())\r\n        model.add(layers.Dense(64, activation='relu'))\r\n        model.add(layers.Dense(10, activation='softmax'))\r\n\r\n        model.summary()\r\n\r\n        self.model = model\r\n\r\n\r\n# inital dateset\r\nclass DataSet(object):\r\n    def __init__(self):\r\n        data_path = os.path.dirname(os.path.realpath(__file__)) \\\r\n                    + '/../../datasets/mnist/mnist.npz'\r\n        (train_images, train_labels), (test_images, test_labels) = \\\r\n            datasets.mnist.load_data(path=data_path)\r\n        train_images = train_images.reshape((60000, 28, 28, 1))\r\n        test_images = test_images.reshape((10000, 28, 28, 1))\r\n\r\n        train_images, test_images = train_images / 255.0, test_images / 255.0\r\n\r\n        self.train_images, self.train_labels = train_images, train_labels\r\n        self.test_images, self.test_labels = test_images, test_labels\r\n\r\n\r\n# train and val\r\nclass Train:\r\n    def __init__(self):\r\n        self.data = DataSet()\r\n\r\n    def train(self, args):\r\n        # Define the checkpoint directory to store the checkpoints\r\n        checkpoint_dir = args.train_dir\r\n        # Name of the checkpoint files\r\n        checkpoint_path = os.path.join(checkpoint_dir, \"ckpt_{epoch}\")\r\n\r\n        callbacks = [\r\n            tf.keras.callbacks.TensorBoard(log_dir='./logs'),\r\n            tf.keras.callbacks.ModelCheckpoint(filepath=checkpoint_path,\r\n                                               save_weights_only=True),\r\n        ]\r\n\r\n        with strategy.scope():\r\n            model = Net().model\r\n\r\n            model.compile(optimizer=optimizers.Adam(),\r\n                          loss='sparse_categorical_crossentropy',\r\n                          metrics=['accuracy'])\r\n\r\n        model.fit(self.data.train_images, self.data.train_labels,\r\n                  batch_size=args.batch_size,\r\n                  epochs=args.epochs,\r\n                  callbacks=callbacks,\r\n                  validation_data=(self.data.test_images, self.data.test_labels))\r\n\r\n        # EVAL\r\n        model.load_weights(tf.train.latest_checkpoint(checkpoint_dir))\r\n        eval_loss, eval_acc = model.evaluate(\r\n            self.data.test_images, self.data.test_labels, verbose=2)\r\n        print('Eval loss: {}, Eval Accuracy: {}'.format(eval_loss, eval_acc))\r\n\r\n\r\ndef main():\r\n    # training params settings\r\n    parser = argparse.ArgumentParser(description='Tensorflow 2.0 MNIST Example,'\r\n                                                 ' use Mirrorstrategy')\r\n    parser.add_argument('--batch_size', '-b', type=int, default=64,\r\n                        help='input batch size for training (default: 64)')\r\n    parser.add_argument('--test_batchsize', '-tb', type=int, default=1000,\r\n                        help='input batch size for testing (default: 1000)')\r\n    parser.add_argument('--epochs', '-e', type=int, default=10,\r\n                        help='number of epochs to train (default: 10)')\r\n    parser.add_argument('--learning_rate', '-lr', type=float, default=0.01,\r\n                        help='learning rate (default: 0.01)')\r\n    parser.add_argument('--momentum', type=float, default=0.5,\r\n                        help='SGD momentum (default: 0.5)')\r\n    parser.add_argument('--log_interval', type=int, default=10,\r\n                        help='how many batches to wait before logging training status')\r\n    parser.add_argument('--save_model', '-sm', action='store_true', default=False,\r\n                        help='For Saving the current Model')\r\n\r\n    args = parser.parse_args()\r\n\r\n    app = Train()\r\n    app.train(args)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n   main()\r\n```\r\n\r\n* and my cmd line:\r\n\r\n```\r\nTF_CONFIG='{\"cluster\": {\"worker\": [\"10.240.208.106:12345\", \"10.240.208.108:12345\"], \"ps\": [\"10.240.208.106:12346\", \"10.240.208.108:12346\"]}, \"task\": {\"index\": 1, \"type\": \"worker\"}}' python tf_mnist_ps_worker.py\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35014", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35014/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35014/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35014/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35014", "id": 536148377, "node_id": "MDU6SXNzdWU1MzYxNDgzNzc=", "number": 35014, "title": "Build error due to missing dependency declarations in double-conversion", "user": {"login": "s-sajid-ali", "id": 30510036, "node_id": "MDQ6VXNlcjMwNTEwMDM2", "avatar_url": "https://avatars1.githubusercontent.com/u/30510036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s-sajid-ali", "html_url": "https://github.com/s-sajid-ali", "followers_url": "https://api.github.com/users/s-sajid-ali/followers", "following_url": "https://api.github.com/users/s-sajid-ali/following{/other_user}", "gists_url": "https://api.github.com/users/s-sajid-ali/gists{/gist_id}", "starred_url": "https://api.github.com/users/s-sajid-ali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s-sajid-ali/subscriptions", "organizations_url": "https://api.github.com/users/s-sajid-ali/orgs", "repos_url": "https://api.github.com/users/s-sajid-ali/repos", "events_url": "https://api.github.com/users/s-sajid-ali/events{/privacy}", "received_events_url": "https://api.github.com/users/s-sajid-ali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205657510, "node_id": "MDU6TGFiZWwxMjA1NjU3NTEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:centos", "name": "subtype:centos", "color": "b619ea", "default": false, "description": "Centos Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-11T05:16:50Z", "updated_at": "2020-01-03T22:47:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution : CentOS-8.0\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.7.4\r\n- Installed using virtualenv? pip? conda?: from source using spack\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): gcc-7.4.0\r\n- CUDA/cuDNN version: CUDA@10.1.243/cuDNN@7.6.5.32-10.1\r\n- GPU model and memory: 2x NVIDIA Quadro P4000\r\n\r\n**Describe the problem**\r\n\r\nI used [`spack`](https://github.com/spack/spack/) to build all dependencies for tensorflow including bazel. As per the build logs from spack, the following procedure was attempted to install tensorflow from source : \r\n```\r\n'./configure'\r\n```\r\n```\r\n'bazel' '--nohome_rc' '--nosystem_rc' '--output_user_root=/tmp/spack/tf' 'build' '--color=no' '--jobs=16' '--config=opt' '--config=cuda' '--config=noaws' '--config=nohdfs' '--config=noignite' '--config=nokafka' '--config=v2' '--cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0' '//tensorflow/tools/pip_package:build_pip_package'\r\n```\r\nFull error log from spack : [error_log](https://pastebin.com/n6qfsrVr)\r\n\r\nThe error comes from `'@double_conversion//:double-conversion': ` : \r\n```\r\n[sajid@xrmlite ~]$ cat error_log | grep -a3b3 ERROR\r\n80532-INFO: Deleting stale sandbox base /tmp/spack/tf/ba2957b26f360b54b039cbd58767fa4e/sandbox\r\n80621-[6 / 38] [Prepa] BazelWorkspaceStatusAction stable-status.txt\r\n80683-[48 / 1,263] [Prepa] Executing genrule @local_config_nccl//:nccl-files [for host] ... (6 actions, 5 running)\r\n80792:ERROR: /tmp/spack/tf/ba2957b26f360b54b039cbd58767fa4e/external/double_conversion/BUILD.bazel:12:1: undeclared inclusion(s) in rule '@double_conversion//:double-conversion':\r\n80965-this rule is missing dependency declarations for the following files included by 'external/double_conversion/double-conversion/double-conversion.cc':\r\n81115-  '/home/sajid/packages/spack/opt/spack/linux-centos8-broadwell/gcc-7.4.0/gettext-0.20.1-yjkttko6qwne6igwp2cabop2d4p2g3ff/include/libintl.h'\r\n81256-[75 / 1,297] Executing genrule @local_config_cuda//cuda:cuda-lib [for host]; 2s local ... (14 actions, 2 running)\r\n[sajid@xrmlite ~]$\r\n```\r\n\r\nAdditional Info : \r\n\r\nThe full dependency tree for building `py-tensoflow` is show below. As can be seen, `gettext` is a dependency for `python` built from source. This `python` is both a dependency of `bazel` and the `python` we want to eventually link `py-tensorflow` against. \r\n\r\n```\r\n[sajid@xrmlite ~]$ spack spec -I  py-tensorflow cuda_arch=61  ^/ppi2muw  ^cuda@10.1.243 ^python@3.7.4 %gcc@7.4.0\r\n\r\n.....\r\n\r\nConcretized\r\n--------------------------------\r\n -   py-tensorflow@2.0.0%gcc@7.4.0~android~aws~computecpp+cuda cuda_arch=61 ~dynamic_kernels+gcp~gdr~hdfs~ignite~ios~jemalloc~kafka~mkl~monolithic~mpi+nccl~ngraph~numa~opencl patches=c49766a976e5c25c3827036828df0a2630e511bd783ac9cdcc6fc13068b22fac ~rocm~tensorrt~verbs~xla arch=linux-centos8-broadwell\r\n[+]      ^bazel@0.26.1%gcc@7.4.0 patches=3e6448a0dde42bbd72568d29c5646d370dd62ca300cdd10a630908c086844167,75fad08d2a118372ed86696832942c7903bb716af28e5af969d8e20857655cf4,aa926467d3fc2bcd338ccc6355bc9f56adfd18dd3b4e1813a4ce8daee9e34600 arch=linux-centos8-broadwell\r\n[+]          ^jdk@1.8.0_131-b11%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]          ^python@3.7.4%gcc@7.4.0+bz2+ctypes+dbm+lzma~nis~optimizations+pic+pyexpat+pythoncmd+readline+shared+sqlite3+ssl~tix~tkinter~ucs4~uuid+zlib arch=linux-centos8-broadwell\r\n[+]              ^bzip2@1.0.8%gcc@7.4.0+shared arch=linux-centos8-broadwell\r\n[+]              ^expat@2.2.9%gcc@7.4.0+libbsd arch=linux-centos8-broadwell\r\n[+]                  ^libbsd@0.10.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]              ^gdbm@1.18.1%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]                  ^readline@8.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]                      ^ncurses@6.1%gcc@7.4.0~symlinks~termlib arch=linux-centos8-broadwell\r\n[+]              ^gettext@0.20.1%gcc@7.4.0+bzip2+curses+git~libunistring+libxml2+tar+xz arch=linux-centos8-broadwell\r\n[+]                  ^libxml2@2.9.9%gcc@7.4.0~python arch=linux-centos8-broadwell\r\n[+]                      ^libiconv@1.16%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]                      ^xz@5.2.4%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]                      ^zlib@1.2.11%gcc@7.4.0+optimize+pic+shared arch=linux-centos8-broadwell\r\n[+]                  ^tar@1.32%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]              ^libffi@3.2.1%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]              ^openssl@1.1.1d%gcc@7.4.0+systemcerts arch=linux-centos8-broadwell\r\n[+]              ^sqlite@3.30.1%gcc@7.4.0~column_metadata+fts~functions~rtree arch=linux-centos8-broadwell\r\n[+]      ^cuda@10.1.243%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^cudnn@7.6.5.32-10.1-linux-x64%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^curl@7.63.0%gcc@7.4.0~darwinssl~gssapi~libssh~libssh2~nghttp2 arch=linux-centos8-broadwell\r\n[+]      ^nccl@2.4.8-1%gcc@7.4.0 patches=42778c78eb9875dacddf5eca20f7f6a077773fcbee41e51174f81b3143684b6d arch=linux-centos8-broadwell\r\n[+]      ^py-absl-py@0.7.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]          ^py-setuptools@41.4.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]          ^py-six@1.12.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-astor@0.8.0%gcc@7.4.0 patches=edc5eeddabe153b08e938f52edaeb2d880ee3128082967f310db0f98510fe6e0 arch=linux-centos8-broadwell\r\n[+]      ^py-gast@0.2.2%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-google-pasta@0.1.8%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-grpcio@1.25.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]          ^c-ares@1.15.0%gcc@7.4.0 build_type=RelWithDebInfo arch=linux-centos8-broadwell\r\n[+]              ^cmake@3.15.5%gcc@7.4.0~doc+ncurses+openssl+ownlibs patches=3387faf4a71efe81c0fa17410b270ca7d352081ac88d2322df3da9bb6a6a3f2d ~qt arch=linux-centos8-broadwell\r\n[+]          ^py-cython@0.29.13%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-keras-applications@1.0.8%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-keras-preprocessing@1.1.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-numpy@1.17.4%gcc@7.4.0+blas+lapack arch=linux-centos8-broadwell\r\n[+]          ^openblas@0.3.7%gcc@7.4.0+avx2~avx512 cpu_target=auto ~ilp64+pic+shared threads=none ~virtual_machine arch=linux-centos8-broadwell\r\n[+]      ^py-opt-einsum@3.1.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-protobuf@3.11.0%gcc@7.4.0~cpp arch=linux-centos8-broadwell\r\n[+]      ^py-termcolor@1.1.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-wheel@0.33.1%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^py-wrapt@1.11.2%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]      ^swig@4.0.0%gcc@7.4.0 arch=linux-centos8-broadwell\r\n[+]          ^pcre@8.42%gcc@7.4.0~jit+multibyte+utf arch=linux-centos8-broadwell\r\n[+]          ^pkgconf@1.6.3%gcc@7.4.0 arch=linux-centos8-broadwell\r\n```\r\n\r\nThe environment for building `py-tensorflow` is described in [`spack-build-env.txt`](https://pastebin.com/MuWi6BAK). \r\n\r\nContents of [`.bazelrc`](https://pastebin.com/6TTEMMSu)\r\n\r\nThe spack [build recipe](https://github.com/spack/spack/blob/develop/var/spack/repos/builtin/packages/py-tensorflow/package.py) for `py-tensorlfow`. \r\n\r\nDownstream tracker : https://github.com/spack/spack/issues/14105\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35012", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35012/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35012/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35012/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35012", "id": 536121274, "node_id": "MDU6SXNzdWU1MzYxMjEyNzQ=", "number": 35012, "title": "Gradient of matmul in while_loop works when run eagerly but not as tf.function", "user": {"login": "mjwatkins2", "id": 39543152, "node_id": "MDQ6VXNlcjM5NTQzMTUy", "avatar_url": "https://avatars1.githubusercontent.com/u/39543152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjwatkins2", "html_url": "https://github.com/mjwatkins2", "followers_url": "https://api.github.com/users/mjwatkins2/followers", "following_url": "https://api.github.com/users/mjwatkins2/following{/other_user}", "gists_url": "https://api.github.com/users/mjwatkins2/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjwatkins2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjwatkins2/subscriptions", "organizations_url": "https://api.github.com/users/mjwatkins2/orgs", "repos_url": "https://api.github.com/users/mjwatkins2/repos", "events_url": "https://api.github.com/users/mjwatkins2/events{/privacy}", "received_events_url": "https://api.github.com/users/mjwatkins2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-11T03:30:19Z", "updated_at": "2019-12-17T02:21:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Example provided below\r\n- OS Platform and Distribution: Both Windows 10 and Google Colab\r\n- TensorFlow installed from binary\r\n- TensorFlow version: Both 2.0.0 and 2.1.0-rc0\r\n- Python version: 3.6 and 3.7.4\r\n\r\n**Describe the current behavior**\r\nIf I multiply tensors together in a while_loop I can compute higher order gradients when running eagerly, but not when running inside a function with the @tf.function decorator. If I manually unroll the loop, it works either way, so the problem must be related to the interaction between tf.function and tf.while_loop.\r\n\r\n> TypeError: in converted code:\r\n> \r\n>     <ipython-input-17-50c1c9a72b0f>:17 func  *\r\n>         d3y_dx3 = t.gradient(d2y_dx2, x)\r\n>     /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/backprop.py:999 gradient\r\n>         if not backprop_util.IsTrainable(t):\r\n>     /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/backprop_util.py:30 IsTrainable\r\n>         dtype = dtypes.as_dtype(dtype)\r\n>     /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/framework/dtypes.py:725 as_dtype\r\n>         (type_value,))\r\n> \r\n>     TypeError: Cannot convert value None to a TensorFlow DType.\r\n\r\n**Describe the expected behavior**\r\nThe output of this function should be the same regardless of the @tf.function decorator:\r\n> [[0 0 4]]\r\n> [[[-2 1 10]]]\r\n> [[[8 2 20]]]\r\n> [[[-18 6 30]]]\r\n> [[[24 24 24]]]\r\n\r\n**Code to reproduce the issue**\r\nRun without and then with @tf.function:\r\n```\r\nimport tensorflow as tf\r\n\r\nx = tf.Variable([[[-1.0]], [[0.0]], [[1.0]]])\r\n\r\n# @tf.function\r\ndef func():\r\n    with tf.GradientTape(persistent=True) as t:\r\n        t.watch(x)\r\n        pv = x\r\n        \r\n        n = 4\r\n        c = lambda i, _: i < n\r\n        b = lambda i, pv: (i+1, tf.concat([x, tf.matmul(pv, x)], axis=1))\r\n        _, pv = tf.while_loop(c, b, (tf.constant(1), pv), shape_invariants=(tf.constant(1).shape, tf.TensorShape([3, None, 1])))\r\n\r\n        # manual loop unrolling works fine both ways:\r\n        # pv = tf.concat([x, tf.matmul(pv, x)], axis=1)\r\n        # pv = tf.concat([x, tf.matmul(pv, x)], axis=1)\r\n        # pv = tf.concat([x, tf.matmul(pv, x)], axis=1)\r\n        \r\n        y = tf.reduce_sum(pv, axis=1)\r\n        dy_dx = t.gradient(y, x)\r\n        d2y_dx2 = t.gradient(dy_dx, x)\r\n        d3y_dx3 = t.gradient(d2y_dx2, x)\r\n        d4y_dx4 = t.gradient(d3y_dx3, x)\r\n    del t\r\n\r\n    tf.print(tf.transpose(y)) # transpose to print on one line\r\n    tf.print(tf.transpose(dy_dx))\r\n    tf.print(tf.transpose(d2y_dx2))\r\n    tf.print(tf.transpose(d3y_dx3))\r\n    tf.print(tf.transpose(d4y_dx4))\r\n\r\nfunc()\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35011", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35011/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35011/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35011/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35011", "id": 536115694, "node_id": "MDU6SXNzdWU1MzYxMTU2OTQ=", "number": 35011, "title": "Derivative of pow(x, y) can give nan when x=0 for higher order derivatives", "user": {"login": "mjwatkins2", "id": 39543152, "node_id": "MDQ6VXNlcjM5NTQzMTUy", "avatar_url": "https://avatars1.githubusercontent.com/u/39543152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjwatkins2", "html_url": "https://github.com/mjwatkins2", "followers_url": "https://api.github.com/users/mjwatkins2/followers", "following_url": "https://api.github.com/users/mjwatkins2/following{/other_user}", "gists_url": "https://api.github.com/users/mjwatkins2/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjwatkins2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjwatkins2/subscriptions", "organizations_url": "https://api.github.com/users/mjwatkins2/orgs", "repos_url": "https://api.github.com/users/mjwatkins2/repos", "events_url": "https://api.github.com/users/mjwatkins2/events{/privacy}", "received_events_url": "https://api.github.com/users/mjwatkins2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-11T03:09:56Z", "updated_at": "2019-12-12T05:46:28Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Example provided below\r\n- OS Platform and Distribution: Both Windows 10 and Google Colab\r\n- TensorFlow installed from binary\r\n- TensorFlow version: Both 2.0.0 and 2.1.0-rc0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\nThe output of pow(x, y) is not correct for higher order derivatives when x is 0 and when y is other than a single value. For case 2 below I get:\r\n[0 0 4]\r\n[[-2 1 10]]\r\n[[8 -nan 20]]\r\n[[-18 -nan 30]]\r\n[[24 -nan 24]]\r\n[[0 -nan 0]]\r\n\r\nFor case 1 the nan only shows up in the 5th derivative, which is still not great, but not as bad:\r\n[1 0 1]\r\n[[-4 0 4]]\r\n[[12 0 12]]\r\n[[-24 0 24]]\r\n[[24 24 24]]\r\n[[-0 -nan 0]]\r\n\r\n**Describe the expected behavior**\r\nThe output of this example for case 1 should be:\r\n[1 0 1]\r\n[[-4 0 4]]\r\n[[12 0 12]]\r\n[[-24 0 24]]\r\n[[24 24 24]]\r\n[[-0 0 0]]\r\n\r\nThe output of this example for case 2 should be:\r\n[0 0 4]\r\n[[-2 1 10]]\r\n[[8 0 20]]\r\n[[-18 0 30]]\r\n[[24 0 24]]\r\n[[0 0 0]]\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nx = tf.Variable([[-1.0], [0.0], [1.0]])\r\n\r\nwith tf.GradientTape(persistent=True) as t:\r\n    t.watch(x)\r\n    # case 1: y = x^4\r\n    # y = tf.reduce_sum(tf.pow(x, 4), axis=1) # gives nan for 5th derivative at x=0\r\n    # case 2: y = x + x^2 + x^3 + x^4\r\n    y = tf.reduce_sum(tf.pow(x, [[1, 2, 3, 4]]), axis=1) # gives nan for 2nd to 5th derivative at x=0\r\n    dy_dx = t.gradient(y, x)\r\n    d2y_dx2 = t.gradient(dy_dx, x)\r\n    d3y_dx3 = t.gradient(d2y_dx2, x)\r\n    d4y_dx4 = t.gradient(d3y_dx3, x)\r\n    d5y_dx5 = t.gradient(d4y_dx4, x)\r\ndel t\r\n\r\ntf.print(y)\r\ntf.print(tf.transpose(dy_dx)) # transpose only to fit on one line when printed\r\ntf.print(tf.transpose(d2y_dx2))\r\ntf.print(tf.transpose(d3y_dx3))\r\ntf.print(tf.transpose(d4y_dx4))\r\ntf.print(tf.transpose(d5y_dx5))\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35010", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35010/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35010/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35010/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35010", "id": 536102321, "node_id": "MDU6SXNzdWU1MzYxMDIzMjE=", "number": 35010, "title": "Memory leak with tf.py_function in eager mode using TF 2.0", "user": {"login": "workingloong", "id": 18071380, "node_id": "MDQ6VXNlcjE4MDcxMzgw", "avatar_url": "https://avatars1.githubusercontent.com/u/18071380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingloong", "html_url": "https://github.com/workingloong", "followers_url": "https://api.github.com/users/workingloong/followers", "following_url": "https://api.github.com/users/workingloong/following{/other_user}", "gists_url": "https://api.github.com/users/workingloong/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingloong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingloong/subscriptions", "organizations_url": "https://api.github.com/users/workingloong/orgs", "repos_url": "https://api.github.com/users/workingloong/repos", "events_url": "https://api.github.com/users/workingloong/events{/privacy}", "received_events_url": "https://api.github.com/users/workingloong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-12-11T02:25:18Z", "updated_at": "2020-01-13T17:16:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.14.6\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.3 64bit\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nI customize a Keras layer and use `tf.py_function` in the `call` of the layer. The used memory keeps increasing linearly with the number of calling the layer with inputs in eager mode. What's \r\n\r\n![image](https://user-images.githubusercontent.com/18071380/70585663-d5744a00-1bff-11ea-8d41-3649d035e9be.png)\r\n\r\n**Describe the expected behavior**\r\nThe memory should keep stable.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport psutil\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n\r\nclass TestLayer(tf.keras.layers.Layer):\r\n    def __init__(\r\n        self,\r\n        output_dim,\r\n        **kwargs\r\n    ):\r\n        super(TestLayer, self).__init__(**kwargs)\r\n        self.output_dim = output_dim\r\n\r\n    def build(self, input_shape):\r\n        self.built = True\r\n\r\n    def call(self, inputs):\r\n        batch_embedding = tf.py_function(\r\n            self.mock_output, inp=[inputs], Tout=tf.float64,\r\n        )\r\n        return batch_embedding\r\n\r\n    def mock_output(self, inputs):\r\n        shape = inputs.shape.as_list()\r\n        batch_size = shape[0]\r\n        return tf.constant(np.random.random((batch_size,self.output_dim)))\r\n\r\n\r\ntest_layer = TestLayer(1000)\r\n\r\nfor i in range(1000):\r\n    test_layer.call(tf.constant(np.random.randint(0,100,(256,10))))\r\n    if i % 100 == 0:\r\n        used_mem = psutil.virtual_memory().used\r\n        print('used memory: {} Mb'.format(used_mem / 1024 / 1024))\r\n```\r\n\r\n**other info**\r\nWe encounter this issue when developing a customized embedding layer in [ElasticDL](https://github.com/sql-machine-learning/elasticdl) and resolving the ElasticDL [issue 1567](https://github.com/sql-machine-learning/elasticdl/issues/1567)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35008", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35008/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35008/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35008/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35008", "id": 536084681, "node_id": "MDU6SXNzdWU1MzYwODQ2ODE=", "number": 35008, "title": "convert to tflite failed using tf.lite.TFLiteConverter.from_saved_model and validate failed", "user": {"login": "glevenc", "id": 15210643, "node_id": "MDQ6VXNlcjE1MjEwNjQz", "avatar_url": "https://avatars3.githubusercontent.com/u/15210643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glevenc", "html_url": "https://github.com/glevenc", "followers_url": "https://api.github.com/users/glevenc/followers", "following_url": "https://api.github.com/users/glevenc/following{/other_user}", "gists_url": "https://api.github.com/users/glevenc/gists{/gist_id}", "starred_url": "https://api.github.com/users/glevenc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glevenc/subscriptions", "organizations_url": "https://api.github.com/users/glevenc/orgs", "repos_url": "https://api.github.com/users/glevenc/repos", "events_url": "https://api.github.com/users/glevenc/events{/privacy}", "received_events_url": "https://api.github.com/users/glevenc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-12-11T01:17:40Z", "updated_at": "2020-02-21T18:43:29Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version:\r\n- Python version:\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nwhen i convert saved lstm tensorflow model to the tflite file and meets the error.\r\nthis is piece of code :\r\ndef create_LSTM_model(inputs):\r\n    W = {\r\n        \r\n        'hidden': tf.Variable(tf.keras.backend.random_normal([N_FEATURES, N_HIDDEN_UNITS])),\r\n        'output': tf.Variable(tf.keras.backend.random_normal([N_HIDDEN_UNITS, N_CLASSES]))\r\n        'output': tf.Variable(init_w_output)\r\n    }\r\n    biases = {\r\n        'hidden': tf.Variable(tf.keras.backend.random_normal([N_HIDDEN_UNITS], mean=1.0))\r\n        'output': tf.Variable(tf.keras.backend.random_normal([N_CLASSES]))\r\n    }\r\n\r\n    X = tf.transpose(inputs, [1, 0, 2])\r\n    X = tf.reshape(X, [-1, N_FEATURES])\r\n    hidden = tf.nn.relu(tf.matmul(X, W['hidden']) + biases['hidden'])\r\n    hidden = tf.split(hidden, N_TIME_STEPS, 0)\r\n\r\n    def get_a_cell(lstm_size, keep_prob):\r\n        lstm = tf.compat.v1.nn.rnn_cell.BasicLSTMCell(lstm_size)\r\n        drop = tf.compat.v1.nn.rnn_cell.DropoutWrapper(lstm, output_keep_prob=keep_prob)\r\n        return drop\r\n\r\n    # lstm_layers = [tf.compat.v1.nn.rnn_cell.BasicLSTMCell(N_HIDDEN_UNITS, forget_bias=1.0) for _ in range(2)]\r\n    lstm_size = N_HIDDEN_UNITS\r\n    keep_prob = 0.9\r\n    num_layers = 2\r\n    # lstm_layers = tf.compat.v1.nn.rnn_cell.MultiRNNCell([get_a_cell(lstm_size, keep_prob) for _ in range(num_layers)])\r\n    lstm_layers = tf.compat.v1.nn.rnn_cell.MultiRNNCell([get_a_cell(lstm_size, keep_prob) for _ in range(num_layers)])\r\n\r\n    outputs, _ = tf.compat.v1.nn.static_rnn(lstm_layers, hidden, dtype=tf.float32)\r\n    # keras.layers.RNN  outputs, _ = tf.keras.layers.RNN(lstm_layers, hidden, dtype=tf.float32)\r\n\r\n    # Get output for the last time step\r\n    lstm_last_output = outputs[-1]\r\n\r\n    return tf.matmul(lstm_last_output, W['output']) + biases['output']\r\n\r\n\r\ntf.compat.v1.reset_default_graph()\r\n\r\nX = tf.compat.v1.placeholder(tf.float32, [None, N_TIME_STEPS, N_FEATURES], name=\"input_X\")\r\nY = tf.compat.v1.placeholder(tf.float32, [None, N_CLASSES], name='input_Y')\r\n\r\npred_Y = create_LSTM_model(X)\r\ntf.identity(pred_Y, name=\"pred_Y\")\r\n\r\npred_softmax = tf.nn.softmax(pred_Y, name=\"pred_softmax\")\r\n\r\ntrain_count = len(X_train)\r\nL2_LOSS = 0.0015\r\n\r\nl2 = L2_LOSS * \\\r\n     sum(tf.nn.l2_loss(tf_var) for tf_var in tf.compat.v1.trainable_variables())\r\n\r\nloss = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(logits=pred_Y, labels=Y)) + l2\r\n# loss=tf.reduce_mean(tf.square(tf.reshape(pred,[-1,2])-tf.reshape(Y, [-1,2])))\r\ntf.identity(loss, name=\"saved_loss\")\r\n\r\n\r\nglobal_step = tf.Variable(0, trainable=False, name='global_step')\r\n\r\nlearning_rate = tf.compat.v1.train.exponential_decay(\r\n    LEARNING_RATE_BASE,\r\n    global_step,\r\n    train_count / BATCH_SIZE, LEARNING_RATE_DECAY)\r\n\r\ntf.identity(learning_rate, name=\"learning_rate\")\r\n\r\noptimizer = tf.compat.v1.train.AdamOptimizer(learning_rate=learning_rate).minimize(loss, global_step=global_step)\r\ntf.identity(loss, name=\"saved_optimizer\")\r\n\r\ncorrect_pred = tf.equal(tf.argmax(pred_softmax, 1), tf.argmax(Y, 1))\r\naccuracy = tf.reduce_mean(tf.cast(correct_pred, dtype=tf.float32), name='output_accuracy')\r\n\r\nhistory = dict(train_loss=[],\r\n               train_acc=[],\r\n               test_loss=[],\r\n               test_acc=[])\r\n\r\nsess = tf.compat.v1.InteractiveSession()\r\nsess.run(tf.compat.v1.global_variables_initializer())\r\n\r\nexport_simple_path = 'model_simple/'\r\nif os.path.exists(export_simple_path):\r\n    shutil.rmtree(export_simple_path)\r\n\r\ntf.compat.v1.saved_model.simple_save(sess,\r\n            export_simple_path,\r\n            inputs={\"input_X\": X},\r\n            outputs={\"pred_softmax\": pred_softmax})\r\nuse this to save the model\r\nand then i convert the .pb model to tflite with python API\r\n\r\nimport tensorflow as tf\r\n\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,\r\n                                       tf.lite.OpsSet.SELECT_TF_OPS]\r\ntflite_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\nbut got the error:\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, FULLY_CONNECTED, GREATER_EQUAL, LOGISTIC, MUL, SOFTMAX, SPLIT, TANH. Here is a list of operators for which you will need custom implementations: RandomUniform.\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\d\\.conda\\envs\\ai\\Scripts\\toco_from_protos.exe\\__main__.py\", line 7, in <module>\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\site-packages\\tensorflow_core\\lite\\toco\\python\\toco_from_protos.py\", line 89, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\site-packages\\tensorflow_core\\python\\platform\\app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\site-packages\\absl\\app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\site-packages\\absl\\app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"c:\\users\\d\\.conda\\envs\\ai\\lib\\site-packages\\tensorflow_core\\lite\\toco\\python\\toco_from_protos.py\", line 52, in execute\r\n    enable_mlir_converter)\r\nException: We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, FULLY_CONNECTED, GREATER_EQUAL, LOGISTIC, MUL, SOFTMAX, SPLIT, TANH. Here is a list of operators for which you will need custom implementations: RandomUniform.\r\n\r\nand then i add the\r\nconverter.allow_custom_ops=True\r\n\r\nthen i can convert to tflite (lstm.tflite) successfully\r\nbut then i use below command to validate my model then i got the errors:\r\n\r\ninterpreter = tf.lite.Interpreter(model_path=\"lstm.tflite\")\r\n\r\ninterpreter.allocate_tensors()\r\n\r\n>>> interpreter = tf.lite.Interpreter(model_path=\"D:\\Feature\\model_simple_1207\\lstm_har_1207.tflite\")\r\nINFO: Initialized TensorFlow Lite runtime.\r\n>>> interpreter.allocate_tensors()\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\d\\.conda\\envs\\ai\\lib\\site-packages\\tensorflow_core\\lite\\python\\interpreter.py\", line 244, in allocate_tensors\r\n    return self._interpreter.AllocateTensors()\r\n  File \"C:\\Users\\d\\.conda\\envs\\ai\\lib\\site-packages\\tensorflow_core\\lite\\python\\interpreter_wrapper\\tensorflow_wrap_interpreter_wrapper.py\", line 106, in AllocateTensors\r\n    return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\n**R**untimeError: Encountered unresolved custom op: RandomUniform.Node number 14 (RandomUniform) failed to prepare.****\r\n\r\ncould anyone  hlep with the issue?\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35007", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35007/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35007/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35007/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35007", "id": 536054584, "node_id": "MDU6SXNzdWU1MzYwNTQ1ODQ=", "number": 35007, "title": "Attention/AdditiveAttention Issue", "user": {"login": "nectario", "id": 22030060, "node_id": "MDQ6VXNlcjIyMDMwMDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/22030060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nectario", "html_url": "https://github.com/nectario", "followers_url": "https://api.github.com/users/nectario/followers", "following_url": "https://api.github.com/users/nectario/following{/other_user}", "gists_url": "https://api.github.com/users/nectario/gists{/gist_id}", "starred_url": "https://api.github.com/users/nectario/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nectario/subscriptions", "organizations_url": "https://api.github.com/users/nectario/orgs", "repos_url": "https://api.github.com/users/nectario/repos", "events_url": "https://api.github.com/users/nectario/events{/privacy}", "received_events_url": "https://api.github.com/users/nectario/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-12-10T23:33:21Z", "updated_at": "2019-12-13T21:02:03Z", "closed_at": null, "author_association": "NONE", "body": "I have the following functions to return two models:\r\n\r\n\r\n```\r\ndef get_question_model(self, embedding):\r\n        question_input = Input(shape=(None,), name='question_input')\r\n        question_embedding = embedding(question_input)\r\n\r\n        cnn_1d = Conv1D(128, 4, padding='same', activation='relu', strides=1)(question_embedding)\r\n        cnn_1d = AveragePooling1D(pool_size=3)(cnn_1d)\r\n\r\n        model = Model(question_input, cnn_1d)\r\n        return model\r\n\r\ndef get_sentence_model(self, embedding, question_model):\r\n        sentence_input = Input(shape=(None,),  name='sentence_input')\r\n        sentence_embedding = embedding(sentence_input)\r\n        cnn_1d = Conv1D(128, 4, padding=\"same\", activation='relu', strides=1)(sentence_embedding)\r\n        cnn_1d = AveragePooling1D(pool_size=3)(cnn_1d)\r\n\r\n        sentence_attention = AdditiveAttention()([cnn_1d, question_model])\r\n        model = Model(sentence_input, sentence_attention)\r\n        model.shape = model.output_shape\r\n        return model\r\n```\r\n\r\nAnd the functions are called:\r\n```\r\n   self.question_model = self.get_question_model(embedding)\r\n   self.sentence_model = self.get_sentence_model(embedding, self.question_model)\r\n```\r\n#####\r\n\r\nI get the following issue:\r\n\r\n\r\n```\r\n2019-12-10 18:17:01.848676: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 9371 MB memory) -> physical GPU (device: 0, name: TITAN V, pci bus id: 0000:83:00.0, compute capability: 7.0)\r\nTraceback (most recent call last):\r\n  File \"D:/Development/competitions/Kaggle/Tensorflow 2.0 - Q_a_A/tensorflow_2.0/QuestionAnswerContextAttention.py\", line 376, in <module>\r\n    qa_model.fit(input=input, output=y)\r\n  File \"D:/Development/competitions/Kaggle/Tensorflow 2.0 - Q_a_A/tensorflow_2.0/QuestionAnswerContextAttention.py\", line 152, in fit\r\n    self.model = self.get_model()\r\n  File \"D:/Development/competitions/Kaggle/Tensorflow 2.0 - Q_a_A/tensorflow_2.0/QuestionAnswerContextAttention.py\", line 123, in get_model\r\n    self.sentence_model = self.get_sentence_model(embedding, self.question_model)\r\n  File \"D:/Development/competitions/Kaggle/Tensorflow 2.0 - Q_a_A/tensorflow_2.0/QuestionAnswerContextAttention.py\", line 84, in get_sentence_model\r\n    sentence_attention = AdditiveAttention()([cnn_1d, question_model])\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\base_layer.py\", line 887, in __call__\r\n    self._maybe_build(inputs)\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\base_layer.py\", line 2141, in _maybe_build\r\n    self.build(input_shapes)\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\layers\\dense_attention.py\", line 406, in build\r\n    v_shape = tensor_shape.TensorShape(input_shape[1])\r\n**TypeError: 'NoneType' object is not subscriptable**\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35002", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35002/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35002/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35002/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35002", "id": 535855242, "node_id": "MDU6SXNzdWU1MzU4NTUyNDI=", "number": 35002, "title": "Inconsistent loading of saved model", "user": {"login": "fonnesbeck", "id": 81476, "node_id": "MDQ6VXNlcjgxNDc2", "avatar_url": "https://avatars3.githubusercontent.com/u/81476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fonnesbeck", "html_url": "https://github.com/fonnesbeck", "followers_url": "https://api.github.com/users/fonnesbeck/followers", "following_url": "https://api.github.com/users/fonnesbeck/following{/other_user}", "gists_url": "https://api.github.com/users/fonnesbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/fonnesbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fonnesbeck/subscriptions", "organizations_url": "https://api.github.com/users/fonnesbeck/orgs", "repos_url": "https://api.github.com/users/fonnesbeck/repos", "events_url": "https://api.github.com/users/fonnesbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/fonnesbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-10T16:48:03Z", "updated_at": "2019-12-11T19:52:54Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian Linux\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7.3\r\n\r\n**Describe the current behavior**\r\n\r\nI have several models saved using `model.save` as hdf5 objects. However, when I try to load them from a script via:\r\n\r\n```python\r\ntf.keras.models.load_model(DATA_DIR + \"models/{}.h5\".format(filename))\r\n```\r\n\r\nI get an I/O error:\r\n\r\n```\r\n\"Unable to open object (file read failed: time = Tue Dec 10 16:36:14 2019\\n, filename = '/home/fonnesbeck/models/Slider-rhb-rhp-attack.h5', file descriptor = 14, errno = 5, error message = 'Input/output error', buf = 0x7f642c733da0, total read size = 272, bytes this sub-read = 272, bytes actually read = 18446744073709551615, offset = 8443360)\"\r\n```\r\n\r\nYet, when I manually go in and import the file manually from the terminal, it works fine:\r\n\r\n```\r\n>>> import tensorflow as tf\r\n>>> tf.keras.models.load_model('Slider-rhb-rhp-attack.h5')\r\n2019-12-10 16:34:45.948071: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions tha\r\nt this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-12-10 16:34:46.355657: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2300000000 Hz\r\n2019-12-10 16:34:46.356406: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x557d96a7f470 executing \r\ncomputations on platform Host. Devices:\r\n2019-12-10 16:34:46.356451: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, De\r\nfault Version\r\n<tensorflow.python.keras.engine.sequential.Sequential object at 0x7fa474307400>\r\n```\r\n\r\nEven stranger, after having done the manual import, running the script works fine. this seems to happen with every new file.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35000", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35000/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35000/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35000/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35000", "id": 535764584, "node_id": "MDExOlB1bGxSZXF1ZXN0MzUxNDE4NTE3", "number": 35000, "title": "Add tests in TFLite micro for Float/Uint8/Int8 Tanh activation", "user": {"login": "giorgio-arenarm", "id": 52670029, "node_id": "MDQ6VXNlcjUyNjcwMDI5", "avatar_url": "https://avatars1.githubusercontent.com/u/52670029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giorgio-arenarm", "html_url": "https://github.com/giorgio-arenarm", "followers_url": "https://api.github.com/users/giorgio-arenarm/followers", "following_url": "https://api.github.com/users/giorgio-arenarm/following{/other_user}", "gists_url": "https://api.github.com/users/giorgio-arenarm/gists{/gist_id}", "starred_url": "https://api.github.com/users/giorgio-arenarm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giorgio-arenarm/subscriptions", "organizations_url": "https://api.github.com/users/giorgio-arenarm/orgs", "repos_url": "https://api.github.com/users/giorgio-arenarm/repos", "events_url": "https://api.github.com/users/giorgio-arenarm/events{/privacy}", "received_events_url": "https://api.github.com/users/giorgio-arenarm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-12-10T14:26:43Z", "updated_at": "2020-03-04T13:01:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35000", "html_url": "https://github.com/tensorflow/tensorflow/pull/35000", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35000.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35000.patch"}, "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34999", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34999/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34999/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34999/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34999", "id": 535736666, "node_id": "MDExOlB1bGxSZXF1ZXN0MzUxMzk1NjA4", "number": 34999, "title": "Extend tests in TFLite micro for conv and depth_conv to support dilat\u2026", "user": {"login": "giorgio-arenarm", "id": 52670029, "node_id": "MDQ6VXNlcjUyNjcwMDI5", "avatar_url": "https://avatars1.githubusercontent.com/u/52670029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giorgio-arenarm", "html_url": "https://github.com/giorgio-arenarm", "followers_url": "https://api.github.com/users/giorgio-arenarm/followers", "following_url": "https://api.github.com/users/giorgio-arenarm/following{/other_user}", "gists_url": "https://api.github.com/users/giorgio-arenarm/gists{/gist_id}", "starred_url": "https://api.github.com/users/giorgio-arenarm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giorgio-arenarm/subscriptions", "organizations_url": "https://api.github.com/users/giorgio-arenarm/orgs", "repos_url": "https://api.github.com/users/giorgio-arenarm/repos", "events_url": "https://api.github.com/users/giorgio-arenarm/events{/privacy}", "received_events_url": "https://api.github.com/users/giorgio-arenarm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-12-10T13:39:57Z", "updated_at": "2020-03-19T08:18:58Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34999", "html_url": "https://github.com/tensorflow/tensorflow/pull/34999", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34999.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34999.patch"}, "body": "\u2026ion != 1"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34992", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34992/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34992/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34992/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34992", "id": 535625017, "node_id": "MDU6SXNzdWU1MzU2MjUwMTc=", "number": 34992, "title": "How to convert ByteBuffer to Bitmap Image?", "user": {"login": "nauyan", "id": 16066688, "node_id": "MDQ6VXNlcjE2MDY2Njg4", "avatar_url": "https://avatars3.githubusercontent.com/u/16066688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nauyan", "html_url": "https://github.com/nauyan", "followers_url": "https://api.github.com/users/nauyan/followers", "following_url": "https://api.github.com/users/nauyan/following{/other_user}", "gists_url": "https://api.github.com/users/nauyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/nauyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nauyan/subscriptions", "organizations_url": "https://api.github.com/users/nauyan/orgs", "repos_url": "https://api.github.com/users/nauyan/repos", "events_url": "https://api.github.com/users/nauyan/events{/privacy}", "received_events_url": "https://api.github.com/users/nauyan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "terryheo", "id": 2908505, "node_id": "MDQ6VXNlcjI5MDg1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2908505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryheo", "html_url": "https://github.com/terryheo", "followers_url": "https://api.github.com/users/terryheo/followers", "following_url": "https://api.github.com/users/terryheo/following{/other_user}", "gists_url": "https://api.github.com/users/terryheo/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryheo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryheo/subscriptions", "organizations_url": "https://api.github.com/users/terryheo/orgs", "repos_url": "https://api.github.com/users/terryheo/repos", "events_url": "https://api.github.com/users/terryheo/events{/privacy}", "received_events_url": "https://api.github.com/users/terryheo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "terryheo", "id": 2908505, "node_id": "MDQ6VXNlcjI5MDg1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2908505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryheo", "html_url": "https://github.com/terryheo", "followers_url": "https://api.github.com/users/terryheo/followers", "following_url": "https://api.github.com/users/terryheo/following{/other_user}", "gists_url": "https://api.github.com/users/terryheo/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryheo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryheo/subscriptions", "organizations_url": "https://api.github.com/users/terryheo/orgs", "repos_url": "https://api.github.com/users/terryheo/repos", "events_url": "https://api.github.com/users/terryheo/events{/privacy}", "received_events_url": "https://api.github.com/users/terryheo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-12-10T10:10:34Z", "updated_at": "2019-12-13T07:52:36Z", "closed_at": null, "author_association": "NONE", "body": "I am working on creating an image super-resolution application that uses a TensorFlow Lite model. The model gives the output Image in the form of ByteBuffer and I convert the ByteBuffer to Bitmap. Next, I display this Bitmap but nothing shows up. The code I am using can be seen below:\r\n\r\n```\r\nByteBuffer out = ByteBuffer.allocate(4 * 384 * 384 * 3);\r\ntflite.run(byteBuffer,out);\r\n\r\nbyte[] imageBytes= new byte[out.remaining()];\r\nout.get(imageBytes);\r\nfinal Bitmap outPut_Image = BitmapFactory.decodeByteArray(imageBytes,0,imageBytes.length);\r\n//Toast.makeText(this,tflite.toString(),Toast.LENGTH_LONG).show();\r\nToast.makeText(this, \"Working\",Toast.LENGTH_LONG).show();\r\nImageView imageView = (ImageView) this.findViewById(R.id.imageView2);\r\nimageView.setImageBitmap(outPut_Image);\r\n```\r\nPlease advise me what I am doing wrong here."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34991", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34991/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34991/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34991/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34991", "id": 535614122, "node_id": "MDU6SXNzdWU1MzU2MTQxMjI=", "number": 34991, "title": "_pywrap_tensorflow_internal.so: cannot open shared object file: No such file or directory", "user": {"login": "gswebspace", "id": 13507015, "node_id": "MDQ6VXNlcjEzNTA3MDE1", "avatar_url": "https://avatars2.githubusercontent.com/u/13507015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gswebspace", "html_url": "https://github.com/gswebspace", "followers_url": "https://api.github.com/users/gswebspace/followers", "following_url": "https://api.github.com/users/gswebspace/following{/other_user}", "gists_url": "https://api.github.com/users/gswebspace/gists{/gist_id}", "starred_url": "https://api.github.com/users/gswebspace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gswebspace/subscriptions", "organizations_url": "https://api.github.com/users/gswebspace/orgs", "repos_url": "https://api.github.com/users/gswebspace/repos", "events_url": "https://api.github.com/users/gswebspace/events{/privacy}", "received_events_url": "https://api.github.com/users/gswebspace/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-10T09:51:41Z", "updated_at": "2020-02-10T08:45:44Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): [Ubuntu 18.04.3 LTS](https://wiki.odroid.com/odroid-c2/os_images/ubuntu/v3.1) on ODROID C2\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Not a mobile but the hardware is ODROID C2\r\n- TensorFlow installed from (source or binary): source (cross-compiled for ODROID C2)\r\n- TensorFlow version: 2.0.0\r\n- Python version: 3.6.9\r\n- Installed using virtualenv? pip? conda?: Using virtualenv, installed using pip, with a bazel built .whl file\r\n- Bazel version (if compiling from source): 0.26.0\r\n- GCC/Compiler version (if compiling from source): 7.4.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: Mali450MP3 (But GPU not used)\r\n\r\n\r\n\r\n**Describe the problem**\r\nBazel build from source and pip install successful, but doing `import tensorflow` results in following error -\r\n```\r\nImportError: /home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so: cannot open shared object file: No such file or directory\r\n```\r\nThe file is not missing, it exists.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n- Setup a docker container for Ubuntu 18.04.3 and open a terminal into it\r\n- Follow all instructions from [official build from source docs](https://www.tensorflow.org/install/source)\r\n    - Use `python3-dev  python3-pip`\r\n    - Use `virtualenv` to install python dependencies\r\n    - Install Bazel binary directly (no bazelisk), version 0.26.0 and add it to your $PATH\r\n    - Do not use GPU support\r\n    - Clone Tensorflow from official Github repo, and use tag v2.0.0\r\n    - During `./configure`, say Yes to `XLA JIT` and No to everything else\r\n    - During `./configure`, Set the optimization flag to `-march=armv8-a+crc`\r\n    - Use Bazel build command : `bazel build --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package`\r\n- Transfer the built `.whl` to ODROID C2 and rename `tensorflow-2.0.0-cp36-cp36m-linux_x86_64.whl` to `tensorflow-2.0.0-cp36-cp36m-linux_aarch64.whl`\r\n- Setup Python on the device using `sudo apt-get install python3-dev python3-pip`\r\n- Setup a virtualenv using `virtualenv -p python3.6 ./venv` and activate it\r\n- Install Tensorflow using `pip install tensorflow-2.0.0-cp36-cp36m-linux_aarch64.whl`\r\n    - Install HDF5 system package dependency using `sudo apt-get install pkg-config libhdf5-100 libhdf5-dev`\r\n- Run Python interpreter and execute `import tensorflow`\r\n- You will get the above error regarding `_pywrap_tensorflow_internal.so`\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n- The `/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so` file exists and is 223M in size\r\n- Output of `ldd /home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so` gives `not a dynamic executable`\r\n- Full error Traceback\r\n```\r\n>>> import tensorflow\r\nTraceback (most recent call last):\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/home/rmc/code/venv/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/home/rmc/code/venv/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so: cannot open shared object file: No such file or directory\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n    from tensorflow_core import *\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/home/rmc/code/venv/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/home/rmc/code/venv/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/home/rmc/code/venv/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: /home/rmc/code/venv/lib/python3.6/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so: cannot open shared object file: No such file or directory\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34975", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34975/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34975/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34975/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34975", "id": 535355498, "node_id": "MDU6SXNzdWU1MzUzNTU0OTg=", "number": 34975, "title": "[TF 2.0 API Docs] `tf.keras.callbacks.LearningRateScheduler` (Very small update)", "user": {"login": "shun-lin", "id": 16867893, "node_id": "MDQ6VXNlcjE2ODY3ODkz", "avatar_url": "https://avatars0.githubusercontent.com/u/16867893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shun-lin", "html_url": "https://github.com/shun-lin", "followers_url": "https://api.github.com/users/shun-lin/followers", "following_url": "https://api.github.com/users/shun-lin/following{/other_user}", "gists_url": "https://api.github.com/users/shun-lin/gists{/gist_id}", "starred_url": "https://api.github.com/users/shun-lin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shun-lin/subscriptions", "organizations_url": "https://api.github.com/users/shun-lin/orgs", "repos_url": "https://api.github.com/users/shun-lin/repos", "events_url": "https://api.github.com/users/shun-lin/events{/privacy}", "received_events_url": "https://api.github.com/users/shun-lin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-09T21:42:36Z", "updated_at": "2019-12-11T03:21:03Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nDoc Link:\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/callbacks/LearningRateScheduler\r\nCode Link:\r\nhttps://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/keras/callbacks.py#L1311-L1358\r\n\r\n## Description of issue (what needs changing):\r\n\r\n### Parameters\r\n\r\nThe next API for `scheduler` parameter of `LearningRateScheduler` takes in 2 parameters, `epoch` and `lr` (learning rate) instead of just `epoch`, this is evident in the `on_epoch_begin` of the `LearningRateScheduler` method.\r\n\r\nThe documentation for this method is still outdated, the docs and the example code still shows the `scheduler` function takes in only `epoch` instead of both `epoch` and `lr`. I think the doc should be updated to reflect the new API.\r\n\r\nProposed change to the doc:\r\n\r\n1) update the description of `scheduler`: \r\n\r\n`\r\nschedule: a function that takes an epoch index as input (integer, indexed from 0) and current learning rate and returns a new learning rate as output (float).\r\n`\r\n(copied from the doc from keras.io)\r\n\r\n2) update the example usage to include a `scheduler` that utilize the current learning rate as well.\r\n\r\nI hope this is helpful! Happy to contribute if needed.\r\n\r\n### Submit a pull request? Yes, if this should be updated.\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs,\r\ndocs API guide: https://www.tensorflow.org/community/contribute/docs_ref and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34968", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34968/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34968/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34968/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34968", "id": 535059842, "node_id": "MDU6SXNzdWU1MzUwNTk4NDI=", "number": 34968, "title": "Classification signature on tf serving.", "user": {"login": "stefanondisponibile", "id": 20441825, "node_id": "MDQ6VXNlcjIwNDQxODI1", "avatar_url": "https://avatars3.githubusercontent.com/u/20441825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefanondisponibile", "html_url": "https://github.com/stefanondisponibile", "followers_url": "https://api.github.com/users/stefanondisponibile/followers", "following_url": "https://api.github.com/users/stefanondisponibile/following{/other_user}", "gists_url": "https://api.github.com/users/stefanondisponibile/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefanondisponibile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefanondisponibile/subscriptions", "organizations_url": "https://api.github.com/users/stefanondisponibile/orgs", "repos_url": "https://api.github.com/users/stefanondisponibile/repos", "events_url": "https://api.github.com/users/stefanondisponibile/events{/privacy}", "received_events_url": "https://api.github.com/users/stefanondisponibile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-09T16:57:59Z", "updated_at": "2020-02-25T13:07:42Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): `no`\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): `Ubuntu 18.04`\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: `no`\r\n- TensorFlow installed from (source or binary): `no`\r\n- TensorFlow version (use command below): `2.0.0`\r\n- Python version: `3.7.3`\r\n- Bazel version (if compiling from source): `-`\r\n- GCC/Compiler version (if compiling from source): `-`\r\n- CUDA/cuDNN version: `-`\r\n- GPU model and memory: `-`\r\n\r\n**Describe the current behavior**\r\n\r\nIt seem currently *not* possible to export a `classify` signature to use within `Tensorflow Serving`.\r\n\r\n**Describe the expected behavior**\r\nIt should be possible to export a `classify` signature to use within `Tensorflow Serving`.\r\nI was able to experience the issue also by exporting directly a `tf.Module` and a subclassed `tf.Model`. In [this](https://github.com/tensorflow/serving/issues/1420#issuecomment-552475340) comment I was also wondering about both the `inference` and `classify` signatures being *deprecated* since it looks like in [_generate_signatures](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/saved_model/save.py#L466) the `method_name` is assigned to `signature_constants.PREDICT_METHOD_NAME`.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nmodel = tf.keras.Sequential([\r\n    tf.keras.layers.Dense(2, activation=\"softmax\"),\r\n])\r\nmodel.compile(optimizer=\"Adam\", loss=\"categorical_crossentropy\", metrics=[\"accuracy\"])\r\nX = [0.42]\r\nY = [[0, 1]]\r\nmodel.fit(X, Y, epochs=1)\r\npred_before = model.predict(X)\r\nprint(f\"*** pred : {pred_before} ***\")\r\nmodel.save(\"./mymodel/1\", save_format=\"tf\")\r\nmodel = tf.keras.models.load_model(\"./mymodel/1\")\r\nmodel.predict([X])\r\nprint(f\"*** signatures : {model.signatures} ***\")\r\npred_after = model([X])\r\nnp.testing.assert_almost_equal(pred_before, pred_after)\r\nprint(model.predict([X]))\r\n```\r\n\r\n```bash\r\ndocker run -p 8501:8501 -v /path/to/mymodel:/models/mymodel -e MODEL_NAME=mymodel --name serving_tmp tensorflow/serving\r\n```\r\n\r\n```\r\ncurl -XPOST http://localhost:8501/v1/models/mymodel:classify -d '{\"examples\": [{}]}'\r\n# { \"error\": \"Expected classification signature method_name to be tensorflow/serving/classify. Was: tensorflow/serving/predict\" }\r\n```\r\n\r\n**Other info / logs**\r\n```\r\n{ \"error\": \"Expected classification signature method_name to be tensorflow/serving/classify. Was: tensorflow/serving/predict\" }\r\n```\r\n\r\nIf I modify `tensorflow_core/python/saved_model/save.py@469`\r\n```python\r\n# from\r\nmethod_name=signature_constants.PREDICT_METHOD_NAME)\r\n\r\n# to\r\nmethod_name=signature_constants.CLASSIFY_METHOD_NAME)\r\n``` \r\n\r\nI'm then able to get what expected:\r\n```\r\ncurl -XPOST http://localhost:8501/v1/models/mymodel:classify -d '{\"examples\": [{}]}'\r\n{ \"error\": \"No classification inputs found in SignatureDef: inputs {\\n  key: \\\"text\\\"\\n  value {\\n    name: \\\"serving_default_text:0\\\"\\n    dtype: DT_FLOAT\\n    tensor_shape {\\n      dim {\\n        size: -1\\n      }\\n      dim {\\n        size: -1\\n      }\\n    }\\n  }\\n}\\noutputs {\\n  key: \\\"probabilities\\\"\\n  value {\\n    name: \\\"StatefulPartitionedCall_2:0\\\"\\n    dtype: DT_FLOAT\\n    tensor_shape {\\n      dim {\\n        size: -1\\n      }\\n      dim {\\n        size: 99\\n      }\\n    }\\n  }\\n}\\nmethod_name: \\\"tensorflow/serving/classify\\\"\\n\" }\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34966", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34966/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34966/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34966/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34966", "id": 535036544, "node_id": "MDU6SXNzdWU1MzUwMzY1NDQ=", "number": 34966, "title": "Document about masking does not have previous masks information", "user": {"login": "hoangcuong2011", "id": 8759715, "node_id": "MDQ6VXNlcjg3NTk3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/8759715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoangcuong2011", "html_url": "https://github.com/hoangcuong2011", "followers_url": "https://api.github.com/users/hoangcuong2011/followers", "following_url": "https://api.github.com/users/hoangcuong2011/following{/other_user}", "gists_url": "https://api.github.com/users/hoangcuong2011/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoangcuong2011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoangcuong2011/subscriptions", "organizations_url": "https://api.github.com/users/hoangcuong2011/orgs", "repos_url": "https://api.github.com/users/hoangcuong2011/repos", "events_url": "https://api.github.com/users/hoangcuong2011/events{/privacy}", "received_events_url": "https://api.github.com/users/hoangcuong2011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-09T16:19:00Z", "updated_at": "2019-12-11T17:02:33Z", "closed_at": null, "author_association": "NONE", "body": "Greetings,\r\n\r\nWhile the document about [masking](https://www.tensorflow.org/guide/keras/masking_and_padding) is super good, I found it misses an important point: how the mask associated with the previous mask in compute_mask(input, previous_mask)\r\n\r\nSpecifically, let us assume we have two inputs A and B. I wrote a custom Add layers:\r\n\r\n```\r\nclass CustomAddingWithMasking(tf.keras.layers.Layer):\r\n    def __init__(self, masking_boolean, **kwargs):\r\n        super(CustomAddingWithMasking, self).__init__(**kwargs)\r\n\r\n    def call(self, inputs):\r\n        return inputs[0] + inputs[1]\r\n    \r\n    def compute_mask(self, inputs, mask=None):\r\n        return mask\r\n```\r\n\r\nHere, I want to compute the sum of two tensors. Let us also assume that A and B have their own masks, which could be different to each other. Because we technically have two \"previous masks\" (from A and B separately), I don't know how the mask parameter in compute_mask was received. Is it the OR (or AND?) operation between mask of A and mask of B?\r\n\r\nThose things are not clear as well as not documented well."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34965", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34965/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34965/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34965/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34965", "id": 535006137, "node_id": "MDU6SXNzdWU1MzUwMDYxMzc=", "number": 34965, "title": "Keras Callback log entry wrong documented", "user": {"login": "marcj", "id": 450980, "node_id": "MDQ6VXNlcjQ1MDk4MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/450980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcj", "html_url": "https://github.com/marcj", "followers_url": "https://api.github.com/users/marcj/followers", "following_url": "https://api.github.com/users/marcj/following{/other_user}", "gists_url": "https://api.github.com/users/marcj/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcj/subscriptions", "organizations_url": "https://api.github.com/users/marcj/orgs", "repos_url": "https://api.github.com/users/marcj/repos", "events_url": "https://api.github.com/users/marcj/events{/privacy}", "received_events_url": "https://api.github.com/users/marcj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-09T15:29:00Z", "updated_at": "2019-12-12T00:30:41Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/callbacks/Callback\r\n\r\n\r\n> on_epoch_end: logs include `acc` and `loss`, and\r\n>    optionally include `val_loss`\r\n>    (if validation is enabled in `fit`), and `val_acc`\r\n>    (if validation and accuracy monitoring are enabled).\r\n\r\nand\r\n\r\n> on_batch_end: logs include `loss`, and optionally `acc`\r\n\r\nThis is correct for the original Keras implementation. However, in tf2.keras callbacks get `accuracy` and `val_accuracy` instead of the short documented versions `acc`/`val_acc`. Either the implementation is wrong or the documentation.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34964", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34964/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34964/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34964/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34964", "id": 534983402, "node_id": "MDU6SXNzdWU1MzQ5ODM0MDI=", "number": 34964, "title": "Add K Medoids Estimator to tf canned estimators", "user": {"login": "tambulkar", "id": 28329861, "node_id": "MDQ6VXNlcjI4MzI5ODYx", "avatar_url": "https://avatars2.githubusercontent.com/u/28329861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tambulkar", "html_url": "https://github.com/tambulkar", "followers_url": "https://api.github.com/users/tambulkar/followers", "following_url": "https://api.github.com/users/tambulkar/following{/other_user}", "gists_url": "https://api.github.com/users/tambulkar/gists{/gist_id}", "starred_url": "https://api.github.com/users/tambulkar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tambulkar/subscriptions", "organizations_url": "https://api.github.com/users/tambulkar/orgs", "repos_url": "https://api.github.com/users/tambulkar/repos", "events_url": "https://api.github.com/users/tambulkar/events{/privacy}", "received_events_url": "https://api.github.com/users/tambulkar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-12-09T14:53:14Z", "updated_at": "2020-03-03T06:40:29Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nhttps://en.wikipedia.org/wiki/K-medoids\r\nBasically same as https://github.com/tensorflow/estimator/blob/master/tensorflow_estimator/python/estimator/canned/kmeans.py except when updating centroid use median rather than mean.\r\n\r\n**Will this change the current api? How?**\r\nNo, it should just add functionality\r\n\r\n**Who will benefit with this feature?**\r\nAnyone who wants to use K-medoids clustering\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34961", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34961/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34961/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34961/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34961", "id": 534915519, "node_id": "MDU6SXNzdWU1MzQ5MTU1MTk=", "number": 34961, "title": "EfficientDet: Are you going to implement this in the object detection API?", "user": {"login": "TimoK93", "id": 34896723, "node_id": "MDQ6VXNlcjM0ODk2NzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/34896723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimoK93", "html_url": "https://github.com/TimoK93", "followers_url": "https://api.github.com/users/TimoK93/followers", "following_url": "https://api.github.com/users/TimoK93/following{/other_user}", "gists_url": "https://api.github.com/users/TimoK93/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimoK93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimoK93/subscriptions", "organizations_url": "https://api.github.com/users/TimoK93/orgs", "repos_url": "https://api.github.com/users/TimoK93/repos", "events_url": "https://api.github.com/users/TimoK93/events{/privacy}", "received_events_url": "https://api.github.com/users/TimoK93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-09T13:01:16Z", "updated_at": "2019-12-10T22:17:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI read about this new Network topology: [https://arxiv.org/pdf/1911.09070.pdf](https://arxiv.org/pdf/1911.09070.pdf ) \r\n\r\nIt seems to work precisely and fast. Are you going to implement this new topology to your framework?\r\n\r\n**Will this change the current api? How?**\r\nPossible\r\n\r\n**Who will benefit with this feature?**\r\nEveryone who works with object detectors!\r\n\r\n**Any Other info.**\r\nIf the answer is yes: will there be a quantized version for TPU inference?\r\n\r\nThanks in advance,\r\nTimo"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34955", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34955/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34955/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34955/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34955", "id": 534735467, "node_id": "MDU6SXNzdWU1MzQ3MzU0Njc=", "number": 34955, "title": "DepthwiseConv in lite/kernels/internal/reference/depthwiseconv_float.h can be optimized better", "user": {"login": "yurivict", "id": 271906, "node_id": "MDQ6VXNlcjI3MTkwNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/271906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yurivict", "html_url": "https://github.com/yurivict", "followers_url": "https://api.github.com/users/yurivict/followers", "following_url": "https://api.github.com/users/yurivict/following{/other_user}", "gists_url": "https://api.github.com/users/yurivict/gists{/gist_id}", "starred_url": "https://api.github.com/users/yurivict/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yurivict/subscriptions", "organizations_url": "https://api.github.com/users/yurivict/orgs", "repos_url": "https://api.github.com/users/yurivict/repos", "events_url": "https://api.github.com/users/yurivict/events{/privacy}", "received_events_url": "https://api.github.com/users/yurivict/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-09T07:13:00Z", "updated_at": "2019-12-10T05:05:07Z", "closed_at": null, "author_association": "NONE", "body": "These two lines https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/kernels/internal/reference/depthwiseconv_float.h#L62 can be moved up, because they only depend on out_x/out_y, there's no need to compute them per input depth/depth_multiplier.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34954", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34954/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34954/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34954/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34954", "id": 534732604, "node_id": "MDU6SXNzdWU1MzQ3MzI2MDQ=", "number": 34954, "title": "Keras MobilenetV3 weights ", "user": {"login": "SanthoshRajendiran", "id": 41156980, "node_id": "MDQ6VXNlcjQxMTU2OTgw", "avatar_url": "https://avatars3.githubusercontent.com/u/41156980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SanthoshRajendiran", "html_url": "https://github.com/SanthoshRajendiran", "followers_url": "https://api.github.com/users/SanthoshRajendiran/followers", "following_url": "https://api.github.com/users/SanthoshRajendiran/following{/other_user}", "gists_url": "https://api.github.com/users/SanthoshRajendiran/gists{/gist_id}", "starred_url": "https://api.github.com/users/SanthoshRajendiran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SanthoshRajendiran/subscriptions", "organizations_url": "https://api.github.com/users/SanthoshRajendiran/orgs", "repos_url": "https://api.github.com/users/SanthoshRajendiran/repos", "events_url": "https://api.github.com/users/SanthoshRajendiran/events{/privacy}", "received_events_url": "https://api.github.com/users/SanthoshRajendiran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-09T07:05:56Z", "updated_at": "2019-12-16T06:10:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nTensorflow MobilenetV3 code and checkpoints(.ckpt, .pb, .tflite) have been provided. What changes need to be incorporated to use the model, in Keras. As of now, Keras supports applications till MobilenetV2, and not MobilenetV3. If provided, it will be easier for model loading and usage as it is. \r\n\r\n**Will this change the current api? How?**\r\nNo. It will be an update to the current scenario.\r\n\r\n**Who will benefit with this feature?**\r\nUsers of Tensorflow and Keras\r\n\r\n**Any Other info.**\r\nNIL"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34953", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34953/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34953/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34953/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34953", "id": 534694495, "node_id": "MDU6SXNzdWU1MzQ2OTQ0OTU=", "number": 34953, "title": "A question about PSNR implementation in tensorflow 2.0", "user": {"login": "wukong4430", "id": 14346086, "node_id": "MDQ6VXNlcjE0MzQ2MDg2", "avatar_url": "https://avatars0.githubusercontent.com/u/14346086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wukong4430", "html_url": "https://github.com/wukong4430", "followers_url": "https://api.github.com/users/wukong4430/followers", "following_url": "https://api.github.com/users/wukong4430/following{/other_user}", "gists_url": "https://api.github.com/users/wukong4430/gists{/gist_id}", "starred_url": "https://api.github.com/users/wukong4430/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wukong4430/subscriptions", "organizations_url": "https://api.github.com/users/wukong4430/orgs", "repos_url": "https://api.github.com/users/wukong4430/repos", "events_url": "https://api.github.com/users/wukong4430/events{/privacy}", "received_events_url": "https://api.github.com/users/wukong4430/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-09T05:09:44Z", "updated_at": "2020-01-23T15:34:37Z", "closed_at": null, "author_association": "NONE", "body": "This template is for miscellaneous issues not covered by the other issue categories.\r\n\r\nFor questions on how to work with TensorFlow, or support for problems that are not verified bugs in TensorFlow, please go to [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\r\n\r\nIf you are reporting a vulnerability, please use the [dedicated reporting process](https://github.com/tensorflow/tensorflow/blob/master/SECURITY.md).\r\n\r\nFor high-level discussions about TensorFlow, please post to discuss@tensorflow.org, for questions about the development or internal workings of TensorFlow, or if you would like to know how to contribute to TensorFlow, please post to developers@tensorflow.org.\r\n  \r\nI am working on some image processes using PSNR ( [tf.image.psnr](https://www.tensorflow.org/api_docs/python/tf/image/psnr)), but always I\r\ngot results larger than what I expected. Then I check the source code and I\r\nfind\r\n\r\n\r\n```\r\npsnr_val = math_ops.subtract(\r\n\r\n20 * math_ops.log(max_val) / math_ops.log(10.0),\r\n\r\nnp.float32(10 / np.log(10)) * math_ops.log(mse),\r\n\r\nname='psnr')\r\n```\r\n\r\nCompare to the standard PSNR algorithm, its formula as follows:\r\n\r\n![image](https://user-images.githubusercontent.com/14346086/70408961-03814f00-1a85-11ea-8df2-8c0f470e86f0.png)\r\n\r\n\r\nI wonder why there is np.log(10) in the tensorflow implementation rather\r\nthan np.log10(10)? Or is there anything I get wrong?\r\n\r\nThanks for any help.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34946", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34946/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34946/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34946/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34946", "id": 534594689, "node_id": "MDU6SXNzdWU1MzQ1OTQ2ODk=", "number": 34946, "title": "Does TensorFlow 2.x still need the bazel build option of --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" ?", "user": {"login": "shizukanaskytree", "id": 30033705, "node_id": "MDQ6VXNlcjMwMDMzNzA1", "avatar_url": "https://avatars0.githubusercontent.com/u/30033705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shizukanaskytree", "html_url": "https://github.com/shizukanaskytree", "followers_url": "https://api.github.com/users/shizukanaskytree/followers", "following_url": "https://api.github.com/users/shizukanaskytree/following{/other_user}", "gists_url": "https://api.github.com/users/shizukanaskytree/gists{/gist_id}", "starred_url": "https://api.github.com/users/shizukanaskytree/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shizukanaskytree/subscriptions", "organizations_url": "https://api.github.com/users/shizukanaskytree/orgs", "repos_url": "https://api.github.com/users/shizukanaskytree/repos", "events_url": "https://api.github.com/users/shizukanaskytree/events{/privacy}", "received_events_url": "https://api.github.com/users/shizukanaskytree/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-08T20:19:36Z", "updated_at": "2019-12-10T08:47:56Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No.\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version:  v2.1.0-rc0 \r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): bazel 1.2.1\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\n- CUDA/cuDNN version: CUDA 10.0 / cuDNN 7\r\n- GPU model and memory: 1080Ti, ~11GB\r\n\r\n**Describe the problem**\r\n\r\nAccording to the official doc in section **TensorFlow 2.x** from https://www.tensorflow.org/install/source#tensorflow_2x, to build the TF 2.X via bazel \r\n\r\n```\r\nbazel build //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nDo we need the bazel option of --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" ?\r\n\r\nThe [subsection: Bazel build options](https://www.tensorflow.org/install/source#bazel_build_options) under section **TensorFlow 1.x** states that \r\n\r\n> The official TensorFlow packages are built with GCC 4 and use the older ABI. For GCC 5 and later, make your build compatible with the older ABI using: --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\". ABI compatibility ensures that custom ops built against the official TensorFlow package continue to work with the GCC 5 built package.\r\n\r\nHowever,  `The official TensorFlow packages ` link includes TF 2.X. \r\nSo, does TensorFlow 2.x still need the bazel option of --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" ?\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n> The official TensorFlow packages are built with GCC 4 and use the older ABI. For GCC 5 and later, make your build compatible with the older ABI using: --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\". ABI compatibility ensures that custom ops built against the official TensorFlow package continue to work with the GCC 5 built package.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34942", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34942/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34942/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34942/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34942", "id": 534562100, "node_id": "MDU6SXNzdWU1MzQ1NjIxMDA=", "number": 34942, "title": "Memory leak with tf.shuffle, doesn't release buffer memory", "user": {"login": "kindernerd", "id": 36913314, "node_id": "MDQ6VXNlcjM2OTEzMzE0", "avatar_url": "https://avatars1.githubusercontent.com/u/36913314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kindernerd", "html_url": "https://github.com/kindernerd", "followers_url": "https://api.github.com/users/kindernerd/followers", "following_url": "https://api.github.com/users/kindernerd/following{/other_user}", "gists_url": "https://api.github.com/users/kindernerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/kindernerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kindernerd/subscriptions", "organizations_url": "https://api.github.com/users/kindernerd/orgs", "repos_url": "https://api.github.com/users/kindernerd/repos", "events_url": "https://api.github.com/users/kindernerd/events{/privacy}", "received_events_url": "https://api.github.com/users/kindernerd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-08T16:01:55Z", "updated_at": "2020-01-03T06:28:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution Linux Ubuntu 16.04\r\n- Python: 2.7.17 |Anaconda, Inc.| (default, Oct 21 2019, 19:04:46) [GCC 7.3.0]\r\n- Tensorflow: 1.12.0\r\n- Numpy: 1.16.5\r\n- GPU: GeForce RTX 2080 Ti\r\n- CUDA: 9.2\r\n\r\n**Describe the current behavior**\r\nCPU memory gradually increase after each epoch until the program restarts, i suspect that dataset.shuffle doesn't release the buffer memory. Tested with tf 1.15, same situation.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nclass ASRDataGenerator(object):\r\n    def __init__(self,num):\r\n        self.num = num\r\n    def __call__(self):\r\n        for i in range(self.num):\r\n            for j in range(106):\r\n                yield 'a','b',np.random.randn(100,120)\r\n\r\nclass TFASRDataSet(object):\r\n    def __init__(self,num,batch_size):\r\n\r\n        self.num = num\r\n        self.batch_size = batch_size\r\n        self.asrDataGenerator = ASRDataGenerator(num)\r\n        \r\n    def setDataSetIterator(self):\r\n        \r\n        dataset = tf.data.Dataset.from_generator(self.asrDataGenerator, (tf.string,tf.string,tf.float32))\r\n        dataset = dataset.shuffle(30000)\r\n        dataset = dataset.map(lambda s1,s2,feat: [s1,s2,feat])\r\n        dataset = dataset.batch(self.batch_size, drop_remainder=True)\r\n        self.iterator = dataset.make_initializable_iterator()\r\n        \r\ntest_tfASRDataSet = TFASRDataSet(248,192)\r\ntest_tfASRDataSet.setDataSetIterator()\r\ntest_iter = test_tfASRDataSet.iterator\r\ntest_next = test_iter.get_next()   \r\n\r\nrun_config = tf.ConfigProto()\r\nrun_config.gpu_options.allow_growth = True\r\nrun_config.allow_soft_placement = True\r\n\r\nwith tf.Session(config=run_config) as sess:\r\n\r\n    for i in range(100):\r\n\r\n        sess.run(test_iter.initializer)\r\n        \r\n        while True:\r\n            try:\r\n                loss_list = sess.run([test_next])\r\n                print(len(loss_list[0]))\r\n            except tf.errors.OutOfRangeError:\r\n                print(\"train epoch %d finish\" % (i+1))\r\n                break\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34938", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34938/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34938/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34938/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34938", "id": 534512459, "node_id": "MDU6SXNzdWU1MzQ1MTI0NTk=", "number": 34938, "title": "Error when adding tensorflow op with cmake using c ++ 17", "user": {"login": "lijinjiang001", "id": 38203514, "node_id": "MDQ6VXNlcjM4MjAzNTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/38203514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lijinjiang001", "html_url": "https://github.com/lijinjiang001", "followers_url": "https://api.github.com/users/lijinjiang001/followers", "following_url": "https://api.github.com/users/lijinjiang001/following{/other_user}", "gists_url": "https://api.github.com/users/lijinjiang001/gists{/gist_id}", "starred_url": "https://api.github.com/users/lijinjiang001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lijinjiang001/subscriptions", "organizations_url": "https://api.github.com/users/lijinjiang001/orgs", "repos_url": "https://api.github.com/users/lijinjiang001/repos", "events_url": "https://api.github.com/users/lijinjiang001/events{/privacy}", "received_events_url": "https://api.github.com/users/lijinjiang001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-08T09:04:56Z", "updated_at": "2019-12-12T05:25:05Z", "closed_at": null, "author_association": "NONE", "body": "Error when adding tensorflow op with cmake using c ++ 17\uff0chow do I set tensorflow to support c ++ 17?\r\n\r\ntensorflow.python.framework.errors_impl.NotFoundError: /home/user/Desktop/sum_each_op/lib/libsum_op.so: undefined symbol: _ZN10tensorflow14kernel_factory17OpKernelRegistrar12InitInternalEPKNS_9KernelDefESt17basic_string_viewIcSt11char_traitsIcEESt10unique_ptrINS0_15OpKernelFactoryESt14default_deleteISA_EE\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34935", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34935/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34935/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34935/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34935", "id": 534492368, "node_id": "MDU6SXNzdWU1MzQ0OTIzNjg=", "number": 34935, "title": "Tutorial for Data Augmentation using tf.image", "user": {"login": "akalakheti", "id": 41832161, "node_id": "MDQ6VXNlcjQxODMyMTYx", "avatar_url": "https://avatars2.githubusercontent.com/u/41832161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akalakheti", "html_url": "https://github.com/akalakheti", "followers_url": "https://api.github.com/users/akalakheti/followers", "following_url": "https://api.github.com/users/akalakheti/following{/other_user}", "gists_url": "https://api.github.com/users/akalakheti/gists{/gist_id}", "starred_url": "https://api.github.com/users/akalakheti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akalakheti/subscriptions", "organizations_url": "https://api.github.com/users/akalakheti/orgs", "repos_url": "https://api.github.com/users/akalakheti/repos", "events_url": "https://api.github.com/users/akalakheti/events{/privacy}", "received_events_url": "https://api.github.com/users/akalakheti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-08T04:53:22Z", "updated_at": "2020-03-06T01:13:12Z", "closed_at": null, "author_association": "NONE", "body": "Hi, my name is Rachin Kalakheti and i am a participant of Google Code-in 2019. I felt overwhelmed to know Tensorflow is also one of the organization for this year. So, there was a task to create a notebook tutorial on Data Augmentation using tf.image. I see that currently there is no tutorial regarding the same topic. So, I would like to contribute to the community by adding my tutorial to the  Tensorflow repo. Therefore I am seeking guidance as to discuss this further.\r\nLink to my notebook tutorial: https://colab.research.google.com/drive/1skGIQhwifJY6HWO6ZnbFe4un-VuJ3VW5\r\n\r\nThank you!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34931", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34931/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34931/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34931/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34931", "id": 534429748, "node_id": "MDU6SXNzdWU1MzQ0Mjk3NDg=", "number": 34931, "title": "TensorFlow broadcasting results in error of Incompatible shapes", "user": {"login": "hoangcuong2011", "id": 8759715, "node_id": "MDQ6VXNlcjg3NTk3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/8759715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoangcuong2011", "html_url": "https://github.com/hoangcuong2011", "followers_url": "https://api.github.com/users/hoangcuong2011/followers", "following_url": "https://api.github.com/users/hoangcuong2011/following{/other_user}", "gists_url": "https://api.github.com/users/hoangcuong2011/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoangcuong2011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoangcuong2011/subscriptions", "organizations_url": "https://api.github.com/users/hoangcuong2011/orgs", "repos_url": "https://api.github.com/users/hoangcuong2011/repos", "events_url": "https://api.github.com/users/hoangcuong2011/events{/privacy}", "received_events_url": "https://api.github.com/users/hoangcuong2011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-07T17:37:52Z", "updated_at": "2019-12-12T21:36:55Z", "closed_at": null, "author_association": "NONE", "body": "Greetings,\r\n\r\nAnother day, another potentially \"deep\" bug with TF I found! :-) \r\n\r\nI have three tensors: A, B, C. Here A is of shape (None, 64, 64), B is of shape: (None, 64) and C is of shape (None, 64). What I wanted to do is to have an element-wise multiplication followed by an element-wise addition.\r\n\r\nThanks to TF broadcasting, the code I needed to write is simply:\r\n\r\nA * B + C\r\n\r\nWith this, the output should have shape  (None, 64, 64). All these things are a part of my model, and everything works well. Specifically, by working well I mean I can compile the model and print model summary() successfully.\r\n\r\nUnfortunately, when I fit the the model to my training data, I got a problem of Incompatible shapes as bellows.\r\n\r\n```\r\n\r\n  File \"/home/cuong.hoang/anaconda2/envs/py36_env_tensor_gpu_pip_local/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 780, in fit\r\n    steps_name='steps_per_epoch')\r\n  File \"/home/cuong.hoang/anaconda2/envs/py36_env_tensor_gpu_pip_local/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_arrays.py\", line 363, in model_iteration\r\n    batch_outs = f(ins_batch)\r\n  File \"/home/cuong.hoang/anaconda2/envs/py36_env_tensor_gpu_pip_local/lib/python3.6/site-packages/tensorflow/python/keras/backend.py\", line 3292, in __call__\r\n    run_metadata=self.run_metadata)\r\n  File \"/home/cuong.hoang/anaconda2/envs/py36_env_tensor_gpu_pip_local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1458, in __call__\r\n    run_metadata_ptr)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: 2 root error(s) found.\r\n  (0) Invalid argument: Incompatible shapes: [32,64] vs. [32,64,64]\r\n\t [[{{node encoder_layer/mul_5}}]]\r\n\t [[loss/mul/_5175]]\r\n  (1) Invalid argument: Incompatible shapes: [32,64] vs. [32,64,64]\r\n\t [[{{node encoder_layer/mul_5}}]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n```\r\n\r\nI am pretty sure my code correct, and the problem, I think is because of broadcasting. Moving forward, I decided to write by myself the code to make B and C has size (None, 64, 64) by repeating. The code is pretty simple, for B, as example:\r\n```\r\nB = K.expand_dims(B, axis=-1)\r\nB = K.repeat_elements(B, 64, axis=2)\r\n```\r\n\r\nWith this, the model compiles OK, and more importantly, when I fit the model to data, it runs OK as well.\r\n\r\nSo, I believe this is a bug of TensorFlow broadcasting. I am curious why it happens and did anyone get any similar error before?\r\n\r\nThis is with Tensorflow 1.14. If you want the code to reproduce the error just let me know."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34925", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34925/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34925/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34925/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34925", "id": 534393086, "node_id": "MDU6SXNzdWU1MzQzOTMwODY=", "number": 34925, "title": "sparse_matrix_sparse_matmul gives wrong result when run on GPU", "user": {"login": "chpohl", "id": 13176160, "node_id": "MDQ6VXNlcjEzMTc2MTYw", "avatar_url": "https://avatars3.githubusercontent.com/u/13176160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chpohl", "html_url": "https://github.com/chpohl", "followers_url": "https://api.github.com/users/chpohl/followers", "following_url": "https://api.github.com/users/chpohl/following{/other_user}", "gists_url": "https://api.github.com/users/chpohl/gists{/gist_id}", "starred_url": "https://api.github.com/users/chpohl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chpohl/subscriptions", "organizations_url": "https://api.github.com/users/chpohl/orgs", "repos_url": "https://api.github.com/users/chpohl/repos", "events_url": "https://api.github.com/users/chpohl/events{/privacy}", "received_events_url": "https://api.github.com/users/chpohl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-07T11:58:53Z", "updated_at": "2019-12-27T17:23:05Z", "closed_at": null, "author_association": "NONE", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 2.1.0-rc0\r\n- **Python version**: 3.7\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: 10.1.243\r\n- **GPU model and memory**: Titan X\r\n- **Exact command to reproduce**:\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with:\r\n\r\n```bash\r\npython -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"\r\n```\r\n\r\n### Describe the problem\r\nWhen using sparse matmul with 2 sparse matrices on GPU, the result is wrong (has bad indices and some entries are 0 that should not be). The code below fails with  \r\n\r\n> tensorflow.python.framework.errors_impl.InvalidArgumentError: indices[256] = [0,0,0] is out of \r\norder. Many sparse ops require sorted indices.\r\n>    Use `tf.sparse.reorder` to create a correctly ordered copy.\r\n\r\n  The same code runs without any errors on CPU. \r\n\r\n\r\n### Source code / logs\r\n\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops.linalg.sparse import sparse\r\n\r\n\r\na = tf.random.uniform([5, 300, 200])\r\na = tf.nn.dropout(a, 0.5)\r\nsa = tf.sparse.from_dense(a)\r\ncsr_sa = sparse.CSRSparseMatrix(sa)\r\nsmm = sparse.matmul(csr_sa, csr_sa, transpose_b=True)\r\nsmm = sparse.csr_sparse_matrix_to_sparse_tensor(smm._matrix, type=tf.dtypes.float32)\r\nsmm = tf.sparse.SparseTensor(indices=smm.indices, values=smm.values, dense_shape=smm.dense_shape)\r\nmm = tf.linalg.matmul(a, a, transpose_b=True)\r\ntf.debugging.assert_near(mm, tf.sparse.to_dense(smm))\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34924", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34924/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34924/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34924/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34924", "id": 534392142, "node_id": "MDU6SXNzdWU1MzQzOTIxNDI=", "number": 34924, "title": "Support EIGEN_USE_MKL_ALL macro for building tensorflow", "user": {"login": "refraction-ray", "id": 35157286, "node_id": "MDQ6VXNlcjM1MTU3Mjg2", "avatar_url": "https://avatars2.githubusercontent.com/u/35157286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/refraction-ray", "html_url": "https://github.com/refraction-ray", "followers_url": "https://api.github.com/users/refraction-ray/followers", "following_url": "https://api.github.com/users/refraction-ray/following{/other_user}", "gists_url": "https://api.github.com/users/refraction-ray/gists{/gist_id}", "starred_url": "https://api.github.com/users/refraction-ray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/refraction-ray/subscriptions", "organizations_url": "https://api.github.com/users/refraction-ray/orgs", "repos_url": "https://api.github.com/users/refraction-ray/repos", "events_url": "https://api.github.com/users/refraction-ray/events{/privacy}", "received_events_url": "https://api.github.com/users/refraction-ray/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-12-07T11:49:25Z", "updated_at": "2020-01-22T01:49:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): tf1.14, tf2.0\r\n- Are you willing to contribute it (Yes/No): No, I am not familiar with bazel\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIf my understanding is correct, the compiling flag `--config=mkl` for bazel only enables mkl-dnn supports which could replace several basic ops like matrix multiplication with mkl implementation using jit. However, it seems to me that this flag doesn't enable mkl linkage with Eigen. Therefore, all linear ops beyond several covered in mkl-dnn are still executed in plain eigen single-threaded implementation which is too slow to use (there can be O(10) or even O(100) speed difference for large matrix and eigh, svd, qr ops, as previously noted in https://github.com/tensorflow/tensorflow/issues/7128, https://github.com/tensorflow/tensorflow/issues/13222, etc.). \r\n\r\nCurrently, in tensorflow.bzl, `DEIGEN_USE_VML` flag is set when compiled with --config=mkl. As explained in https://github.com/tensorflow/tensorflow/issues/30592, this indicates eigen is not enabled with mkl at all. But a simple replacement of this flag with `DEIGEN_USE_MKL_ALL` leads to failure of the compiling with the error complaining <mkl.h> not found. Also as noted https://github.com/tensorflow/tensorflow/pull/12219, MKL optimized Tensorflow does not support EIGEN_USE_MKL_ALL. I know little about bazel setup, so I don't know whether turn on such support is involved or as simple as some small tweaks.\r\n\r\nIn sum, tuning tf building system to \"really\" enable mkl behind tf is of great importance and it is vital for the speed of a large range of matrix ops. And this should be the expected behavior for `--config=mkl` flag after all. Currently, so called \"intel optimized\" or \"mkl enabled\" tensorflow is somehow confusing.\r\n\r\n**Will this change the current api? How?**\r\nNot for the user level API.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone using tf in his/her workflow including matrix operations like EIG, SVD, QR etc on CPU. (One can argue that there is no problem for GPU implementation, but cusolver implementations for SVD and QR can still be much slower than mkl cpu implementations. So fast CPU implementations are critical for these matrix decomposition types op).\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34908", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34908/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34908/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34908/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34908", "id": 534154622, "node_id": "MDU6SXNzdWU1MzQxNTQ2MjI=", "number": 34908, "title": "Saving custom tensor fails", "user": {"login": "awav", "id": 24483645, "node_id": "MDQ6VXNlcjI0NDgzNjQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/24483645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awav", "html_url": "https://github.com/awav", "followers_url": "https://api.github.com/users/awav/followers", "following_url": "https://api.github.com/users/awav/following{/other_user}", "gists_url": "https://api.github.com/users/awav/gists{/gist_id}", "starred_url": "https://api.github.com/users/awav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awav/subscriptions", "organizations_url": "https://api.github.com/users/awav/orgs", "repos_url": "https://api.github.com/users/awav/repos", "events_url": "https://api.github.com/users/awav/events{/privacy}", "received_events_url": "https://api.github.com/users/awav/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-06T17:15:58Z", "updated_at": "2020-02-18T23:15:33Z", "closed_at": null, "author_association": "NONE", "body": "Hello everyone,\r\n\r\nThere is a bug with saving and loading of custom tensors (variables) in TF. It was discovered at https://github.com/GPflow/GPflow/issues/1127. I have created the MWE in colab [here](https://colab.research.google.com/drive/1REEmDStqGGvl9EmYRa6KB44YXT7EVZkt). There are two errors when `tf.save_model` applies to custom tensors:\r\n\r\n* The loading for custom tensor (variable) restores broken tf.Variable object\r\n* Saving of tf.Module with custom tensors (variables) fails\r\n\r\nDetails in [colab notebook](https://colab.research.google.com/drive/1REEmDStqGGvl9EmYRa6KB44YXT7EVZkt)\r\n\r\nPS: referencing @alextp and @dynamicwebpaige, because they know what I mean by custom tensor.\r\n\r\nThanks,\r\nArtem "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34903", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34903/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34903/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34903/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34903", "id": 534077315, "node_id": "MDExOlB1bGxSZXF1ZXN0MzUwMDQ1NjM2", "number": 34903, "title": "TransposeConv with Bias", "user": {"login": "psunn", "id": 55463253, "node_id": "MDQ6VXNlcjU1NDYzMjUz", "avatar_url": "https://avatars3.githubusercontent.com/u/55463253?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psunn", "html_url": "https://github.com/psunn", "followers_url": "https://api.github.com/users/psunn/followers", "following_url": "https://api.github.com/users/psunn/following{/other_user}", "gists_url": "https://api.github.com/users/psunn/gists{/gist_id}", "starred_url": "https://api.github.com/users/psunn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psunn/subscriptions", "organizations_url": "https://api.github.com/users/psunn/orgs", "repos_url": "https://api.github.com/users/psunn/repos", "events_url": "https://api.github.com/users/psunn/events{/privacy}", "received_events_url": "https://api.github.com/users/psunn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2019-12-06T15:30:44Z", "updated_at": "2020-03-18T22:50:24Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34903", "html_url": "https://github.com/tensorflow/tensorflow/pull/34903", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34903.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34903.patch"}, "body": "### Description of issue:\r\nFor generating .tflite file with TFLiteConverter, when model contains\r\nConv2DTranspose layers, bias cannot fold into Operator TRANSPOSECONV.\r\nIt will result with extra Op ADD following Op TRANSPOSECONV.\r\nBut with other CONV-like layers (Conv2D, DepthwiseConv2D),\r\nbias will be fold into CONV layer.\r\n(check detailed TF issue: https://github.com/tensorflow/tensorflow/issues/34622)\r\n\r\n### PR try to resolve it:\r\nSo we try to resolve this issue by enable TransposeConv with bias for TFLite:\r\n  \r\n- Update TFLite graph_transform features with:\r\n      fill TransposeConv bias with zero if there is no bias\r\n      fuse bias add into preceding TransposeConv(TEST added)\r\n\r\n- Update TransposeConv with bias:\r\n      add bias input to TransposeConv\r\n      add optional bias to TransposeConv kernels\r\n\r\n### example of the results:\r\n  TRANSPOSE_CONV inputs:\r\n\r\n1. output_shape\r\n2. weights\r\n3. activation\r\n4. bias\r\n\r\n![fused_transposeconv](https://user-images.githubusercontent.com/55463253/70334128-bc088200-183c-11ea-9f94-a803cc80df99.png)\r\n\r\n### Need to discuss:\r\n~~currently this PR only update reference kernel for transpose_conv, optimised kernal is commented out.~~\r\n~~several TEST need to be added as well, but~~ further suggestions are needed for adding additional test."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34898", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34898/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34898/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34898/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34898", "id": 533981686, "node_id": "MDU6SXNzdWU1MzM5ODE2ODY=", "number": 34898, "title": "tf.execute_volume_patches misses one dimension when used with placeholders and None", "user": {"login": "fontm2", "id": 6941103, "node_id": "MDQ6VXNlcjY5NDExMDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/6941103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fontm2", "html_url": "https://github.com/fontm2", "followers_url": "https://api.github.com/users/fontm2/followers", "following_url": "https://api.github.com/users/fontm2/following{/other_user}", "gists_url": "https://api.github.com/users/fontm2/gists{/gist_id}", "starred_url": "https://api.github.com/users/fontm2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fontm2/subscriptions", "organizations_url": "https://api.github.com/users/fontm2/orgs", "repos_url": "https://api.github.com/users/fontm2/repos", "events_url": "https://api.github.com/users/fontm2/events{/privacy}", "received_events_url": "https://api.github.com/users/fontm2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-06T13:28:08Z", "updated_at": "2019-12-09T08:45:30Z", "closed_at": null, "author_association": "NONE", "body": "Tested in with tf 1.12.0 and tf 2.0. Below code for use with tf 2.0.\r\n\r\np = tf.keras.backend.placeholder((1,None,None,None,1))\r\nkernel = [1,3,3,3,1]\r\nstrides = [1,1,1,1,1]\r\ntf.extract_volume_patches(p, kernes, strides, 'SAME')\r\n>>><tf.Tensor 'ExtractVolumePatches:0' shape=(1, None, None, 27) dtype=float32>\r\n\r\np = tf.keras.backend.placeholder((1,120,130,140,1))\r\nkernel = [1,3,3,3,1]\r\nstrides = [1,1,1,1,1]\r\ntf.extract_volume_patches(p, kernes, strides, 'SAME')\r\n>>><tf.Tensor 'ExtractVolumePatches:0' shape=(1, 120, 130, 140, 27) dtype=float32>\r\n\r\nIs there a reason behind this behaviour?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34893", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34893/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34893/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34893/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34893", "id": 533868812, "node_id": "MDU6SXNzdWU1MzM4Njg4MTI=", "number": 34893, "title": "load_weights dont work in tf.keras: W tensorflow/core/util/tensor_slice_reader.cc:95] Could not open \"mobilenet_model\": Data loss: not an sstable (bad magic number): perhaps your file is in a different file format and you need to use a different restore operator?", "user": {"login": "kiflowb777", "id": 55391259, "node_id": "MDQ6VXNlcjU1MzkxMjU5", "avatar_url": "https://avatars3.githubusercontent.com/u/55391259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiflowb777", "html_url": "https://github.com/kiflowb777", "followers_url": "https://api.github.com/users/kiflowb777/followers", "following_url": "https://api.github.com/users/kiflowb777/following{/other_user}", "gists_url": "https://api.github.com/users/kiflowb777/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiflowb777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiflowb777/subscriptions", "organizations_url": "https://api.github.com/users/kiflowb777/orgs", "repos_url": "https://api.github.com/users/kiflowb777/repos", "events_url": "https://api.github.com/users/kiflowb777/events{/privacy}", "received_events_url": "https://api.github.com/users/kiflowb777/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-12-06T10:14:11Z", "updated_at": "2020-01-02T22:36:42Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 1.14, 1.15, 2.0, 2.1rc0\r\n- Keras version: 2.2.4-tf and 2.2.4\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 10.0 and 10.1 / 7.6.5\r\n- GPU model and memory: RTX 2060 6GB\r\n\r\nWhen I use the **tf.keras** and try to load the weights from mobilenet modeI get an error\"\r\n`W tensorflow/core/util/tensor_slice_reader.cc:95] Could not open \"mobilenet_model\": Data loss: not an sstable (bad magic number): perhaps your file is in a different file format and you need to use a different restore operator?`\r\n\r\nWhen use only **keras** it's ok.\r\n\r\n**Simple code to reproduce the issue**\r\n```\r\nimport os\r\n\r\nuse_tfkeras = True\r\n\r\nif use_tfkeras:\r\n    from tensorflow.compat.v1.keras.applications.mobilenet import MobileNet\r\nelse:\r\n    from keras.applications.mobilenet import MobileNet\r\n\r\n\r\ndef save_mobilenet_weights(alpha, filename):\r\n    mobilenet = MobileNet(alpha=alpha, input_tensor=None, include_top=False, weights='imagenet', pooling=None)\r\n    if use_tfkeras:\r\n        mobilenet.save_weights(filepath=os.path.abspath(filename), overwrite=True, save_format='h5')\r\n    else:\r\n        mobilenet.save_weights(filepath=os.path.abspath(filename), overwrite=True)\r\n\r\ndef load_mobilenet_weights(alpha, filename):\r\n    mobilenet = MobileNet(alpha=alpha, input_tensor=None, include_top=False, weights=None, pooling=None)\r\n    mobilenet.load_weights(os.path.abspath(filename))\r\n\r\n\r\nalpha = 0.75\r\nfilename = 'mobilenet_model'\r\n\r\nsave_mobilenet_weights(alpha, filename)\r\nload_mobilenet_weights(alpha, filename)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34891", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34891/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34891/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34891/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34891", "id": 533850395, "node_id": "MDU6SXNzdWU1MzM4NTAzOTU=", "number": 34891, "title": "Cannot execute the substraction op with the broadcast mechanism", "user": {"login": "TomorrowIsAnOtherDay", "id": 25046619, "node_id": "MDQ6VXNlcjI1MDQ2NjE5", "avatar_url": "https://avatars0.githubusercontent.com/u/25046619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomorrowIsAnOtherDay", "html_url": "https://github.com/TomorrowIsAnOtherDay", "followers_url": "https://api.github.com/users/TomorrowIsAnOtherDay/followers", "following_url": "https://api.github.com/users/TomorrowIsAnOtherDay/following{/other_user}", "gists_url": "https://api.github.com/users/TomorrowIsAnOtherDay/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomorrowIsAnOtherDay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomorrowIsAnOtherDay/subscriptions", "organizations_url": "https://api.github.com/users/TomorrowIsAnOtherDay/orgs", "repos_url": "https://api.github.com/users/TomorrowIsAnOtherDay/repos", "events_url": "https://api.github.com/users/TomorrowIsAnOtherDay/events{/privacy}", "received_events_url": "https://api.github.com/users/TomorrowIsAnOtherDay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-06T09:39:31Z", "updated_at": "2020-01-01T13:56:39Z", "closed_at": null, "author_association": "NONE", "body": "```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nx = tf.constant(np.random.random((500, 6)))\r\ny = x - x[:,0]\r\n```\r\nThis code raises the issue of not supporting [500,6] - [500] in the `sub` OP.\r\nI suppose that it should compute correctly, using the broadcast automatically?\r\nIs it a bug? \r\nversion: tf2.0"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34866", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34866/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34866/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34866/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34866", "id": 533328829, "node_id": "MDU6SXNzdWU1MzMzMjg4Mjk=", "number": 34866, "title": "Keras Custom Loss/Model Compilation", "user": {"login": "jtdutta1", "id": 21063647, "node_id": "MDQ6VXNlcjIxMDYzNjQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/21063647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtdutta1", "html_url": "https://github.com/jtdutta1", "followers_url": "https://api.github.com/users/jtdutta1/followers", "following_url": "https://api.github.com/users/jtdutta1/following{/other_user}", "gists_url": "https://api.github.com/users/jtdutta1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtdutta1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtdutta1/subscriptions", "organizations_url": "https://api.github.com/users/jtdutta1/orgs", "repos_url": "https://api.github.com/users/jtdutta1/repos", "events_url": "https://api.github.com/users/jtdutta1/events{/privacy}", "received_events_url": "https://api.github.com/users/jtdutta1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-12-05T12:44:02Z", "updated_at": "2019-12-16T04:09:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10 1909\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNo\r\n- TensorFlow installed from (source or binary):\r\nBinary, Pip\r\n- TensorFlow version (use command below):\r\n1.14\r\n- Python version:\r\n3.7.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n10/7.6.4\r\n- GPU model and memory:\r\nRTX 2080 with 8GB VRAM, 16GB DRAM DDR4\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n_for 1_: unknown 1.14.0\r\n\r\n**Describe the current behavior**\r\nModel compilation fails with the following error.\r\n\r\n    Traceback (most recent call last):\r\n      File \".\\vgg_loss.py\", line 103, in <module>\r\n        main()\r\n      File \".\\vgg_loss.py\", line 97, in main\r\n        model.compile(optimizer='adam', loss=some_loss, metrics=['accuracy'])\r\n      File \"C:\\Users\\Intel\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\tracking\\base.py\", \r\n    line 457, in _method_wrapper\r\n        result = method(self, *args, **kwargs)\r\n      File \"C:\\Users\\Intel\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", \r\n    line 337, in compile\r\n        self._compile_weights_loss_and_weighted_metrics()\r\n      File \"C:\\Users\\Intel\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\tracking\\base.py\", \r\n    line 457, in _method_wrapper\r\n        result = method(self, *args, **kwargs)\r\n      File \"C:\\Users\\Intel\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", \r\n    line 1710, in _compile_weights_loss_and_weighted_metrics\r\n        self.total_loss = self._prepare_total_loss(masks)\r\n    otal_loss\r\n        per_sample_losses = loss_fn.call(y_true, y_pred)\r\n      File \"C:\\Users\\Intel\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\losses.py\", line 215, \r\n    in call\r\n        return self.fn(y_true, y_pred, **self._fn_kwargs)\r\n      File \".\\vgg_loss.py\", line 86, in some_loss\r\n        return mse(vgg_model.predict(y_pred, steps=1), vgg_model.predict(y_true, steps=1))\r\n      File \"C:\\Users\\Intel\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", \r\n    line 1078, in predict       callbacks=callbacks)\r\n        batch_outs = f(actual_inputs)\r\n        run_metadata=self.run_metadata)\r\n        run_metadata_ptr)\r\n    tensorflow.python.framework.errors_impl.InvalidArgumentError: 2 root error(s) found.\r\n       (0) Invalid argument: You must feed a value for placeholder tensor 'input_node' with dtype \r\n         float \r\n    and shape [1,512,512,3]\r\n              [[{{node input_node}}]]\r\n              [[block4_conv3/Relu/_217]]\r\n       (1) Invalid argument: You must feed a value for placeholder tensor 'input_node' with dtype float \r\n     and shape [1,512,512,3]\r\n              [[{{node input_node}}]]\r\n     0 successful operations.\r\n     0 derived errors ignored.\r\n\r\n\r\n**Describe the expected behavior**\r\nThe code should compile properly.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nI am attaching the [link](https://github.com/jtdutta1/Fastest/blob/master/vgg_loss.py) to the code.\r\nAlso download the vgg model whose link is provided in the code. I am also referencing [here](https://drive.google.com/open?id=1OsKx6CPacs7V7d-1cNCI2bFIty2BVQEz) again.\r\n\r\nBe sure to run it as \r\n  \r\n    python vgg_loss.py -p <path_to_vgg_model>\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34864", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34864/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34864/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34864/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34864", "id": 533254627, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ5MzYwODYx", "number": 34864, "title": "Update array ops docstrings", "user": {"login": "nikochiko", "id": 37668193, "node_id": "MDQ6VXNlcjM3NjY4MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/37668193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikochiko", "html_url": "https://github.com/nikochiko", "followers_url": "https://api.github.com/users/nikochiko/followers", "following_url": "https://api.github.com/users/nikochiko/following{/other_user}", "gists_url": "https://api.github.com/users/nikochiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikochiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikochiko/subscriptions", "organizations_url": "https://api.github.com/users/nikochiko/orgs", "repos_url": "https://api.github.com/users/nikochiko/repos", "events_url": "https://api.github.com/users/nikochiko/events{/privacy}", "received_events_url": "https://api.github.com/users/nikochiko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-12-05T10:18:07Z", "updated_at": "2020-03-18T13:08:37Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34864", "html_url": "https://github.com/tensorflow/tensorflow/pull/34864", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34864.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34864.patch"}, "body": "Moved from old PR https://github.com/tensorflow/tensorflow/pull/34360\r\nOld assignee: @gbaned , waiting  for review from @alextp "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34860", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34860/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34860/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34860/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34860", "id": 533222572, "node_id": "MDU6SXNzdWU1MzMyMjI1NzI=", "number": 34860, "title": "Can not load tflite model converted from pytorch", "user": {"login": "ambarion", "id": 48558592, "node_id": "MDQ6VXNlcjQ4NTU4NTky", "avatar_url": "https://avatars3.githubusercontent.com/u/48558592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ambarion", "html_url": "https://github.com/ambarion", "followers_url": "https://api.github.com/users/ambarion/followers", "following_url": "https://api.github.com/users/ambarion/following{/other_user}", "gists_url": "https://api.github.com/users/ambarion/gists{/gist_id}", "starred_url": "https://api.github.com/users/ambarion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ambarion/subscriptions", "organizations_url": "https://api.github.com/users/ambarion/orgs", "repos_url": "https://api.github.com/users/ambarion/repos", "events_url": "https://api.github.com/users/ambarion/events{/privacy}", "received_events_url": "https://api.github.com/users/ambarion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-12-05T09:20:31Z", "updated_at": "2020-01-19T11:19:42Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Win10:\r\n- TensorFlow version=1.15:\r\n\r\n\r\n**Code to generate tflite model**\r\nGenerate the tflite model with cmd\r\n```\r\npython tflite_convert.py \r\n--graph_def_file=./epoch10_model_toco.pb \r\n--output_file=./lite.tflite \r\n--inference_type=QUANTIZED_UINT8 \r\n--mean_values=0 --std_dev_values=1 \r\n--input_arrays=0 --output_arrays=Reshape_136 --input_shape=1,3,120,18,2 \r\n--default_ranges_min=0 --default_ranges_max=6 --post_training_quantize\r\n```\r\n\r\n**Code to load tflite model**\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\n# Load TFLite model and allocate tensors.\r\ninterpreter = tf.lite.Interpreter(model_path=\"converted_model.tflite\")\r\ninterpreter.allocate_tensors()\r\n\r\n# Get input and output tensors.\r\ninput_details = interpreter.get_input_details()\r\nprint(input_details)\r\noutput_details = interpreter.get_output_details()\r\nprint(output_details)\r\n\r\n# Test model on random input data.\r\ninput_shape = input_details[0]['shape']\r\ninput_data = np.array(np.random.random_sample(input_shape), dtype=np.float32)\r\ninterpreter.set_tensor(input_details[0]['index'], input_data)\r\n\r\ninterpreter.invoke()\r\n\r\n# The function `get_tensor()` returns a copy of the tensor data.\r\n# Use `tensor()` in order to get a pointer to the tensor.\r\noutput_data = interpreter.get_tensor(output_details[0]['index'])\r\nprint(output_data)\r\n```\r\n\r\n**Error Message**\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"demo.py\", line 97, in <module>\r\n    main()\r\n  File \"demo.py\", line 59, in main\r\n    interpreter = tf.lite.Interpreter(model_path=PATH_TO_TFLITE)\r\n  File \"C:\\Users\\Administrator\\.conda\\envs\\stgcn\\lib\\site-packages\\tensorflow_core\\lite\\python\\interpreter.py\", line 206, in __init__\r\n    model_path))\r\nValueError: Input array not provided for operation 'reshape'.\r\n```\r\n\r\n**If i convert .pb to .tflite without uint8 quantized**\r\n\r\n```\r\npython tflite_convert.py \r\n--graph_def_file=./epoch10_model_toco.pb \r\n--output_file=./lite.tflite \r\n--input_arrays=0 --output_arrays=Reshape_136 --input_shape=1,3,120,18,2 \r\n```\r\n\r\nThen load the tflite without quantized as the same.\r\nStill i got another error message.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"demo.py\", line 97, in <module>\r\n    main()\r\n  File \"demo.py\", line 60, in main\r\n    interpreter.allocate_tensors()\r\n  File \"C:\\Users\\Administrator\\.conda\\envs\\stgcn\\lib\\site-packages\\tensorflow_core\\lite\\python\\interpreter.py\", line 244, in allocate_tensors\r\n    return self._interpreter.AllocateTensors()\r\n  File \"C:\\Users\\Administrator\\.conda\\envs\\stgcn\\lib\\site-packages\\tensorflow_core\\lite\\python\\interpreter_wrapper\\tensorflow_wrap_interpreter_wrapper.py\", line 106, in AllocateTensors\r\n    return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\nRuntimeError: tensorflow/lite/kernels/transpose.cc Transpose op only supports 1D-4D input arrays.Node number 0 (TRANSPOSE) failed to prepare.\r\n```\r\n\r\nHow can i convert the .pb to the .tflite, which could be loaded.\r\nIs there something wrong in the .tflite layer?How to correct that?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34856", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34856/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34856/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34856/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34856", "id": 533186824, "node_id": "MDU6SXNzdWU1MzMxODY4MjQ=", "number": 34856, "title": "Push up Switch ops in grappler", "user": {"login": "guoshimin", "id": 11787293, "node_id": "MDQ6VXNlcjExNzg3Mjkz", "avatar_url": "https://avatars2.githubusercontent.com/u/11787293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guoshimin", "html_url": "https://github.com/guoshimin", "followers_url": "https://api.github.com/users/guoshimin/followers", "following_url": "https://api.github.com/users/guoshimin/following{/other_user}", "gists_url": "https://api.github.com/users/guoshimin/gists{/gist_id}", "starred_url": "https://api.github.com/users/guoshimin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guoshimin/subscriptions", "organizations_url": "https://api.github.com/users/guoshimin/orgs", "repos_url": "https://api.github.com/users/guoshimin/repos", "events_url": "https://api.github.com/users/guoshimin/events{/privacy}", "received_events_url": "https://api.github.com/users/guoshimin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-05T08:00:42Z", "updated_at": "2020-02-21T18:51:16Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIf we have a chain of ops  `-> A -> B -> Switch ->`, both A and B will need to be evaluated regardless of the outcome of the Switch op. In this case, we can push up the Switch op so it becomes ` -> Switch -> A -> B -> `. That way, neither A or B needs to be evaluated if the wrong branch of the Switch is chosen. This would simplify the use of `tf.cond` by not requiring all conditional ops be created in the supplied true_fn or false_fn.\r\n\r\n**Will this change the current api? How?**\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\nUsers of tf.cond.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34855", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34855/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34855/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34855/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34855", "id": 533181265, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ5MzAwOTkx", "number": 34855, "title": "[tflite] fix a dilated dw conv problem in tflite_convert", "user": {"login": "freedomtan", "id": 3395998, "node_id": "MDQ6VXNlcjMzOTU5OTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3395998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freedomtan", "html_url": "https://github.com/freedomtan", "followers_url": "https://api.github.com/users/freedomtan/followers", "following_url": "https://api.github.com/users/freedomtan/following{/other_user}", "gists_url": "https://api.github.com/users/freedomtan/gists{/gist_id}", "starred_url": "https://api.github.com/users/freedomtan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freedomtan/subscriptions", "organizations_url": "https://api.github.com/users/freedomtan/orgs", "repos_url": "https://api.github.com/users/freedomtan/repos", "events_url": "https://api.github.com/users/freedomtan/events{/privacy}", "received_events_url": "https://api.github.com/users/freedomtan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-05T07:46:13Z", "updated_at": "2020-03-19T12:28:09Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34855", "html_url": "https://github.com/tensorflow/tensorflow/pull/34855", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34855.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34855.patch"}, "body": "In tflite_convert/toco, it's assumed that there is a BiasAdd\r\nbefore or after a BatchToSpaceND. However, in some frozen\r\ngraph_def files, e.g., DeepLab V3 mobilenet v2 coco\r\ncheckpoints [1], it's a fused BatchNormalization rather than\r\na BiasAdd.\r\n\r\nThis patch adds the BatchNorm case.\r\n\r\n[1] https://github.com/tensorflow/models/blob/master/research/deeplab/g3doc/model_zoo.md"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34852", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34852/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34852/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34852/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34852", "id": 533127433, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ5MjU2OTM3", "number": 34852, "title": "Introducing BatchedNMS and CombinedNMS GPU ops", "user": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false, "description": null}, {"id": 1173072136, "node_id": "MDU6TGFiZWwxMTczMDcyMTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XL", "name": "size:XL", "color": "adafea", "default": false, "description": "CL Change Size:Extra Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-12-05T05:08:16Z", "updated_at": "2020-03-07T00:59:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34852", "html_url": "https://github.com/tensorflow/tensorflow/pull/34852", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34852.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34852.patch"}, "body": "This PR adds BatchedNMS op, which uses significantly less memory than GPUNMSV[234] ops at the expense of some performance for very small batch sizes. A GPU implementation of CombinedNMS op using BatchedNMS kernels is also included. GPU CombinedNMS improve SSD images/s about 50% with respect to multi-class CPU NMS ops and about 4x vs CPU CombinedNMS implementation"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34849", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34849/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34849/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34849/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34849", "id": 533111602, "node_id": "MDU6SXNzdWU1MzMxMTE2MDI=", "number": 34849, "title": "TF 2.0 - WARNING - dense_features is casting an input tensor from dtype float64 to the layer's dtype of float32", "user": {"login": "00krishna", "id": 2063593, "node_id": "MDQ6VXNlcjIwNjM1OTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2063593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/00krishna", "html_url": "https://github.com/00krishna", "followers_url": "https://api.github.com/users/00krishna/followers", "following_url": "https://api.github.com/users/00krishna/following{/other_user}", "gists_url": "https://api.github.com/users/00krishna/gists{/gist_id}", "starred_url": "https://api.github.com/users/00krishna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/00krishna/subscriptions", "organizations_url": "https://api.github.com/users/00krishna/orgs", "repos_url": "https://api.github.com/users/00krishna/repos", "events_url": "https://api.github.com/users/00krishna/events{/privacy}", "received_events_url": "https://api.github.com/users/00krishna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-05T04:09:58Z", "updated_at": "2019-12-06T21:16:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution Ubuntu Linux 18.04 x64\r\n\r\n- TensorFlow installed from (source or binary): Installed from Anaconda\r\n\r\n- TensorFlow version (use command below):\r\n`python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\nunknown 2.0.0\r\nI am using TF 2.0.0.\r\n- Python version: python 3.7.4\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: Cuda release 10.1, V10.1.168; cudnn 7.6.0\r\n- GPU model and memory: Nvidia GTX 1080 11GB.\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nThis is both a code issue and a documentation problem--but mostly a code problem. \r\nI was looking at the tutorial(https://www.tensorflow.org/tutorials/structured_data/feature_columns#numeric_columns) and saw that the tutorial itself is generating warnings. So that suggests some problems in the code as well as the tutorial. \r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect the tutorial to generate no warnings--and hence demonstrate proper code functionality. As it is, it is not clear whether the warnings are generated from a bug in the code, or from spurious warnings, etc. \r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow import feature_column\r\nfrom tensorflow.keras import layers\r\nfrom sklearn.model_selection import train_test_split\r\n\r\nURL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\ndataframe = pd.read_csv(URL)\r\ntrain, test = train_test_split(dataframe, test_size=0.2)\r\ntrain, val = train_test_split(train, test_size=0.2)\r\nprint(len(train), 'train examples')\r\nprint(len(val), 'validation examples')\r\nprint(len(test), 'test examples')\r\n\r\ndef df_to_dataset(dataframe, shuffle=True, batch_size=32):\r\n  dataframe = dataframe.copy()\r\n  labels = dataframe.pop('target')\r\n  ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n  if shuffle:\r\n    ds = ds.shuffle(buffer_size=len(dataframe))\r\n  ds = ds.batch(batch_size)\r\n  return ds\r\n\r\nbatch_size = 5 # A small batch sized is used for demonstration purposes\r\ntrain_ds = df_to_dataset(train, batch_size=batch_size)\r\nval_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\ntest_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\n# We will use this batch to demonstrate several types of feature columns\r\nexample_batch = next(iter(train_ds))[0]\r\n\r\n# A utility method to create a feature column\r\n# and to transform a batch of data\r\ndef demo(feature_column):\r\n  feature_layer = layers.DenseFeatures(feature_column)\r\n  print(feature_layer(example_batch).numpy())\r\n\r\nage = feature_column.numeric_column(\"age\")\r\ndemo(age) # <-- SHOULD TRIGGER OR DISPLAY THE WARNING\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nNo other materials provided."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34848", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34848/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34848/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34848/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34848", "id": 533106162, "node_id": "MDU6SXNzdWU1MzMxMDYxNjI=", "number": 34848, "title": "TF2.0 - Cannot convert EagerTensor to datatype and casting", "user": {"login": "00krishna", "id": 2063593, "node_id": "MDQ6VXNlcjIwNjM1OTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2063593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/00krishna", "html_url": "https://github.com/00krishna", "followers_url": "https://api.github.com/users/00krishna/followers", "following_url": "https://api.github.com/users/00krishna/following{/other_user}", "gists_url": "https://api.github.com/users/00krishna/gists{/gist_id}", "starred_url": "https://api.github.com/users/00krishna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/00krishna/subscriptions", "organizations_url": "https://api.github.com/users/00krishna/orgs", "repos_url": "https://api.github.com/users/00krishna/repos", "events_url": "https://api.github.com/users/00krishna/events{/privacy}", "received_events_url": "https://api.github.com/users/00krishna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-05T03:48:29Z", "updated_at": "2020-01-08T18:05:45Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Installed from Anaconda\r\n- TensorFlow version (use command below):\r\n`python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\nunknown 2.0.0\r\nI am using TF 2.0.0.\r\n- Python version: python 3.7.4\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: Cuda release 10.1, V10.1.168; cudnn 7.6.0\r\n\r\n- GPU model and memory: Nvidia GTX 1080 11GB.\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nThe code provided generates an error:\r\n```\r\nTypeError: Cannot convert 1.0 to EagerTensor of dtype int64\r\n```\r\nThe cause of the error is not clear but the setup of the code basically follows the Tensorflow tutorial.\r\n\r\n\r\n**Describe the expected behavior**\r\nThe `model.fit()` function should run and complete training. Instead this error gets generated and the training terminates early. I only get like step or such. \r\n\r\n**Code to reproduce the issue**\r\nNote that the error gets generated towards the bottom of the `main()` function, where I invoke the `fit()` function. \r\n\r\n```\r\n#!/usr/bin/python\r\n\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\n# import comet_ml in the top of your file\r\nfrom comet_ml import Experiment\r\nfrom comet_ml import Optimizer\r\nimport numpy as np\r\nimport pandas as pd\r\nimport tensorflow as tf\r\nimport datetime\r\nfrom tensorflow import feature_column\r\nfrom tensorflow.keras import layers\r\nfrom sklearn.model_selection import train_test_split\r\n\r\n# Add the following code anywhere in your machine learning file\r\n\r\ndef main():\r\n\r\n    # Import and setup data\r\n\r\n    URL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\n    dataframe = pd.read_csv(URL)\r\n\r\n    # Setup training test split\r\n\r\n    train, test = train_test_split(dataframe, test_size=0.2)\r\n    train, val = train_test_split(train, test_size=0.2)\r\n    print(f'The training set is of length: {len(train)}')\r\n    batch_size = 32\r\n\r\n    train_ds = df_to_dataset(train, batch_size=batch_size)\r\n    val_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\n    test_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\n    size_train_ds = get_dataset_length(df_to_dataset(train, batch_size=1, repeat=1))\r\n    size_test_ds = get_dataset_length(df_to_dataset(test, batch_size=1, repeat=1))\r\n    size_validation_ds = get_dataset_length(df_to_dataset(val, batch_size=1, repeat=1))\r\n\r\n    print(f' training data length is: {size_train_ds}')\r\n    print(f' test data length is: {size_test_ds}')\r\n    print(f' validation data length is: {size_validation_ds}')\r\n    # Configure experiment and hyperparameters to test with.\r\n\r\n    hparams = {\"nodes\":128, \"thal_embedding_cols\": 3}\r\n\r\n    loss = fit_model(train_ds,  # <-- ERROR GETS GENERATED AROUND HERE.\r\n                     test_ds,\r\n                     val_ds,\r\n                     epochs=100,\r\n                     batch_size=batch_size,\r\n                     number_training_examples=size_train_ds,\r\n                     number_testing_examples=size_test_ds,\r\n                     number_validation_examples=size_validation_ds,\r\n                     hyper_parameters=hparams)\r\n\r\n\r\n    return 0\r\n\r\ndef df_to_dataset(dataframe, shuffle=True, repeat=None, batch_size=32):\r\n    dataframe = dataframe.copy()\r\n    labels = dataframe.pop('target')\r\n    ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n    if shuffle:\r\n        ds = ds.shuffle(buffer_size=len(dataframe))\r\n    ds = ds.batch(batch_size).repeat(repeat)\r\n    return ds\r\n\r\ndef get_dataset_length(ds):\r\n    \"\"\"\r\n    This function will get the number of examples in a tf.data.Dataset. Make\r\n    sure that the batch size for the dataset is set to 1, otherwise this\r\n    function will count the number of batches in the data. \r\n    \"\"\"\r\n    return ds.reduce(np.int64(0), lambda x, _: x + 1)\r\n\r\ndef define_features(hyper_parameters):\r\n\r\n    feature_columns = []\r\n    # numeric cols\r\n    for header in ['age', 'trestbps', 'chol', 'thalach', 'oldpeak', 'slope', 'ca']:\r\n        feature_columns.append(feature_column.numeric_column(header))\r\n        \r\n\r\n    # bucketized cols\r\n    age = feature_column.numeric_column(\"age\")\r\n    age_buckets = feature_column.bucketized_column(age,\r\n                                                   boundaries=[18, 25, 30, 35,\r\n                                                               40, 45, 50, 55,\r\n                                                               60, 65])\r\n    #feature_columns.append(age_buckets)\r\n\r\n    # indicator cols\r\n    thal = feature_column.categorical_column_with_vocabulary_list(\r\n        'thal', ['fixed', 'normal', 'reversible'])\r\n    thal_one_hot = feature_column.indicator_column(thal)\r\n    #feature_columns.append(thal_one_hot)\r\n\r\n    # embedding cols\r\n    thal_embedding = feature_column.embedding_column(thal,\r\n                                                     dimension= \\\r\n                                                     hyper_parameters['thal_embedding_cols'])\r\n    #feature_columns.append(thal_embedding)\r\n\r\n    # crossed cols\r\n    crossed_feature = feature_column.crossed_column([age_buckets, thal], hash_bucket_size=1000)\r\n    crossed_feature = feature_column.indicator_column(crossed_feature)\r\n    #feature_columns.append(crossed_feature)\r\n    return feature_columns\r\n\r\ndef build_model(features, hyper_parameters):\r\n    '''\r\n    documentation string\r\n    '''\r\n    feature_layer = tf.keras.layers.DenseFeatures(features)\r\n\r\n    model = tf.keras.Sequential([\r\n        feature_layer,\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(hyper_parameters['nodes'], activation='relu'),\r\n        layers.Dense(1, activation='sigmoid')\r\n    ])\r\n\r\n    model.compile(optimizer='adam',\r\n                  loss='binary_crossentropy',\r\n                  metrics=['accuracy'])\r\n\r\n    return model\r\n\r\n\r\ndef fit_model(\r\n              train_dataset,\r\n              test_dataset,\r\n              validation_dataset,\r\n              epochs=None,\r\n              batch_size=None,\r\n              number_training_examples=None,\r\n              number_testing_examples=None,\r\n              number_validation_examples=None,\r\n              hyper_parameters=None):\r\n\r\n\r\n    model = build_model(define_features(hyper_parameters), hyper_parameters)\r\n\r\n    log_dir = \"logs/fit/\" + datetime.datetime.now().strftime(\"%Y%m%d-%H%M%S\")\r\n    tensorboard_callback = tf.keras.callbacks.TensorBoard(log_dir=log_dir, histogram_freq=1)\r\n\r\n    model.fit(train_dataset,\r\n              validation_data = test_dataset,\r\n              epochs = epochs,\r\n              steps_per_epoch = number_training_examples//batch_size,\r\n              validation_steps= number_testing_examples//batch_size,\r\n              callbacks = [tensorboard_callback])\r\n\r\n    # score = model.evaluate(x_test, y_test, verbose=0)[1]\r\n    loss, accuracy = model.evaluate(validation_dataset,\r\n                                    steps=number_validation_examples//batch_size,\r\n                                    verbose=0)\r\n    print(loss)\r\n    return loss\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n\r\n```\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nNA"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34846", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34846/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34846/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34846/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34846", "id": 533052011, "node_id": "MDU6SXNzdWU1MzMwNTIwMTE=", "number": 34846, "title": "Feed Input tensor Data from CUDA memory", "user": {"login": "x3lif", "id": 411254, "node_id": "MDQ6VXNlcjQxMTI1NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/411254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/x3lif", "html_url": "https://github.com/x3lif", "followers_url": "https://api.github.com/users/x3lif/followers", "following_url": "https://api.github.com/users/x3lif/following{/other_user}", "gists_url": "https://api.github.com/users/x3lif/gists{/gist_id}", "starred_url": "https://api.github.com/users/x3lif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/x3lif/subscriptions", "organizations_url": "https://api.github.com/users/x3lif/orgs", "repos_url": "https://api.github.com/users/x3lif/repos", "events_url": "https://api.github.com/users/x3lif/events{/privacy}", "received_events_url": "https://api.github.com/users/x3lif/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-12-05T00:52:05Z", "updated_at": "2019-12-18T03:59:06Z", "closed_at": null, "author_association": "NONE", "body": "Hello \r\n\r\nThis feature request is for the C_API\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): No\r\n- OS : Windows 10\r\n- Compiler : VS2015\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI want the C API to provide a way to feed an input Tensor directly from preallocated CUDA memory without copy data through PCI-Express \r\n\r\nCurrent Behaviour  : Need to copy the data to CPU side, then the data is sent back to the GPU for inference.\r\n\r\n**Who will benefit with this feature?**\r\n Anyone who want a performance improvement using Tensorflow C_API for inference\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34841", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34841/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34841/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34841/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34841", "id": 533000040, "node_id": "MDU6SXNzdWU1MzMwMDAwNDA=", "number": 34841, "title": "Segmentation fault and corrupted output during inference with large 3D U-Net", "user": {"login": "pzharrington", "id": 48932392, "node_id": "MDQ6VXNlcjQ4OTMyMzky", "avatar_url": "https://avatars1.githubusercontent.com/u/48932392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pzharrington", "html_url": "https://github.com/pzharrington", "followers_url": "https://api.github.com/users/pzharrington/followers", "following_url": "https://api.github.com/users/pzharrington/following{/other_user}", "gists_url": "https://api.github.com/users/pzharrington/gists{/gist_id}", "starred_url": "https://api.github.com/users/pzharrington/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pzharrington/subscriptions", "organizations_url": "https://api.github.com/users/pzharrington/orgs", "repos_url": "https://api.github.com/users/pzharrington/repos", "events_url": "https://api.github.com/users/pzharrington/events{/privacy}", "received_events_url": "https://api.github.com/users/pzharrington/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-04T23:21:03Z", "updated_at": "2019-12-11T22:37:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): YES\r\n- OS Platform and Distribution: Linux CLE 7.0UP00\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version: 2.0.0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\nI have a 3D U-Net model that I am trying to use for very large inputs (arrays as large as 1024^3). Obviously, I cannot fit this in GPU memory so I am running the network on CPU compute nodes which have a very large amount of RAM available (~350 GB). I have a \"bare-bones\" script which performs only the forward pass using the 3D convolution methods from `tf.nn`, but I am only able to process arrays of size  <= 640^3 without issues. If I go for the next feasible size (which is 704^3 since I can only increase spatial dimensions of the input by multiples of 64), the following behavior occurs:\r\n\r\n* If using tensorflow with the Intel MKL library, which is optimized for running on CPUs on my system, the network runs without crashing but the generated output is corrupted (see attached images). The corruption seems to only occur along the outermost spatial axis of the output array.\r\n\r\n* If using tensorflow-gpu or regular tensorflow (without Intel MKL), the program crashes with a segmentation fault\r\n\r\nThough the input sizes are very large, I would expect tensorflow to be able to complete the computations without issue since I have enough RAM available. The difference in behavior with or without Intel MKL is also perplexing.\r\n\r\n**Code to reproduce the issue**\r\nBelow is a script that performs the U-Net computation on random data and reproduces the segfault/bug:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nsize=704\r\ndtype = np.float32\r\nsample = np.random.normal(size=(1,size,size,size,4)).astype(dtype)\r\nprint(sample.shape)\r\n\r\nconvs = [(4, 4, 4, 4, 64),\r\n         (4, 4, 4, 64, 128),\r\n         (4, 4, 4, 128, 256),\r\n         (4, 4, 4, 256, 512),\r\n         (4, 4, 4, 512, 512),\r\n         (4, 4, 4, 512, 512)]\r\nTconvs = [(4, 4, 4, 512, 512),\r\n          (4, 4, 4, 512, 1024),\r\n          (4, 4, 4, 256, 1024),\r\n          (4, 4, 4, 128, 512),\r\n          (4, 4, 4, 64, 256),\r\n          (4, 4, 4, 5, 128)]\r\n\r\nx = tf.constant(sample)\r\nskips = []\r\nshapes = []\r\n\r\n# Downsampling\r\nfor kernelshape in convs:\r\n    bias = np.zeros(shape=(kernelshape[-1]))\r\n    kernel = np.random.normal(loc=0.0, scale=0.02, size=kernelshape)\r\n    x = tf.nn.conv3d(x, filters=kernel.astype(dtype), strides=[1,2,2,2,1], padding='SAME')\r\n    x = tf.nn.bias_add(x, bias.astype(dtype))\r\n    x = tf.nn.leaky_relu(x, alpha=0.3)\r\n    skips.append(x)\r\n    shapes.append(x.shape)\r\n    print(x.shape)\r\n\r\n# Upsampling with skip connections\r\nskips = list(reversed(skips[:-1]))\r\nfor kernelshape, skip in zip(Tconvs, skips):\r\n    bias = np.zeros(shape=(kernelshape[3]))\r\n    kernel = np.random.normal(loc=0.0, scale=0.02, size=kernelshape)\r\n    out_shape = np.array(x.shape.as_list())\r\n    out_shape[1:4] = 2*out_shape[1:4]\r\n    out_shape[-1] = kernel.shape[3]\r\n    x = tf.nn.conv3d_transpose(x, filters=kernel.astype(dtype), strides=2, padding='SAME', output_shape=out_shape)\r\n    x = tf.nn.bias_add(x, bias.astype(dtype))\r\n    x = tf.nn.relu(x)\r\n    x = tf.concat([x, skip], axis=-1)\r\n    print(x.shape)\r\n\r\n# Final upsampling conv\r\nkernelshape = Tconvs[-1]\r\nbias = np.zeros(shape=(kernelshape[3]))\r\nkernel = np.random.normal(loc=0.0, scale=0.02, size=kernelshape)\r\nout_shape = np.array(x.shape.as_list())\r\nout_shape[1:4] = 2*out_shape[1:4]\r\nout_shape[-1] = kernel.shape[3]\r\nx = tf.nn.conv3d_transpose(x, filters=kernel.astype(dtype), strides=2, padding='SAME', output_shape=out_shape)\r\nx = tf.nn.bias_add(x, bias.astype(dtype))\r\nx = tf.math.tanh(x)\r\n\r\nprint(x.shape)\r\nx = x.numpy().astype(np.float32)\r\n```\r\n\r\n**Other info / logs**\r\nThe attached images show the output of the U-Net (running on random noise) for the problematic size (704^3), via 2D slices along the x-y and x-z planes: \r\n![image](https://user-images.githubusercontent.com/48932392/70189520-613e2180-16a8-11ea-970f-27bdd58546f1.png)\r\nThe images should look like uniform noise, but instead have a sharp change occur along the x-axis after index~520.\r\n\r\nOn my actual dataset, the corruption looks like: \r\n![image](https://user-images.githubusercontent.com/48932392/70190128-fc83c680-16a9-11ea-9fb1-984be9673381.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34839", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34839/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34839/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34839/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34839", "id": 532965539, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ5MTE4NjEy", "number": 34839, "title": "Fix to earlier fix for big-endian support in TFLite Micro", "user": {"login": "frreiss", "id": 12436991, "node_id": "MDQ6VXNlcjEyNDM2OTkx", "avatar_url": "https://avatars1.githubusercontent.com/u/12436991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frreiss", "html_url": "https://github.com/frreiss", "followers_url": "https://api.github.com/users/frreiss/followers", "following_url": "https://api.github.com/users/frreiss/following{/other_user}", "gists_url": "https://api.github.com/users/frreiss/gists{/gist_id}", "starred_url": "https://api.github.com/users/frreiss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frreiss/subscriptions", "organizations_url": "https://api.github.com/users/frreiss/orgs", "repos_url": "https://api.github.com/users/frreiss/repos", "events_url": "https://api.github.com/users/frreiss/events{/privacy}", "received_events_url": "https://api.github.com/users/frreiss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-04T22:11:14Z", "updated_at": "2020-02-05T06:08:30Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34839", "html_url": "https://github.com/tensorflow/tensorflow/pull/34839", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34839.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34839.patch"}, "body": "https://github.com/tensorflow/tensorflow/pull/30362 modified TFLite Micro to work on big-endian processors. One of the code modifications in that pull request added byte-swapping to the accessor functions in `tensorflow/lite/kernels/kernel_util.h`. This byte swapping corrected for little-endian data in the `inputs` and `outputs` fields of `TfLiteNode` structs. This little-endian data was there because the `MicroAllocator` class initialized these fields with pointers to `flatbuffers::Vector<int32_t>` that were cast to `TfLiteIntArray*`. These two struct types happen to have the same format in memory on little-endian machines.\r\n\r\nAlthough these changes to `kernel_util.h` got TFLite Micro to work on big-endian machines at the time, there are two significant problems as a result of these changes:\r\n* The non-microcontroller version of TFLite is now broken on big-endian machines, because that version of TFLite keeps the `inputs` and `outputs` fields in host byte order.\r\n* Subsequent updates to `kernel_util.h` have added additional accessors that do not have the byte-swapping changes. As a result, TFLite Micro is once again broken on big-endian machines.\r\n\r\nThe upshot of this is that the versions of both TensorFlow Lite and TFLite Micro at the head of the master branch crash with segmentation faults if the user attempts to load a model on a machine with a big-endian architecture.\r\n\r\nThis pull request replaces the changes to `kernel_util.h` with an alternative that should be more maintainable. I have modified the model-loading code in `MicroAllocator::AllocateNodeAndRegistrations()` so that it copies and byte-swaps the `inputs` and `outputs` fields of nodes when loading graphs on big-endian machines. These arrays are small (typically 1-2 entries per node), so the additional memory allocated is minimal. After this change, the data in the `inputs` and `outputs` fields is always in host byte order. So I have removed the calls to `flatbuffers::EndianScalar()` from the accessors in `kernel_util.h`.\r\n\r\nAfter these changes, all but 2 of the regression tests under `//tensorflow/lite/experimental/micro` succeed on my big-endian test machine. These two tests fail because another change in https://github.com/tensorflow/tensorflow/pull/30362 is also broken. I will fix this other problem in a separate pull request.\r\n\r\nFYI @PeteBlackerThe3rd"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34834", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34834/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34834/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34834/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34834", "id": 532874811, "node_id": "MDU6SXNzdWU1MzI4NzQ4MTE=", "number": 34834, "title": "layer.output raises AttributeError because inbound nodes lost after call to activation function", "user": {"login": "chahld", "id": 8064384, "node_id": "MDQ6VXNlcjgwNjQzODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/8064384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chahld", "html_url": "https://github.com/chahld", "followers_url": "https://api.github.com/users/chahld/followers", "following_url": "https://api.github.com/users/chahld/following{/other_user}", "gists_url": "https://api.github.com/users/chahld/gists{/gist_id}", "starred_url": "https://api.github.com/users/chahld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chahld/subscriptions", "organizations_url": "https://api.github.com/users/chahld/orgs", "repos_url": "https://api.github.com/users/chahld/repos", "events_url": "https://api.github.com/users/chahld/events{/privacy}", "received_events_url": "https://api.github.com/users/chahld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-12-04T19:02:53Z", "updated_at": "2019-12-11T18:45:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- custom code\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nubuntu 18.04\r\n- TensorFlow installed from (source or binary):\r\npip install tensorflow-gpu\r\n- TensorFlow version (use command below):\r\n\r\nv2.0.0-rc2-26-g64c3d38 2.0.0\r\nand \r\nv2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n\r\n- Python version:\r\n3.6.9\r\n\r\n**Describe the current behavior**\r\ncalling layer.output on a keras layer that is called on the output of an activation function does not setup the inbound nodes properly and so one cannot call the layer.output method.\r\n\r\n**Describe the expected behavior**\r\nlayer.output should return the output tensor\r\n\r\n**Code to reproduce the issue**\r\n```\r\n\r\nimport tensorflow as tf\r\n\r\n\r\n\r\nclass MyModel(tf.keras.Model):\r\n    def __init__(self, **kwargs):\r\n        super().__init__(**kwargs)\r\n\r\n        self.dense0 = tf.keras.layers.Dense(10, name='dense0', input_shape=(5, 5, 1))\r\n        self.dense1 = tf.keras.layers.Dense(10, name='dense1')\r\n        self.dense2 = tf.keras.layers.Dense(10, name='dense2')\r\n\r\n    def call(self, x):\r\n        x = self.dense0(x)\r\n        # if you use this line it works\r\n        x = tf.keras.layers.ReLU()(x)\r\n        x = self.dense1(x)\r\n\r\n        print('correct:', self.dense1.inbound_nodes)\r\n\r\n        # if you use this line it doesn't work\r\n        relu = tf.keras.activations.get('relu')\r\n        x = relu(x)\r\n        x = self.dense2(x)\r\n\r\n        print('incorrect:', self.dense2.inbound_nodes)\r\n        return x\r\n\r\n\r\ndef main():\r\n    my_model = MyModel()\r\n\r\n    inp = tf.keras.Input(shape=(5, 5, 1))\r\n    out = my_model(inp)\r\n\r\n    my_model.compile(optimizer='adam',\r\n                     loss='sparse_categorical_crossentropy')\r\n\r\n    for l in my_model.layers:\r\n        try:\r\n            print(l.output)\r\n        except AttributeError:\r\n            print('EXCEPTION: {}.output raises attribute error'.format(l.name))\r\n\r\n\r\nif __name__=='__main__':\r\n    main()\r\n\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nUPDATED: to include input_shape which does not solve the problem."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34829", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34829/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34829/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34829/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34829", "id": 532705816, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ4OTA2MTI5", "number": 34829, "title": "added usage example and errors raised", "user": {"login": "rpalakkal", "id": 19766713, "node_id": "MDQ6VXNlcjE5NzY2NzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/19766713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rpalakkal", "html_url": "https://github.com/rpalakkal", "followers_url": "https://api.github.com/users/rpalakkal/followers", "following_url": "https://api.github.com/users/rpalakkal/following{/other_user}", "gists_url": "https://api.github.com/users/rpalakkal/gists{/gist_id}", "starred_url": "https://api.github.com/users/rpalakkal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rpalakkal/subscriptions", "organizations_url": "https://api.github.com/users/rpalakkal/orgs", "repos_url": "https://api.github.com/users/rpalakkal/repos", "events_url": "https://api.github.com/users/rpalakkal/events{/privacy}", "received_events_url": "https://api.github.com/users/rpalakkal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-04T14:04:19Z", "updated_at": "2020-01-27T23:26:10Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34829", "html_url": "https://github.com/tensorflow/tensorflow/pull/34829", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34829.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34829.patch"}, "body": "I was working on another GCI task and noticed that keras.utils.to_categorical didn't have a usage example or a raise-error(which I happened to get) so I updated the doc"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34827", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34827/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34827/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34827/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34827", "id": 532673107, "node_id": "MDU6SXNzdWU1MzI2NzMxMDc=", "number": 34827, "title": "Bogus cache keys in Network._output_shape_cache can cause wrong output shapes (and gradual but unbounded memory growth)", "user": {"login": "gthb", "id": 153580, "node_id": "MDQ6VXNlcjE1MzU4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/153580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gthb", "html_url": "https://github.com/gthb", "followers_url": "https://api.github.com/users/gthb/followers", "following_url": "https://api.github.com/users/gthb/following{/other_user}", "gists_url": "https://api.github.com/users/gthb/gists{/gist_id}", "starred_url": "https://api.github.com/users/gthb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gthb/subscriptions", "organizations_url": "https://api.github.com/users/gthb/orgs", "repos_url": "https://api.github.com/users/gthb/repos", "events_url": "https://api.github.com/users/gthb/events{/privacy}", "received_events_url": "https://api.github.com/users/gthb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-12-04T13:08:46Z", "updated_at": "2020-01-03T22:57:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.14.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: 3.7.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\n\r\nIncreasing amounts of memory get allocated and not garbage-collected on successive calls to `model.predict_on_batch(...)`, because output tensor shapes are cached into `Network._output_shape_cache` with cache keys based on Python object identity (which is based on the memory address of the object, in CPython), and cache entries are never expired (the cache is just a standard Python dict). This happens at the end of `Network._run_internal_graph`:\r\n\r\n```python\r\n      cache_key = generic_utils.object_list_uid(input_shapes)\r\n      self._output_shape_cache[cache_key] = nest.pack_sequence_as(\r\n          self._nested_outputs, output_shapes)\r\n```\r\n\r\nThis is seen in the output of my script (see further below), which shows memory growth like this:\r\n\r\n```\r\n...\r\nNotable memory usage diff over last 3000 predictions:\r\n+177 B     (+0 B    per prediction)   +3 objs (0.00 per prediction) at:\r\n    kerasbug.py:37\r\n    .../tensorflow_core/python/keras/engine/training.py:1135\r\n    .../tensorflow_core/python/keras/engine/training_v2_utils.py:370\r\n    .../tensorflow_core/python/keras/engine/base_layer.py:891\r\n    .../tensorflow_core/python/keras/engine/network.py:708\r\n    .../tensorflow_core/python/keras/engine/network.py:877\r\n    .../tensorflow_core/python/keras/utils/generic_utils.py:564\r\n    .../tensorflow_core/python/keras/utils/generic_utils.py:564\r\n\r\nmodel._output_shape_cache has grown to 300, new elements are:\r\n('5492540304', TensorShape([None, 3]))\r\n('5492540688', TensorShape([None, 3]))\r\n('5492539600', TensorShape([None, 3]))\r\n```\r\n\r\nIn practice, at least in my simple script, the growth rate _does_ decrease with time and the overall memory use _probably_ levels off, because input shape objects get garbage collected and their memory gets reused so new input shape objects _often_ get allocated at the same memory addresses, so their cache keys are already present in the cache. But there is no guarantee of this reuse of memory addresses and thus object identities (and its likelihood probably depends on what else is going on in the process), and thus there is no real guarantee of an upper bound to the growth of this cache.\r\n\r\nAdditionally, this cache key scheme hints at a likely functional bug: an input shape object that gets created at the same memory address as a previous input shape object will get the same object identity, and can thus lead to the same cache key in the output shape cache, even if it is not the same input shape. Such a case can cause `compute_output_shape` to return the wrong output shape (one that was valid for a _previous_ set of input shapes, still present in the cache). I have not tried to write code with varying input shapes to manifest this suspected bug.\r\n\r\n**Describe the expected behavior**\r\n\r\nI expect memory growth on successive model predictions to have an upper bound, when I  repeatedly call `predict_on_batch`.\r\n\r\nI expect the output tensor shape returned by `Network.compute_output_shape` to be unaffected by the shapes of inputs of _previous_ runs. (But I haven't demonstrated a failure of this expectation, just conjectured how it would happen.)\r\n\r\n**Code to reproduce the issue**\r\n\r\nThe following script shows the (theoretically) unbounded memory growth.\r\n\r\n```python\r\nimport gc\r\nimport time\r\nfrom itertools import islice\r\nimport tracemalloc\r\nfrom os.path import basename\r\n\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nTRACEMALLOC_EVERY = 3000\r\nTRACEMALLOC_IGNORE = \"tracemalloc.py:\",\r\n\r\ninput_tensor = tf.keras.Input(shape=(3,), name='input')\r\noutput_tensor = tf.keras.layers.Dense(3, name='output')(input_tensor)\r\nmodel = tf.keras.Model(inputs=[input_tensor], outputs=[output_tensor])\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='categorical_crossentropy',\r\n              metrics=['categorical_accuracy'])\r\n\r\n\r\ndef random_input():\r\n    return np.random.random_sample([1, 3])\r\n\r\nmodel.predict_on_batch(random_input())\r\n\r\ntracemalloc.start(50)\r\n\r\nlast_snapshot = tracemalloc.take_snapshot()\r\nalready_printed_from_output_shape_cache = []\r\n\r\nwhile True:\r\n    for _ in range(TRACEMALLOC_EVERY):\r\n        model.predict_on_batch(random_input())\r\n\r\n    gc.collect()\r\n    time.sleep(0.1)\r\n    snapshot = tracemalloc.take_snapshot()\r\n    top_stats = snapshot.compare_to(last_snapshot, 'traceback')\r\n    last_snapshot = snapshot\r\n\r\n    notable_mem_usage_diff = \"\\n\".join(\r\n        f\"{tracemalloc._format_size(stat.size_diff, True):10} \"\r\n        f\"({tracemalloc._format_size(stat.size_diff // TRACEMALLOC_EVERY, True):7} per prediction) \"\r\n        f\"{stat.count_diff:+4} objs \"\r\n        f\"({stat.count_diff / TRACEMALLOC_EVERY:.2f} per prediction) at:\\n\"\r\n        + \"\\n\".join(\"    %s\" % tb for tb in stat.traceback)\r\n        for stat in islice(\r\n            (s for s in top_stats\r\n             if not any(i in str(tb) for tb in s.traceback for i in TRACEMALLOC_IGNORE)\r\n             and not all(basename(__file__) + \":\" in str(tb) for tb in s.traceback)\r\n             and abs(s.size_diff) > 0  # // TRACEMALLOC_EVERY >= 8\r\n             ),\r\n            20\r\n        )\r\n    )\r\n    if notable_mem_usage_diff:\r\n        print(\"Notable memory usage diff over last %d predictions:\\n%s\\n\" % (TRACEMALLOC_EVERY, notable_mem_usage_diff))\r\n    else:\r\n        print(\"No notable memory usage diff over last %d predictions\\n\" % (TRACEMALLOC_EVERY,))\r\n    new_cache_elements = [item for item in model._output_shape_cache.items()\r\n                          if item not in already_printed_from_output_shape_cache]\r\n    if new_cache_elements:\r\n        print(\"model._output_shape_cache has grown to %d, new elements are:\\n%s\\n\" % (\r\n            len(model._output_shape_cache),\r\n            \"\\n\".join(str(item) for item in new_cache_elements)\r\n        ))\r\n        already_printed_from_output_shape_cache.extend(new_cache_elements)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nAs a sidenote, we are calling `predict_on_batch` instead of `predict` as a workaround for https://github.com/tensorflow/tensorflow/issues/33009 (another memory leak issue)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34826", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34826/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34826/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34826/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34826", "id": 532655157, "node_id": "MDU6SXNzdWU1MzI2NTUxNTc=", "number": 34826, "title": "[Dask] [TF 2.0] ValueError: TypeError: len() of unsized object", "user": {"login": "Hoeze", "id": 1200058, "node_id": "MDQ6VXNlcjEyMDAwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1200058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hoeze", "html_url": "https://github.com/Hoeze", "followers_url": "https://api.github.com/users/Hoeze/followers", "following_url": "https://api.github.com/users/Hoeze/following{/other_user}", "gists_url": "https://api.github.com/users/Hoeze/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hoeze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hoeze/subscriptions", "organizations_url": "https://api.github.com/users/Hoeze/orgs", "repos_url": "https://api.github.com/users/Hoeze/repos", "events_url": "https://api.github.com/users/Hoeze/events{/privacy}", "received_events_url": "https://api.github.com/users/Hoeze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-04T12:32:35Z", "updated_at": "2020-02-15T23:51:53Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\n```python\r\nIn [6]: tf.convert_to_tensor(value)                                                                                                                                                                                                                                                                                          \r\n2019-12-04 13:15:11.908174: I tensorflow/core/platform/cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  SSE4.1 SSE4.2 AVX AVX2 FMA\r\nTo enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2019-12-04 13:15:12.647383: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3299990000 Hz\r\n2019-12-04 13:15:12.648044: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5644649bc070 executing computations on platform Host. Devices:\r\n2019-12-04 13:15:12.648118: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2019-12-04 13:15:12.654239: I tensorflow/core/common_runtime/process_util.cc:115] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-6-cb9026824ca5> in <module>\r\n----> 1 tf.convert_to_tensor(value)\r\n\r\n/opt/anaconda/envs/tf/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py in convert_to_tensor_v2(value, dtype, dtype_hint, name)\r\n   1240       name=name,\r\n   1241       preferred_dtype=dtype_hint,\r\n-> 1242       as_ref=False)\r\n   1243 \r\n   1244 \r\n\r\n/opt/anaconda/envs/tf/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, ctx, accept_composite_tensors)\r\n   1294 \r\n   1295     if ret is None:\r\n-> 1296       ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n   1297 \r\n   1298     if ret is NotImplemented:\r\n\r\n/opt/anaconda/envs/tf/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in _constant_tensor_conversion_function(v, dtype, name, as_ref)\r\n    284                                          as_ref=False):\r\n    285   _ = as_ref\r\n--> 286   return constant(v, dtype=dtype, name=name)\r\n    287 \r\n    288 \r\n\r\n/opt/anaconda/envs/tf/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in constant(value, dtype, shape, name)\r\n    225   \"\"\"\r\n    226   return _constant_impl(value, dtype, shape, name, verify_shape=False,\r\n--> 227                         allow_broadcast=True)\r\n    228 \r\n    229 \r\n\r\n/opt/anaconda/envs/tf/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in _constant_impl(value, dtype, shape, name, verify_shape, allow_broadcast)\r\n    233   ctx = context.context()\r\n    234   if ctx.executing_eagerly():\r\n--> 235     t = convert_to_eager_tensor(value, ctx, dtype)\r\n    236     if shape is None:\r\n    237       return t\r\n\r\n/opt/anaconda/envs/tf/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in convert_to_eager_tensor(value, ctx, dtype)\r\n     94       dtype = dtypes.as_dtype(dtype).as_datatype_enum\r\n     95   ctx.ensure_initialized()\r\n---> 96   return ops.EagerTensor(value, ctx.device_name, dtype)\r\n     97 \r\n     98 \r\n\r\nValueError: TypeError: len() of unsized object\r\nTraceback (most recent call last):\r\n\r\n  File \"/opt/anaconda/envs/tf/lib/python3.7/site-packages/dask/array/core.py\", line 1165, in __len__\r\n    raise TypeError(\"len() of unsized object\")\r\n\r\nTypeError: len() of unsized object\r\n```\r\n\r\n**Describe the expected behavior**\r\nShould just return a tf.EagerTensor\r\n\r\n**Code to reproduce the issue**\r\nI uploaded a Test-Dask-array which produces this error:\r\nhttps://drive.google.com/file/d/1NtKsv3P37MyYzs8OCbzxSVuL-hA79IPE/view?usp=sharing\r\nPlease `bunzip2` it before running the following code:\r\n```python\r\nimport pickle\r\nimport tensorflow as tf\r\nwith open('test.pkl', 'rb') as handle:\r\n        value = pickle.load(handle)\r\n\r\ntf.convert_to_tensor(value)\r\n```\r\n\r\n**_The part where it fails is `value[0, 0]`, which is a Dask scalar array.\r\nI have no idea why Tensorflow tries to fetch scalar values from a Dask array instead of just calling `np.asarray(value)` on it._**\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nCentos 7\r\n- TensorFlow installed from (source or binary):\r\nconda-forge\r\n- TensorFlow version (use command below):\r\nunknown 2.0.0\r\n- Python version:\r\n3.7.3"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34823", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34823/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34823/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34823/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34823", "id": 532615647, "node_id": "MDU6SXNzdWU1MzI2MTU2NDc=", "number": 34823, "title": "Profiler API and Service are not available", "user": {"login": "AlexisBRENON", "id": 1846046, "node_id": "MDQ6VXNlcjE4NDYwNDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1846046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexisBRENON", "html_url": "https://github.com/AlexisBRENON", "followers_url": "https://api.github.com/users/AlexisBRENON/followers", "following_url": "https://api.github.com/users/AlexisBRENON/following{/other_user}", "gists_url": "https://api.github.com/users/AlexisBRENON/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexisBRENON/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexisBRENON/subscriptions", "organizations_url": "https://api.github.com/users/AlexisBRENON/orgs", "repos_url": "https://api.github.com/users/AlexisBRENON/repos", "events_url": "https://api.github.com/users/AlexisBRENON/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexisBRENON/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qiuminxu", "id": 3082188, "node_id": "MDQ6VXNlcjMwODIxODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/3082188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiuminxu", "html_url": "https://github.com/qiuminxu", "followers_url": "https://api.github.com/users/qiuminxu/followers", "following_url": "https://api.github.com/users/qiuminxu/following{/other_user}", "gists_url": "https://api.github.com/users/qiuminxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiuminxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiuminxu/subscriptions", "organizations_url": "https://api.github.com/users/qiuminxu/orgs", "repos_url": "https://api.github.com/users/qiuminxu/repos", "events_url": "https://api.github.com/users/qiuminxu/events{/privacy}", "received_events_url": "https://api.github.com/users/qiuminxu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qiuminxu", "id": 3082188, "node_id": "MDQ6VXNlcjMwODIxODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/3082188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiuminxu", "html_url": "https://github.com/qiuminxu", "followers_url": "https://api.github.com/users/qiuminxu/followers", "following_url": "https://api.github.com/users/qiuminxu/following{/other_user}", "gists_url": "https://api.github.com/users/qiuminxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiuminxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiuminxu/subscriptions", "organizations_url": "https://api.github.com/users/qiuminxu/orgs", "repos_url": "https://api.github.com/users/qiuminxu/repos", "events_url": "https://api.github.com/users/qiuminxu/events{/privacy}", "received_events_url": "https://api.github.com/users/qiuminxu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-12-04T11:11:59Z", "updated_at": "2020-01-08T08:10:58Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/tensorboard/tensorboard_profiling_keras#other_ways_for_profiling\r\n\r\n## Description of the issue (what needs changing):\r\n\r\nThe guide presents the profiler API and service as other ways of profiling.\r\nBoth of these use modules inside the `tensorflow.python` package.\r\nHowever, this package does not seem to exist as exhibited by the error message:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-14-c7b3d51d1060> in <module>()\r\n----> 1 with tf.python.eager.profiler.Profiler('logdir_path'):\r\n      2   # do your training here\r\n      3   pass\r\n      4 \r\n      5 \r\n\r\nAttributeError: module 'tensorflow' has no attribute 'python'\r\n```\r\n\r\n### Submit a pull request?\r\n\r\nI would be pleased to submit a pull request, but do not know if there is any TF2.0 compatible way to use profile API or service."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34817", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34817/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34817/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34817/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34817", "id": 532495138, "node_id": "MDU6SXNzdWU1MzI0OTUxMzg=", "number": 34817, "title": "YOLOBOX ops, YoloNMS ops", "user": {"login": "mengjiexu", "id": 19543291, "node_id": "MDQ6VXNlcjE5NTQzMjkx", "avatar_url": "https://avatars0.githubusercontent.com/u/19543291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mengjiexu", "html_url": "https://github.com/mengjiexu", "followers_url": "https://api.github.com/users/mengjiexu/followers", "following_url": "https://api.github.com/users/mengjiexu/following{/other_user}", "gists_url": "https://api.github.com/users/mengjiexu/gists{/gist_id}", "starred_url": "https://api.github.com/users/mengjiexu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mengjiexu/subscriptions", "organizations_url": "https://api.github.com/users/mengjiexu/orgs", "repos_url": "https://api.github.com/users/mengjiexu/repos", "events_url": "https://api.github.com/users/mengjiexu/events{/privacy}", "received_events_url": "https://api.github.com/users/mengjiexu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-04T07:14:43Z", "updated_at": "2019-12-05T03:26:55Z", "closed_at": null, "author_association": "NONE", "body": "Use tf2.0 project: yolov3-tf2\r\nI train the model, and want to covert it to .tflite file. Then I get error:\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, CONV_2D, DEPTHWISE_CONV_2D, DIV, EXP, EXPAND_DIMS, FILL, LEAKY_RELU, LOGISTIC, MUL, PACK, PAD, RESHAPE, RESIZE_NEAREST_NEIGHBOR, SHAPE, SPLIT_V, STRIDED_SLICE, SUB. Here is a list of operators for which you will need custom implementations: CombinedNonMaxSuppression, Size.\r\n\r\n\r\nThe YoloBoxes and YoloNms ops is not supported."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34808", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34808/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34808/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34808/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34808", "id": 532189872, "node_id": "MDU6SXNzdWU1MzIxODk4NzI=", "number": 34808, "title": "grpc+verbs not being used", "user": {"login": "limjingrong", "id": 15123927, "node_id": "MDQ6VXNlcjE1MTIzOTI3", "avatar_url": "https://avatars2.githubusercontent.com/u/15123927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/limjingrong", "html_url": "https://github.com/limjingrong", "followers_url": "https://api.github.com/users/limjingrong/followers", "following_url": "https://api.github.com/users/limjingrong/following{/other_user}", "gists_url": "https://api.github.com/users/limjingrong/gists{/gist_id}", "starred_url": "https://api.github.com/users/limjingrong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/limjingrong/subscriptions", "organizations_url": "https://api.github.com/users/limjingrong/orgs", "repos_url": "https://api.github.com/users/limjingrong/repos", "events_url": "https://api.github.com/users/limjingrong/events{/privacy}", "received_events_url": "https://api.github.com/users/limjingrong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-12-03T18:48:44Z", "updated_at": "2019-12-13T09:49:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N.A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.15\r\n- Python version: 3.5.2, 3.6.8 (different machines)\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): GCC 7.4\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\n\r\n\r\n**Describe the problem**\r\nRunning code with tf.estimator.RunConfig(...., protocol=\"grpc+verbs\") does not throw any error, but does not appear to use RDMA (logs do not show any mention of RDMA). Running the code without this protocol (i.e just on gRPC) appears to work fine, which leads me to think that it's a build / installation issue. We also observe no speed-up by using RDMA, which suggests that RDMA is not being used. We are using a 1x parameter server, 1x chief, 1x evaluator, 15x worker setup (Parameter server, chief, and evaluator are on the same node and share the same filesystem; the workers are on separate machines and do not share the same file system).\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI followed the guide [here](https://www.tensorflow.org/install/source) to compile from source. However, running the \"./configure\" step does **not** give an option to install with verbs support. Hence, I built Tensorflow with the following command:\r\n`bazel build --config=verbs //tensorflow/tools/pip_package:build_pip_package`. Everything else followed the given guide.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nSample parameter server logs:\r\n`2019-12-03 13:26:22.885842: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX\r\nWARNING:tensorflow:\r\nThe TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\n  * https://github.com/tensorflow/io (for I/O related ops)\r\nIf you depend on functionality not listed there, please file an issue.\r\n\r\nWARNING:tensorflow:\r\nThe TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\n  * https://github.com/tensorflow/io (for I/O related ops)\r\nIf you depend on functionality not listed there, please file an issue.\r\n\r\nWARNING:tensorflow:`eval_strategy` is not passed in. No distribution strategy will be used for evaluation.\r\nWARNING:tensorflow:`eval_strategy` is not passed in. No distribution strategy will be used for evaluation.\r\n2019-12-03 13:26:22.899183: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job chief -> {0 -> 192.168.9.20:1235}\r\n2019-12-03 13:26:22.899214: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job ps -> {0 -> localhost:1236}\r\n2019-12-03 13:26:22.899232: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job worker -> {0 -> 192.168.9.16:1234, 1 -> 192.168.9.17:1234, 2 -> 192.168.9.18:1234, 3 -> 192.168.9.23:1234, 4 -> 192.168.9.24:1234, 5 -> 192.168.9.25:1234, 6 -> 192.168.9.26:1234, 7 -> 192.168.9.27:1234, 8 -> 192.168.9.28:1234, 9 -> 192.168.9.29:1234, 10 -> 192.168.9.30:1234, 11 -> 192.168.9.31:1234, 12 -> 192.168.9.32:1234, 13 -> 192.168.9.105:1234, 14 -> 192.168.9.106:1234}\r\n2019-12-03 13:26:22.903725: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:1236\r\n2019-12-03 13:26:22.903796: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:369] Server already started (target: grpc://localhost:1236)\r\n2019-12-03 13:26:28.930441: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:29.073805: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:29.308595: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:29.609207: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:29.994561: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:30.430739: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:30.971334: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:59.046948: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.\r\n2019-12-03 13:26:59.278155: I tensorflow/core/distributed_runtime/worker.cc:203] Cancellation requested for RunGraph.`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34805", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34805/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34805/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34805/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34805", "id": 532174598, "node_id": "MDU6SXNzdWU1MzIxNzQ1OTg=", "number": 34805, "title": "Please add Tested build configurations for Tensorflow 1.15 and Tensorflow 1.15-gpu", "user": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-03T18:21:11Z", "updated_at": "2019-12-03T18:22:18Z", "closed_at": null, "author_association": "NONE", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue: N/A\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/install/source\r\n\r\n## Description of issue (what needs changing): Please add Tested build configurations for Tensorflow 1.15 and Tensorflow 1.15-gpu\r\n\r\n### Clear description\r\n\r\nFor example, why should someone use this method? How is it useful?\r\nI cannot find the test build configurations for Tensorflow 1.15. It is useful for someone who is trying to build Tensorflow 1.15. \r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34801", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34801/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34801/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34801/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34801", "id": 532080294, "node_id": "MDU6SXNzdWU1MzIwODAyOTQ=", "number": 34801, "title": "Can not run tensorflow gpu 2.0 with cuda 10.0 on arm64 boards (jetson nano)", "user": {"login": "pythops", "id": 57548585, "node_id": "MDQ6VXNlcjU3NTQ4NTg1", "avatar_url": "https://avatars0.githubusercontent.com/u/57548585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythops", "html_url": "https://github.com/pythops", "followers_url": "https://api.github.com/users/pythops/followers", "following_url": "https://api.github.com/users/pythops/following{/other_user}", "gists_url": "https://api.github.com/users/pythops/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythops/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythops/subscriptions", "organizations_url": "https://api.github.com/users/pythops/orgs", "repos_url": "https://api.github.com/users/pythops/repos", "events_url": "https://api.github.com/users/pythops/events{/privacy}", "received_events_url": "https://api.github.com/users/pythops/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-03T15:48:52Z", "updated_at": "2020-01-15T02:28:04Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution: Linux Ubuntu 18.04.3 arm64\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: Python 3.6.8\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): 7.4.0\r\n- CUDA/cuDNN version: cuda=10.0.326-1/ cudnn=7.5.0.56-1+cuda10.0\r\n- GPU model and memory: nvidia jetson nano , 4GB of memory\r\n\r\n**Describe the current behavior**\r\nCan not run code on gpu as it stuck at libcublas then crashes\r\n```\r\n>>> tf.debugging.set_log_device_placement(True)\r\n>>> a = tf.constant([[1.0, 2.0, 3.0], [4.0, 5.0, 6.0]])\r\n2019-12-03 15:14:11.076714: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.077411: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: NVIDIA Tegra X1 major: 5 minor: 3 memoryClockRate(GHz): 0.9216\r\npciBusID: 0000:00:00.0\r\n2019-12-03 15:14:11.077849: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-12-03 15:14:11.078090: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-12-03 15:14:11.078270: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-12-03 15:14:11.078453: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-12-03 15:14:11.078617: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-12-03 15:14:11.078793: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-12-03 15:14:11.079122: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-12-03 15:14:11.079542: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.080004: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.080247: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-12-03 15:14:11.083934: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.084130: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: NVIDIA Tegra X1 major: 5 minor: 3 memoryClockRate(GHz): 0.9216\r\npciBusID: 0000:00:00.0\r\n2019-12-03 15:14:11.084244: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-12-03 15:14:11.084317: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-12-03 15:14:11.084378: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-12-03 15:14:11.084443: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-12-03 15:14:11.084501: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-12-03 15:14:11.084567: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-12-03 15:14:11.084623: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-12-03 15:14:11.084836: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.085143: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.085284: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-12-03 15:14:11.085383: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-12-03 15:14:11.085441: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0 \r\n2019-12-03 15:14:11.085484: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N \r\n2019-12-03 15:14:11.085724: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.086047: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:973] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-12-03 15:14:11.086225: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 2270 MB memory) -> physical GPU (device: 0, name: NVIDIA Tegra X1, pci bus id: 0000:00:00.0, compute capability: 5.3)\r\n>>> b = tf.constant([[1.0, 2.0], [3.0, 4.0], [5.0, 6.0]])\r\n>>> c = tf.matmul(a, b)\r\n2019-12-03 15:14:16.993486: I tensorflow/core/common_runtime/eager/execute.cc:574] Executing op MatMul in device /job:localhost/replica:0/task:0/device:GPU:0\r\n2019-12-03 15:14:17.047313: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-12-03 15:18:10.046885: F tensorflow/stream_executor/cuda/cuda_driver.cc:175] Check failed: err == cudaSuccess || err == cudaErrorInvalidValue Unexpected CUDA error: unknown error\r\nAborted\r\n\r\n```\r\n\r\n**Describe the expected behavior**\r\nIt should calculate the value of the tensor C.\r\n\r\n**Code to reproduce the issue**\r\nInstall tensorflow 2.0 on jetson nano\r\nI provide the python wheel here in my post here\r\nhttps://pythops.com/post/compile-deeplearning-libraries-for-jetson-nano\r\nthen run this\r\n```\r\na = tf.constant([[1.0, 2.0, 3.0], [4.0, 5.0, 6.0]])\r\nb = tf.constant([[1.0, 2.0], [3.0, 4.0], [5.0, 6.0]])\r\nc = tf.matmul(a, b)\r\nprint(c)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34798", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34798/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34798/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34798/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34798", "id": 532039798, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ4MzczMDQx", "number": 34798, "title": "added usage examples for tf.image", "user": {"login": "rpalakkal", "id": 19766713, "node_id": "MDQ6VXNlcjE5NzY2NzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/19766713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rpalakkal", "html_url": "https://github.com/rpalakkal", "followers_url": "https://api.github.com/users/rpalakkal/followers", "following_url": "https://api.github.com/users/rpalakkal/following{/other_user}", "gists_url": "https://api.github.com/users/rpalakkal/gists{/gist_id}", "starred_url": "https://api.github.com/users/rpalakkal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rpalakkal/subscriptions", "organizations_url": "https://api.github.com/users/rpalakkal/orgs", "repos_url": "https://api.github.com/users/rpalakkal/repos", "events_url": "https://api.github.com/users/rpalakkal/events{/privacy}", "received_events_url": "https://api.github.com/users/rpalakkal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}, {"id": 474725938, "node_id": "MDU6TGFiZWw0NzQ3MjU5Mzg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stalled", "name": "stalled", "color": "d4c5f9", "default": false, "description": null}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-03T14:50:49Z", "updated_at": "2020-03-12T01:18:10Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34798", "html_url": "https://github.com/tensorflow/tensorflow/pull/34798", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34798.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34798.patch"}, "body": "added usage examples for all the \"random\" operations under tf.image api doc"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34793", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34793/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34793/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34793/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34793", "id": 531936473, "node_id": "MDU6SXNzdWU1MzE5MzY0NzM=", "number": 34793, "title": "Sequence pad support for Ragged Tensor when call to_tensor", "user": {"login": "workingloong", "id": 18071380, "node_id": "MDQ6VXNlcjE4MDcxMzgw", "avatar_url": "https://avatars1.githubusercontent.com/u/18071380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingloong", "html_url": "https://github.com/workingloong", "followers_url": "https://api.github.com/users/workingloong/followers", "following_url": "https://api.github.com/users/workingloong/following{/other_user}", "gists_url": "https://api.github.com/users/workingloong/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingloong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingloong/subscriptions", "organizations_url": "https://api.github.com/users/workingloong/orgs", "repos_url": "https://api.github.com/users/workingloong/repos", "events_url": "https://api.github.com/users/workingloong/events{/privacy}", "received_events_url": "https://api.github.com/users/workingloong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-03T12:03:11Z", "updated_at": "2019-12-12T03:25:25Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nRight now, we can get a dense tensor by calling `to_tensor` of a RaggedTensor and the num_cols of the dense tensor is the max length of the tensors in the RaggedTensor. However, the max length may vary if we get the RaggedTensor by `tf.string.splits` for different batch data. So, we can not use the dense tensor for `tf.keras.layers.Embedding` and `tf.keras.layers.Dense` layers because the num_cols is not fixed.\r\n\r\n**Will this change the current api? How?**\r\nIn order to support padding for `to_tensor`, we need add three arguments for `to_tensor` API, like:\r\n```python\r\ndef to_tensor(self, default_value=None, name=None, \r\n    maxlen=None, padding='pre', truncating='pre'):\r\n```\r\nmaxlen: Int, maximum length of all sequences where the sequence is a tensor in the RaggedTensor .\r\npadding: String, 'pre' or 'post':\r\n    pad either before or after each sequence.\r\ntruncating: String, 'pre' or 'post':\r\n    remove values from sequences larger than\r\n    `maxlen`, either at the beginning or at the end of the sequences.\r\n\r\nThose arguments are the same as `tf.keras.preprocessing.sequence.pad_sequences` in https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/sequence/pad_sequences\r\n\r\n**Who will benefit with this feature?**\r\nIn NLP and time series modeling, the format of feature is the string with many values separated by a separator like \"19,39,94,30\" or \"there, is, a, dog\" and the number of values of different samples is different. In this case, we need to use `tf.strings.split()` to get a RaggedTensor and convert it to a dense tensor with fixed num_cols.\r\n\r\n**Any Other info.**\r\nHere is a demo with maxlen.\r\n```python\r\nimport numpy as np\r\n\r\nfrom tensorflow.python import tf2\r\nfrom tensorflow.python.client import session\r\nfrom tensorflow.python.framework import composite_tensor\r\nfrom tensorflow.python.framework import constant_op\r\nfrom tensorflow.python.framework import dtypes\r\nfrom tensorflow.python.framework import ops\r\nfrom tensorflow.python.framework import sparse_tensor\r\nfrom tensorflow.python.framework import tensor_shape\r\nfrom tensorflow.python.framework import tensor_spec\r\nfrom tensorflow.python.framework import tensor_util\r\nfrom tensorflow.python.framework import type_spec\r\nfrom tensorflow.python.ops import array_ops\r\nfrom tensorflow.python.ops import check_ops\r\nfrom tensorflow.python.ops import control_flow_ops\r\nfrom tensorflow.python.ops import gen_ragged_conversion_ops\r\nfrom tensorflow.python.ops import math_ops\r\nfrom tensorflow.python.ops.ragged import ragged_config\r\nfrom tensorflow.python.ops.ragged import ragged_tensor_value\r\nfrom tensorflow.python.ops.ragged import ragged_util\r\nfrom tensorflow.python.ops.ragged import segment_id_ops\r\nfrom tensorflow.python.util.tf_export import tf_export\r\n\r\ndef is_ragged(value):\r\n  \"\"\"Returns true if `value` is a ragged tensor or ragged tensor value.\"\"\"\r\n  return isinstance(value,\r\n                    (tf.RaggedTensor, ragged_tensor_value.RaggedTensorValue))\r\n\r\ndef to_tensor(ragged_tensor, default_value=None, name=None, maxlen=None):\r\n    self = ragged_tensor\r\n    print(\"self : \", self)\r\n    with ops.name_scope(name, \"RaggedToTensor\", [self, default_value]):\r\n      if default_value is not None:\r\n        default_value = ops.convert_to_tensor(\r\n            default_value, name=\"default_value\", dtype=self.dtype)\r\n\r\n      # If ragged_rank > 1, then recursively convert the ragged values into a\r\n      # `Tensor` before we proceed.\r\n      values = self.values\r\n      if is_ragged(values):\r\n        values = values.to_tensor(default_value)\r\n\r\n      # Tile the default value, if necessary.\r\n      if default_value is not None:\r\n        if values.shape.ndims is not None:\r\n          default_value.shape.with_rank_at_most(values.shape.ndims - 1)\r\n        if (values.shape.ndims is None or default_value.shape.ndims is None or\r\n            values.shape.ndims != default_value.shape.ndims + 1):\r\n          value_shape = array_ops.shape(values)[1:]\r\n          default_value = array_ops.broadcast_to(default_value, value_shape)\r\n        default_value.shape.assert_is_compatible_with(values.shape[1:])\r\n\r\n      # Get the expected dense shape ([nrows, ncols] + value_shape).\r\n      rt_row_lengths = [self.row_splits[1:] - self.row_splits[:-1]]\r\n      print('rt_row_lengths : ', rt_row_lengths)\r\n      nrows = array_ops.shape(self.row_splits,\r\n                              out_type=self._row_splits.dtype)[0] - 1\r\n      ncols = math_ops.maximum(math_ops.reduce_max(rt_row_lengths), 0) \r\n      if maxlen is not None:\r\n        ncols = tf.constant(maxlen, dtype=tf.int64)\r\n        \r\n      values_shape = array_ops.shape(values, out_type=self._row_splits.dtype)\r\n      value_shape = values_shape[1:]\r\n      nvals = values_shape[0]\r\n\r\n      # Build a default value if none was supplied.\r\n      if default_value is None:\r\n        default_value = array_ops.zeros(value_shape, dtype=values.dtype)\r\n      default_value.shape.assert_is_compatible_with(values.shape[1:])\r\n      default_value.set_shape(values.shape[1:])\r\n\r\n      # Get the row start indices, and expand to shape=[nrows, 1].\r\n      starts = array_ops.expand_dims(self.row_splits[:-1], 1)\r\n\r\n      # Get the row limit indices, and expand to shape=[nrows, 1].\r\n      limits = array_ops.expand_dims(self.row_splits[1:], 1)\r\n\r\n      # Get the column indices, and expand to shape=[1, ncols].\r\n      columns = array_ops.expand_dims(math_ops.range(0, ncols), 0)\r\n\r\n      # Build a list containing the values plus the default value.  We will use\r\n      # tf.gather to collect values from this list for the `Tensor` (using\r\n      # nvals as the index for the default value).\r\n      values_and_default = array_ops.concat(\r\n          [values, array_ops.stack([default_value])], axis=0)\r\n\r\n      # Construct a matrix \"indices\" pointing into values_and_default.  I.e.,\r\n      # output[r, c] = values_and_default[indices[r, c].\r\n      nondefault_index = starts + columns\r\n      has_value = nondefault_index < limits\r\n      default_index = array_ops.fill(array_ops.stack([nrows, ncols]), nvals)\r\n        \r\n      indices = array_ops.where(has_value, nondefault_index, default_index)\r\n      tensor = array_ops.gather(values_and_default, indices)\r\n\r\n      # Gather the results into a `Tensor`.\r\n      return tensor\r\n    \r\nrt = tf.ragged.constant([[9, 8, 7], [], [6, 5], [4]])\r\nprint(to_tensor(rt, maxlen=10))\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34791", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34791/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34791/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34791/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34791", "id": 531906079, "node_id": "MDU6SXNzdWU1MzE5MDYwNzk=", "number": 34791, "title": "variable scope is changed by force when reopened (with regard to use Adam) (with new example)", "user": {"login": "yanghoonkim", "id": 9985986, "node_id": "MDQ6VXNlcjk5ODU5ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9985986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yanghoonkim", "html_url": "https://github.com/yanghoonkim", "followers_url": "https://api.github.com/users/yanghoonkim/followers", "following_url": "https://api.github.com/users/yanghoonkim/following{/other_user}", "gists_url": "https://api.github.com/users/yanghoonkim/gists{/gist_id}", "starred_url": "https://api.github.com/users/yanghoonkim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yanghoonkim/subscriptions", "organizations_url": "https://api.github.com/users/yanghoonkim/orgs", "repos_url": "https://api.github.com/users/yanghoonkim/repos", "events_url": "https://api.github.com/users/yanghoonkim/events{/privacy}", "received_events_url": "https://api.github.com/users/yanghoonkim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-03T11:07:51Z", "updated_at": "2019-12-04T07:58:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): \r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: 1080ti\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nThe same issue with #30813\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nPlease compare the results of following codes\r\n\r\ncode 1:\r\n```\r\nimport tensorflow as tf\r\nclass generator:\r\n    def __init__(self):\r\n        with tf.variable_scope('myscope'):\r\n            self.a = tf.get_variable('a', [4,3,2], tf.float32)\r\n            self.b = tf.get_variable('b', [4,3,2], tf.float32)\r\n            self.c = tf.reduce_sum(self.a + self.b)\r\n            self.d = tf.train.AdamOptimizer(name = 'adamopt')\r\n            self.e = self.d.compute_gradients(self.c, tf.trainable_variables())\r\n            self.f = self.d.apply_gradients(self.e)\r\n        for item in tf.global_variables():\r\n            if 'beta' in item.name:\r\n                print item\r\n    \r\n    def compute(self):\r\n        with tf.variable_scope('myscope'):\r\n            self.e1 = self.d.compute_gradients(self.c, tf.trainable_variables())\r\n            self.f1 = self.d.apply_gradients(self.e1)\r\n        print '------------------------'\r\n        for item in tf.global_variables():\r\n            if 'beta' in item.name:\r\n                print item\r\n    \r\n    def compute1(self):\r\n        with tf.variable_scope('myscope'):\r\n            self.e2 = self.d.compute_gradients(self.c, tf.trainable_variables())\r\n            self.f2 = self.d.apply_gradients(self.e2)\r\n        print '---------------------------'\r\n        for item in tf.global_variables():\r\n            if 'beta' in item.name:\r\n                print item\r\n\r\ng = generator()\r\ng.compute()\r\ng.compute1()\r\n```\r\n\r\nThe printed result will be:\r\n```\r\n<tf.Variable 'myscope/beta1_power:0' shape=() dtype=float32_ref>\r\n<tf.Variable 'myscope/beta2_power:0' shape=() dtype=float32_ref>\r\n------------------------\r\n<tf.Variable 'myscope/beta1_power:0' shape=() dtype=float32_ref>\r\n<tf.Variable 'myscope/beta2_power:0' shape=() dtype=float32_ref>\r\n---------------------------\r\n<tf.Variable 'myscope/beta1_power:0' shape=() dtype=float32_ref>\r\n<tf.Variable 'myscope/beta2_power:0' shape=() dtype=float32_ref>\r\n```\r\n\r\nHowever\r\n\r\ncode 2:\r\n```\r\nimport tensorflow as tf\r\nclass generator:\r\n    def __init__(self):\r\n        with tf.variable_scope('myscope'):\r\n            self.a = tf.get_variable('a', [4,3,2], tf.float32)\r\n            self.b = tf.get_variable('b', [4,3,2], tf.float32)\r\n            self.c = tf.reduce_sum(self.a + self.b)\r\n            self.d = tf.train.AdamOptimizer(name = 'adamopt')\r\n    \r\n    def compute(self):\r\n        with tf.variable_scope('myscope'):\r\n            self.e1 = self.d.compute_gradients(self.c, tf.trainable_variables())\r\n            self.f1 = self.d.apply_gradients(self.e1)\r\n        print '------------------------'\r\n        for item in tf.global_variables():\r\n            if 'beta' in item.name:\r\n                print item\r\n    \r\n    def compute1(self):\r\n        with tf.variable_scope('myscope'):\r\n            self.e2 = self.d.compute_gradients(self.c, tf.trainable_variables())\r\n            self.f2 = self.d.apply_gradients(self.e2)\r\n        print '---------------------------'\r\n        for item in tf.global_variables():\r\n            if 'beta' in item.name:\r\n                print item\r\n\r\ng = generator()\r\ng.compute()\r\ng.compute1()\r\n```\r\n\r\nresults in:\r\n```\r\n------------------------\r\n<tf.Variable 'myscope_1/beta1_power:0' shape=() dtype=float32_ref>\r\n<tf.Variable 'myscope_1/beta2_power:0' shape=() dtype=float32_ref>\r\n---------------------------\r\n<tf.Variable 'myscope_1/beta1_power:0' shape=() dtype=float32_ref>\r\n<tf.Variable 'myscope_1/beta2_power:0' shape=() dtype=float32_ref>\r\n```\r\n\r\nThe only difference between two code is that the first code block doesn't operate 'apply_gradients' operation within the first opening of the variable scope. And I found that this results from the fact that the `beta` is made with `variable_scope.variable` operation. Is this a bug? or an intended results?\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34780", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34780/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34780/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34780/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34780", "id": 531667110, "node_id": "MDU6SXNzdWU1MzE2NjcxMTA=", "number": 34780, "title": "[FusedBatchNormGradOp] Actual shapes of outputs NOT consistent with the shapes derived by shapeFn", "user": {"login": "dMokaMoka", "id": 39380007, "node_id": "MDQ6VXNlcjM5MzgwMDA3", "avatar_url": "https://avatars2.githubusercontent.com/u/39380007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dMokaMoka", "html_url": "https://github.com/dMokaMoka", "followers_url": "https://api.github.com/users/dMokaMoka/followers", "following_url": "https://api.github.com/users/dMokaMoka/following{/other_user}", "gists_url": "https://api.github.com/users/dMokaMoka/gists{/gist_id}", "starred_url": "https://api.github.com/users/dMokaMoka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dMokaMoka/subscriptions", "organizations_url": "https://api.github.com/users/dMokaMoka/orgs", "repos_url": "https://api.github.com/users/dMokaMoka/repos", "events_url": "https://api.github.com/users/dMokaMoka/events{/privacy}", "received_events_url": "https://api.github.com/users/dMokaMoka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-03T02:22:03Z", "updated_at": "2020-03-18T21:33:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n> NO\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n> Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):\r\n> Binary\r\n- TensorFlow version (use command below):\r\n> 1.12.0\r\n- Python version:\r\n> 3.6.3\r\n\r\n**Describe the current behavior**\r\nFor the operator FusedBatchNormGradOp, the `shape derived by shapeFn` is inconsistent with the `run-time shape of the actual output` when set `is_training = False` , and this difference is caused by the obvious code. I wonder if this is a bug? In fact, I rely on the shape derived by Tensorflow to build my network...\r\n\r\n**Describe the expected behavior**\r\nThe shapefn derivation gives the same result as the runtime, unless it's an so called `unknown shape operator`.\r\n\r\n**Code to reproduce the issue**\r\n- Just as an example:\r\n> the comment line illustrates the problem\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops import gen_nn_ops\r\n\r\ny_backprop=np.random.random((32,32,2,1024)).astype(np.float32)\r\nx=np.random.random((32,32,2,1024)).astype(np.float32)\r\nscale=np.random.random((1024)).astype(np.float32)\r\nreserve_space_1=np.random.random((1024)).astype(np.float32)\r\nreserve_space_2=np.random.random((1024)).astype(np.float32)\r\nfused_batch_norm_grad_result = gen_nn_ops.fused_batch_norm_grad(y_backprop, x, scale, reserve_space_1, reserve_space_2, epsilon=0.0001, data_format=\"NHWC\", is_training=False)\r\n\r\nprint(fused_batch_norm_grad_result)\r\n# printed: (32, 32, 2, 1024), (1024,), (1024,), (1024,), (1024,)\r\nfused_batch_norm_grad_result=tf.Session().run(fused_batch_norm_grad_result)\r\nfor t in fused_batch_norm_grad_result:\r\n    print(np.shape(t))\r\n# printed: (32, 32, 2, 1024), (1024,), (1024,), (), ()\r\n```\r\n\r\n**Other info / logs**\r\nThe code that causes this problem is easily found in the Compute method of FusedBatchNormGradOp as follows:\r\n```c\r\n    ctx->SetOutput(1, scale_backprop);\r\n    ctx->SetOutput(2, offset_backprop);\r\n    ctx->SetConstantOutput(3, Tensor());\r\n    ctx->SetConstantOutput(4, Tensor());\r\n```\r\nHowever, the following derivation is made in shapefn:\r\n```c\r\n  // Set the correct shapes for reserve_spaces\r\n  // so that gradients can be performed when\r\n  // the op is in a symbolic condition.\r\n  if (is_training) {\r\n    c->set_output(3, c->Vector(0));\r\n    c->set_output(4, c->Vector(0));\r\n  } else {\r\n    c->set_output(3, c->Vector(channel_dim));\r\n    c->set_output(4, c->Vector(channel_dim));\r\n  }\r\n```\r\nI noticed the comment above that says this branch is to set the proper shape for reserve_spaces, but I can't understand what that really means...\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34777", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34777/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34777/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34777/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34777", "id": 531625900, "node_id": "MDU6SXNzdWU1MzE2MjU5MDA=", "number": 34777, "title": "Build issue \"None of the libraries match their SONAME\" (libcudnn)", "user": {"login": "edrozenberg", "id": 2648417, "node_id": "MDQ6VXNlcjI2NDg0MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2648417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edrozenberg", "html_url": "https://github.com/edrozenberg", "followers_url": "https://api.github.com/users/edrozenberg/followers", "following_url": "https://api.github.com/users/edrozenberg/following{/other_user}", "gists_url": "https://api.github.com/users/edrozenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/edrozenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edrozenberg/subscriptions", "organizations_url": "https://api.github.com/users/edrozenberg/orgs", "repos_url": "https://api.github.com/users/edrozenberg/repos", "events_url": "https://api.github.com/users/edrozenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/edrozenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-03T00:21:21Z", "updated_at": "2019-12-05T10:43:50Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nSlackware Linux 64 -current (14.2+) 2019-12-02\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\nSource\r\n- TensorFlow version:\r\nHEAD 882a1c8ed7\r\n- Python version:\r\nPython 3.7.5\r\n- Installed using virtualenv? pip? conda?:\r\nDirectly from OS\r\n- Bazel version (if compiling from source):\r\nBinary download bazel 1.1.0\r\n- GCC/Compiler version (if compiling from source):\r\ngcc (GCC) 8.3.1 20191031\r\n- CUDA/cuDNN version:\r\ncuda_10.2.89_440.33.01_linux.run\r\ncudnn-10.2-linux-x64-v7.6.5.32.tgz\r\nnccl_2.5.6-2+cuda10.2_x86_64.txz\r\n- GPU model and memory:\r\nMSI Graphic Cards GT 1030 2G LP OC\r\n\r\n**Describe the problem**\r\nTrying to build TF shows error `Cuda Configuration Error: None of the libraries match their SONAME: /opt/nvidia/cuda/lib64/libcudnn.so.7`\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n- Installed nvidia kernel modules and driver 440.31\r\n- Installed cuda, cudnn, nccl, tensorrt to `/opt/nvidia/cuda  /opt/nvidia/nccl  /opt/nvidia/tensorrt`\r\n- Installed bazel binary as `/usr/bin/bazel`\r\n- Downloaded latest TF source from GitHub\r\n- Used TF's `./configure` command to config the build\r\n- Ran build `bazel build //tensorflow/tools/pip_package:build_pip_package`\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n[.tf_configure.bazelrc](https://github.com/tensorflow/tensorflow/files/3913908/tf_configure.bazelrc.txt)\r\n[tf-build-err.txt](https://github.com/tensorflow/tensorflow/files/3913909/tf-build-err.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34767", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34767/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34767/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34767/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34767", "id": 531426682, "node_id": "MDU6SXNzdWU1MzE0MjY2ODI=", "number": 34767, "title": "Error when retraining a saved LSTM model", "user": {"login": "wkelongws", "id": 14045078, "node_id": "MDQ6VXNlcjE0MDQ1MDc4", "avatar_url": "https://avatars0.githubusercontent.com/u/14045078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wkelongws", "html_url": "https://github.com/wkelongws", "followers_url": "https://api.github.com/users/wkelongws/followers", "following_url": "https://api.github.com/users/wkelongws/following{/other_user}", "gists_url": "https://api.github.com/users/wkelongws/gists{/gist_id}", "starred_url": "https://api.github.com/users/wkelongws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wkelongws/subscriptions", "organizations_url": "https://api.github.com/users/wkelongws/orgs", "repos_url": "https://api.github.com/users/wkelongws/repos", "events_url": "https://api.github.com/users/wkelongws/events{/privacy}", "received_events_url": "https://api.github.com/users/wkelongws/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-12-02T18:44:20Z", "updated_at": "2020-03-05T18:03:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nI have a simple and functional custom code to reproduce the issue.\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nLinux Ubuntu 18.04\r\n\r\n- TensorFlow installed from (source or binary):\r\nconda install tensorflow-gpu=2.0.0\r\n\r\n- TensorFlow version (use command below):\r\n\r\npython -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"\r\n\r\nv2.0.0-rc2-26-g64c3d38 2.0.0\r\n\r\n- Python version:\r\nPython 3.7.4\r\n\r\n- CUDA/cuDNN version:\r\n CUDA Version: 10.1\r\n#define CUDNN_MAJOR 7\r\n\r\n- GPU model and memory:\r\nnvidia Quadro GV100 - 32478MiB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\n\r\noutput `env_info.sh` attached. \r\n\r\n**Describe the current behavior**\r\n\r\n1. Train a simple LSTM model using tf.keras API\r\n2. save the model to file as `SavedModel` format. `model.save('saved_model', save_format='tf')`\r\n3. In a separate script (without access to the model definition), load the saved model: `model = tf.keras.models.load_model('saved_model1')`\r\n4. continue training the reloaded model: `model.fit(data_x,data_y,batch_size=64,epochs=2)`\r\nThe following error encountered:\r\n\r\n`LookupError: No gradient defined for operation 'while' (op type: While)`\r\n\r\n**Describe the expected behavior**\r\n\r\nexpect the LSTM `SavedModel` can be loaded and retrained in a separated script without access to the model definition.\r\n\r\n**Code to reproduce the issue**\r\nScript to train and save the model:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndef Model_Functional_API():\r\n\r\n    inputs = tf.keras.Input(shape=(3, 2))\r\n    encoder = tf.keras.layers.LSTM(10,return_sequences=True)\r\n    encoder_outputs = encoder(inputs)\r\n    projection_layer = tf.keras.layers.Dense(2)\r\n    preds = projection_layer(encoder_outputs)\r\n    model = tf.keras.Model(inputs,preds)\r\n\r\n    return model\r\n\r\ndef Model_Sequence():\r\n\r\n    model = tf.keras.Sequential()\r\n    model.add(tf.keras.layers.LSTM(10,return_sequences=True))\r\n    model.add(tf.keras.layers.Dense(2))\r\n\r\n    return model\r\n\r\n# model = Model_Functional_API()\r\nmodel = Model_Sequence()\r\nmodel.compile(optimizer=tf.keras.optimizers.Adam(learning_rate=0.001),\r\n            loss='mean_squared_error')\r\n\r\ndata_x = np.random.random([64,3,2])\r\ndata_y = np.random.random([64,3,2])\r\n\r\nmodel.fit(data_x,data_y,batch_size=64,epochs=2)\r\n\r\nmodel.save('saved_model', save_format='tf')\r\n# model.save('saved_model.h5')\r\n```\r\nScript to load and retrain the model (this is where the error encountered):\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nmodel = tf.keras.models.load_model('saved_model')\r\n# model = tf.keras.models.load_model('saved_model.h5')\r\n\r\ndata_x = np.random.random([64,3,2])\r\ndata_y = np.random.random([64,3,2])\r\n\r\nmodel.fit(data_x,data_y,batch_size=64,epochs=2)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n`tf_env.txt` and the ouput error message are attached.\r\n[error_log.txt](https://github.com/tensorflow/tensorflow/files/3912802/error_log.txt)\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/3912803/tf_env.txt)\r\n\r\n "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34765", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34765/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34765/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34765/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34765", "id": 531354448, "node_id": "MDU6SXNzdWU1MzEzNTQ0NDg=", "number": 34765, "title": "Keras' predict method should be compatible with TensorFlow Probability", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-02T17:48:50Z", "updated_at": "2020-03-14T07:18:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently, I cannot call the [`predict`](https://keras.io/models/model/) method to perform predictions, when using a [`DistributionLambda`](https://www.tensorflow.org/probability/api_docs/python/tfp/layers/DistributionLambda) as the output layer of a Keras model. See, for example, the issues https://github.com/tensorflow/probability/issues/427, https://github.com/tensorflow/probability/issues/538 and https://github.com/tensorflow/tensorflow/issues/31695. So, currently, the apparent alternative is to use  `my_model(input)`, which is a syntax that is not even documented anywhere (AFAIK), to get the predictions.\r\n\r\n**Will this change the current api? How?**\r\n\r\nI don't know exactly because I am not very familiar with the Keras APIs.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nEveryone interested in Bayesian deep learning."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34763", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34763/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34763/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34763/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34763", "id": 531230480, "node_id": "MDU6SXNzdWU1MzEyMzA0ODA=", "number": 34763, "title": "MLIR-based convertor fails to convert Universal Sentence Encoder model", "user": {"login": "wboleksii", "id": 46055670, "node_id": "MDQ6VXNlcjQ2MDU1Njcw", "avatar_url": "https://avatars1.githubusercontent.com/u/46055670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wboleksii", "html_url": "https://github.com/wboleksii", "followers_url": "https://api.github.com/users/wboleksii/followers", "following_url": "https://api.github.com/users/wboleksii/following{/other_user}", "gists_url": "https://api.github.com/users/wboleksii/gists{/gist_id}", "starred_url": "https://api.github.com/users/wboleksii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wboleksii/subscriptions", "organizations_url": "https://api.github.com/users/wboleksii/orgs", "repos_url": "https://api.github.com/users/wboleksii/repos", "events_url": "https://api.github.com/users/wboleksii/events{/privacy}", "received_events_url": "https://api.github.com/users/wboleksii/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-12-02T16:12:42Z", "updated_at": "2019-12-23T14:49:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (or github SHA if from source): tf-nightly 2.1.0.dev20191202 also tried tf-nightly-gpu 2.1.0.dev20191202\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\n\r\n```\r\nsaved_model_dir = '... local path to https://tfhub.dev/google/universal-sentence-encoder-large/4 '\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\nconverter.experimental_new_converter = True\r\ntflite_model = converter.convert()\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\n2019-12-02 11:06:35.679573: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 3020 MB memory) -> physical GPU (device: 0, name: Quadro M2200, pci bus id: 0000:01:00.0, compute capability: 5.2)\r\n2019-12-02 11:06:36.258120: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:814] Optimization results for grappler item: graph_to_optimize\r\n2019-12-02 11:06:36.258307: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   function_optimizer: Graph size after: 3003 nodes (0), 3003 edges (0), time = 149.21ms.\r\n2019-12-02 11:06:36.258515: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   function_optimizer: Graph size after: 3003 nodes (0), 3003 edges (0), time = 144.701ms.\r\n2019-12-02 11:06:36.258724: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:814] Optimization results for grappler item: __inference_pruned_16231\r\n2019-12-02 11:06:36.258972: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   function_optimizer: function_optimizer did nothing. time = 0.001ms.\r\n2019-12-02 11:06:36.259294: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   function_optimizer: function_optimizer did nothing. time = 0.001ms.\r\n2019-12-02 11:06:39.543465: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 1\r\n2019-12-02 11:06:39.544669: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-12-02 11:06:39.546506: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: Quadro M2200 computeCapability: 5.2\r\ncoreClock: 1.036GHz coreCount: 8 deviceMemorySize: 4.00GiB deviceMemoryBandwidth: 82.08GiB/s\r\n2019-12-02 11:06:39.546854: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll\r\n2019-12-02 11:06:39.547033: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cublas64_10.dll\r\n2019-12-02 11:06:39.547210: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cufft64_10.dll\r\n2019-12-02 11:06:39.547386: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library curand64_10.dll\r\n2019-12-02 11:06:39.547560: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cusolver64_10.dll\r\n2019-12-02 11:06:39.547739: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cusparse64_10.dll\r\n2019-12-02 11:06:39.547922: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudnn64_7.dll\r\n2019-12-02 11:06:39.548392: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0\r\n2019-12-02 11:06:39.548564: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-12-02 11:06:39.548735: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 \r\n2019-12-02 11:06:39.548842: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N \r\n2019-12-02 11:06:39.549462: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 3020 MB memory) -> physical GPU (device: 0, name: Quadro M2200, pci bus id: 0000:01:00.0, compute capability: 5.2)\r\n2019-12-02 11:06:39.665521: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:814] Optimization results for grappler item: graph_to_optimize\r\n2019-12-02 11:06:39.665699: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   constant_folding: Graph size after: 3003 nodes (0), 3003 edges (0), time = 39.697ms.\r\n2019-12-02 11:06:39.665895: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   constant_folding: Graph size after: 3003 nodes (0), 3003 edges (0), time = 35.538ms.\r\nTraceback (most recent call last):\r\n  File \"C:/Users/User/PycharmProjects/tf_models/main.py\", line 70, in <module>\r\n    tflite_model = converter.convert()\r\n  File \"C:\\Users\\User\\anaconda3\\envs\\tf_models\\lib\\site-packages\\tensorflow_core\\lite\\python\\lite.py\", line 474, in convert\r\n    **converter_kwargs)\r\n  File \"C:\\Users\\User\\anaconda3\\envs\\tf_models\\lib\\site-packages\\tensorflow_core\\lite\\python\\convert.py\", line 475, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"C:\\Users\\User\\anaconda3\\envs\\tf_models\\lib\\site-packages\\tensorflow_core\\lite\\python\\convert.py\", line 215, in toco_convert_protos\r\n    raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: See console for info.\r\n2019-12-02 11:06:42.830207: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-12-02 11:06:42.830437: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n...\r\n...\r\n2019-12-02 11:06:43.425042: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-12-02 11:06:43.425241: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-12-02 11:06:43.425462: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-12-02 11:06:43.426297: I tensorflow/lite/toco/import_tensorflow.cc:1324] Converting unsupported operation: StatefulPartitionedCall\r\n2019-12-02 11:06:43.427219: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"WrapDatasetVariant\" device_type: \"CPU\"') for unknown op: WrapDatasetVariant\r\n2019-12-02 11:06:43.427479: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"WrapDatasetVariant\" device_type: \"GPU\" host_memory_arg: \"input_handle\" host_memory_arg: \"output_handle\"') for unknown op: WrapDatasetVariant\r\n2019-12-02 11:06:43.427895: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"UnwrapDatasetVariant\" device_type: \"CPU\"') for unknown op: UnwrapDatasetVariant\r\n2019-12-02 11:06:43.428165: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"UnwrapDatasetVariant\" device_type: \"GPU\" host_memory_arg: \"input_handle\" host_memory_arg: \"output_handle\"') for unknown op: UnwrapDatasetVariant\r\n2019-12-02 11:06:43.428599: F tensorflow/lite/toco/import_tensorflow.cc:114] Check failed: attr.value_case() == AttrValue::kType (1 vs. 6)\r\n\r\n\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\n\r\n```\r\nhttps://tfhub.dev/google/universal-sentence-encoder-large/4\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34757", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34757/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34757/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34757/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34757", "id": 531105235, "node_id": "MDU6SXNzdWU1MzExMDUyMzU=", "number": 34757, "title": "Multiple inputs for iOS benchmark app", "user": {"login": "Ori226", "id": 5808240, "node_id": "MDQ6VXNlcjU4MDgyNDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5808240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ori226", "html_url": "https://github.com/Ori226", "followers_url": "https://api.github.com/users/Ori226/followers", "following_url": "https://api.github.com/users/Ori226/following{/other_user}", "gists_url": "https://api.github.com/users/Ori226/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ori226/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ori226/subscriptions", "organizations_url": "https://api.github.com/users/Ori226/orgs", "repos_url": "https://api.github.com/users/Ori226/repos", "events_url": "https://api.github.com/users/Ori226/events{/privacy}", "received_events_url": "https://api.github.com/users/Ori226/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-02T12:46:14Z", "updated_at": "2019-12-05T02:32:29Z", "closed_at": null, "author_association": "NONE", "body": "Hi.\r\nI'm trying to find a way in the \"benchmark_params.json\":\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/tools/benchmark/ios/README.md\r\n\r\nTo define multiple inputs to the network. Is it even possible?\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34747", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34747/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34747/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34747/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34747", "id": 530921218, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ3NDYwODU3", "number": 34747, "title": "lite/third_party/kiss_fft: fix include patches", "user": {"login": "proppy", "id": 5268, "node_id": "MDQ6VXNlcjUyNjg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/proppy", "html_url": "https://github.com/proppy", "followers_url": "https://api.github.com/users/proppy/followers", "following_url": "https://api.github.com/users/proppy/following{/other_user}", "gists_url": "https://api.github.com/users/proppy/gists{/gist_id}", "starred_url": "https://api.github.com/users/proppy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/proppy/subscriptions", "organizations_url": "https://api.github.com/users/proppy/orgs", "repos_url": "https://api.github.com/users/proppy/repos", "events_url": "https://api.github.com/users/proppy/events{/privacy}", "received_events_url": "https://api.github.com/users/proppy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-12-02T06:33:06Z", "updated_at": "2020-03-13T11:43:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34747", "html_url": "https://github.com/tensorflow/tensorflow/pull/34747", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34747.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34747.patch"}, "body": "- remove commented out `string.h` include\r\n- add missing `stdint.h` include\r\n\r\nThis fixes compilation with the esp32 core arduino toolchain.\r\n\r\nTested that the `nano33ble` build still work (modulo #34748), after manually applying the patches.\r\n\r\n/cc @dansitu @khanhlvg "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34744", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34744/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34744/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34744/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34744", "id": 530878340, "node_id": "MDU6SXNzdWU1MzA4NzgzNDA=", "number": 34744, "title": "Nested TensorArray using tf.function. Write->concat->write", "user": {"login": "ostruk", "id": 8248627, "node_id": "MDQ6VXNlcjgyNDg2Mjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/8248627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ostruk", "html_url": "https://github.com/ostruk", "followers_url": "https://api.github.com/users/ostruk/followers", "following_url": "https://api.github.com/users/ostruk/following{/other_user}", "gists_url": "https://api.github.com/users/ostruk/gists{/gist_id}", "starred_url": "https://api.github.com/users/ostruk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ostruk/subscriptions", "organizations_url": "https://api.github.com/users/ostruk/orgs", "repos_url": "https://api.github.com/users/ostruk/repos", "events_url": "https://api.github.com/users/ostruk/events{/privacy}", "received_events_url": "https://api.github.com/users/ostruk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-02T04:15:25Z", "updated_at": "2019-12-05T02:52:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n\r\n **Yes**\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n\r\n**Windows 10 Pro 1809. OS Build: 17763.503**\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n\r\n**Not applicable**\r\n\r\n- TensorFlow installed from (source or binary):\r\n\r\n**binary, via pip\r\npip3 install --user --upgrade tensorflow-gpu**\r\n\r\n- TensorFlow version (use command below):\r\n\r\n**v2.0.0-rc2-26-g64c3d382ca 2.0.0**\r\n\r\n- Python version:\r\n\r\n**3.7.4 (tags/v3.7.4:e09359112e, Jul  8 2019, 20:34:20) [MSC v.1916 64 bit (AMD64)]**\r\n\r\n- Bazel version (if compiling from source):\r\n\r\n**Not applicable**\r\n\r\n- GCC/Compiler version (if compiling from source):\r\n\r\n**Not applicable**\r\n\r\n- CUDA/cuDNN version:\r\n\r\n**Cuda compilation tools, release 10.0, V10.0.130\r\ncuDNN: cudnn-10.0-windows10-x64-v7.6.5.32**\r\n\r\n- GPU model and memory:\r\n\r\n**GTX 1060 Ti, 6Gb**\r\n\r\n**Describe the current behavior**\r\n\r\nI have two functions, one calling another, in the inner function, I'm accumulating some data into a TensorArray, then return TensorArray.concat() result to the outer function. In the outer function I have a loop that calls the inner function. On each call, it retrieves the result of the inner function and writes it to it's own TensorArray. The operations could be summarized as write->concat->write. The whole program runs some random number of iterations before crashing, likely due to some non-deterministic execution of the graph, perhaps something to do with control dependencies?\r\n\r\nObservations:\r\n- The higher the number of iterations in the outer function (currently 50), the more quickly it fails.\r\n- It appears 3 is a minimum number of iterations inside the outer function for the issue to occur\r\n- Issue occurs only on GPU (CPU does fine, using ``os.environ[\"CUDA_VISIBLE_DEVICES\"] = \"-1\")``. It does not occur in eager execution mode.\r\n- Code generates a series of different errors, sporadically (see below)\r\n- The functions do not need to be nested for the issue to occur (see reduced code version below)\r\n- You can remove ``infer_shape=False, element_shape=(3,)`` and see it generate a different error:\r\n``tensorflow.python.framework.errors_impl.InvalidArgumentError:  Trying to concat list with only uninitialized tensors but element_shape_except_first_dim_ is not fully defined: []\t \r\n[[{{node while/body/_1/TensorListConcatV2}}]] [Op:__inference_computeElement_71]\r\n``\r\n- It may take many runs to encounter an error (up to a 1000 on my machine)\r\n\r\n**Describe the expected behavior**\r\n\r\nCode producing same result and running indefinitely.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\n@tf.function\r\ndef computeElement_byBin():\r\n\tc = tf.TensorArray(tf.int64, size=1, infer_shape=False, element_shape=(3,))\r\n\tconst = tf.cast(tf.constant([1, 2, 3]), tf.int64)\r\n\tc = c.write(0, const)\r\n\tc_c = c.concat()\r\n\treturn c_c\r\n\r\n@tf.function\r\ndef computeElement():\r\n\tc = tf.TensorArray(tf.int64, size=50, infer_shape=False, element_shape=(3,))\r\n\tfor x in tf.range(50):\r\n\t\tbyBinVariant = computeElement_byBin()\r\n\t\tc = c.write(x, byBinVariant)\r\n\r\n\treturn tf.constant([1, 2, 3])\r\n\r\nk=0\r\nwhile True:\r\n\tk+=1\r\n\tr = computeElement()\r\n\tprint('iteration: %s, result: %s'%(k,r))\r\n```\r\n\r\nHere's a reduced version of code, without nesting (behaves similarly):\r\n\r\n``` python\r\n@tf.function\r\ndef computeElement():\r\n\ttensorArray1 = tf.TensorArray(tf.int32, size=50, infer_shape=False, element_shape=(3,))\r\n\ttensorArray2 = tf.TensorArray(tf.int32, size=1, infer_shape=False, element_shape=(3,))\r\n\tconst = tf.constant([1, 2, 3])\r\n\tfor x in tf.range(50):\r\n\t\ttensorArray2 = tensorArray2.write(0, const)\r\n\t\tconcat = tensorArray2.concat()\r\n\t\ttensorArray1=tensorArray1.write(x, concat)\r\n\treturn tf.constant(1)\r\n\r\nk=0\r\nwhile True:\r\n\tk+=1\r\n\tr = computeElement()\r\n\tprint('iteration: %s, result: %s'%(k,r))\r\n```\r\n\r\n**Other info / logs**\r\nOutput (example):\r\n\r\n```\r\n2019-12-01 23:29:49.834579: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll\r\n2019-12-01 23:29:50.917651: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library nvcuda.dll\r\n2019-12-01 23:29:50.988907: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: GeForce GTX 1660 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.77\r\npciBusID: 0000:01:00.0\r\n2019-12-01 23:29:50.992256: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-12-01 23:29:50.995402: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-12-01 23:29:50.996693: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n2019-12-01 23:29:50.999987: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: GeForce GTX 1660 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.77\r\npciBusID: 0000:01:00.0\r\n2019-12-01 23:29:51.001975: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-12-01 23:29:51.003600: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-12-01 23:29:51.501197: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-12-01 23:29:51.503618: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0\r\n2019-12-01 23:29:51.505070: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N\r\n2019-12-01 23:29:51.506907: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 4629 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1660 Ti, pci bus id: 0000:01:00.0, compute capability: 7.5)\r\n\r\niteration: 1, result: tf.Tensor([1 2 3], shape=(3,), dtype=int32)\r\niteration: 2, result: tf.Tensor([1 2 3], shape=(3,), dtype=int32)\r\niteration: 3, result: tf.Tensor([1 2 3], shape=(3,), dtype=int32)\r\niteration: 4, result: tf.Tensor([1 2 3], shape=(3,), dtype=int32)\r\niteration: 5, result: tf.Tensor([1 2 3], shape=(3,), dtype=int32)\r\niteration: 6, result: tf.Tensor([1 2 3], shape=(3,), dtype=int32)\r\nr=outer()\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 494, in _call\r\n    results = self._stateful_fn(*args, **kwds)\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1823, in __call__\r\n    return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1141, in _filtered_call\r\n    self.captured_inputs)\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1224, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager)\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 511, in call\r\n    ctx=ctx)\r\n  File \"Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError:  Tried to set a tensor with incompatible shape at a list index. Item element shape: [3,3] list shape: [3]\r\n\t [[{{node while/body/_1/TensorArrayV2Write/TensorListSetItem}}]] [Op:__inference_computeElement_79]\r\n```\r\n\r\nOther errors that code may generate:\r\n```\r\nProcess finished with exit code -1073740791 (0xC0000409)\r\n(No stack trace)\r\n```\r\nor\r\n```\r\n2019-12-01 23:10:55.194128: F tensorflow/core/framework/tensor_shape.cc:445] Check failed: end <= dims() (1 vs. 0)\r\n\r\nProcess finished with exit code -1073740791 (0xC0000409)\r\n```\r\n\r\nCheers!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34743", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34743/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34743/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34743/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34743", "id": 530834666, "node_id": "MDU6SXNzdWU1MzA4MzQ2NjY=", "number": 34743, "title": "Will TF2.0 build with Python3 ONLY, without Python2? ", "user": {"login": "jiapei100", "id": 154013, "node_id": "MDQ6VXNlcjE1NDAxMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/154013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiapei100", "html_url": "https://github.com/jiapei100", "followers_url": "https://api.github.com/users/jiapei100/followers", "following_url": "https://api.github.com/users/jiapei100/following{/other_user}", "gists_url": "https://api.github.com/users/jiapei100/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiapei100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiapei100/subscriptions", "organizations_url": "https://api.github.com/users/jiapei100/orgs", "repos_url": "https://api.github.com/users/jiapei100/repos", "events_url": "https://api.github.com/users/jiapei100/events{/privacy}", "received_events_url": "https://api.github.com/users/jiapei100/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-02T01:15:05Z", "updated_at": "2020-02-16T00:25:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 19.10\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.7.5\r\n- Installed using virtualenv? pip? conda?: pip \r\n- Bazel version (if compiling from source):1.1.0\r\n- GCC/Compiler version (if compiling from source): 9.2.1\r\n- CUDA/cuDNN version:10.2/7.6.5\r\n- GPU model and memory: GeForce GTX 980M/4035MiB\r\n\r\n\r\n\r\n```console\r\nERROR: ~/Downloads/....../tensorflow/python/keras/api/BUILD:129:1: Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 771, in <module>\r\n    main()\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 767, in main\r\n    lazy_loading, args.use_relative_imports)\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 625, in create_api_files\r\n    api_version, compat_api_versions, lazy_loading, use_relative_imports)\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 502, in get_api_init_text\r\n    _, attr = tf_decorator.unwrap(attr)\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/tf_decorator.py\", line 219, in unwrap\r\n    elif _has_tf_decorator_attr(cur):\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/tf_decorator.py\", line 124, in _has_tf_decorator_attr\r\n    hasattr(obj, '_tf_decorator') and\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/lazy_loader.py\", line 62, in __getattr__\r\n    module = self._load()\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/lazy_loader.py\", line 45, in _load\r\n    module = importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n    _wrap_py_utils = swig_import_helper()\r\n  File \"~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\n  File \"/usr/lib/python3.7/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.7/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 696, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 670, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 583, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1043, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: ~/.cache/bazel/_bazel_longervision/90066176d51f3058b5ce7c4e1b3a40d7/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_2_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor14StreamExecutor18EnablePeerAccessToEPS0_\r\n----------------\r\nNote: The failure of target //tensorflow/python/keras/api:create_tensorflow.python_api_2_keras_python_api_gen_compat_v2 (with exit code 1) may have been caused by the fact that it is a Python 2 program that was built in the host configuration, which uses Python 3. You can change the host configuration (for the entire build) to instead use Python 2 by setting --host_force_python=PY2.\r\n\r\nIf this error started occurring in Bazel 0.27 and later, it may be because the Python toolchain now enforces that targets analyzed as PY2 and PY3 run under a Python 2 and Python 3 interpreter, respectively. See https://github.com/bazelbuild/bazel/issues/7899 for more information.\r\n----------------\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: ~/....../tensorflow/tools/pip_package/BUILD:40:1 Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nINFO: Elapsed time: 12747.266s, Critical Path: 300.17s\r\nINFO: 16213 processes: 16213 local.\r\nFAILED: Build did NOT complete successfully\r\n\u279c  tensorflow git:(master) \u2717 \r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34742", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34742/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34742/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34742/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34742", "id": 530816210, "node_id": "MDU6SXNzdWU1MzA4MTYyMTA=", "number": 34742, "title": "libtensorflow_framework.so.2 segfault in OPENSSL_strcasecmp", "user": {"login": "drakkan", "id": 553263, "node_id": "MDQ6VXNlcjU1MzI2Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/553263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drakkan", "html_url": "https://github.com/drakkan", "followers_url": "https://api.github.com/users/drakkan/followers", "following_url": "https://api.github.com/users/drakkan/following{/other_user}", "gists_url": "https://api.github.com/users/drakkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/drakkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drakkan/subscriptions", "organizations_url": "https://api.github.com/users/drakkan/orgs", "repos_url": "https://api.github.com/users/drakkan/repos", "events_url": "https://api.github.com/users/drakkan/events{/privacy}", "received_events_url": "https://api.github.com/users/drakkan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-01T23:30:06Z", "updated_at": "2019-12-07T06:23:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution Ubuntu 18.04 on jetson xavier\r\n- TensorFlow installed from source\r\n- TensorFlow version: 2.0.0\r\n- Python version: 3.6.9\r\n- Bazel version: 0.26.1\r\n- GCC/Compiler version: 7.4.0\r\n- CUDA/cuDNN version: 10.0.326-1/ 7.5.0.56 installed from nvidia repo\r\n\r\nafter compiling tensorflow 2.0 from source my application segfaults this way:\r\n\r\n```\r\n(gdb) bt\r\n#0  0x0000007fa56656a8 in OPENSSL_strcasecmp () at /usr/local/lib/libtensorflow_framework.so.2\r\n#1  0x0000007fa5623d44 in EVP_get_cipherbyname () at /usr/local/lib/libtensorflow_framework.so.2\r\n#2  0x0000007f77b0258c in  () at /usr/lib/aarch64-linux-gnu/libssl.so.1.1\r\n#3  0x0000007f77b5c88c in  () at /usr/lib/aarch64-linux-gnu/libssl.so.1.1\r\n```\r\n\r\nopenssl version is 1.1.1-1ubuntu2.1~18.04.5.\r\n\r\nI'm using tensorflow inside a Qt application but probably this make no difference.\r\n\r\nis there any way to prevent this issue and/or remove openssl dependency while building?\r\n\r\nlibtensorflow_framework.so.2 is not linked to openssl\r\n\r\n```\r\nldd /usr/local/lib/libtensorflow_framework.so.2 \r\nlinux-vdso.so.1 (0x0000007f84044000)\r\nlibrt.so.1 => /lib/aarch64-linux-gnu/librt.so.1 (0x0000007f826d2000)\r\nlibpthread.so.0 => /lib/aarch64-linux-gnu/libpthread.so.0 (0x0000007f826a6000)\r\nlibdl.so.2 => /lib/aarch64-linux-gnu/libdl.so.2 (0x0000007f82691000)\r\nlibm.so.6 => /lib/aarch64-linux-gnu/libm.so.6 (0x0000007f825d7000)\r\nlibstdc++.so.6 => /usr/lib/aarch64-linux-gnu/libstdc++.so.6 (0x0000007f82444000)\r\nlibgcc_s.so.1 => /lib/aarch64-linux-gnu/libgcc_s.so.1 (0x0000007f82420000)\r\nlibc.so.6 => /lib/aarch64-linux-gnu/libc.so.6 (0x0000007f822c7000)\r\n/lib/ld-linux-aarch64.so.1 (0x0000007f84019000)\r\n```\r\n\r\nthanks\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34739", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34739/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34739/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34739/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34739", "id": 530793648, "node_id": "MDU6SXNzdWU1MzA3OTM2NDg=", "number": 34739, "title": "Embedding visualization in TensorFlow 2.0 not supported", "user": {"login": "DuyguA", "id": 8277232, "node_id": "MDQ6VXNlcjgyNzcyMzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8277232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DuyguA", "html_url": "https://github.com/DuyguA", "followers_url": "https://api.github.com/users/DuyguA/followers", "following_url": "https://api.github.com/users/DuyguA/following{/other_user}", "gists_url": "https://api.github.com/users/DuyguA/gists{/gist_id}", "starred_url": "https://api.github.com/users/DuyguA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DuyguA/subscriptions", "organizations_url": "https://api.github.com/users/DuyguA/orgs", "repos_url": "https://api.github.com/users/DuyguA/repos", "events_url": "https://api.github.com/users/DuyguA/events{/privacy}", "received_events_url": "https://api.github.com/users/DuyguA/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-01T20:52:11Z", "updated_at": "2019-12-04T20:07:53Z", "closed_at": null, "author_association": "NONE", "body": "This is the way I create a Tensorboard callback in the Keras:\r\n\r\n```\r\nfrom keras.callbacks import TensorBoard\r\ntbCallBack = TensorBoard(log_dir='./Graph', \r\n                         histogram_freq=1, \r\n                         embeddings_freq=1, \r\n                         embeddings_data=embedding_matrix, \r\n                         write_graph=True, \r\n                         write_images=True)\r\n```\r\n\r\nWhat I get is:\r\n\r\n```\r\n/usr/local/lib/python3.6/dist-packages/keras/callbacks/tensorboard_v2.py:102: UserWarning: The TensorBoard callback does not support embeddings display when using TensorFlow 2.0. Embeddings-related arguments are ignored.\r\n  warnings.warn('The TensorBoard callback does not support '\r\n```\r\n\r\nWhen I launched Tensorboard, `Projector` is under `Inactive`\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34726", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34726/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34726/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34726/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34726", "id": 530680739, "node_id": "MDU6SXNzdWU1MzA2ODA3Mzk=", "number": 34726, "title": "tensorflow/workspace: re2 dependency does not use release/master branch", "user": {"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-12-01T06:02:23Z", "updated_at": "2020-02-10T23:48:47Z", "closed_at": null, "author_association": "MEMBER", "body": "tensorflow/workspace.bzl has this for the re2 dep:\r\n\r\n```\r\n    tf_http_archive(\r\n        name = \"com_googlesource_code_re2\",\r\n        sha256 = \"d070e2ffc5476c496a6a872a6f246bfddce8e7797d6ba605a7c8d72866743bf9\",\r\n        strip_prefix = \"re2-506cfa4bffd060c06ec338ce50ea3468daa6c814\",\r\n        system_build_file = clean_dep(\"//third_party/systemlibs:re2.BUILD\"),\r\n        urls = [\r\n            \"https://storage.googleapis.com/mirror.tensorflow.org/github.com/google/re2/archive/506cfa4bffd060c06ec338ce50ea3468daa6c814.tar.gz\",\r\n            \"https://github.com/google/re2/archive/506cfa4bffd060c06ec338ce50ea3468daa6c814.tar.gz\",\r\n        ],\r\n    )\r\n```\r\n\r\nThat commit is https://github.com/google/re2/commit/506cfa4bffd060c06ec338ce50ea3468daa6c814 which is on some random branch called abseil (https://github.com/google/re2/commits/abseil) and incompatible with master or any released version of re2. This completely breaks building against system libs. On Gentoo we have re2-2019.09.01 packaged (and i cant and wont change the package to use a random branch because other packages (eg chromium) need the real released versions not a random branch).\r\n\r\nTF wont build against master, it fails with errors about \"StringPiece\" vs \"string_view\". I cant figure out how to link properly to the diff but go here https://github.com/google/re2/compare/abseil#diff-6dc69df7618951357bb5fb674c66aa34 and click \"files changed\" then \"showing 120 changed files\" then click re2/re2.h. Its fairly obvious why its failing to build. \r\n\r\nWhat even is the abseil branch? The stats say `This branch is 166 commits ahead, 167 commits behind master.` So its clearly not just some feature branch that is going to be merged in soon.\r\nTF should be using master, if TF needs some new functionality in deps then please make a new re2 release first? I (grudgingly) understand why for eigen and llvm, but re2 has monthly release cycles\r\n\r\n@gunan @angerson @martinwicke \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34721", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34721/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34721/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34721/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34721", "id": 530601770, "node_id": "MDU6SXNzdWU1MzA2MDE3NzA=", "number": 34721, "title": "Missing information: embedding_lookup automatically returns 0 for an out-of-vocab index", "user": {"login": "hoangcuong2011", "id": 8759715, "node_id": "MDQ6VXNlcjg3NTk3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/8759715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoangcuong2011", "html_url": "https://github.com/hoangcuong2011", "followers_url": "https://api.github.com/users/hoangcuong2011/followers", "following_url": "https://api.github.com/users/hoangcuong2011/following{/other_user}", "gists_url": "https://api.github.com/users/hoangcuong2011/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoangcuong2011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoangcuong2011/subscriptions", "organizations_url": "https://api.github.com/users/hoangcuong2011/orgs", "repos_url": "https://api.github.com/users/hoangcuong2011/repos", "events_url": "https://api.github.com/users/hoangcuong2011/events{/privacy}", "received_events_url": "https://api.github.com/users/hoangcuong2011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-30T16:46:57Z", "updated_at": "2019-12-06T06:27:59Z", "closed_at": null, "author_association": "NONE", "body": "Greetings,\r\n\r\nI expected embedding layer gives an error when a word id is beyond the fixed pre-determined vocab size. Nonetheless, it is not the case as tf.nn.embedding_lookup automatically return 0 for an out-of-vocab index. While this is nice, it is risky because there is no information or anything like that from the website https://www.tensorflow.org/api_docs/python/tf/keras/layers/Embedding. I personally did not know that until digging to the code carefully.\r\n\r\nSo I think more information at the website should be updated.\r\n\r\nExample code to see how embedding_lookup returns output:\r\n\r\n>>> sess = tf.compat.v1.InteractiveSession()\r\n>>> params = tf.constant([10,20,30,40])\r\n>>> ids = tf.constant([0,1,2,3,4,5])\r\n>>> tf.nn.embedding_lookup(params,ids).eval()\r\narray([10, 20, 30, 40,  0,  0], dtype=int32)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34719", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34719/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34719/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34719/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34719", "id": 530547499, "node_id": "MDU6SXNzdWU1MzA1NDc0OTk=", "number": 34719, "title": "Docker build for TensorFlow GPU taking too long(Up 45 hours!) ", "user": {"login": "RafayAK", "id": 17025191, "node_id": "MDQ6VXNlcjE3MDI1MTkx", "avatar_url": "https://avatars2.githubusercontent.com/u/17025191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RafayAK", "html_url": "https://github.com/RafayAK", "followers_url": "https://api.github.com/users/RafayAK/followers", "following_url": "https://api.github.com/users/RafayAK/following{/other_user}", "gists_url": "https://api.github.com/users/RafayAK/gists{/gist_id}", "starred_url": "https://api.github.com/users/RafayAK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RafayAK/subscriptions", "organizations_url": "https://api.github.com/users/RafayAK/orgs", "repos_url": "https://api.github.com/users/RafayAK/repos", "events_url": "https://api.github.com/users/RafayAK/events{/privacy}", "received_events_url": "https://api.github.com/users/RafayAK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-11-30T07:58:03Z", "updated_at": "2020-01-24T05:42:43Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Docker image (tensorflow/tensorflow:devel-gpu-py3)\r\n- TensorFlow version: 2.0\r\n- Python version: 3\r\n- Installed using virtualenv? pip? conda?: Docker \r\n- Bazel version (if compiling from source): default for docker image\r\n- GCC/Compiler version (if compiling from source): default for docker image\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: GT 750m\r\n- CPU: Intel\u00ae Core\u2122 i7-4500U CPU @ 1.80GHz \u00d7 4 \r\n\r\n\r\n**Describe the problem**\r\nI'm trying to build TensorFlow for my GPU with CUDA compute capability 3.0. The build seems to take forever to complete.\r\nI'm following these guides:\r\n[Build from source using Docker](https://www.tensorflow.org/install/source#gpu_support_3)\r\n[Setup Docker for TensorFlow ](https://www.tensorflow.org/install/docker)\r\n\r\nI can't figure out if I did something wrong.\r\n\r\n\r\n**Provide the exact sequence of commands/steps that you executed before running into the problem**\r\n\r\nFollowing Docker commands were used to run the container:\r\n```\r\ndocker pull tensorflow/tensorflow:devel-gpu-py3\r\ndocker run --gpus all -it -w /tensorflow -v $PWD:/mnt -e HOST_PERMS=\"$(id -u):$(id -g)\" tensorflow/tensorflow:devel-gpu-py3 bash\r\n```\r\n\r\nThen navigating to `tensorflow_src`,  `./configure` the command was run setting all values to defaults and \"No\" to all features(CUDA and CUdnn were automatically detected)\r\n\r\nFinally, the following command was run to start the build process:\r\n```\r\nbazel build --config=v2 --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nCurrently, the container has been up for 45 hours!. It doesn't seem like it is coming to end anytime soon. At the time of writing Bazel build is on action 29,910/29,333.\r\n```\r\nCONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES\r\n9bcd8e96c6ce        tensorflow/tensorflow:devel-gpu-py3   \"bash\"              45 hours ago        Up 45 hours                             cool_spence\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34718", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34718/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34718/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34718/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34718", "id": 530540928, "node_id": "MDU6SXNzdWU1MzA1NDA5Mjg=", "number": 34718, "title": "explicit GPU device placement failed due to runtime error \"unknown CPU\"", "user": {"login": "ifsheldon", "id": 39153080, "node_id": "MDQ6VXNlcjM5MTUzMDgw", "avatar_url": "https://avatars2.githubusercontent.com/u/39153080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ifsheldon", "html_url": "https://github.com/ifsheldon", "followers_url": "https://api.github.com/users/ifsheldon/followers", "following_url": "https://api.github.com/users/ifsheldon/following{/other_user}", "gists_url": "https://api.github.com/users/ifsheldon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ifsheldon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ifsheldon/subscriptions", "organizations_url": "https://api.github.com/users/ifsheldon/orgs", "repos_url": "https://api.github.com/users/ifsheldon/repos", "events_url": "https://api.github.com/users/ifsheldon/events{/privacy}", "received_events_url": "https://api.github.com/users/ifsheldon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tomhennigan", "id": 28017, "node_id": "MDQ6VXNlcjI4MDE3", "avatar_url": "https://avatars0.githubusercontent.com/u/28017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomhennigan", "html_url": "https://github.com/tomhennigan", "followers_url": "https://api.github.com/users/tomhennigan/followers", "following_url": "https://api.github.com/users/tomhennigan/following{/other_user}", "gists_url": "https://api.github.com/users/tomhennigan/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomhennigan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomhennigan/subscriptions", "organizations_url": "https://api.github.com/users/tomhennigan/orgs", "repos_url": "https://api.github.com/users/tomhennigan/repos", "events_url": "https://api.github.com/users/tomhennigan/events{/privacy}", "received_events_url": "https://api.github.com/users/tomhennigan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tomhennigan", "id": 28017, "node_id": "MDQ6VXNlcjI4MDE3", "avatar_url": "https://avatars0.githubusercontent.com/u/28017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomhennigan", "html_url": "https://github.com/tomhennigan", "followers_url": "https://api.github.com/users/tomhennigan/followers", "following_url": "https://api.github.com/users/tomhennigan/following{/other_user}", "gists_url": "https://api.github.com/users/tomhennigan/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomhennigan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomhennigan/subscriptions", "organizations_url": "https://api.github.com/users/tomhennigan/orgs", "repos_url": "https://api.github.com/users/tomhennigan/repos", "events_url": "https://api.github.com/users/tomhennigan/events{/privacy}", "received_events_url": "https://api.github.com/users/tomhennigan/received_events", "type": "User", "site_admin": false}, {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-30T06:39:30Z", "updated_at": "2019-12-26T22:09:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tf2.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 10\r\n- GPU model and memory: NV V100 32GB\r\n\r\n**Describe the current behavior**\r\nThe graphic memory of the specified GPU has been allocated, but a runtime error occurred, saying `RuntimeError: /job:localhost/replica:0/task:0/device:CPU:1 unknown device.`\r\n**Describe the expected behavior**\r\nSuccessfully deploy the model to the specified GPU\r\n**Code to reproduce the issue**\r\n```python\r\nwith tf.device('GPU:1'):\r\n    mobile_net_local_path = \"/mobilenet\" # the local model is the same as the one on https://tfhub.dev/google/tf2-preview/mobilenet_v2/feature_vector/4, which is runnable on GPU:0\r\n    mobile_net = hub.KerasLayer(mobile_net_local_path,output_shape = [1280] , trainable=True)\r\n```\r\n\r\n**Other info / logs**\r\nThe logical devices(given by `tf.config.experimental.list_logical_devices()`) are below:\r\n```python\r\n[LogicalDevice(name='/job:localhost/replica:0/task:0/device:CPU:0', device_type='CPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:XLA_CPU:0', device_type='XLA_CPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:GPU:0', device_type='GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:GPU:1', device_type='GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:GPU:2', device_type='GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:GPU:3', device_type='GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:GPU:4', device_type='GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:XLA_GPU:0', device_type='XLA_GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:XLA_GPU:1', device_type='XLA_GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:XLA_GPU:2', device_type='XLA_GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:XLA_GPU:3', device_type='XLA_GPU'),\r\n LogicalDevice(name='/job:localhost/replica:0/task:0/device:XLA_GPU:4', device_type='XLA_GPU')]\r\n```\r\nand physical devices are below:\r\n```python\r\n[PhysicalDevice(name='/physical_device:CPU:0', device_type='CPU'),\r\n PhysicalDevice(name='/physical_device:XLA_CPU:0', device_type='XLA_CPU'),\r\n PhysicalDevice(name='/physical_device:GPU:0', device_type='GPU'),\r\n PhysicalDevice(name='/physical_device:GPU:1', device_type='GPU'),\r\n PhysicalDevice(name='/physical_device:GPU:2', device_type='GPU'),\r\n PhysicalDevice(name='/physical_device:GPU:3', device_type='GPU'),\r\n PhysicalDevice(name='/physical_device:GPU:4', device_type='GPU'),\r\n PhysicalDevice(name='/physical_device:XLA_GPU:0', device_type='XLA_GPU'),\r\n PhysicalDevice(name='/physical_device:XLA_GPU:1', device_type='XLA_GPU'),\r\n PhysicalDevice(name='/physical_device:XLA_GPU:2', device_type='XLA_GPU'),\r\n PhysicalDevice(name='/physical_device:XLA_GPU:3', device_type='XLA_GPU'),\r\n PhysicalDevice(name='/physical_device:XLA_GPU:4', device_type='XLA_GPU')]\r\n```\r\n\r\nthe error is \r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-4-f31b7e9deb50> in <module>\r\n      3 with tf.device('GPU:1'):\r\n      4     mobile_net_local_path = \"HandGestureRecognizer/tf2models/mobilenet\"\r\n----> 5     mobile_net = hub.KerasLayer(mobile_net_local_path,output_shape = [1280] , trainable=True)\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_hub/keras_layer.py in __init__(self, handle, trainable, arguments, **kwargs)\r\n    102       self._func = handle\r\n    103     else:\r\n--> 104       self._func = module_v2.load(handle)\r\n    105       if not callable(self._func):\r\n    106         raise ValueError(\"Non-callable result from hub.load('%s')\" %\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_hub/module_v2.py in load(handle, tags)\r\n     75   if hasattr(tf_v1.saved_model, \"load_v2\"):\r\n     76     module_handle = resolve(handle)\r\n---> 77     return tf_v1.saved_model.load_v2(module_handle, tags=tags)\r\n     78   else:\r\n     79     raise NotImplementedError(\"hub.load() is not implemented for TF < 1.14.x, \"\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/saved_model/load.py in load(export_dir, tags)\r\n    515     ValueError: If `tags` don't match a MetaGraph in the SavedModel.\r\n    516   \"\"\"\r\n--> 517   return load_internal(export_dir, tags)\r\n    518 \r\n    519 \r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/saved_model/load.py in load_internal(export_dir, tags, loader_cls)\r\n    539       loader = loader_cls(object_graph_proto,\r\n    540                           saved_model_proto,\r\n--> 541                           export_dir)\r\n    542       root = loader.get(0)\r\n    543     root.tensorflow_version = meta_graph_def.meta_info_def.tensorflow_version\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/saved_model/load.py in __init__(self, object_graph_proto, saved_model_proto, export_dir)\r\n    126     self._setup_functions_structures()\r\n    127     self._setup_functions_captures()\r\n--> 128     self._restore_checkpoint()\r\n    129 \r\n    130     for node in self._nodes:\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/saved_model/load.py in _restore_checkpoint(self)\r\n    277     saver = util.TrackableSaver(graph_view.ObjectGraphView(self.get(0)))\r\n    278     with ops.device(\"CPU\"):\r\n--> 279       saver._file_prefix_placeholder = constant_op.constant(variables_path)\r\n    280     load_status = saver.restore(variables_path)\r\n    281     load_status.assert_existing_objects_matched()\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in constant(value, dtype, shape, name)\r\n    225   \"\"\"\r\n    226   return _constant_impl(value, dtype, shape, name, verify_shape=False,\r\n--> 227                         allow_broadcast=True)\r\n    228 \r\n    229 \r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in _constant_impl(value, dtype, shape, name, verify_shape, allow_broadcast)\r\n    233   ctx = context.context()\r\n    234   if ctx.executing_eagerly():\r\n--> 235     t = convert_to_eager_tensor(value, ctx, dtype)\r\n    236     if shape is None:\r\n    237       return t\r\n\r\n~/anaconda3/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py in convert_to_eager_tensor(value, ctx, dtype)\r\n     94       dtype = dtypes.as_dtype(dtype).as_datatype_enum\r\n     95   ctx.ensure_initialized()\r\n---> 96   return ops.EagerTensor(value, ctx.device_name, dtype)\r\n     97 \r\n     98 \r\n\r\nRuntimeError: /job:localhost/replica:0/task:0/device:CPU:1 unknown device.\r\n```\r\nAfter executing the python codes above, it can be seen in `nvidia-smi` that the graphic memory of the specified GPU (GPU:1) has been allocated.\r\n```\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0     12253      C   ...user/anaconda3/envs/tf2/bin/python   307MiB |\r\n|    0     20120      C   python3                                     2617MiB |\r\n|    0     27393      C   python3                                     1701MiB |\r\n|    0     68670      C   python3                                      941MiB |\r\n|    0     73404      C   python3                                     1209MiB |\r\n|    1     12253      C   ...user/anaconda3/envs/tf2/bin/python 31009MiB |\r\n|    2     12253      C   ...user/anaconda3/envs/tf2/bin/python   307MiB |\r\n|    3     12253      C   ...user/anaconda3/envs/tf2/bin/python   307MiB |\r\n|    4     12253      C   ...user/anaconda3/envs/tf2/bin/python   307MiB |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34715", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34715/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34715/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34715/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34715", "id": 530485695, "node_id": "MDU6SXNzdWU1MzA0ODU2OTU=", "number": 34715, "title": "Can't use assert statement inside tf.function", "user": {"login": "Danmou", "id": 7031745, "node_id": "MDQ6VXNlcjcwMzE3NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/7031745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Danmou", "html_url": "https://github.com/Danmou", "followers_url": "https://api.github.com/users/Danmou/followers", "following_url": "https://api.github.com/users/Danmou/following{/other_user}", "gists_url": "https://api.github.com/users/Danmou/gists{/gist_id}", "starred_url": "https://api.github.com/users/Danmou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Danmou/subscriptions", "organizations_url": "https://api.github.com/users/Danmou/orgs", "repos_url": "https://api.github.com/users/Danmou/repos", "events_url": "https://api.github.com/users/Danmou/events{/privacy}", "received_events_url": "https://api.github.com/users/Danmou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-29T20:56:52Z", "updated_at": "2019-12-11T12:27:45Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Manjaro Linux\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7\r\n\r\n**Describe the current behavior**\r\n`assert` with a tensor inside a `tf.function` results in the following error:\r\n```\r\nOperatorNotAllowedInGraphError: using a `tf.Tensor` as a Python `bool` is not allowed: AutoGraph did not convert this function. Try decorating it directly with @tf.function.\r\n```\r\n\r\n**Describe the expected behavior**\r\nThe assert statement should be converted to `tf.Assert` by AutoGraph.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n\r\n@tf.function\r\ndef f(x):\r\n    assert tf.constant(True), 'assert failed'\r\n    return x\r\n\r\nx = tf.ones(())\r\nprint(f(x))\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34714", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34714/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34714/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34714/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34714", "id": 530467827, "node_id": "MDU6SXNzdWU1MzA0Njc4Mjc=", "number": 34714, "title": "TensorFlow 1.15.0 fails to build .so files in contrib ", "user": {"login": "maziyarpanahi", "id": 5762953, "node_id": "MDQ6VXNlcjU3NjI5NTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5762953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maziyarpanahi", "html_url": "https://github.com/maziyarpanahi", "followers_url": "https://api.github.com/users/maziyarpanahi/followers", "following_url": "https://api.github.com/users/maziyarpanahi/following{/other_user}", "gists_url": "https://api.github.com/users/maziyarpanahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/maziyarpanahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maziyarpanahi/subscriptions", "organizations_url": "https://api.github.com/users/maziyarpanahi/orgs", "repos_url": "https://api.github.com/users/maziyarpanahi/repos", "events_url": "https://api.github.com/users/maziyarpanahi/events{/privacy}", "received_events_url": "https://api.github.com/users/maziyarpanahi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-29T19:22:20Z", "updated_at": "2019-12-08T14:17:45Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Catalina, Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.15\r\n- Python version: 3\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): \r\nmacOS: Apple clang version 11.0.0 (clang-1100.0.33.12)\r\nUbuntu 18.04: 7.x\r\nUbuntu 16.04: 5.x\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\nOnly the machine with Ubuntu 16.04 has Tesla and CUDA\r\n\r\n**Describe the problem**\r\nI am trying to generate two `.so` files from contrib in TensorFlow `1.15.0`. I understand this version comes without contrib, so when it's installed via `pip` or `conda` I cannot find my two `.so` files like previous versions (1.12.0, 1.13.1): `_lstm_ops.so` and `_sparse_feature_cross_op.so`. However, if I build from the source of TF 1.15.0 in Ubuntu 16.04 I can see these two files for Linux. Since I need these two for macOS as well I tried to build from the source on my macOS. \r\n\r\nThe build goes until the end without any problem, however, I cannot find these two `.so` files on my macOS. I have tried to replicate the same thing on Ubuntu 18.04, but I cannot find the `.so` files there neither. It seems the only place I can build from the source and get my `.so` files is in Ubuntu 16.04. \r\n\r\nHow is it possible that Ubuntu 16.04 can build TF 1.15 from source and produce those two `.so` files, but it fails in macOS Catalina and Ubuntu 18.04? Is it because these two are newer systems? Is there a requirement for contrib to be a lower version?\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n- git clone TensorFlow\r\n- git checkout r1.15\r\n- ./configure (no gpu or anything extra - no to all questions)\r\n- bazel build for java\r\n\r\nThe mentioned steps will produce the `.so` files I required in Ubuntu 16.04 but fail to do so in macOS (Catalina) nor in Ubuntu 18.04. \r\n\r\nThe command to build from source for Java:\r\n```bash\r\nbazel build //tensorflow/java:tensorflow //tensorflow/java:libtensorflow_jni\r\n```\r\n\r\n**Any other info / logs**\r\nNo, there is no error in any of the builds (Java, Python) in any of the three OS."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34713", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34713/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34713/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34713/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34713", "id": 530443994, "node_id": "MDU6SXNzdWU1MzA0NDM5OTQ=", "number": 34713, "title": "Keras multi-output has array-like behaviour despite using dictionaries in output of dataset!", "user": {"login": "ghwatson", "id": 2806466, "node_id": "MDQ6VXNlcjI4MDY0NjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/2806466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghwatson", "html_url": "https://github.com/ghwatson", "followers_url": "https://api.github.com/users/ghwatson/followers", "following_url": "https://api.github.com/users/ghwatson/following{/other_user}", "gists_url": "https://api.github.com/users/ghwatson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghwatson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghwatson/subscriptions", "organizations_url": "https://api.github.com/users/ghwatson/orgs", "repos_url": "https://api.github.com/users/ghwatson/repos", "events_url": "https://api.github.com/users/ghwatson/events{/privacy}", "received_events_url": "https://api.github.com/users/ghwatson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-29T17:33:36Z", "updated_at": "2019-12-05T23:31:26Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes, I've tweaked some example code from the docs. See below.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu 16.04\r\n- TensorFlow installed from (source or binary):\r\npip install --user tensorflow\r\n- TensorFlow version (use command below):\r\n('v2.0.0-rc2-26-g64c3d38', '2.0.0')\r\n- Python version:\r\n2.7\r\n\r\n**Describe the current behavior**\r\nIf you set up a multi-output model with a loss attached to a single output, keras appears to create a loss for other heads anyhow, depending on the ordering of the outputs in the list argument. I believe that keras is utilizing some list-like behaviour where it shouldn't. Please see the example code and traceback below. \r\n**Describe the expected behavior**\r\nIn principle, the code should do as the [docs](https://www.tensorflow.org/guide/keras/train_and_evaluate#passing_data_to_multi-input_multi-output_models) appear to indicate and do things in a dictionary-based manner, not an array-based manner. For example, see the warning in the traceback: it indicates that other outputs besides the one that is tagged with a loss will be ignored, yet this does not appear to happen.\r\n\r\n**Code to reproduce the issue**\r\nI have taken bits of code from the docs linked above and tweaked it to reproduce the bug: \r\n\r\nHere is the tweaked code:\r\n```from tensorflow import keras\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow.keras import layers\r\n\r\nimage_input = keras.Input(shape=(32, 32, 3), name='img_input')\r\ntimeseries_input = keras.Input(shape=(None, 10), name='ts_input')\r\n\r\nx1 = layers.Conv2D(3, 3)(image_input)\r\nx1pool = layers.GlobalMaxPooling2D()(x1)\r\n\r\nx2 = layers.Conv1D(3, 3)(timeseries_input)\r\nx2pool = layers.GlobalMaxPooling1D(name='x2pool')(x2)\r\n\r\nx = layers.concatenate([x1pool, x2pool])\r\n\r\n# score_output = layers.Dense(1, name='score_output')(x)\r\nclass_output = layers.Dense(5, activation='softmax', name='class_output')(x)\r\n\r\n# original outputs from docs example code\r\n# outputs = [class_output, score_output]\r\n\r\n# the commented one works (only by coincidence!), but the uncommented one doesnt\r\n# outputs = [class_output, x2pool]\r\noutputs = [x2pool, class_output]\r\n\r\nmodel = keras.Model(inputs=[image_input, timeseries_input],\r\n                    outputs=outputs)\r\n\r\nmodel.compile(\r\n    optimizer=keras.optimizers.Adam(),\r\n    loss={'class_output': keras.losses.CategoricalCrossentropy()})\r\n\r\n\r\nimg_data = np.random.random_sample(size=(100, 32, 32, 3))\r\nts_data = np.random.random_sample(size=(100, 20, 10))\r\nscore_targets = np.random.random_sample(size=(100, 1))\r\nclass_targets = np.random.random_sample(size=(100, 5))\r\n\r\n\r\n# we supply the targets for the loss that we tagged to the class_output head.\r\ntrain_dataset = tf.data.Dataset.from_tensor_slices(\r\n    ({'img_input': img_data, 'ts_input': ts_data},\r\n     {'class_output': class_targets}))\r\ntrain_dataset = train_dataset.shuffle(buffer_size=1024).batch(64)\r\n\r\nmodel.fit(train_dataset, epochs=3)\r\n```\r\n\r\n**Other info / logs**\r\nHere's the traceback below. Notice it indicates that it will ignore x2pool in the warning, which is the behaviour that I want...but then it appears to have a loss for this at the end of the traceback and also connects the wrong output data to it!:\r\n\r\n```2019-11-29 12:21:14.905823: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-29 12:21:14.930454: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3792445000 Hz\r\n2019-11-29 12:21:14.931532: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5c00230 executing computations on platform Host. Devices:\r\n2019-11-29 12:21:14.931573: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\nWARNING:tensorflow:Output x2pool missing from loss dictionary. We assume this was done on purpose. The fit and evaluate APIs will not be expecting any data to be passed to x2pool.\r\nEpoch 1/3\r\n      1/Unknown - 0s 27ms/stepTraceback (most recent call last):\r\n  File \"tftest.py\", line 48, in <module>\r\n    model.fit(train_dataset, epochs=3)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 728, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py\", line 324, in fit\r\n    total_epochs=epochs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py\", line 123, in run_one_epoch\r\n    batch_outs = execution_function(iterator)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py\", line 86, in execution_function\r\n    distributed_function(input_fn))\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 503, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializer_map)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 408, in _initialize\r\n    *args, **kwds))\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/function.py\", line 1848, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/function.py\", line 2150, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/function.py\", line 2041, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 915, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 358, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py\", line 73, in distributed_function\r\n    per_replica_function, args=(model, x, y, sample_weights))\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 760, in experimental_run_v2\r\n    return self._extended.call_for_each_replica(fn, args=args, kwargs=kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 1787, in call_for_each_replica\r\n    return self._call_for_each_replica(fn, args, kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 2132, in _call_for_each_replica\r\n    return fn(*args, **kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/autograph/impl/api.py\", line 292, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py\", line 264, in train_on_batch\r\n    output_loss_metrics=model._output_loss_metrics)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_eager.py\", line 311, in train_on_batch\r\n    output_loss_metrics=output_loss_metrics))\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_eager.py\", line 252, in _process_single_batch\r\n    training=training))\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/engine/training_eager.py\", line 166, in _model_loss\r\n    per_sample_losses = loss_fn.call(targets[i], outs[i])\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/losses.py\", line 221, in call\r\n    return self.fn(y_true, y_pred, **self._fn_kwargs)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/losses.py\", line 971, in categorical_crossentropy\r\n    return K.categorical_crossentropy(y_true, y_pred, from_logits=from_logits)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/keras/backend.py\", line 4468, in categorical_crossentropy\r\n    return -math_ops.reduce_sum(target * math_ops.log(output), axis)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/ops/math_ops.py\", line 899, in binary_op_wrapper\r\n    return func(x, y, name=name)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/ops/math_ops.py\", line 1206, in _mul_dispatch\r\n    return gen_math_ops.mul(x, y, name=name)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/ops/gen_math_ops.py\", line 6701, in mul\r\n    \"Mul\", x=x, y=y, name=name)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/framework/op_def_library.py\", line 793, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 548, in create_op\r\n    compute_device)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/framework/ops.py\", line 3429, in _create_op_internal\r\n    op_def=op_def)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/framework/ops.py\", line 1773, in __init__\r\n    control_input_ops)\r\n  File \"/home/ghwatson/.local/lib/python2.7/site-packages/tensorflow_core/python/framework/ops.py\", line 1613, in _create_c_op\r\n    raise ValueError(str(e))\r\nValueError: Dimensions must be equal, but are 5 and 3 for 'loss/x2pool_loss/mul' (op: 'Mul') with input shapes: [?,5], [?,3].\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34712", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34712/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34712/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34712/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34712", "id": 530443252, "node_id": "MDU6SXNzdWU1MzA0NDMyNTI=", "number": 34712, "title": "Please fix the example section of tf.constant_initialize", "user": {"login": "vinayapathak", "id": 43884365, "node_id": "MDQ6VXNlcjQzODg0MzY1", "avatar_url": "https://avatars0.githubusercontent.com/u/43884365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vinayapathak", "html_url": "https://github.com/vinayapathak", "followers_url": "https://api.github.com/users/vinayapathak/followers", "following_url": "https://api.github.com/users/vinayapathak/following{/other_user}", "gists_url": "https://api.github.com/users/vinayapathak/gists{/gist_id}", "starred_url": "https://api.github.com/users/vinayapathak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vinayapathak/subscriptions", "organizations_url": "https://api.github.com/users/vinayapathak/orgs", "repos_url": "https://api.github.com/users/vinayapathak/repos", "events_url": "https://api.github.com/users/vinayapathak/events{/privacy}", "received_events_url": "https://api.github.com/users/vinayapathak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-29T17:30:36Z", "updated_at": "2019-12-03T04:17:03Z", "closed_at": null, "author_association": "NONE", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\nhttps://www.tensorflow.org/api_docs/python/tf/constant_initializer#used_in_the_tutorials\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/api_docs/python/tf/constant_initializer#used_in_the_tutorials\r\n\r\n## Description of issue (what needs changing):\r\nPlease fix the example section of tf.constant_initialize\r\n### Clear description\r\nExamples section of the page is not properly compiled making it unreadable\r\nFor example, why should someone use this method? How is it useful?\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n\r\n### Parameters defined\r\n\r\nAre all parameters defined and formatted correctly?\r\n\r\n### Returns defined\r\n\r\nAre return values defined?\r\n\r\n### Raises listed and defined\r\n\r\nAre the errors defined? For example,\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/feature_column/categorical_column_with_vocabulary_file#raises\r\n\r\n### Usage example\r\n\r\nIs there a usage example?\r\n\r\nSee the API guide: https://www.tensorflow.org/community/contribute/docs_ref\r\non how to write testable usage examples.\r\n\r\n### Request visuals, if applicable\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs,\r\ndocs API guide: https://www.tensorflow.org/community/contribute/docs_ref and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34709", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34709/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34709/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34709/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34709", "id": 530383623, "node_id": "MDU6SXNzdWU1MzAzODM2MjM=", "number": 34709, "title": "allow_growth not working when using estimator and MirroredStrategy distribution", "user": {"login": "tz301", "id": 35760938, "node_id": "MDQ6VXNlcjM1NzYwOTM4", "avatar_url": "https://avatars1.githubusercontent.com/u/35760938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tz301", "html_url": "https://github.com/tz301", "followers_url": "https://api.github.com/users/tz301/followers", "following_url": "https://api.github.com/users/tz301/following{/other_user}", "gists_url": "https://api.github.com/users/tz301/gists{/gist_id}", "starred_url": "https://api.github.com/users/tz301/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tz301/subscriptions", "organizations_url": "https://api.github.com/users/tz301/orgs", "repos_url": "https://api.github.com/users/tz301/repos", "events_url": "https://api.github.com/users/tz301/events{/privacy}", "received_events_url": "https://api.github.com/users/tz301/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-29T14:51:09Z", "updated_at": "2019-12-02T06:15:37Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0.130/7.6.4\r\n- GPU model and memory: 8 * Tesla P40, 22919MiB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nWhen I use estimator and distribute.MirroredStrategy, it will allocate all GPU memory, even if I just use one GPU.\r\n\r\n```\r\nimport tensorflow as tf\r\nsession_config = tf.ConfigProto()\r\nsession_config.gpu_options.allow_growth = True\r\nsession_config.allow_soft_placement = True\r\nstrategy = tf.contrib.distribute.MirroredStrategy(num_gpus=num_gpus)\r\nconfig = tf.estimator.RunConfig(session_config=session_config, train_distribute=strategy)\r\nestimator = tf.estimator.Estimator(model_fn, model_dir, config, params)\r\nestimator.train()\r\n```\r\n\r\nIf I set `os.environ[\"TF_FORCE_GPU_ALLOW_GROWTH\"] = \"true\"`, GPU memory will be correctly allocated. \r\n\r\nI don't know if it's related to `session_config.allow_soft_placement = True`, but if I don't set this value, it will raise error \"cannot assign a device for operation argmax\".\r\n\r\n**Describe the expected behavior**\r\n\r\nMake \"allow_growth\" working when using estimator and MirroredStrategy distribution.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nimport tensorflow.keras.layers as layers\r\nimport numpy as np\r\n\r\n\r\ndef model_fn(features, labels, mode):\r\n  \"\"\"A simple 2-classify model.\r\n  \r\n  \"\"\"\r\n  model = tf.keras.Sequential([layers.Dense(80, activation=\"relu\"), layers.Dense(2)])\r\n  logits = model(features)\r\n  loss = tf.losses.softmax_cross_entropy(labels, logits)\r\n\r\n  if mode == tf.estimator.ModeKeys.TRAIN:\r\n    optimizer = tf.train.AdamOptimizer(learning_rate=0.001)\r\n    train_op = optimizer.minimize(loss, tf.train.get_global_step())\r\n    return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)\r\n\r\n\r\ndef input_fn():\r\n  \"\"\"dataset that return feature and label.\r\n\r\n  \"\"\"\r\n  features_mat = np.random.randn(10, 10) \r\n  labels_mat = np.random.randint(0, 2, size=(10, 2)) \r\n  dataset = tf.data.Dataset.from_tensor_slices((features_mat, labels_mat))\r\n  return dataset.batch(1)\r\n\r\nos.environ[\"CUDA_VISIBLE_DEVICES\"] = \"0\"  # Set available GPU id. \r\nsession_config = tf.ConfigProto()\r\nsession_config.gpu_options.allow_growth = True\r\n\r\nsession_config.allow_soft_placement = True\r\nstrategy = tf.contrib.distribute.MirroredStrategy(num_gpus=1)\r\nconfig = tf.estimator.RunConfig(session_config=session_config, train_distribute=strategy)\r\n# If disable above 3 lines and using following line, GPU memory allocation will be correct.\r\n#config = tf.estimator.RunConfig(session_config=session_config)\r\n\r\nestimator = tf.estimator.Estimator(model_fn, config=config)\r\n\r\nwhile True:\r\n  estimator.train(input_fn)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34708", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34708/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34708/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34708/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34708", "id": 530365621, "node_id": "MDU6SXNzdWU1MzAzNjU2MjE=", "number": 34708, "title": "Can not convert a TF2 saved model to a TensorRT engine and save it.", "user": {"login": "roborocklsm", "id": 53163084, "node_id": "MDQ6VXNlcjUzMTYzMDg0", "avatar_url": "https://avatars3.githubusercontent.com/u/53163084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roborocklsm", "html_url": "https://github.com/roborocklsm", "followers_url": "https://api.github.com/users/roborocklsm/followers", "following_url": "https://api.github.com/users/roborocklsm/following{/other_user}", "gists_url": "https://api.github.com/users/roborocklsm/gists{/gist_id}", "starred_url": "https://api.github.com/users/roborocklsm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roborocklsm/subscriptions", "organizations_url": "https://api.github.com/users/roborocklsm/orgs", "repos_url": "https://api.github.com/users/roborocklsm/repos", "events_url": "https://api.github.com/users/roborocklsm/events{/privacy}", "received_events_url": "https://api.github.com/users/roborocklsm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-29T14:10:48Z", "updated_at": "2020-02-05T21:31:01Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): nightly\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: 2070Ti 8GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI want to convert a TF2 saved model to a TensorRT engine (already built). I following the instruction [here](https://github.com/tensorflow/tensorflow/blob/99cb9fd68d1b8c6f0857c0775c366234537bacf5/tensorflow/python/compiler/tensorrt/trt_convert.py#L823). However, it only gives me errors. I would give my code and log in following part.\r\n\r\nBTW, I installed TensorRT 6.0.1 in my PC.\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nConvert saved model to a TensorRT engine and save it.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n\r\nmodel = tf.keras.applications.MobileNetV2(input_shape=[128, 128, 3], include_top=False)\r\nmodel.save(\"dir1/\")\r\n\r\ninput_saved_model_dir = \"dir1/\"\r\noutput_saved_model_dir = \"dir2/\"\r\n\r\nparams = DEFAULT_TRT_CONVERSION_PARAMS._replace(precision_mode='FP16', maximum_cached_engines=16, is_dynamic_op=True)\r\nconverter = trt.TrtGraphConverterV2(input_saved_model_dir=input_saved_model_dir, conversion_params=params)\r\nconverter.convert()\r\n# converter.save(output_saved_model_dir)\r\n\r\ndef my_input_fn():\r\n    num_runs = 10\r\n    for _ in range(num_runs):\r\n        inp1,inp2 = np.random.random([4, 128, 128, 3]), np.random.random([4, 128, 128, 1])\r\n        yield inp1,inp2\r\n        \r\nconverter.build(input_fn=my_input_fn)  # Generate corresponding TRT engines\r\nconverter.save(output_saved_model_dir)  # Generated engines will be saved.\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```bash\r\nWARNING:tensorflow:From /home/shl666/anaconda3/envs/tf-nightly/lib/python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1788: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\n\r\n[11/29/2019 21:46:27 WARNING] From /home/shl666/anaconda3/envs/tf-nightly/lib/python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1788: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\n\r\nINFO:tensorflow:Assets written to: inference/sample/saved_model/assets\r\n\r\n[11/29/2019 21:46:28 INFO] Assets written to: inference/sample/saved_model/assets\r\n\r\nINFO:tensorflow:Linked TensorRT version: (6, 0, 1)\r\nINFO:tensorflow:Loaded TensorRT version: (6, 0, 1)\r\n\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-5-9b2262c7c046> in <module>\r\n     14         yield inp1, inp2\r\n     15 \r\n---> 16 converter.build(input_fn=my_input_fn)  # Generate corresponding TRT engines\r\n     17 converter.save(output_saved_model_dir)  # Generated engines will be saved.\r\n\r\n~/anaconda3/envs/tf-nightly/lib/python3.7/site-packages/tensorflow_core/python/compiler/tensorrt/trt_convert.py in build(self, input_fn)\r\n   1049     \"\"\"\r\n   1050     for inp in input_fn():\r\n-> 1051       self._converted_func(*map(ops.convert_to_tensor, inp))\r\n   1052 \r\n   1053   def save(self, output_saved_model_dir):\r\n\r\n~/anaconda3/envs/tf-nightly/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in __call__(self, *args, **kwargs)\r\n   1549       TypeError: For invalid positional/keyword argument combinations.\r\n   1550     \"\"\"\r\n-> 1551     return self._call_impl(args, kwargs)\r\n   1552 \r\n   1553   def _call_impl(self, args, kwargs, cancellation_manager=None):\r\n\r\n~/anaconda3/envs/tf-nightly/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _call_impl(self, args, kwargs, cancellation_manager)\r\n   1568            \"of {}), got {}. When calling a concrete function, positional \"\r\n   1569            \"arguments may not be bound to Tensors within nested structures.\"\r\n-> 1570           ).format(self._num_positional_args, self._arg_keywords, args))\r\n   1571     args = list(args)\r\n   1572     for keyword in self._arg_keywords[len(args):]:\r\n\r\nTypeError: Expected at most 1 positional arguments (and the rest keywords, of ['input_3']), got (<tf.Tensor: shape=(4, 128, 128, 3), dtype=float64, numpy=\r\narray([[[[0.37694877, 0.14433618, 0.15041287],\r\n         [0.28948027, 0.52537459, 0.51882755],\r\n         [0.48836555, 0.45480828, 0.0779434 ],\r\n....\r\n....\r\n....\r\n        [0.02064168, 0.76855384, 0.64690949],\r\n         [0.98667418, 0.9156569 , 0.58136711],\r\n         [0.84539588, 0.7338271 , 0.15894349]],\r\n\r\n        [[0.03578103, 0.24472914, 0.62393987],\r\n         [0.51681037, 0.75395885, 0.83268599],\r\n         [0.81616645, 0.4863684 , 0.25114351],\r\n         ...,\r\n         [0.08293289, 0.90668744, 0.94976784],\r\n         [0.39264721, 0.33914333, 0.58584557],\r\n         [0.57539905, 0.29829974, 0.33732885]]]])>, <tf.Tensor: shape=(4, 128, 128, 1), dtype=float64, numpy=\r\narray([[[[0.55649055],\r\n         [0.97303716],\r\n         [0.90465544],\r\n         ...,\r\n         [0.76755675],\r\n         [0.07142947],\r\n         [0.80021061]],\r\n....\r\n....\r\n....\r\n        [[0.88080569],\r\n         [0.53601004],\r\n         [0.69139559],\r\n         ...,\r\n         [0.89977499],\r\n         [0.73776336],\r\n         [0.65023825]]]])>). When calling a concrete function, positional arguments may not be bound to Tensors within nested structures.\r\n\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34706", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34706/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34706/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34706/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34706", "id": 530330372, "node_id": "MDU6SXNzdWU1MzAzMzAzNzI=", "number": 34706, "title": "Complete support for LSTM/GRU for TFLite", "user": {"login": "justlike-prog", "id": 55004292, "node_id": "MDQ6VXNlcjU1MDA0Mjky", "avatar_url": "https://avatars1.githubusercontent.com/u/55004292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justlike-prog", "html_url": "https://github.com/justlike-prog", "followers_url": "https://api.github.com/users/justlike-prog/followers", "following_url": "https://api.github.com/users/justlike-prog/following{/other_user}", "gists_url": "https://api.github.com/users/justlike-prog/gists{/gist_id}", "starred_url": "https://api.github.com/users/justlike-prog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justlike-prog/subscriptions", "organizations_url": "https://api.github.com/users/justlike-prog/orgs", "repos_url": "https://api.github.com/users/justlike-prog/repos", "events_url": "https://api.github.com/users/justlike-prog/events{/privacy}", "received_events_url": "https://api.github.com/users/justlike-prog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-29T12:49:52Z", "updated_at": "2020-01-23T08:47:05Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nReading the [roadmap](https://www.tensorflow.org/lite/guide/roadmap) of Tensorflow Lite for 2019 there should be full LSTM/GRU support by the end of this year, but I don't seen anything done, also no recent update of the state of the roadmap. At the moment there are two [workarounds](https://www.tensorflow.org/lite/convert/rnn) that work suboptimally. I have never been able to reproduce nearly the results I had with plain TF.\r\n\r\n\r\n**Who will benefit with this feature?**\r\n\r\nI think having LSTM/GRU is crucial since a lot of architectures are using them and mobile/embedded DL development is a big topic right now.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34698", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34698/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34698/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34698/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34698", "id": 530148019, "node_id": "MDU6SXNzdWU1MzAxNDgwMTk=", "number": 34698, "title": "toco_from_protos: not found - breaking", "user": {"login": "igorhoogerwoord", "id": 13174854, "node_id": "MDQ6VXNlcjEzMTc0ODU0", "avatar_url": "https://avatars3.githubusercontent.com/u/13174854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igorhoogerwoord", "html_url": "https://github.com/igorhoogerwoord", "followers_url": "https://api.github.com/users/igorhoogerwoord/followers", "following_url": "https://api.github.com/users/igorhoogerwoord/following{/other_user}", "gists_url": "https://api.github.com/users/igorhoogerwoord/gists{/gist_id}", "starred_url": "https://api.github.com/users/igorhoogerwoord/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igorhoogerwoord/subscriptions", "organizations_url": "https://api.github.com/users/igorhoogerwoord/orgs", "repos_url": "https://api.github.com/users/igorhoogerwoord/repos", "events_url": "https://api.github.com/users/igorhoogerwoord/events{/privacy}", "received_events_url": "https://api.github.com/users/igorhoogerwoord/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-11-29T04:16:06Z", "updated_at": "2020-02-16T02:48:08Z", "closed_at": null, "author_association": "NONE", "body": "Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18 LTS\r\nTensorFlow installed from (source or binary): binary\r\nTensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38 2.0.0\r\nPython version: 3.6\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\n```\r\n    # Read the saved model from disk. Assumes it is downloaded.\r\n    converter = tf.lite.TFLiteConverter.from_saved_model(model_out)\r\n    lite_model = converter.convert()\r\n\r\n    # Format model file paths to store the file in the right directory:\r\n    lite_name = model_name + '.tflite'\r\n    out_path = model_out + '/' + lite_name\r\n\r\n    # Write the converted model to disk:\r\n    open(out_path, \"wb\").write(lite_model)\r\n```\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 119, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"/home/[]/[]/[]/v1/[]/models/main.py\", line 124, in convert_lite\r\n    lite_model = converter.convert()\r\n  File \"/home/[]/env/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 446, in convert\r\n    **converter_kwargs)\r\n  File \"/home/[]/env/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 449, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"/home/[]/env/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 200, in toco_convert_protos\r\n    raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: See console for info.\r\n/bin/sh: 1: toco_from_protos: not found\r\n```\r\n\r\nThis happens, even after adding my python bin from the virtualenv to my $PATH variable.\r\n\r\nIt seems that the path to toco is hardcoded and therefore Tensorflow will never look for it anywhere else?\r\n\r\nIt's now not possible to use the converter in a Python virtualenv ( the recommended way to use Tensorflow )\r\n\r\nNote that when activating the virtualenv from the commandline, the toco and toco_from_protos commands do work. It is only when running the Python program with Tensorflow that Tensorflow is not able to find toco_from_protos.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34697", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34697/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34697/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34697/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34697", "id": 530117852, "node_id": "MDU6SXNzdWU1MzAxMTc4NTI=", "number": 34697, "title": "Keras model pickle-able but tf.keras model not pickle-able", "user": {"login": "Edwin-Koh1", "id": 56326019, "node_id": "MDQ6VXNlcjU2MzI2MDE5", "avatar_url": "https://avatars1.githubusercontent.com/u/56326019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edwin-Koh1", "html_url": "https://github.com/Edwin-Koh1", "followers_url": "https://api.github.com/users/Edwin-Koh1/followers", "following_url": "https://api.github.com/users/Edwin-Koh1/following{/other_user}", "gists_url": "https://api.github.com/users/Edwin-Koh1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edwin-Koh1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edwin-Koh1/subscriptions", "organizations_url": "https://api.github.com/users/Edwin-Koh1/orgs", "repos_url": "https://api.github.com/users/Edwin-Koh1/repos", "events_url": "https://api.github.com/users/Edwin-Koh1/events{/privacy}", "received_events_url": "https://api.github.com/users/Edwin-Koh1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-29T01:37:03Z", "updated_at": "2020-02-21T18:51:18Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Windows 10 \r\n- Tensorflow 2.0 (CPU)\r\n- joblib 0.14.0\r\n- Python 3.7.5\r\n- Keras 2.3.1\r\n\r\nHello everybody! This is my first post so please forgive me if I have missed something. So I'm trying to use a genetic algorithm to train and evaluate multiple NN architectures so I need to parallelize them on a multi-core CPU. Therefore I have used joblib to try to parallelize this. However, I was stuck on my tf.keras code because it wasn't pickleable. After many hours of debugging I finally realised that the tf.keras models are not pickleable whereas keras models are.\r\n\r\n**Describe the current behavior**\r\nThe code below works but if you replaced keras with tf.keras, there will be an error:\r\n**Could not pickle the task to send it to the workers.**\r\n\r\n**Describe the expected behavior**\r\nMoving forward, tf.keras should be replacing keras and therefore tf.keras should also be pickleable.\r\n\r\n**Code to reproduce the issue**\r\n```\r\n#The following is a simple code to illustrate the problem:\r\nfrom joblib import Parallel, delayed\r\nimport keras\r\nimport tensorflow as tf\r\n\r\ndef test():\r\n    model = keras.models.Sequential()\r\n    return\r\n\r\nParallel(n_jobs=8)(delayed(test)(i) for i in range(10)) #this works as intended\r\n\r\ndef test_tf():\r\n    model = tf.keras.models.Sequential()\r\n    return\r\n\r\nParallel(n_jobs=8)(delayed(test_tf)(i) for i in range(10)) #this will spit out the error above\r\n```\r\n\r\n**Other comments**\r\nI guess a quick fix would just be to replace all the existing code with tf.keras to just keras but seeing as keras support will be discontinued and absorbed by Tensorflow 2.0, I think this should be fixed.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34696", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34696/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34696/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34696/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34696", "id": 530108625, "node_id": "MDU6SXNzdWU1MzAxMDg2MjU=", "number": 34696, "title": "Attention of the value_embeddings inputs", "user": {"login": "vsuarezpaniagua", "id": 4960468, "node_id": "MDQ6VXNlcjQ5NjA0Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4960468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsuarezpaniagua", "html_url": "https://github.com/vsuarezpaniagua", "followers_url": "https://api.github.com/users/vsuarezpaniagua/followers", "following_url": "https://api.github.com/users/vsuarezpaniagua/following{/other_user}", "gists_url": "https://api.github.com/users/vsuarezpaniagua/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsuarezpaniagua/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsuarezpaniagua/subscriptions", "organizations_url": "https://api.github.com/users/vsuarezpaniagua/orgs", "repos_url": "https://api.github.com/users/vsuarezpaniagua/repos", "events_url": "https://api.github.com/users/vsuarezpaniagua/events{/privacy}", "received_events_url": "https://api.github.com/users/vsuarezpaniagua/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-29T00:39:15Z", "updated_at": "2019-12-11T00:16:17Z", "closed_at": null, "author_association": "NONE", "body": "This [line](https://github.com/tensorflow/tensorflow/blob/1cf0898dd4331baf93fe77205550f2c2e6c90ee5/tensorflow/python/keras/layers/dense_attention.py#L241) and this [one](https://github.com/tensorflow/tensorflow/blob/1cf0898dd4331baf93fe77205550f2c2e6c90ee5/tensorflow/python/keras/layers/dense_attention.py#L368) should be:\r\n```\r\nvalue_embeddings = token_embedding(value_input)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34693", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34693/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34693/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34693/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34693", "id": 530037509, "node_id": "MDU6SXNzdWU1MzAwMzc1MDk=", "number": 34693, "title": "Size and CombinedNMS Op support request for tflite", "user": {"login": "Brechard", "id": 18405098, "node_id": "MDQ6VXNlcjE4NDA1MDk4", "avatar_url": "https://avatars1.githubusercontent.com/u/18405098?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Brechard", "html_url": "https://github.com/Brechard", "followers_url": "https://api.github.com/users/Brechard/followers", "following_url": "https://api.github.com/users/Brechard/following{/other_user}", "gists_url": "https://api.github.com/users/Brechard/gists{/gist_id}", "starred_url": "https://api.github.com/users/Brechard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Brechard/subscriptions", "organizations_url": "https://api.github.com/users/Brechard/orgs", "repos_url": "https://api.github.com/users/Brechard/repos", "events_url": "https://api.github.com/users/Brechard/events{/privacy}", "received_events_url": "https://api.github.com/users/Brechard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-28T18:13:35Z", "updated_at": "2020-01-13T22:19:57Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (or github SHA if from source): 2.0.0\r\n\r\nLike in the issue https://github.com/tensorflow/tensorflow/issues/33059 i want to be able to convert my model to TFLite and I have tried changing to: tf.image.non_max_suppression_padded and tf.image.non_max_suppression_with_scores but with both I still get errors\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\n2019-11-28 19:01:40.384887: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0\r\n2019-11-28 19:01:40.385067: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-11-28 19:01:40.408717: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-11-28 19:01:40.408744: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: Graph size after: 481 nodes (0), 688 edges (0), time = 4.814ms.\r\n2019-11-28 19:01:40.408760: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: Graph size after: 481 nodes (0), 688 edges (0), time = 5.216ms.\r\n2019-11-28 19:01:40.408769: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: Tiny_YOLOv3_inference_non_max_suppression_map_while_body_3226\r\n2019-11-28 19:01:40.408775: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0.001ms.\r\n2019-11-28 19:01:40.408781: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0ms.\r\n2019-11-28 19:01:40.408788: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: Tiny_YOLOv3_inference_non_max_suppression_map_while_cond_3225\r\n2019-11-28 19:01:40.408794: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0.001ms.\r\n2019-11-28 19:01:40.408802: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0ms.\r\n2019-11-28 19:01:41.252079: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0\r\n2019-11-28 19:01:41.252177: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-11-28 19:01:41.456787: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-11-28 19:01:41.456818: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 359 nodes (-58), 584 edges (-58), time = 111.647ms.\r\n2019-11-28 19:01:41.456824: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 359 nodes (0), 584 edges (0), time = 26.561ms.\r\n2019-11-28 19:01:41.456829: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: Tiny_YOLOv3_inference_non_max_suppression_map_while_body_3226_frozen\r\n2019-11-28 19:01:41.456833: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 52 nodes (0), 55 edges (0), time = 1.265ms.\r\n2019-11-28 19:01:41.456838: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 52 nodes (0), 55 edges (0), time = 1.103ms.\r\n2019-11-28 19:01:41.456842: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: Tiny_YOLOv3_inference_non_max_suppression_map_while_cond_3225_frozen\r\n2019-11-28 19:01:41.456846: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 14 nodes (0), 8 edges (0), time = 0.617ms.\r\n2019-11-28 19:01:41.456850: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 14 nodes (0), 8 edges (0), time = 0.394ms.\r\nTraceback (most recent call last):\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 3326, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-7-c548bab089a8>\", line 1, in <module>\r\n    tflite_model = converter.convert()\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/tensorflow_core/lite/python/lite.py\", line 446, in convert\r\n    **converter_kwargs)\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/tensorflow_core/lite/python/convert.py\", line 449, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/tensorflow_core/lite/python/convert.py\", line 200, in toco_convert_protos\r\n    raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: See console for info.\r\n2019-11-28 19:01:43.495379: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-28 19:01:43.517231: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2712000000 Hz\r\n2019-11-28 19:01:43.518000: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55d1e210d680 executing computations on platform Host. Devices:\r\n2019-11-28 19:01:43.518031: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2019-11-28 19:01:43.520442: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-11-28 19:01:43.520471: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-11-28 19:01:43.520503: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (nl1lxl-107914): /proc/driver/nvidia/version does not exist\r\n2019-11-28 19:01:43.549801: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Size\r\n2019-11-28 19:01:43.549850: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Size\r\n2019-11-28 19:01:43.550020: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Size\r\n2019-11-28 19:01:43.550039: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Size\r\n2019-11-28 19:01:43.550121: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListFromTensor\r\n2019-11-28 19:01:43.550139: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550183: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListFromTensor\r\n2019-11-28 19:01:43.550193: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550205: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListReserve\r\n2019-11-28 19:01:43.550212: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550219: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListReserve\r\n2019-11-28 19:01:43.550225: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550232: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListReserve\r\n2019-11-28 19:01:43.550240: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550253: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: While\r\n2019-11-28 19:01:43.550270: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550275: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550279: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550283: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550287: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-11-28 19:01:43.550299: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListStack\r\n2019-11-28 19:01:43.550308: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListStack\r\n2019-11-28 19:01:43.550317: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListStack\r\n2019-11-28 19:01:43.554013: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 226 operators, 430 arrays (0 quantized)\r\n2019-11-28 19:01:43.557143: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 226 operators, 430 arrays (0 quantized)\r\n2019-11-28 19:01:43.648439: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 111 operators, 212 arrays (0 quantized)\r\n2019-11-28 19:01:43.650428: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 111 operators, 212 arrays (0 quantized)\r\n2019-11-28 19:01:43.652457: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 111 operators, 212 arrays (0 quantized)\r\n2019-11-28 19:01:43.653866: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 111 operators, 212 arrays (0 quantized)\r\n2019-11-28 19:01:43.655915: I tensorflow/lite/toco/allocate_transient_arrays.cc:345] Total transient array allocated size: 22151168 bytes, theoretical optimal value: 22151168 bytes.\r\n2019-11-28 19:01:43.656807: E tensorflow/lite/toco/toco_tooling.cc:466] We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, CONV_2D, DIV, EXP, EXPAND_DIMS, FILL, LEAKY_RELU, LOGISTIC, MAX_POOL_2D, MUL, PACK, RESHAPE, RESIZE_NEAREST_NEIGHBOR, SHAPE, SPLIT_V, STRIDED_SLICE, SUB. Here is a list of operators for which you will need custom implementations: Size, TensorListFromTensor, TensorListReserve, TensorListStack, While.\r\nTraceback (most recent call last):\r\n  File \"/home/brechard/miniconda3/envs/modeling/bin/toco_from_protos\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/brechard/miniconda3/envs/modeling/lib/python3.7/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52, in execute\r\n    enable_mlir_converter)\r\nException: We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, CONV_2D, DIV, EXP, EXPAND_DIMS, FILL, LEAKY_RELU, LOGISTIC, MAX_POOL_2D, MUL, PACK, RESHAPE, RESIZE_NEAREST_NEIGHBOR, SHAPE, SPLIT_V, STRIDED_SLICE, SUB. Here is a list of operators for which you will need custom implementations: Size, TensorListFromTensor, TensorListReserve, TensorListStack, While.\r\n```\r\n\r\nIf it helps, the function that I am trying to modify can be found in: \r\nhttps://github.com/Brechard/computer-vision-tf2/blob/master/src/models/detection/yolov3.py#L240\r\n\r\nmy modification right now looks like this:\r\n\r\n```\r\n    def non_max_suppression(self, outputs):\r\n\r\n        bboxes, confidence, class_prob = [], [], []\r\n        for o in outputs:\r\n            bboxes.append(tf.reshape(o[0], (tf.shape(o[0])[0], -1, tf.shape(o[0])[-1])))\r\n            confidence.append(tf.reshape(o[1], (tf.shape(o[1])[0], -1, tf.shape(o[1])[-1])))\r\n            class_prob.append(tf.reshape(o[2], (tf.shape(o[2])[0], -1, tf.shape(o[2])[-1])))\r\n\r\n        bbox = tf.concat(bboxes, axis=1)\r\n        confidence = tf.concat(confidence, axis=1)\r\n        class_probs = tf.concat(class_prob, axis=1)\r\n\r\n        scores = confidence * class_probs\r\n\r\n        # Process for each image of the batch\r\n        def _nms_single_image(args):\r\n            image_bbox, image_scores = args[0], args[1]\r\n            classes = tf.math.argmax(image_scores, axis=1)\r\n            new_img_scores = tf.math.reduce_max(image_scores, axis=1)\r\n\r\n            selected_items, selected_scores = tf.image.non_max_suppression_with_scores(\r\n                boxes=tf.reshape(image_bbox, (-1, 4)),\r\n                scores=new_img_scores,\r\n                max_output_size=100,\r\n                iou_threshold=self.iou_threshold,\r\n                score_threshold=self.score_threshold\r\n            )\r\n\r\n            return [tf.gather(image_bbox, selected_items), tf.gather(new_img_scores, selected_items),\r\n                    tf.gather(classes, selected_items)]\r\n\r\n        bboxes, scores, classes = tf.map_fn(_nms_single_image, elems=[bbox, scores],\r\n                                            dtype=[tf.float32, tf.float32, tf.int64])\r\n\r\n        return bboxes, scores, classes\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34691", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34691/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34691/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34691/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34691", "id": 529997347, "node_id": "MDU6SXNzdWU1Mjk5OTczNDc=", "number": 34691, "title": "keras Model with a dictionary as output: compile and fit expect layers names instead of the output dictionary's keys", "user": {"login": "durandg12", "id": 45902885, "node_id": "MDQ6VXNlcjQ1OTAyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/45902885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durandg12", "html_url": "https://github.com/durandg12", "followers_url": "https://api.github.com/users/durandg12/followers", "following_url": "https://api.github.com/users/durandg12/following{/other_user}", "gists_url": "https://api.github.com/users/durandg12/gists{/gist_id}", "starred_url": "https://api.github.com/users/durandg12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durandg12/subscriptions", "organizations_url": "https://api.github.com/users/durandg12/orgs", "repos_url": "https://api.github.com/users/durandg12/repos", "events_url": "https://api.github.com/users/durandg12/events{/privacy}", "received_events_url": "https://api.github.com/users/durandg12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-28T16:17:35Z", "updated_at": "2019-12-02T15:16:17Z", "closed_at": null, "author_association": "NONE", "body": "- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.13.6\r\n- TensorFlow installed from (source or binary): pip install tensorflow==2.0.0-beta1\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: v3.6.7:6ec5cf24b7, Oct 20 2018, 03:02:14\r\n\r\n**Describe the current behavior**\r\n\r\nUsing the functional Keras API, I build a model which has multiple outputs that are in a dictionary:\r\n```\r\ndef make_model():\r\n    inp = tf.keras.Input(1)\r\n    y = tf.keras.layers.Dense(1)(inp)\r\n    y_times_2 = tf.math.multiply(2., y)\r\n    model = tf.keras.Model(inputs=inp, outputs={'y':y, 'y_times_2':y_times_2})\r\n    return model\r\n```\r\nWhen compiling the model, I want to pass as the `loss` argument the following dictionary:\r\n`{'y':'mean_squared_error', 'y_times_2':'mean_squared_error'}` \r\nand as the `metrics` argument the following dictionary:\r\n`{'y':'mean_absolute_error', 'y_times_2':'mean_absolute_error'}`\r\nas it is both intuitive and suggested [by the documentation of `compile`](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/Model#compile) (see what is written for the `metrics` argument).\r\nSimilarly, for training the model, I want to pass as the `y` argument of `fit` the following dictionary:\r\n`{'y':y, 'y_times_2':2*y}`.\r\n\r\nIt turns out that none of this works and using any of those dictionaries throws an error, because, strangely, the API does not expect `'y'` and `'y_times2'` as keys, whereas those are the keys of the output of the model, but it expects the name of the layers producing the outputs! For the `y` output, the layer producing it is the `Dense` layer defined in the model. For `y_times2` the layer producing it is an instance of `TensorFlowOpLayer` produced by the call of `tf.math.multiply` in the model definition. So, for example, the correct dictionary to use as the `loss` argument of `compile` is:\r\n`{'dense':'mean_squared_error', 'tf_op_layer_Mul':'mean_squared_error'}`\r\n\r\nNote that given that `TensorFlowOpLayer` layers are named automatically (even if I use the `name` argument of `tf.math.multiply`, because the name of the `TensorFlowOpLayer` layer is not the same as the name of the op), it can be really difficult to know the proper names to pass to `compile` and `fit` in a more complex example.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe expected behaviour should be as described in [the documentation of `compile`](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/Model#compile) and should use the output names.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nprint('Using Tensorflow version {} (git version {})'.format(tf.version.VERSION, tf.version.GIT_VERSION))\r\n\r\nx = np.random.normal(size=(64,))\r\ny = x\r\n\r\ndef make_model():\r\n    inp = tf.keras.Input(1)\r\n    y = tf.keras.layers.Dense(1)(inp)\r\n    y_times_2 = tf.math.multiply(2., y)\r\n    model = tf.keras.Model(inputs=inp, outputs={'y':y, 'y_times_2':y_times_2})\r\n    return model\r\n\r\nmodel = make_model()\r\n\r\nmodel.summary()\r\n\r\ntry:\r\n    print('Trying compilation with the output names')\r\n    model.compile(optimizer=tf.keras.optimizers.Adam(0.1), \r\n                  loss={'y':'mean_squared_error', 'y_times_2':'mean_squared_error'})\r\nexcept Exception as e:\r\n    print('The compilation failed with the following message error:')\r\n    print(e)\r\n    print('Trying compilation with the layers names')\r\n    model.compile(optimizer=tf.keras.optimizers.Adam(0.1),\r\n                  loss={'dense':'mean_squared_error', 'tf_op_layer_Mul':'mean_squared_error'})\r\n    \r\ntry:\r\n    print('\\nTrying training with the output names')\r\n    model.fit(x, {'y':y, 'y_times_2':2*y}, epochs=2)\r\nexcept Exception as e:\r\n    print('The training failed with the following message error:')\r\n    print(e)\r\n    print('Trying training with the layers names')\r\n    model.fit(x, {'dense':y, 'tf_op_layer_Mul':2*y}, epochs=2)\r\n    \r\nprint('\\n###################\\nAdd metrics to the example:')\r\n\r\nmodel = make_model()\r\n\r\nmodel.summary()\r\n\r\ntry:\r\n    print('Trying compilation with the output names')\r\n    model.compile(optimizer=tf.keras.optimizers.Adam(0.1), \r\n                  loss={'dense_1':'mean_squared_error', 'tf_op_layer_Mul_1':'mean_squared_error'},\r\n                  metrics={'y':'mean_absolute_error', 'y_times_2':'mean_absolute_error'})\r\nexcept Exception as e:\r\n    print('The compilation failed with the following message error:')\r\n    print(e)\r\n    print('Trying compilation with the layers names')\r\n    model.compile(optimizer=tf.keras.optimizers.Adam(0.1),\r\n                  loss={'dense_1':'mean_squared_error', 'tf_op_layer_Mul_1':'mean_squared_error'},\r\n                  metrics={'dense_1':'mean_absolute_error', 'tf_op_layer_Mul_1':'mean_absolute_error'})\r\n\r\nmodel.fit(x, {'dense_1':y, 'tf_op_layer_Mul_1':2*y}, epochs=2)\r\n```\r\n\r\nwith the following output:\r\n```\r\nUsing Tensorflow version 2.0.0 (git version v2.0.0-rc2-26-g64c3d382ca)\r\nModel: \"model\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ninput_1 (InputLayer)         [(None, 1)]               0         \r\n_________________________________________________________________\r\ndense (Dense)                (None, 1)                 2         \r\n_________________________________________________________________\r\ntf_op_layer_Mul (TensorFlowO [(None, 1)]               0         \r\n=================================================================\r\nTotal params: 2\r\nTrainable params: 2\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\nTrying compilation with the output names\r\nThe compilation failed with the following message error:\r\nUnknown entries in loss dictionary: ['y', 'y_times_2']. Only expected following keys: ['dense', 'tf_op_layer_Mul']\r\nTrying compilation with the layers names\r\n\r\nTrying training with the output names\r\nThe training failed with the following message error:\r\nNo data provided for \"dense\". Need data for each key in: ['dense', 'tf_op_layer_Mul']\r\nTrying training with the layers names\r\nTrain on 64 samples\r\nEpoch 1/2\r\n64/64 [==============================] - 1s 9ms/sample - loss: 10.1650 - dense_loss: 2.0330 - tf_op_layer_Mul_loss: 8.1320\r\nEpoch 2/2\r\n64/64 [==============================] - 0s 62us/sample - loss: 7.1354 - dense_loss: 1.4271 - tf_op_layer_Mul_loss: 5.7084\r\n\r\n###################\r\nAdd metrics to the example:\r\nModel: \"model_1\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ninput_2 (InputLayer)         [(None, 1)]               0         \r\n_________________________________________________________________\r\ndense_1 (Dense)              (None, 1)                 2         \r\n_________________________________________________________________\r\ntf_op_layer_Mul_1 (TensorFlo [(None, 1)]               0         \r\n=================================================================\r\nTotal params: 2\r\nTrainable params: 2\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\nTrying compilation with the output names\r\nThe compilation failed with the following message error:\r\nUnknown entries in metrics dictionary: ['y', 'y_times_2']. Only expected following keys: ['dense_1', 'tf_op_layer_Mul_1']\r\nTrying compilation with the layers names\r\nTrain on 64 samples\r\nEpoch 1/2\r\n64/64 [==============================] - 0s 5ms/sample - loss: 1.4019 - dense_1_loss: 0.2804 - tf_op_layer_Mul_1_loss: 1.1215 - dense_1_mean_absolute_error: 0.4108 - tf_op_layer_Mul_1_mean_absolute_error: 0.8217\r\nEpoch 2/2\r\n64/64 [==============================] - 0s 71us/sample - loss: 0.4672 - dense_1_loss: 0.0934 - tf_op_layer_Mul_1_loss: 0.3737 - dense_1_mean_absolute_error: 0.2408 - tf_op_layer_Mul_1_mean_absolute_error: 0.4816\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34689", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34689/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34689/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34689/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34689", "id": 529924132, "node_id": "MDU6SXNzdWU1Mjk5MjQxMzI=", "number": 34689, "title": "Keras scikit-learn wrapper not compatible with keras functional model", "user": {"login": "karimmohraz", "id": 37623804, "node_id": "MDQ6VXNlcjM3NjIzODA0", "avatar_url": "https://avatars2.githubusercontent.com/u/37623804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimmohraz", "html_url": "https://github.com/karimmohraz", "followers_url": "https://api.github.com/users/karimmohraz/followers", "following_url": "https://api.github.com/users/karimmohraz/following{/other_user}", "gists_url": "https://api.github.com/users/karimmohraz/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimmohraz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimmohraz/subscriptions", "organizations_url": "https://api.github.com/users/karimmohraz/orgs", "repos_url": "https://api.github.com/users/karimmohraz/repos", "events_url": "https://api.github.com/users/karimmohraz/events{/privacy}", "received_events_url": "https://api.github.com/users/karimmohraz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-28T13:50:02Z", "updated_at": "2019-12-02T05:14:46Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (use command below): TF version: 2.0, 1.15\r\n- Python version: 3.6 , 3.7\r\n\r\n**Describe the current behavior**\r\nwhen using a keras functional api model via the keras scikit-learn wrapper a crash occurs.\r\nsee: \r\nhttps://github.com/tensorflow/tensorflow/blob/13f2db1e7071ae109d2f51c7202867a154f587d2/tensorflow/python/keras/wrappers/scikit_learn.py#L241\r\n**Describe the expected behavior**\r\nmodel.predict() should work on all keras model types besides sequential \r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport tensorflow.keras\r\nfrom tensorflow.keras.wrappers.scikit_learn import KerasClassifier\r\n\r\ndef build_model():\r\n  input = tf.keras.layers.Input(shape=(2,))\r\n  pred = tf.keras.layers.Dense(2, activation='softmax')(input)\r\n  model = tf.keras.models.Model(inputs=input, outputs=pred)\r\n  model.compile(loss='categorical_crossentropy', metrics=['accuracy'])\r\n  return model\r\n\r\nX = np.array([[1,2],[3,1]])\r\nY = np.array([[1,0], [0,1]])\r\nmodel = build_model()\r\nmodel.fit(X, Y)\r\nprint(model.predict(X))  # this works\r\n\r\nmodel_wrapped = KerasClassifier(build_model)\r\nmodel_wrapped.fit(X, Y)\r\nmodel_wrapped.predict(X)  # this crashes\r\n```\r\nOutput: \r\nTrain on 2 samples\r\n2/2 [==============================] - 0s 62ms/sample - loss: 1.1024 - acc: 0.5000\r\n[[0.62487346 0.37512657]\r\n [0.8205698  0.17943017]]\r\nTrain on 2 samples\r\n2/2 [==============================] - 0s 64ms/sample - loss: 0.2733 - acc: 1.0000\r\n```python\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-14-48bacae97b80> in <module>()\r\n     19 model_wrapped = KerasClassifier(build_model)\r\n     20 model_wrapped.fit(X, Y)\r\n---> 21 model_wrapped.predict(X)  # this crashes\r\n     22 \r\n     23 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/wrappers/scikit_learn.py in predict(self, x, **kwargs)\r\n    239     \"\"\"\r\n    240     kwargs = self.filter_sk_params(Sequential.predict_classes, kwargs)\r\n--> 241     classes = self.model.predict_classes(x, **kwargs)\r\n    242     return self.classes_[classes]\r\n    243 \r\n\r\nAttributeError: 'Model' object has no attribute 'predict_classes'\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34686", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34686/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34686/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34686/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34686", "id": 529870869, "node_id": "MDU6SXNzdWU1Mjk4NzA4Njk=", "number": 34686, "title": "tf.cast with division impose different influence on python2 v.s. python3", "user": {"login": "corwinliu", "id": 9526892, "node_id": "MDQ6VXNlcjk1MjY4OTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/9526892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corwinliu", "html_url": "https://github.com/corwinliu", "followers_url": "https://api.github.com/users/corwinliu/followers", "following_url": "https://api.github.com/users/corwinliu/following{/other_user}", "gists_url": "https://api.github.com/users/corwinliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/corwinliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corwinliu/subscriptions", "organizations_url": "https://api.github.com/users/corwinliu/orgs", "repos_url": "https://api.github.com/users/corwinliu/repos", "events_url": "https://api.github.com/users/corwinliu/events{/privacy}", "received_events_url": "https://api.github.com/users/corwinliu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmothukuru", "id": 48206667, "node_id": "MDQ6VXNlcjQ4MjA2NjY3", "avatar_url": "https://avatars3.githubusercontent.com/u/48206667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmothukuru", "html_url": "https://github.com/rmothukuru", "followers_url": "https://api.github.com/users/rmothukuru/followers", "following_url": "https://api.github.com/users/rmothukuru/following{/other_user}", "gists_url": "https://api.github.com/users/rmothukuru/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmothukuru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmothukuru/subscriptions", "organizations_url": "https://api.github.com/users/rmothukuru/orgs", "repos_url": "https://api.github.com/users/rmothukuru/repos", "events_url": "https://api.github.com/users/rmothukuru/events{/privacy}", "received_events_url": "https://api.github.com/users/rmothukuru/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmothukuru", "id": 48206667, "node_id": "MDQ6VXNlcjQ4MjA2NjY3", "avatar_url": "https://avatars3.githubusercontent.com/u/48206667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmothukuru", "html_url": "https://github.com/rmothukuru", "followers_url": "https://api.github.com/users/rmothukuru/followers", "following_url": "https://api.github.com/users/rmothukuru/following{/other_user}", "gists_url": "https://api.github.com/users/rmothukuru/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmothukuru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmothukuru/subscriptions", "organizations_url": "https://api.github.com/users/rmothukuru/orgs", "repos_url": "https://api.github.com/users/rmothukuru/repos", "events_url": "https://api.github.com/users/rmothukuru/events{/privacy}", "received_events_url": "https://api.github.com/users/rmothukuru/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-28T12:00:45Z", "updated_at": "2019-11-29T09:09:17Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave 10.14.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6.5, 2.7.10\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\nv1.12.0-rc2-3-ga6d8ffae09 1.12.0\r\n\r\n**Describe the current behavior**\r\nWhen I run a tf.cast() including a division('/'), the change of random seed is different on python2 and python3\r\nFor example, if I run the following code\r\n```\r\nimport tensorflow as tf\r\ntf.set_random_seed(1)\r\n\r\nwith tf.Session() as sess:\r\n    print('tf random_normal:{}'.format(sess.run(tf.random_normal([1, 2]))))\r\na = tf.cast(tf.constant(1)/tf.constant(2), tf.float32)\r\nwith tf.Session() as sess:\r\n    print('tf random_normal:{}'.format(sess.run(tf.random_normal([1, 2]))))\r\n```\r\nI get following result on python2.7.10\r\n```\r\ntf random_normal:[[-0.67086124  0.22357143]]\r\ntf random_normal:[[-0.3143593  0.6476281]]\r\n```\r\nBut I get following result on python3.6.5\r\n```\r\ntf random_normal:[[-0.67086124  0.22357143]]\r\ntf random_normal:[[-0.21253194  0.47261432]]\r\n```\r\nAt first, py2 and py3 create the same random_normal. But after run the tf.cast, they get different result.\r\n\r\n**Describe the expected behavior**\r\nThe tf.random_normal() of py2 and py3 with same seed should get the same result.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nimport tensorflow as tf\r\ntf.set_random_seed(1)\r\n\r\nwith tf.Session() as sess:\r\n    print('tf random_normal:{}'.format(sess.run(tf.random_normal([1, 2]))))\r\na = tf.cast(tf.constant(1)/tf.constant(2), tf.float32)\r\nwith tf.Session() as sess:\r\n    print('tf random_normal:{}'.format(sess.run(tf.random_normal([1, 2]))))\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34684", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34684/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34684/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34684/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34684", "id": 529834880, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ2NjM2MzI1", "number": 34684, "title": "[TFMicro][RFC] Create a utility that takes model and generates model-data and ops-re\u2026", "user": {"login": "kedars", "id": 497442, "node_id": "MDQ6VXNlcjQ5NzQ0Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/497442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kedars", "html_url": "https://github.com/kedars", "followers_url": "https://api.github.com/users/kedars/followers", "following_url": "https://api.github.com/users/kedars/following{/other_user}", "gists_url": "https://api.github.com/users/kedars/gists{/gist_id}", "starred_url": "https://api.github.com/users/kedars/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kedars/subscriptions", "organizations_url": "https://api.github.com/users/kedars/orgs", "repos_url": "https://api.github.com/users/kedars/repos", "events_url": "https://api.github.com/users/kedars/events{/privacy}", "received_events_url": "https://api.github.com/users/kedars/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1173072136, "node_id": "MDU6TGFiZWwxMTczMDcyMTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XL", "name": "size:XL", "color": "adafea", "default": false, "description": "CL Change Size:Extra Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-11-28T10:46:05Z", "updated_at": "2020-03-11T08:51:34Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34684", "html_url": "https://github.com/tensorflow/tensorflow/pull/34684", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34684.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34684.patch"}, "body": "Saves the developer from knowing the model architecture or the operations used in the model. \r\n\r\n- Currently the model data to CC conversion happens through the xxd\r\n  utility. But the other piece that is dependent on the model is the\r\n  ops-resolver. Having to understand a model to generate the\r\n  ops-resolver is additional overhead\r\n- This utility does both of the above processing in a single go\r\n\r\nWould something like this be of interest?\r\n\r\nI also have some thoughts about including additional annotations in the model, being converted, so it can be used for placing specific components in the model in faster/slower memory. But that's in the future.\r\n\r\nTODOs:\r\n- This is done as an example for Request For Comments for micro-speech, can be extended to other applications\r\n- Relies on `flatc` utility (as other utilities within the repo rely on this). Open to suggestions for using any native Python library for parsing the model"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34683", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34683/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34683/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34683/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34683", "id": 529831405, "node_id": "MDU6SXNzdWU1Mjk4MzE0MDU=", "number": 34683, "title": "TensorArray objects improperly handled as tf.function arguments or return values", "user": {"login": "diNatale", "id": 569000, "node_id": "MDQ6VXNlcjU2OTAwMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/569000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diNatale", "html_url": "https://github.com/diNatale", "followers_url": "https://api.github.com/users/diNatale/followers", "following_url": "https://api.github.com/users/diNatale/following{/other_user}", "gists_url": "https://api.github.com/users/diNatale/gists{/gist_id}", "starred_url": "https://api.github.com/users/diNatale/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diNatale/subscriptions", "organizations_url": "https://api.github.com/users/diNatale/orgs", "repos_url": "https://api.github.com/users/diNatale/repos", "events_url": "https://api.github.com/users/diNatale/events{/privacy}", "received_events_url": "https://api.github.com/users/diNatale/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-28T10:39:57Z", "updated_at": "2020-01-10T06:33:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux, Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): tensorflow-gpu from binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.7\r\n- CUDA/cuDNN version: CUDA 10.0, cuDNN 7.6.0.64\r\n- GPU model and memory: GeForce GTX  1080\r\n\r\n**Describe the current behavior**\r\nWhen you return a created TensorArray from a function decorated with tf.function, the returned object is an empty Tensor with an illegal state:\r\n  object type is **tf.Tensor(<unprintable>, shape=(), dtype=variant)**\r\n\r\nThis object cannot be used and will throw an exception when attempting to use it.\r\nSee also attached image for more details.\r\n\r\nExample of the exception, when calling concat method:\r\nAttributeError: 'tensorflow.python.framework.ops.EagerTensor' object has no attribute 'concat'\r\n\r\n\r\n**Describe the expected behavior**\r\nThe returned object should be a legal TensorArray instance, as is the case when you use only Eager mode functions.\r\nIn this case the object type is **<tensorflow.python.ops.tensor_array_ops.TensorArray object at 0x7f73b0386208>**\r\n\r\nThe code works fine if all functions are in Eager mode (see code example).\r\nThe code works fine if you concat the TensorArray before returning it (see code example).\r\n\r\n**Code to reproduce the issue**\r\n```\r\n@tf.function\r\ndef accumulate_no_error_graph(d):\r\n    arr = tf.TensorArray(tf.float32, num_rows)\r\n\r\n    for i in range(num_rows):\r\n        arr = arr.write(i, d[i])\r\n\r\n    return arr.concat()\r\n\r\ndef accumulate_no_error_eager(d):\r\n    arr = tf.TensorArray(tf.float32, num_rows)\r\n\r\n    for i in range(num_rows):\r\n        arr = arr.write(i, d[i])\r\n\r\n    return arr\r\n\r\n@tf.function\r\ndef accumulate_error_graph(d):\r\n    arr = tf.TensorArray(tf.float32, num_rows)\r\n\r\n    for i in range(num_rows):\r\n        arr = arr.write(i, d[i])\r\n\r\n    return arr\r\n\r\nnum_rows = 10\r\na = tf.random.uniform([num_rows, 2])\r\n\r\n# Works well\r\ndata = accumulate_no_error_eager(a)\r\nprint(f'From eager: {data}')\r\n\r\ndata = accumulate_no_error_graph(a)\r\nprint(f'From Graph with concat: {data}')\r\n\r\n# Doesn't work!\r\ndata = accumulate_error_graph(a)\r\nprint(f'From Graph no concat: {data}')\r\n```\r\n\r\n**Other info / logs**\r\nOutput of the code:\r\n```\r\nFrom eager: <tensorflow.python.ops.tensor_array_ops.TensorArray object at 0x7ff67c5ac470>\r\nFrom Graph with concat: [0.6765479  0.28778458 0.85561883 0.41792393 0.667024   0.35702074\r\n 0.33666503 0.6575141  0.05998921 0.06930244 0.05852807 0.65689635\r\n 0.4156996  0.39695132 0.78036475 0.79794145 0.96339357 0.49462914\r\n 0.885311   0.04960382]\r\n\r\nTraceback (most recent call last):\r\nValueError: Tensorflow type 21 not convertible to numpy dtype.\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/569000/69805111-a7970a80-11e8-11ea-8233-54b2385728c0.png)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34680", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34680/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34680/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34680/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34680", "id": 529816627, "node_id": "MDU6SXNzdWU1Mjk4MTY2Mjc=", "number": 34680, "title": "Generator function didn't preserve needed nodes, copying old replacements back in instead.", "user": {"login": "emelife", "id": 16054460, "node_id": "MDQ6VXNlcjE2MDU0NDYw", "avatar_url": "https://avatars3.githubusercontent.com/u/16054460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emelife", "html_url": "https://github.com/emelife", "followers_url": "https://api.github.com/users/emelife/followers", "following_url": "https://api.github.com/users/emelife/following{/other_user}", "gists_url": "https://api.github.com/users/emelife/gists{/gist_id}", "starred_url": "https://api.github.com/users/emelife/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emelife/subscriptions", "organizations_url": "https://api.github.com/users/emelife/orgs", "repos_url": "https://api.github.com/users/emelife/repos", "events_url": "https://api.github.com/users/emelife/events{/privacy}", "received_events_url": "https://api.github.com/users/emelife/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-28T10:13:31Z", "updated_at": "2019-12-05T00:16:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\nubuntu 16.04 / \r\npython 3.6 /\r\ntf 1.14.0 /\r\nonnx 1.6.0 \r\n\r\n**Describe the current behavior**\r\nI want to convert siamfc network pb model to onnx model.\r\nI build tensorflow siamfc project  from [https://github.com/bilylee/SiamFC-TensorFlow.git](url).\r\nafter a lot of step ,I got .ckpt.* file successfully, then I freeze to pb file.\r\nthis is a part of network below:\r\n![image](https://user-images.githubusercontent.com/16054460/69796416-f9e82380-1208-11ea-8859-d74889fb0917.png)\r\nthen,I need to convert to onnx model.\r\nby this cmd:\r\npython -m tf2onnx.convert --input=./siamfc-edit.pb --inputs=inference/examplar_input:0,inference/instance_input:0 --outputs=inference/detection/add:0 --opset=11 --continue_on_error --fold_const --output=siamfc-edit.onnx --verbose\r\nI think this cmd is correct, because I can convert a lot of other network successfully.\r\nbut when it convert , a lot of warning come up ,and never stop.\r\nso that I can't convert to onnx .the warning is below \r\n\r\n......\r\n2019-11-28 17:19:56.308150: W tensorflow/tools/graph_transforms/transform_utils.cc:448] Generator function didn't preserve needed nodes, copying old replacements back in instead.\r\n2019-11-28 17:19:56.309946: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv2/b2/BatchNorm/beta/read/_10__cf__10 to be preserved.\r\n2019-11-28 17:19:56.309960: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv2/b2/BatchNorm/gamma/read/_11__cf__11 to be preserved.\r\n2019-11-28 17:19:56.309975: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv2/b2/BatchNorm/moving_mean/read/_12__cf__12 to be preserved.\r\n2019-11-28 17:19:56.309983: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv2/b2/BatchNorm/moving_variance/read/_13__cf__13 to be preserved.\r\n2019-11-28 17:19:56.310000: W tensorflow/tools/graph_transforms/transform_utils.cc:448] Generator function didn't preserve needed nodes, copying old replacements back in instead.\r\n2019-11-28 17:19:56.319616: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv3/BatchNorm/beta/read/_15__cf__15 to be preserved.\r\n2019-11-28 17:19:56.319670: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv3/BatchNorm/gamma/read/_16__cf__16 to be preserved.\r\n2019-11-28 17:19:56.319678: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv3/BatchNorm/moving_mean/read/_17__cf__17 to be preserved.\r\n2019-11-28 17:19:56.319686: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv3/BatchNorm/moving_variance/read/_18__cf__18 to be preserved.\r\n2019-11-28 17:19:56.319718: W tensorflow/tools/graph_transforms/transform_utils.cc:448] Generator function didn't preserve needed nodes, copying old replacements back in instead.\r\n2019-11-28 17:19:56.323429: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv4/b2/BatchNorm/beta/read/_25__cf__25 to be preserved.\r\n2019-11-28 17:19:56.323456: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv4/b2/BatchNorm/gamma/read/_26__cf__26 to be preserved.\r\n2019-11-28 17:19:56.323464: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv4/b2/BatchNorm/moving_mean/read/_27__cf__27 to be preserved.\r\n2019-11-28 17:19:56.323471: W tensorflow/tools/graph_transforms/transform_utils.cc:441] Expected convolutional_alexnet/conv4/b2/BatchNorm/moving_variance/read/_28__cf__28 to be preserved.\r\n2019-11-28 17:19:56.323479: W tensorflow/tools/graph_transforms/transform_utils.cc:448] Generator function didn't preserve needed nodes, copying old replacements back in instead.\r\n......\r\n\r\nso what's wrong with it or me?\r\n\r\nI expect to know what's this warning mean,I found there are a lot of identity op as input op share for other op. \r\n![image](https://user-images.githubusercontent.com/16054460/69797447-ad9de300-120a-11ea-9dd0-cd01138d4fd2.png)\r\ndoes it because of this?\r\n\r\nI look forward to your reply . thanks a lot."}]